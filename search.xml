<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>åŠ æ²¹,China</title>
      <link href="/2020/09/03/%E5%8A%A0%E6%B2%B9-China/"/>
      <url>/2020/09/03/%E5%8A%A0%E6%B2%B9-China/</url>
      
        <content type="html"><![CDATA[<p><img src="/img/2020/09/01/flag.jpg" alt="China"></p><p>åŠ æ²¹ï¼Œä¸­å›½ï¼Œä¸€èµ·å…±åº¦éš¾å…³ï¼ğŸ‡¨ğŸ‡³ğŸ‡¨ğŸ‡³ğŸ‡¨ğŸ‡³</p>]]></content>
      
      
      
        <tags>
            
            <tag> å¿ƒæƒ… </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>è½¬æ¢hooksçš„å¼€å‘å»ºè®®</title>
      <link href="/2020/08/28/%E8%BD%AC%E6%8D%A2hooks%E7%9A%84%E5%BC%80%E5%8F%91%E5%BB%BA%E8%AE%AE/"/>
      <url>/2020/08/28/%E8%BD%AC%E6%8D%A2hooks%E7%9A%84%E5%BC%80%E5%8F%91%E5%BB%BA%E8%AE%AE/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åŒå­¦ï¼Œè¿˜ä¸è¯•ä¸€æŠŠReact-hookså—ï¼Ÿ</p></blockquote><p>ä½¿ç”¨hookså¼€å‘æœ‰ä¸€é˜µæ—¶é—´äº†ï¼Œå‡ ä¹æ˜¯ä»æ¨å‡ºåå°±å°è¯•ä½¿ç”¨ï¼Œä¸€è·¯èµ°æ¥ï¼Œä¸€é¡¿æ¯’æ‰“ï¼Œè¸©äº†ä¸å°‘å‘ï¼Œä¹Ÿé€æ¸ä½“ä¼šåˆ°äº†hooksæ¨¡å¼ä¸‹ï¼Œå¼€å‘æ–¹å¼çš„å˜åŒ–ï¼Œä¸å¾—ä¸è¯´è¿˜æ˜¯è¦å¹ä¸€æ³¢çš„ã€‚</p><p>æ¥è§¦åˆ°çš„æœ€å¼€å§‹å°±æ˜¯<a href="https://material-ui.com/zh/" target="_blank" rel="noopener">MaterialUI</a>äº†ï¼Œå½“æ—¶hooksæ¨¡å¼æ­£å¼å‘å¸ƒåï¼ŒMaterialUIä¹Ÿæ¨äº†ä¸€ç‰ˆï¼Œå¹¶ä¸”å®˜æ–¹æ–‡æ¡£å°±å·²ç»ä½¿ç”¨åˆ°äº†hooksï¼Œå½“æ—¶ä»¥ä¸ºhookså°±æ˜¯å­˜ä¸ªstateï¼Œåæ¥å‘ç°å®Œå…¨æ˜¯å¦ä¸€ç§å¼€å‘ç»„ä»¶çš„æ€æƒ³ã€‚</p><p>æœ¬ç¯‡åªæ˜¯å¸Œæœ›ç»™åŒå­¦ä»¬æä¾›ä¸€äº›ä¸ä¸€æ ·çš„å¼€å‘æ€è·¯ï¼Œæ›´å¤šæ˜¯å’Œå¤§å®¶è®¨è®ºä¸€ä¸‹hooksæ¨¡å¼ï¼Œæ¶‰åŠåˆ°å…·ä½“çš„apiä½¿ç”¨ï¼ŒåŠæ›´æ·±å…¥å¯å»<a href="https://reactjs.org/docs/hooks-intro.html" target="_blank" rel="noopener">React-Hooks</a>å­¦ä¹ ã€‚</p><h2 id="Hooksæ¨¡å¼ä»‹ç»"><a href="#Hooksæ¨¡å¼ä»‹ç»" class="headerlink" title="Hooksæ¨¡å¼ä»‹ç»"></a>Hooksæ¨¡å¼ä»‹ç»</h2><p>2019å¹´ç¬¬ä¸€å­£åº¦,React16.7æ­£å¼å‘å¸ƒï¼ŒHooksæ¨¡å¼ä¹Ÿå¯ä»¥ç”¨äºç”Ÿäº§ç¯å¢ƒä¸­ï¼Œ</p><p>é¦–å…ˆå¿…é¡»è¦æ˜ç¡®çš„ä¸€ç‚¹ï¼Œhooksæ˜¯åœ¨functionç»„ä»¶ä¸­ä½¿ç”¨çš„ï¼Œæ‰€ä»¥å‡½æ•°å¼ç»„ä»¶çš„ä½¿ç”¨æ˜¯ç›´æ¥è°ƒç”¨çš„ï¼Œæ¯”å¦‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// React 16.13.0 ReactFiberHooks.new.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Componentå³jsxè½¬æ¢åä¼ é€’çš„ Functionç»„ä»¶çš„å¼•ç”¨</span></span><br><span class="line"><span class="keyword">let</span> children = Component(props, secondArg);</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯åŸºäºReactFiberæ¶æ„ï¼Œå³æœ‰äº†ä¸ºFunctionç»„ä»¶æ‹“å±•çš„å¯èƒ½ï¼Œåœ¨fiberä¸ŠæŒ‚è½½ä¸€ä¸ªhooksçš„é“¾</p><p>ä¸ªäººè®¤ä¸ºï¼Œå‘å¸ƒçš„hooksä¸»è¦åˆ†ä¸ºä¸‰å¤§å—æ–¹å‘</p><ul><li>å­˜å‚¨æ•°æ®å‹ ï¼ˆuseState, useReducer â€¦ï¼‰</li></ul><p>ä¸»è¦è´Ÿè´£å°†æ•°æ®å’Œâ€™ç”Ÿå‘½å‘¨æœŸâ€™è¿æ¥èµ·æ¥ï¼Œæœ‰äº†åŒclassç»„ä»¶ç±»ä¼¼çš„this.stateåŠŸèƒ½ï¼Œèƒ½å¤Ÿæ»¡è¶³å‡½æ•°å¼ç»„ä»¶è‡ªå·±å®šä¹‰çŠ¶æ€çš„èƒ½åŠ›ã€‚</p><ul><li>è¾…åŠ©è®°å¿†å‹ ï¼ˆuseMemo, useCallback â€¦ï¼‰</li></ul><p>ç”±äºå‡½æ•°å¼ç»„ä»¶æ¯æ¬¡éƒ½æ˜¯é‡æ–°æ‰§è¡Œä¸€é,æ‰€ä»¥è‡ªå·±å­˜å‚¨çš„ä¸€äº›æ•°æ®ä¼šä¸¢å¤±ï¼Œéœ€è¦é‡æ–°æ¥ä¸€æ¬¡ï¼Œæ¯”å¦‚ä½¿ç”¨åˆ°äº†ä¸€ä¸ªè®¡ç®—è¾ƒä¸ºæ˜‚è´µçš„å€¼ï¼Œå°±å¯ä»¥ä½¿ç”¨è¯¥å‡½æ•°ç¼“å­˜èµ·æ¥ã€‚</p><ul><li>å·¥å…·å‹ ï¼ˆuseEffect, useRef, useContext â€¦ï¼‰</li></ul><p>ä½¿å¾—å‡½æ•°å¼ç»„ä»¶æœ‰äº†èƒ½å¤Ÿå’ŒReactå†…éƒ¨æœ‰äº†å…³è”ï¼Œæ¯”å¦‚èƒ½å¤Ÿå¯¹æ•°æ®ç”Ÿå‘½å‘¨æœŸæ§åˆ¶ï¼Œæˆ–è€…èƒ½å¤Ÿè·å–åˆ°ä¸Šä¸‹æ–‡Context,æˆ–æ˜¯å­˜å‚¨refå¯¹è±¡</p><h2 id="Hooksè§£å†³äº†ä»€ä¹ˆ"><a href="#Hooksè§£å†³äº†ä»€ä¹ˆ" class="headerlink" title="Hooksè§£å†³äº†ä»€ä¹ˆ"></a>Hooksè§£å†³äº†ä»€ä¹ˆ</h2><p>hookså¼€å‘æ—¶æœ‰ä¸¤ç‚¹æ„Ÿè§‰è¿˜æ˜¯å¾ˆä¸é”™çš„ï¼Œèƒ½å’Œä¹‹å‰classç»„ä»¶æœ‰ä¸åŒçš„å¼€å‘æ–¹å¼</p><h3 id="ä»¥æ•°æ®ä¸ºç”Ÿå‘½å‘¨æœŸ"><a href="#ä»¥æ•°æ®ä¸ºç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ä»¥æ•°æ®ä¸ºç”Ÿå‘½å‘¨æœŸ"></a>ä»¥æ•°æ®ä¸ºç”Ÿå‘½å‘¨æœŸ</h3><p>ä¹‹å‰ä½¿ç”¨classç»„ä»¶æ—¶ï¼Œæˆ‘ä»¬éƒ½æ˜¯ä»¥æ•´ä¸ªç»„ä»¶çš„å‘¨æœŸå»ç»Ÿæ½æˆ‘ä»¬çš„å„ä¸ªæ•°æ®ï¼Œåº”è¯¥åœ¨è¿™ä¸ªç»„ä»¶ä»€ä¹ˆç”Ÿå‘½å‘¨æœŸå»æ“ä½œä»–ï¼Œä½¿ç”¨å®ƒï¼ŒåŒæ ·çš„,æˆ‘ä»¬çš„æ ¸å¿ƒæ˜¯ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼Œæ‰€æœ‰æ•°æ®è¦åº”ç”¨åˆ°ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼Œè¿™å°±æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å…¶å®æ›´åŠ å…³å¿ƒçš„æ˜¯è¿™ä¸ªæ•°æ®çš„ç”Ÿå‘½å‘¨æœŸã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬å±•ç¤ºä¸€ä¸ªå¥½å‹åˆ—è¡¨ï¼Œå¦‚æœå½“å‰æ²¡æ•°æ®ï¼Œæˆ‘ä»¬å»ä»æœåŠ¡ç«¯æ‹‰èµ·æ•°æ®ï¼ŒåŒæ ·çš„ï¼Œå¦‚æœè¿™ä¸ªæ•°æ®å‘ç”Ÿäº†æ”¹å˜ï¼Œéœ€è¦æ›´æ–°å¥½å‹åˆ—è¡¨æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä»æœåŠ¡ç«¯æ‹‰å–æ•°æ®ã€‚é‚£ä¹ˆå®é™…ä¸Šï¼Œæˆ‘ä»¬å°±æ˜¯åœ¨çœ‹è¿™ä¸ªå¥½å‹åˆ—è¡¨ï¼Œè€Œä¸”æœ€ç»ˆååº”åˆ°ç•Œé¢ï¼Œæ›´ä¸çŸ¥é“ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸçŠ¶æ€å‘ç”Ÿäº†æ”¹å˜ã€‚</p><p>hooksæ¨¡å¼ä¸‹ï¼Œåˆ™å®Œå…¨å˜æˆäº†æˆ‘ä»¬å¯¹ä¸€ä¸ªæ•°æ®çš„ç”Ÿå‘½å‘¨æœŸçš„æ“ä½œï¼Œä¸ç®¡å½“å‰è¿™ä¸ªç»„ä»¶æ˜¯ä»€ä¹ˆçŠ¶æ€ï¼Œåªå…³å¿ƒæœ€ç»ˆå‘ˆç°åˆ°é¡µé¢ä¸Šï¼Œè¿™ä¹Ÿæ›´ç¬¦åˆæˆ‘ä»¬çš„æ€è€ƒé€»è¾‘ï¼ŒåŒæ—¶ä¹Ÿå¯¹å¼€å‘è€…æ›´åŠ å‹å¥½ï¼Œ<em>å‡å°‘bugçš„æœ€å¥½æ–¹å¼å°±æ˜¯å°‘å†™ä»£ç </em>ã€‚</p><h4 id="ä»¥æœç´¢æ¡†ä¸¾ä¾‹"><a href="#ä»¥æœç´¢æ¡†ä¸¾ä¾‹" class="headerlink" title="ä»¥æœç´¢æ¡†ä¸¾ä¾‹"></a>ä»¥æœç´¢æ¡†ä¸¾ä¾‹</h4><p>æˆ‘ä»¬éœ€è¦é€šè¿‡ä¸€ä¸ªæœç´¢æ¡†ä¸­å†…å®¹çš„æ”¹å˜åšä¸€äº›æ ¡éªŒ</p><ul><li>Classç»„ä»¶ä¸­</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.state = &#123;</span><br><span class="line">  search: <span class="string">'defaultValue'</span>,</span><br><span class="line">  resultList: [],</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸ºäº†æ”¾å¤§é—®é¢˜ï¼Œä½¿ç”¨é—´æ¥çš„æ–¹å¼ä¿®æ”¹resultlist</span></span><br><span class="line">componentDidUpdate(prevState) &#123;</span><br><span class="line">  <span class="keyword">if</span> (prevState.search !== <span class="keyword">this</span>.state.search) &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">      resultList: fetchData(<span class="keyword">this</span>.search)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»„ä»¶æŒ‚è½½å¥½ï¼Œå»ä¿®æ”¹é»˜è®¤æœç´¢å†…å®¹</span></span><br><span class="line">componentDidMount()&#123;</span><br><span class="line">  <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">    resultList: fetchData(<span class="keyword">this</span>.search)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Functionç»„ä»¶ä¸­</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¾å®šsearchæœç´¢æ¡†ä¸­çš„å†…å®¹çŠ¶æ€</span></span><br><span class="line"><span class="keyword">const</span> [search, setSearch] = React.useState(<span class="string">'defaultValue'</span>)</span><br><span class="line"><span class="comment">// å½“searchå†…å®¹å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ›´æ–°ç»“æœåˆ—è¡¨</span></span><br><span class="line"><span class="keyword">const</span> [resultList, setResultList] = React.useState([])</span><br><span class="line">React.useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  setResultList(fetchResult(search))</span><br><span class="line">&#125;, [search])</span><br></pre></td></tr></table></figure><h3 id="é€»è¾‘æ›´ä¸ºé›†ä¸­"><a href="#é€»è¾‘æ›´ä¸ºé›†ä¸­" class="headerlink" title="é€»è¾‘æ›´ä¸ºé›†ä¸­"></a>é€»è¾‘æ›´ä¸ºé›†ä¸­</h3><p>å½“æ—¶ç”¨äº†classç»„ä»¶æ—¶ï¼Œå¤§éƒ¨åˆ†é€»è¾‘æ˜¯å¤„äºåˆ†æ•£åœ¨å„ä¸ªç”Ÿå‘½å‘¨æœŸå†…çš„ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„ç±»ï¼Œæ‰€ä»¥å¿…é¡»æ˜¯ä¸€ä¸ªä¸ªæ–¹æ³•ï¼Œå¦‚æœåˆè¦é…åˆç”Ÿå‘½å‘¨æœŸä½¿ç”¨ï¼Œé‚£ä¹ˆ<code>state</code>+<code>logic</code>+<code>lifecycle</code>ä¼šåˆ†æ•£å‡ºæ¥ï¼Œç„¶è€Œå¤§éƒ¨åˆ†ç»„ä»¶å†…çŠ¶æ€çš„ç®¡ç†éƒ½ä¼šä½¿ç”¨åˆ°è¿™ä¸‰ä¸ªæ–¹å¼ï¼Œèƒ½å°†æŸä¸€éƒ¨åˆ†é›†ä¸­èµ·æ¥ï¼Œä»£ç é‡å†å¤šçš„æƒ…å†µä¸‹ï¼Œä¹Ÿä¼šæ›´å¥½çš„æ‹†åˆ†å‡ºæ¥ã€‚</p><h2 id="hookså¼€å‘ç›¸å…³å»ºè®®"><a href="#hookså¼€å‘ç›¸å…³å»ºè®®" class="headerlink" title="hookså¼€å‘ç›¸å…³å»ºè®®"></a>hookså¼€å‘ç›¸å…³å»ºè®®</h2><blockquote><p>hooksä¸æ­¢æ˜¯å­˜å‚¨äº†this.state/this.setState</p></blockquote><h3 id="æ— éœ€åˆ»æ„åœ¨functionç»„ä»¶ä¸­æ¨¡æ‹Ÿclassçš„å‘¨æœŸ"><a href="#æ— éœ€åˆ»æ„åœ¨functionç»„ä»¶ä¸­æ¨¡æ‹Ÿclassçš„å‘¨æœŸ" class="headerlink" title="æ— éœ€åˆ»æ„åœ¨functionç»„ä»¶ä¸­æ¨¡æ‹Ÿclassçš„å‘¨æœŸ"></a>æ— éœ€åˆ»æ„åœ¨functionç»„ä»¶ä¸­æ¨¡æ‹Ÿclassçš„å‘¨æœŸ</h3><p>å¦‚æœçœŸçš„éœ€è¦classç»„ä»¶å‘¨æœŸä½¿ç”¨çš„ï¼Œé‚£ä¹ˆä½¿ç”¨classç»„ä»¶æ˜¯æ›´å¥½çš„æ–¹å¼ã€‚</p><p>å¤§éƒ¨åˆ†äººä¼šæ¨¡æ‹Ÿç”Ÿå‘½å‘¨æœŸï¼Œæ¯”è¾ƒæ˜æ˜¾çš„å°±æ˜¯<code>didMount</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">React.useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æ¨¡æ‹ŸcomponentDidMount</span></span><br><span class="line">&#125;, [])</span><br></pre></td></tr></table></figure><p>å…¶å®å¯ä»¥å†™å¾ˆå¤šä¸ªï¼Œå†…éƒ¨ä½¿ç”¨ä¾èµ–è¿›è¡Œæ¯”è¾ƒï¼Œä¸€ä¸ªç©ºçš„ä¾èµ–å§‹ç»ˆéƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥åªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// nameç›¸å…³æ“ä½œ</span></span><br><span class="line"><span class="keyword">const</span> [name, setName] = React.useState(<span class="string">''</span>)</span><br><span class="line">React.useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// åˆå§‹åŒ–nameæ“ä½œ...</span></span><br><span class="line">&#125;, [])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ageç›¸å…³æ“ä½œ</span></span><br><span class="line"><span class="keyword">const</span> [age, setAge] = React.useState(<span class="number">0</span>)</span><br><span class="line">React.useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// åˆå§‹åŒ–ageæ“ä½œ...</span></span><br><span class="line">&#125;, [])</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨callbackæ—¶çš„é—­åŒ…"><a href="#ä½¿ç”¨callbackæ—¶çš„é—­åŒ…" class="headerlink" title="ä½¿ç”¨callbackæ—¶çš„é—­åŒ…"></a>ä½¿ç”¨callbackæ—¶çš„é—­åŒ…</h3><p>å½“ä½¿ç”¨callbackï¼Œä»–ä¼šç¼“å­˜å½“å‰çš„æ‰§è¡Œæ ˆç›¸å…³çš„ä¿¡æ¯ï¼Œè¿™é‡Œçš„ç¼“å­˜å¦‚æœæ§åˆ¶ä¸å¥½ä¾èµ–ï¼Œå°±å®¹æ˜“é€ æˆå¾ˆå¤§çš„é—®é¢˜ï¼ŒåŒæ ·çš„windowè‡ªå¸¦çš„<code>setTimeout</code>,<code>setInterval</code>ä¹Ÿä¼šæœ‰ç›¸å…³çš„é—®é¢˜ã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬éœ€è¦åœ¨ç»„ä»¶æŒ‚è½½3såæ‰“å°å½“å‰çš„stateçŠ¶æ€</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [count, setCount] = React.useState(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">React.useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> timer = setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(count)</span><br><span class="line">  &#125;, <span class="number">3000</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ ¹æ®éœ€è¦è¿›è¡Œå¸è½½ return () =&gt; &#123; clearTimeout(timer) &#125;</span></span><br><span class="line">&#125;, [])</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">  &lt;button onClick=&#123;() =&gt; &#123; setCount(count + <span class="number">1</span>) &#125;&#125;&gt;increment&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">)</span></span><br></pre></td></tr></table></figure><p>å³ä½¿åŒæ ·éƒ½æ˜¯ç”¨åˆ°äº†count,å¤šæ¬¡ç‚¹å‡»æŒ‰é’®ï¼Œå‘ç°3sé’Ÿåæ‰“å°å‡ºçš„countè¿˜æ˜¯0,å› ä¸ºåˆ›å»ºæ—¶å·²ç»ç»‘å®šäº†ç¯å¢ƒï¼ŒåŠcountå·²ç»ä¸º0äº†ï¼Œï¼ˆä½¿ç”¨classç»„ä»¶å¹¶æ²¡ä½“ç°å‡ºæ¥ï¼Œthis.state.countï¼Œä¸€ä¸²å¼•ç”¨ï¼‰</p><p>ä½¿ç”¨å¼•ç”¨å»è§£å†³å¼•ç”¨,ref</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [count, setCount] = React.useState(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> callbackRef = React.useRef()</span><br><span class="line">React.useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  callbackRef.current = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(count)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, [count])</span><br><span class="line"></span><br><span class="line">React.useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    callbackRef.current()</span><br><span class="line">  &#125;, <span class="number">3000</span>)</span><br><span class="line">&#125;, [])</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆç”±äºcountçš„æ”¹å˜ï¼Œä¿®æ”¹äº†<code>callbackRef</code>çš„<code>current</code>ï¼Œå¹¶ä¸”timeoutç»‘å®šçš„æ˜¯æ‰§è¡Œæ ˆçš„<code>callbackRef</code>,ç„¶è€Œä»–çš„refå·²ç»è¢«è·Ÿæ–°äº†</p><h3 id="ä¸è¦æ¬ºéª—ä½ çš„hooks"><a href="#ä¸è¦æ¬ºéª—ä½ çš„hooks" class="headerlink" title="ä¸è¦æ¬ºéª—ä½ çš„hooks"></a>ä¸è¦æ¬ºéª—ä½ çš„hooks</h3><p>hooksçš„ä¾èµ–é¡¹å†³å®šäº†å½“å‰è¿™ä¸ªhooksæ˜¯å¦åœ¨ç»„ä»¶æ¸²æŸ“æ—¶é‡æ–°æ›´æ–°ï¼Œå³ç»‘å®šäº†ä¸Šä¸‹æ–‡ç¯å¢ƒä¸­çš„å˜é‡ï¼Œæ‰€ä»¥å½“ä»–ç¼“å­˜èµ·æ¥æ—¶ï¼Œå°±å·²ç»å†³å®šäº†å†…éƒ¨çš„å„ç§stateå€¼ï¼Œå¯ä»¥è¯´å·²ç»è¢«æ›¿æ¢ä¸ºç›¸åº”çš„æ•°å€¼ï¼Œä¸å†æ˜¯ä¸€ä¸ªå˜é‡äº†ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»„ä»¶ç”³æ˜æ—¶</span></span><br><span class="line"><span class="keyword">const</span> [count, setCount] = React.useState(<span class="number">0</span>)</span><br><span class="line">React.useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// count ...</span></span><br><span class="line">&#125;, [])</span><br><span class="line"></span><br><span class="line"><span class="comment">// åç»­ç»„ä»¶è¢«ç¼“å­˜ï¼Œå¯ä»¥ç†è§£ä¸º</span></span><br><span class="line">React.useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 0 ...</span></span><br><span class="line">&#125;, [])</span><br></pre></td></tr></table></figure><p><strong>å½“ä½¿ç”¨å„ç§callbackå»ä¼˜åŒ–æ—¶ï¼Œä¸€å®šè¦æ³¨æ„ä½¿ç”¨çš„ä¾èµ–æ˜¯å¦æ­£ç¡®</strong></p><h3 id="hooksæ”¾ç½®åœ¨å‡½æ•°ç»„ä»¶é¡¶éƒ¨"><a href="#hooksæ”¾ç½®åœ¨å‡½æ•°ç»„ä»¶é¡¶éƒ¨" class="headerlink" title="hooksæ”¾ç½®åœ¨å‡½æ•°ç»„ä»¶é¡¶éƒ¨"></a>hooksæ”¾ç½®åœ¨å‡½æ•°ç»„ä»¶é¡¶éƒ¨</h3><blockquote><p><a href="https://zh-hans.reactjs.org/docs/hooks-rules.html#explanation" target="_blank" rel="noopener">å®˜æ–¹è¯´æ˜</a></p></blockquote><p>hookså†…éƒ¨çš„å®ç°æ˜¯æŒ‚è½½äºfiberå†…çš„ä¸€ä¸ªé“¾è¡¨ï¼Œæ— è®ºæ˜¯<code>useState</code>,è¿˜æ˜¯<code>useEffect</code>ç­‰ï¼ŒReactæ— æ³•ç”¨ä¸€ä¸ªæ˜æ˜¾çš„keyå€¼å»åŒºåˆ†æŒ‚è½½äºfiberä¸Šçš„å…·ä½“å“ªä¸€ä¸ªèŠ‚ç‚¹å¯¹åº”å“ªä¸€ä¸ªhooksï¼Œä½¿ç”¨ä»–ä»¬çš„é¡ºåºindexä¹Ÿå°±æˆäº†ç›®å‰æœ€å¥½çš„é€‰æ‹©</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [count, setCount] = React.useState()</span><br><span class="line"></span><br><span class="line">React.useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ....</span></span><br><span class="line">&#125;, [])</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> price = React.useMemo(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line"> <span class="comment">// ....ä»·æ ¼ç”±ä¸€å †å¤æ‚æŠ˜æ‰£è®¡ç®—è€Œæ¥ï¼Œ f(discount)</span></span><br><span class="line">&#125;, [ discount ])</span><br></pre></td></tr></table></figure><p>ä¹‹åæŒ‚è½½ä¸è¯¥Fiberä¸Šçš„hooksé“¾è¡¨å¤§è‡´ä¸º</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123; (countä»£è¡¨çš„useState) , next-&gt;(useEffect)&#125;</span><br><span class="line">&#123; (useEffect) , next-&gt;(useEffect)&#125;</span><br><span class="line">&#123; (countä»£è¡¨çš„useState) , next-&gt;(priceä»£è¡¨çš„useMemo)&#125;</span><br><span class="line">&#123; (priceä»£è¡¨çš„useMemo) , next-&gt;(<span class="literal">null</span>)&#125;</span><br></pre></td></tr></table></figure><p>æ­£å¸¸æƒ…å†µReactå†æ¬¡æ¸²æŸ“æ—¶ï¼Œæ ¹æ®å‡ºç°çš„é¡ºåºï¼Œå°†Fiberä¸Šè®°å¿†çš„æ¯ä¸€ä¸ªhooksï¼Œä¾æ®é¡ºåºå»èµ‹å€¼æ“ä½œï¼Œæ­£å¥½ä¹Ÿæ˜¯å¯¹ä¸Šçš„</p><p>å¦‚æœæœ‰hookså‰åå‡ºç°é¡ºåºä¸ä¸€è‡´ï¼Œåˆ™ä¼šå‡ºç°å†æ¬¡æ¸²æŸ“æ—¶å¯¹ä¸ä¸Šï¼Œå¯¼è‡´hooksè°ƒç”¨é”™è¯¯</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é”™è¯¯å†™æ³•</span></span><br><span class="line"><span class="keyword">if</span> (!isLogin) &#123;</span><br><span class="line">  React.useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// .....</span></span><br><span class="line">  &#125;, [])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæƒ³è¡¨ç¤ºï¼ŒæŸä¸€ä¸ªeffecté€»è¾‘åªåœ¨ç™»é™†æ—¶åšæ£€æŸ¥ï¼Œä½†æ˜¯ç”±äºå½“å‰è¿™ä¸ªhooksï¼ˆuseEffectï¼‰æ˜¯è¢«åµŒå¥—çš„ï¼Œå¾ˆå¯èƒ½å‡ºç°è¯¥hooksåœ¨å‡½æ•°å†…çš„æ‰§è¡Œé¡ºåºä¸ä¸€è‡´</p><ul><li>isLogin == true</li></ul><p>hookså¯¹åº”æƒ…å†µ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [count, setCount] ----&gt; React.useState</span><br><span class="line">  æ‰§è¡Œç›¸å…³effectå†…éƒ¨æ–¹æ³•   ----&gt; React.useEffect</span><br><span class="line"><span class="keyword">const</span> price             ----&gt; React.useMemo</span><br></pre></td></tr></table></figure><ul><li>isLogin == false</li></ul><p>hookså¯¹åº”æƒ…å†µ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [count, setCount] ----&gt; React.useState</span><br><span class="line"><span class="keyword">const</span> price      ----&gt; React.useEffect</span><br></pre></td></tr></table></figure><p>è¿™æ—¶å‡ºç°äº†ï¼Œå¯¹ä¸ä¸Šhookså­˜å‚¨çš„ç›¸å…³æ•°æ®ä¸å…¶å¯¹åº”çš„ä½¿ç”¨å‘ç”Ÿäº†é”™è¯¯ï¼Œå³å‡ºç°äº†é—®é¢˜</p><ul><li>æ­£ç¡®çš„ä½¿ç”¨æ–¹å¼</li></ul><p>å°†åˆ¤æ–­é€»è¾‘ï¼ŒåµŒå¥—å†…ç½®ä¸hookså†…éƒ¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">React.useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!isLogin) &#123;</span><br><span class="line">    <span class="comment">// .....</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;, [])</span><br></pre></td></tr></table></figure><p>æ— è®ºç¨‹åºæ‰§è¡ŒçŠ¶å†µæ˜¯æ€æ ·çš„ï¼Œæœ€ç»ˆéƒ½æ˜¯ç¨³å®šï¼Œæ­£ç¡®çš„hooksè°ƒç”¨å…³ç³»</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [count, setCount] ----&gt; React.useState</span><br><span class="line">  æ‰§è¡Œç›¸å…³effectå†…éƒ¨æ–¹æ³•   ----&gt; React.useEffect</span><br><span class="line"><span class="keyword">const</span> price             ----&gt; React.useMemo</span><br></pre></td></tr></table></figure><h2 id="éœ€è¦ç«‹åˆ»æ›¿æ¢hookså—"><a href="#éœ€è¦ç«‹åˆ»æ›¿æ¢hookså—" class="headerlink" title="éœ€è¦ç«‹åˆ»æ›¿æ¢hookså—"></a>éœ€è¦ç«‹åˆ»æ›¿æ¢hookså—</h2><p>å¯ä»¥ç€æ‰‹äºæ–°çš„ç»„ä»¶ä½¿ç”¨hooksæ¨¡å¼ï¼ˆå¦‚æœå–œæ¬¢è¿™ç§å¼€å‘æ–¹å¼ï¼‰ï¼Œhooksæ¨¡å¼ä¸classæ¨¡å¼æ˜¯å¯ä»¥å…±å­˜çš„ï¼Œæ‰€ä»¥å¹¶ä¸ç”¨ç€åŠ›å»ä¿®æ”¹ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Objectä¸Mapçš„é€‰ç”¨</title>
      <link href="/2020/08/28/Object%E4%B8%8EMap%E7%9A%84%E9%80%89%E7%94%A8/"/>
      <url>/2020/08/28/Object%E4%B8%8EMap%E7%9A%84%E9%80%89%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;&#125;</span><br><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br></pre></td></tr></table></figure><h2 id="å„è‡ªçš„ç‰¹ç‚¹"><a href="#å„è‡ªçš„ç‰¹ç‚¹" class="headerlink" title="å„è‡ªçš„ç‰¹ç‚¹"></a>å„è‡ªçš„ç‰¹ç‚¹</h2><table><thead><tr><th></th><th>Map</th><th>Object</th></tr></thead><tbody><tr><td>é»˜è®¤å€¼</td><td>ä¸åŒ…å«ä»»ä½•çš„å€¼ï¼Œåªæœ‰æ˜¾å¼æ’å…¥çš„é”®</td><td>Objectä¸Šæœ‰åŸå‹ï¼ŒåŸå‹ä¸Šçš„é”®å¯èƒ½ä¼šä¸è‡ªå®šä¹‰é”®åå†²çª</td></tr><tr><td>keyç±»å‹</td><td>ä»»æ„çš„ç±»å‹</td><td><code>String</code> æˆ–è€…<code>Symbol</code></td></tr><tr><td>é•¿åº¦</td><td>é€šè¿‡å±æ€§sizeè·å–</td><td>é”®å€¼ä¸ªæ•°åªèƒ½æ‰‹åŠ¨è®¡ç®—</td></tr><tr><td>æ€§èƒ½</td><td>é¢‘ç¹å¢åˆ é”®å€¼å¯¹æœ‰ä¸€å®šçš„æ€§èƒ½ä¼˜åŒ–</td><td>å¯¹é¢‘ç¹å¢æ·»åœºæ™¯æœªè¿›è¡Œä¼˜åŒ–</td></tr></tbody></table><h3 id="Object"><a href="#Object" class="headerlink" title="Object"></a>Object</h3><ul><li>æœ‰åŸç”Ÿçš„JSONç›¸å…³è½¬æ¢æ–¹æ³•ï¼Œå¯ä»¥æ›´æ–¹é¢çš„è½¬æ¢ä¸ºjsonä¸²</li><li>å…¶keyéœ€ä¸º<code>string</code>,<code>symbol</code>ç›¸å¯¹æ¥è¯´æœ‰ä¸€äº›é™åˆ¶</li><li>ä¸å¯ç›´æ¥è¿­ä»£</li><li>åŸå‹ä¸Šæœ‰ç›¸å…³æ–¹æ³•ï¼Œæ³¨æ„ä¸è¦ä¸keyé‡å¤<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> o = &#123;&#125;</span><br><span class="line"><span class="built_in">console</span>.log(o.constructor) <span class="comment">//  Object() &#123; [native code] &#125;</span></span><br><span class="line">o.constructor = <span class="number">1</span> <span class="comment">// `.`æ“ä½œçš„ç”¨æ³•</span></span><br><span class="line"><span class="built_in">console</span>.log(o.constructorr) <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯èƒ½å‡ºé—®é¢˜çš„éƒ¨åˆ†</span></span><br><span class="line"><span class="keyword">let</span> count = o[key] || <span class="number">0</span> <span class="comment">// å¦‚æœkeyä¸ºconstructoråˆ™ç¬¬ä¸€æ¬¡åˆå§‹åŒ–ä¸åˆ°0</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h3><ul><li>å…¶keyå¯ä»¥ä¸ºä»»ä½•ç±»å‹ã€‚<ul><li>keyä¸ºæ­£åˆ™ï¼Œå¯ä»¥ä¸ºä¸€ç±»æ•°æ®åŒ¹é…ç»“æœ</li><li>keyä¹Ÿå¯ä¸ºå¯¹è±¡ï¼Œç›´æ¥<code>key.status = xxx &amp;&amp; key.code === xxx</code></li></ul></li><li>Mapå¯¹è±¡æ’å…¥æ˜¯æœ‰é¡ºåºçš„ï¼Œå¯ä»¥ç›´æ¥è¿­ä»£æ‹¿å‡ºé¡ºåº</li><li>å…¶keyä¸ä¼šæœ‰ä»»ä½•å†²çªï¼Œå› ä¸ºä»–æ˜¯ä½¿ç”¨æ–¹æ³•æ“ä½œçš„æ•°æ®ï¼Œå¹¶ä¸æ˜¯é€šè¿‡<code>.</code>æ¥æ“ä½œæ•°æ®</li></ul><h2 id="æ“ä½œæ–¹æ³•"><a href="#æ“ä½œæ–¹æ³•" class="headerlink" title="æ“ä½œæ–¹æ³•"></a>æ“ä½œæ–¹æ³•</h2><h3 id="åˆ›å»º"><a href="#åˆ›å»º" class="headerlink" title="åˆ›å»º"></a>åˆ›å»º</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj1 = &#123;&#125;</span><br><span class="line"><span class="keyword">let</span> obj2 = &#123; <span class="attr">name</span>: <span class="string">'zhn'</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> map1 = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line"><span class="keyword">let</span> map2 = <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">  [<span class="string">'name'</span>, <span class="string">'zhn'</span>]</span><br><span class="line">])</span><br></pre></td></tr></table></figure><h3 id="å¢åˆ "><a href="#å¢åˆ " class="headerlink" title="å¢åˆ "></a>å¢åˆ </h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> key = <span class="string">'age'</span></span><br><span class="line"><span class="keyword">let</span> value = <span class="number">18</span></span><br><span class="line"></span><br><span class="line">obj[key] = value</span><br><span class="line">map.set(key, value)</span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> obj[key]</span><br><span class="line">map.delete(key)</span><br></pre></td></tr></table></figure><h3 id="è·å–å…ƒç´ "><a href="#è·å–å…ƒç´ " class="headerlink" title="è·å–å…ƒç´ "></a>è·å–å…ƒç´ </h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> key = <span class="string">'name'</span></span><br><span class="line"></span><br><span class="line">obj[key] <span class="comment">// zhn</span></span><br><span class="line">map.get(key) <span class="comment">// zhn</span></span><br></pre></td></tr></table></figure><h3 id="éå†å…ƒç´ "><a href="#éå†å…ƒç´ " class="headerlink" title="éå†å…ƒç´ "></a>éå†å…ƒç´ </h3><h4 id="Object-1"><a href="#Object-1" class="headerlink" title="Object"></a>Object</h4><p>objectå¯æ­é…<code>Object.keys(obj)</code>è¿›è¡Œéå†</p><p>objectæœ¬èº«å°±ä¸èƒ½ä¿è¯é¡ºåºï¼Œä½†æ˜¯å…¶Object.keyså¯ä»¥è¿”å›ä¸€å®šçš„é¡ºåºï¼ˆES6+ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> object = &#123; &#125;;</span><br><span class="line">object[<span class="string">'key1'</span>] = <span class="string">'value1'</span>;</span><br><span class="line">object[<span class="string">'key0'</span>] = <span class="string">'value0'</span>;</span><br><span class="line">object; <span class="comment">// &#123; key1: "value1", key0: "value0" &#125;</span></span><br><span class="line">object[<span class="number">20</span>] = <span class="string">'value20'</span>; <span class="comment">// ç»å†äº†éšå¼ç±»å‹è½¬æ¢</span></span><br><span class="line">object; <span class="comment">// &#123; 20: "value20", key1: "value1", key0: "value0" &#125;</span></span><br></pre></td></tr></table></figure><p>å€ŸåŠ©Objectéå†çš„æ–¹å¼ï¼Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> key <span class="keyword">of</span> <span class="built_in">Object</span>.keys(object)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// key1</span></span><br><span class="line"><span class="comment">// key2</span></span><br><span class="line"><span class="comment">// key3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> value <span class="keyword">of</span> <span class="built_in">Object</span>.values(object)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// value1</span></span><br><span class="line"><span class="comment">// value2</span></span><br><span class="line"><span class="comment">// value3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> entry <span class="keyword">of</span> <span class="built_in">Object</span>.entries(object)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(entry);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ["key1", "value1"]</span></span><br><span class="line"><span class="comment">// ["key2", "value2"]</span></span><br><span class="line"><span class="comment">// ["key3", "value3"]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> [key,value] <span class="keyword">of</span> <span class="built_in">Object</span>.entries(object)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key,value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//"key1", "value1"</span></span><br><span class="line"><span class="comment">//"key2", "value2"</span></span><br><span class="line"><span class="comment">//"key3", "value3"</span></span><br></pre></td></tr></table></figure><p>objectä¸æ˜¯å¯è¿­ä»£å¯¹è±¡ï¼Œæ‰€ä»¥<strong>ä¸èƒ½</strong>ä½¿ç”¨<code>for-of</code>ç›´æ¥è·å–å…¶å€¼ï¼Œ<strong>å¯ä»¥</strong>ä½¿ç”¨<code>for-in</code>æ–¹æ³•å»è·å–keys</p><h4 id="Map-1"><a href="#Map-1" class="headerlink" title="Map"></a>Map</h4><p>mapæ˜¯ä¸€ä¸ªå¯è¿­ä»£çš„å¯¹è±¡ï¼Œå¹¶ä¸”ä¿è¯äº†å…¶åœ¨è¿­ä»£çš„é¡ºåºæ˜¯å¯ä»¥ä¿è¯çš„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// forEach</span></span><br><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">map.set(<span class="string">'key1'</span>, <span class="string">'value1'</span>);</span><br><span class="line">map.set(<span class="string">'key2'</span>, <span class="string">'value2'</span>);</span><br><span class="line">map.set(<span class="string">'key3'</span>, <span class="string">'value3'</span>);</span><br><span class="line">map.forEach(<span class="function">(<span class="params">value, key</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key, value);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// key1 value1</span></span><br><span class="line"><span class="comment">// key2 value2</span></span><br><span class="line"><span class="comment">// key3 value3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//for...of...</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> entry <span class="keyword">of</span> map) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(entry);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ["key1", "value1"]</span></span><br><span class="line"><span class="comment">// ["key2", "value2"]</span></span><br><span class="line"><span class="comment">// ["key3", "value3"]</span></span><br></pre></td></tr></table></figure><h2 id="å¦‚ä½•æ›´å¥½çš„é€‰ç”¨"><a href="#å¦‚ä½•æ›´å¥½çš„é€‰ç”¨" class="headerlink" title="å¦‚ä½•æ›´å¥½çš„é€‰ç”¨"></a>å¦‚ä½•æ›´å¥½çš„é€‰ç”¨</h2><blockquote><p>ä¸èƒ½ç”¨mapå»ä»£æ›¿objectï¼Œåªæ˜¯ä¸€ç§è¡¥å……æ–¹æ¡ˆ</p></blockquote><p>è€ƒè™‘é”®å€¼ç±»å‹ï¼Œæ˜¯<code>string, symbol</code>,å¦‚æœè¾ƒä¸ºç®€å•ï¼Œåˆ™ä½¿ç”¨objectå³å¯ï¼Œå¦‚æœæœ‰æ›´ä¸ºå¤æ‚çš„keyç±»å‹ï¼Œä½¿ç”¨mapä¹Ÿå¯ä»¥ã€‚</p><p>è€ƒè™‘ä¹‹åéå†æ˜¯å¦éœ€è¦ä¿è¯å…¶ä¸­çš„é¡ºåºï¼Œmapæ˜¯å¯ä»¥ä¿è¯é¡ºåºçš„ï¼Œobjectçš„æœ¬æ„å°±æ˜¯æ²¡æœ‰é¡ºåºçš„ï¼Œè€Œä¸”éšå¼ç±»å‹è½¬æ¢ä¹Ÿæœ‰é—®é¢˜ã€‚</p><p>é¢‘ç¹æ“ä½œæ€§èƒ½è€ƒè™‘ï¼Œmapçš„ç»“æ„æ˜¯ä¸€ä¸ªå“ˆå¸Œç»“æ„ï¼Œé¢‘ç¹å¢ä¸Šæœ‰è¾ƒå¥½çš„æ€§èƒ½ä¼˜åŒ–æ•ˆæœ</p><p>è€ƒè™‘å…¶keyçš„å¯èƒ½æ€§ï¼Œå¦‚æœkeyæ˜¯ç”¨æˆ·å¯è‡ªå®šçš„è¯ï¼Œè¦è€ƒè™‘æ˜¯å¦ä¼šè¦†ç›–ï¼Œæ¯”å¦‚ç”¨æˆ·è‡ªå®šäº†<code>toString</code>è¿™ä¸ªé”®ï¼Œé‚£ä¹ˆä½¿ç”¨mapè¾ƒå¥½</p><p>è€ƒè™‘æ˜¯å¦éœ€è¦ä½¿ç”¨JSONï¼ŒobjectåŸç”Ÿå¯¹jsonä¸²æ”¯æŒè¾ƒå¥½ï¼Œmapéœ€è¦è‡ªå·±å»åšå®ç°</p><p>è€ƒè™‘æ˜¯å¦è¦åœ¨keyä¸Šåšæ–‡ç« ï¼Œmapçš„keyä¸ºä»»æ„ç±»å‹ï¼Œå…¶ä¸­æ”¹å†™ä¸ºæ­£åˆ™ç±»å‹ï¼Œä¼šæœ‰æ›´å¥½çš„æ‹“å±•å»¶ä¼¸æ•ˆæœ</p>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ä¼˜åŒ–å¤šä¸ªåˆ¤æ–­åˆ†æ”¯</title>
      <link href="/2020/08/28/%E4%BC%98%E5%8C%96%E5%A4%9A%E4%B8%AA%E5%88%A4%E6%96%AD%E5%88%86%E6%94%AF/"/>
      <url>/2020/08/28/%E4%BC%98%E5%8C%96%E5%A4%9A%E4%B8%AA%E5%88%A4%E6%96%AD%E5%88%86%E6%94%AF/</url>
      
        <content type="html"><![CDATA[<p>åœ¨å……æ–¥äº†å¤§é‡çš„<code>if-else</code>çš„åœºæ™¯ä¸­ï¼Œå¦‚æœåˆ†æ”¯åˆ‡æ¢è¿‡å¤šï¼Œä¼šå¯¼è‡´ä»¥åçœ‹èµ·æ¥ä¸æ˜¯å¾ˆç›´è§‚ï¼Œéœ€è¦è¿›è¡Œç­–ç•¥æ¨¡å¼çš„è®¾è®¡</p><h1 id="ä½¿ç”¨switch"><a href="#ä½¿ç”¨switch" class="headerlink" title="ä½¿ç”¨switch"></a>ä½¿ç”¨switch</h1><p>é€‚ç”¨äºæ“ä½œä¸å¤šçš„æƒ…å†µï¼Œç›´æ¥åšä¸€äº›è½¬æ¢ï¼Œæ¯”å¦‚reduxä¸­å°±ä½¿ç”¨äº†è¿™ç§æ–¹å¼ï¼Œå…¶ä¼˜ç‚¹æ˜¯å¯ä»¥åšä¸€äº›é€ç©¿ï¼Œä¸€å®šè¦æ³¨æ„breakï¼Œæˆ–è€…ç›´æ¥returnäº†</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reducer</span>(<span class="params">state, action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span>(action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'ADD'</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; ... &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'UPDATE'</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; ... &#125;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; ... &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æŠ½å‡ºæˆkey-valueçš„å½¢å¼"><a href="#æŠ½å‡ºæˆkey-valueçš„å½¢å¼" class="headerlink" title="æŠ½å‡ºæˆkey-valueçš„å½¢å¼"></a>æŠ½å‡ºæˆkey-valueçš„å½¢å¼</h1><p>å°†switchä¸­çš„åˆ¤æ–­caseåšæˆkeyå³å¯</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// objectç±»å‹</span></span><br><span class="line"><span class="keyword">const</span> actions = &#123;</span><br><span class="line">  <span class="string">'ADD'</span>, function1,</span><br><span class="line">  <span class="string">'UPDATE'</span>, function2,</span><br><span class="line">  <span class="string">'default'</span>, function2,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> command = <span class="string">'ADD'</span></span><br><span class="line"><span class="keyword">const</span> res = actions[command] || actions[<span class="string">'default'</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// mapç±»å‹</span></span><br><span class="line"><span class="keyword">const</span> actions = <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">  [<span class="string">'ADD'</span>, function1],</span><br><span class="line">  [<span class="string">'UPDATE'</span>, function2],</span><br><span class="line">  [<span class="string">'default'</span>, function3],</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> command = <span class="string">'ADD'</span></span><br><span class="line"><span class="keyword">const</span> res = actions.get(command) || actions.get(<span class="string">'default'</span>)</span><br></pre></td></tr></table></figure><h1 id="å¤šå±‚åµŒå¥—åˆ¤æ–­"><a href="#å¤šå±‚åµŒå¥—åˆ¤æ–­" class="headerlink" title="å¤šå±‚åµŒå¥—åˆ¤æ–­"></a>å¤šå±‚åµŒå¥—åˆ¤æ–­</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (guest) &#123;</span><br><span class="line">  <span class="keyword">if</span> (command === <span class="string">'ADD'</span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (command === <span class="string">'UPDATE'</span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (....)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (master) &#123;</span><br><span class="line">  <span class="keyword">if</span> (command === <span class="string">'ADD'</span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (command === <span class="string">'UPDATE'</span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (....)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// objectï¼Œmapéƒ½å¯ä»¥å åŠ ä½œä¸ºkey</span></span><br><span class="line"><span class="keyword">const</span> actions = &#123;</span><br><span class="line">  <span class="string">'guest_ADD'</span>, function1,</span><br><span class="line">  <span class="string">'guest_UPDATE'</span>, function2,</span><br><span class="line">  <span class="string">'master_ADD'</span>, function3,</span><br><span class="line">  <span class="string">'master_UPDATE'</span>, function2,</span><br><span class="line">  <span class="string">'default'</span>, function2,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> identity = <span class="string">'guest'</span></span><br><span class="line"><span class="keyword">let</span> action = <span class="string">'ADD'</span></span><br><span class="line"><span class="keyword">let</span> command = <span class="string">`<span class="subst">$&#123;identity&#125;</span>_<span class="subst">$&#123;action&#125;</span>`</span></span><br><span class="line"><span class="keyword">const</span> res = actions[command] || actions[<span class="string">'default'</span>]</span><br></pre></td></tr></table></figure><h1 id="åˆ©ç”¨mapçš„keyå¤šç±»å‹ï¼Œåšé«˜çº§key"><a href="#åˆ©ç”¨mapçš„keyå¤šç±»å‹ï¼Œåšé«˜çº§key" class="headerlink" title="åˆ©ç”¨mapçš„keyå¤šç±»å‹ï¼Œåšé«˜çº§key"></a>åˆ©ç”¨mapçš„keyå¤šç±»å‹ï¼Œåšé«˜çº§key</h1><p>ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å»åŒ¹é…</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> actions = <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">  [<span class="regexp">/^guest_(ADD|UPDATE)$/</span>, function1], <span class="comment">// åŒ¹é… guest_ADD, guest_UPDATE</span></span><br><span class="line">  [<span class="regexp">/^master_[1-4]$/</span>, function2] <span class="comment">// åŒ¹é… master_1, master_2, ..., master_3</span></span><br><span class="line">  [<span class="regexp">/default/</span>, function3]</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> identity = <span class="string">'guest'</span></span><br><span class="line"><span class="keyword">let</span> action = <span class="string">'ADD'</span></span><br><span class="line"><span class="keyword">let</span> command = <span class="string">`<span class="subst">$&#123;identity&#125;</span>_<span class="subst">$&#123;action&#125;</span>`</span></span><br><span class="line"><span class="keyword">const</span> res = [...actions].find(<span class="function">(<span class="params">[key, value]</span>) =&gt;</span> key.test(command))</span><br></pre></td></tr></table></figure><p>å°†keyç›´æ¥åšæˆä¸€ä¸ªå¯¹è±¡</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> actions = <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">  [&#123; <span class="attr">identity</span>: <span class="string">'guest'</span>, <span class="attr">action</span>: <span class="string">'ADD'</span>&#125;, fucntion1],</span><br><span class="line">  [&#123; <span class="attr">identity</span>: <span class="string">'guest'</span>, <span class="attr">action</span>: <span class="string">'UPDATE'</span>&#125;, fucntion2],</span><br><span class="line">  [&#123; <span class="attr">identity</span>: <span class="string">'master'</span>, <span class="attr">action</span>: <span class="string">'ADD'</span>&#125;, fucntion3],</span><br><span class="line">  [&#123; <span class="attr">identity</span>: <span class="string">'master'</span>, <span class="attr">action</span>: <span class="string">'UPDATE'</span>&#125;, fucntion4],</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">])</span><br><span class="line"><span class="keyword">let</span> identity = <span class="string">'guest'</span></span><br><span class="line"><span class="keyword">let</span> action = <span class="string">'ADD'</span></span><br><span class="line"><span class="keyword">let</span> command = <span class="string">`<span class="subst">$&#123;identity&#125;</span>_<span class="subst">$&#123;action&#125;</span>`</span></span><br><span class="line"><span class="keyword">const</span> res = [...actions].find(<span class="function">(<span class="params">[key, value]</span>) =&gt;</span> key.identity === identitu &amp;&amp; key.action === action)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>2020-0814</title>
      <link href="/2020/08/14/2020-0814/"/>
      <url>/2020/08/14/2020-0814/</url>
      
        <content type="html"><![CDATA[<p><img src="/img/2020/08/14/1.jpeg" alt="Beijing"><br>2020-08-14 åŒ—äº¬-æµ·æ·€-ä¸­å…³æ‘ç´«é‡‘å¤§å¦ï¼ˆå­—èŠ‚å‡ºå·®äºæµ·æ·€å¤§å¦ï¼‰</p><p>æœ‰å¹¸äº22å²çš„æœ€åä¸€å¤©èµ¶ä¸Šæœ«ç­è½¦ï¼Œå›å¤´ä¸€çœ‹ï¼Œå·²ç»23å²äº†ï¼Œæ—¶é—´æŒºå¿«çš„ï¼Œä¸€åˆ‡éƒ½æ¥ä¸åŠæ€è€ƒï¼Œæ¥ä¸‹æ¥åŠ æ²¹å’¯</p><p>å®ä¹ -8k Bytedance</p><p>next-age =&gt; 16k</p><p>é€è‡ªå·±ä¸€å¥è¯ï¼ŒæŠ˜ä¸­çš„é€‰æ‹©ï¼Œä¼šå¸æ”¶ä¸¤è€…å…±åŒçš„ç¼ºç‚¹ï¼Œè™½ç„¶éƒ½æ˜¯æ­ªç†ï¼Œä½†è¿˜æ˜¯æŒºå–œæ¬¢çš„ï¼Œæ¥ä¸‹æ¥å¥½å¥½åŠªåŠ›ï¼Œé¡ºç€ä¸€ä¸ªæ–¹å‘æ·±æŒ–ï¼ŒåŠ æ²¹ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> å¿ƒæƒ… </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>TT</title>
      <link href="/2020/08/03/TT/"/>
      <url>/2020/08/03/TT/</url>
      
        <content type="html"><![CDATA[<p>ç°åœ¨å·²ç»æ˜¯20200803äº†ï¼Œæœ€è¿‘å›½é™…å½¢åŠ¿ä¹Ÿæ˜¯é£é€Ÿå˜æ¢ï¼ŒTiktokåŒæ ·æ”¶åˆ°äº†é‡åˆ›ï¼ŒByteDanceé£è¯„è¢«å®³,ä¸€é¸£ä¹Ÿé£è¯„è¢«å®³ï¼Œç›®å‰ä¸æ¸…æ¥šæ‰€æœ‰çš„å½¢å¼ï¼Œä¹Ÿä¸èƒ½å¦„è‡ªäºˆä»¥åˆ¤æ–­ï¼Œè¿˜è®°å¾—ä¸Šä¸€ç¯‡ç§å¥½æ¯ä¸€é¢—åœŸè±†ï¼Œåä¸ºç®—æ˜¯æŒºè¿‡æ¥ï¼Œä½†æ˜¯ä¹Ÿè¢«å„ç§DISSçˆ±å›½è¥é”€ï¼Œä½œä¸ºä¸€ä¸ªå±€å¤–äººï¼Œæˆ‘è¿˜åœ¨è¿™åƒç“œï¼Œä½†æ˜¯è¿™æ¬¡è‡ªå·±ä¹Ÿç®—æ˜¯ä¸€ä¸ªdeveloperï¼Œå¯¹äºTTå¤§å®¶è¿˜éƒ½æ˜¯å¼•ä»¥ä¸ºå‚²çš„ï¼Œç½‘ç»œä¸Šåƒç“œç¾¤ä¼—ä¹Ÿå¾ˆå¤šï¼Œä¹Ÿä¸çŸ¥é“é‚£äº›åƒç“œç¾¤ä¼—éƒ½æ˜¯ä»€ä¹ˆå¿ƒæ€ï¼Œå…¶ä»–å°±äº¤ç»™å¤§ä½¬ä»¬äº†ï¼Œè‡ªå·±å…ˆæŠŠæ‰‹å¤´å·¥ä½œåšå¥½ï¼ŒåŠ æ²¹ï¼Œ<code>Always Day 1!</code></p><p><img src="/img/2020/08/03/source_lake.jpg" alt="source_lake"><br>æ­å·Â·è¥¿æ¹–ç™½å ¤</p>]]></content>
      
      
      
        <tags>
            
            <tag> å¿ƒæƒ… </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>JSON.stringifyè½¬æ¢å­—ç¬¦ä¸²</title>
      <link href="/2020/06/18/JSON-stringify%E8%BD%AC%E6%8D%A2%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
      <url>/2020/06/18/JSON-stringify%E8%BD%AC%E6%8D%A2%E5%AD%97%E7%AC%A6%E4%B8%B2/</url>
      
        <content type="html"><![CDATA[<p>å­—ç¬¦ä¸²è½¬æ¢æ—¶ï¼Œä¼šä½¿ç”¨åˆ°JSON.stringifyä»–ä¼šå°†ä¸€ä¸ªå¯¹è±¡è½¬æ¢ä¸ºjsonä¸²æ ¼å¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  name: <span class="string">'zhn'</span>,</span><br><span class="line">  age: <span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">JSON</span>.stringify(obj) <span class="comment">// "&#123;"name":"zhn","age":18&#125;" ä»£è¡¨ä¸€ä¸ªå­—ç¬¦ä¸²,å…¶ä¸­å†…å®¹ä¸º&#123;"name":"zhn","age":18&#125;</span></span><br></pre></td></tr></table></figure><h1 id="è½¬æ¢çº¯å­—ç¬¦ä¸²"><a href="#è½¬æ¢çº¯å­—ç¬¦ä¸²" class="headerlink" title="è½¬æ¢çº¯å­—ç¬¦ä¸²"></a>è½¬æ¢çº¯å­—ç¬¦ä¸²</h1><p>åŒæ—¶ä¹Ÿå¯ä»¥è½¬æ¢æ™®é€šçš„å­—ç¬¦ä¸²</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.stringify(<span class="string">'str'</span>) <span class="comment">// ""str"" ä»£è¡¨ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå…¶ä¸­çš„å†…å®¹ä¸º"str"</span></span><br></pre></td></tr></table></figure><h1 id="è½¬æ¢çº¯å­—ç¬¦ä¸²ä¸­å¼•å·"><a href="#è½¬æ¢çº¯å­—ç¬¦ä¸²ä¸­å¼•å·" class="headerlink" title="è½¬æ¢çº¯å­—ç¬¦ä¸²ä¸­å¼•å·"></a>è½¬æ¢çº¯å­—ç¬¦ä¸²ä¸­å¼•å·</h1><p>é»˜è®¤ä¼šè½¬æ¢ä¸ºåŒå¼•å·</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.stringify(<span class="string">'str'</span>) <span class="comment">// ""str""</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">JSON</span>.stringify(<span class="string">"str"</span>) <span class="comment">// ""str""</span></span><br></pre></td></tr></table></figure><p>å•å¼•å·ä¼šä¾æ—§å­˜åœ¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.stringify(<span class="string">"st'666'r"</span>) <span class="comment">// ""st'666'r""</span></span><br></pre></td></tr></table></figure><p>åŒå¼•å·ä¼šè¢«è½¬ä¹‰ï¼ˆé»˜è®¤è½¬æ¢ä¸ºåŒå¼•å·ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.stringify(<span class="string">'st"666"r'</span>) <span class="comment">// ""st\"666\"r""</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæœ‰å¼•å·å åŠ çš„çŠ¶æ€ï¼Œåˆ™ä¼šä¿ç•™ï¼Œå› ä¸ºå­—ç¬¦ä¸²å¦‚æœè¾“å…¥æ­£ç¡®å°±å·²ç»è¢«è½¬ç§»è¿‡äº†ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.stringify(<span class="string">"st\"666\"r"</span>) <span class="comment">// ""st\"666\"r""</span></span><br></pre></td></tr></table></figure><h1 id="åº”ç”¨äºwebpackæ‰“åŒ…"><a href="#åº”ç”¨äºwebpackæ‰“åŒ…" class="headerlink" title="åº”ç”¨äºwebpackæ‰“åŒ…"></a>åº”ç”¨äºwebpackæ‰“åŒ…</h1><blockquote><p>å…·ä½“è¦çœ‹æ’ä»¶æ˜¯å¦‚ä½•å®šä¹‰çš„ï¼Œå¦‚<code>webpack.DefinePlugin</code>åœ¨å…¶æ–‡æ¡£å†™æ¸…æ¥šäº†</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¯”å¦‚æˆ‘ä»¬æœ€ç»ˆæ‰“åŒ…åçš„ä»£ç ä¸º</span></span><br><span class="line"><span class="keyword">const</span> code = <span class="string">'console.log(1)'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œä»£ç æ—¶ï¼Œåªéœ€è¦</span></span><br><span class="line"><span class="built_in">eval</span>(code)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœæˆ‘ä»¬æœ€ç»ˆæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">const</span> str = <span class="string">'hello word'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æœ€ç»ˆæš´éœ²</span></span><br><span class="line"><span class="keyword">const</span> code = <span class="string">'module.exports = '</span> + str <span class="comment">// æœ€ç»ˆcode = 'module.exports = hello word'</span></span><br><span class="line"><span class="built_in">eval</span>(code) <span class="comment">// æŠ¥é”™ hello æ‰¾ä¸åˆ°åº”ç”¨</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æœ€ç»ˆæš´éœ²</span></span><br><span class="line"><span class="keyword">const</span> code = <span class="string">'module.exports = '</span> + <span class="built_in">JSON</span>.stringify(str) <span class="comment">// æœ€ç»ˆcode = 'module.exports = "hello word"'</span></span><br><span class="line"><span class="built_in">eval</span>(code) <span class="comment">// å¯æ­£å¸¸æ‰§è¡Œ</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>éšè—å…ƒç´ 3ç§æ–¹å¼åŒºåˆ«</title>
      <link href="/2020/06/15/%E9%9A%90%E8%97%8F%E5%85%83%E7%B4%A03%E7%A7%8D%E6%96%B9%E5%BC%8F%E5%8C%BA%E5%88%AB/"/>
      <url>/2020/06/15/%E9%9A%90%E8%97%8F%E5%85%83%E7%B4%A03%E7%A7%8D%E6%96%B9%E5%BC%8F%E5%8C%BA%E5%88%AB/</url>
      
        <content type="html"><![CDATA[<h1 id="display-none"><a href="#display-none" class="headerlink" title="display:none;"></a><code>display:none;</code></h1><blockquote><p><code>display: none/block;</code></p></blockquote><p>è¯¥å…ƒç´ ä¼šå½»åº•ä»é¡µé¢ä¸Šæ¶ˆæ¯ï¼ŒDOMç»“æ„ä¼šæ¶ˆå¤±ï¼Œæ‰€ä»¥ä¼šç›´æ¥è§¦å‘é¡µé¢é‡æ’é‡ç»˜ï¼Œæ‰€ä»¥ä¸é€‚åˆé¢‘ç¹åœ°æ˜¾ç¤ºéšè—å…ƒç´ ã€‚å¹¶ä¸”ç”±äºå…¶æ¶ˆå¤±åï¼Œè‡ªèº«ç»‘å®šçš„äº‹ä»¶æ›´ä¸ä¼šè§¦å‘ï¼Œä¹Ÿä¸èƒ½æœ‰è¿‡æ¸¡æ•ˆæœã€‚å…¶ç­‰äºä»é¡µé¢ä¸Šæ¶ˆå¤±ï¼Œæ‰€ä»¥è¢«é®æŒ¡çš„å…ƒç´ ä¸å—åˆ°å½±å“ï¼Œä¾ç„¶å¯ä»¥æ­£å¸¸çš„æ“ä½œã€‚</p><p>ç”¨ä½œnavæ—¶ï¼Œä¸‹æ‹‰çš„æç¤ºæ•ˆæœã€‚</p><h1 id="visibility-hidden"><a href="#visibility-hidden" class="headerlink" title="visibility:hidden;"></a><code>visibility:hidden;</code></h1><blockquote><p><code>visibility: hidden/visible;</code></p></blockquote><p>ä»é¡µé¢ä¸Šä»…ä»…æ˜¯éšè—è¯¥å…ƒç´ ï¼ŒDOMç»“æœå‡ä¼šå­˜åœ¨ï¼Œåªæ˜¯å½“æ—¶åœ¨ä¸€ä¸ªä¸å¯è§çš„çŠ¶æ€ï¼Œä¸ä¼šè§¦å‘é‡æ’ï¼Œä½†æ˜¯ä¼šè§¦å‘é‡ç»˜ï¼Œå¹¶ä¸”ä»–ç»™äººçš„æ•ˆæœæ˜¯éšè—äº†ï¼Œæ‰€ä»¥ä»–è‡ªèº«çš„äº‹ä»¶ä¸æ”¯æŒï¼Œä»–éšè—åï¼Œè¢«é®æŒ¡ä½çš„å…ƒç´ ä¾ç„¶å¯ä»¥æ­£å¸¸çš„è§¦å‘å…¶è‡ªèº«äº‹ä»¶ã€‚</p><p><strong>å…¶å­å…ƒç´ ä»ç„¶å¯ä»¥è®¾ç½®visibleæ¥æ˜¾ç¤ºå‡ºæ¥</strong></p><p>ä¸€èˆ¬ç”¨ä½œè¾ƒä¸ºé¢‘ç¹çš„æ˜¾ç¤ºå’Œéšè—æ—¶ï¼Œå¯ä»¥ç”¨åˆ°ã€‚</p><h1 id="opacity-0"><a href="#opacity-0" class="headerlink" title="opacity:0;"></a><code>opacity:0;</code></h1><blockquote><p><code>opacity: 0/1;</code></p></blockquote><p>è¿™æ˜¯ä½¿ç”¨æµè§ˆå™¨é™ä½alphaæ•°å€¼æ¥è¾¾åˆ°éšè—çš„æ•ˆæœï¼Œå¯ä»¥è¯´æ˜¯å…ƒç´ æ­¤æ—¶è¿˜æ­£å¸¸ï¼Œåªæ˜¯æ­£å¥½é€æ˜äº†ï¼Œæˆ‘ä»¬çœ‹ä¸åˆ°è€Œå·²ï¼Œæ‰€ä»¥ä¸ä¼šå¼•å‘é‡æ’ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¹Ÿä¸ä¼šå¼•å‘é‡ç»˜ï¼Œç”±äºå…¶ä»ç„¶æ˜¯å­˜åœ¨äºé¡µé¢ä¸Šçš„ï¼Œæ‰€ä»¥ä»–è‡ªèº«çš„çš„äº‹ä»¶ä»ç„¶æ˜¯å¯ä»¥å‡ºå‘çš„ï¼Œä½†è¢«ä»–é®æŒ¡çš„å…ƒç´ æ˜¯ä¸èƒ½è§¦å‘å…¶äº‹ä»¶çš„ã€‚</p><p><strong>å…¶å­å…ƒç´ ä¸èƒ½è®¾ç½®opacityæ¥è¾¾åˆ°æ˜¾ç¤ºçš„æ•ˆæœ</strong></p><h1 id="ä¸‰ç§æ–¹å¼çš„å¯¹æ¯”"><a href="#ä¸‰ç§æ–¹å¼çš„å¯¹æ¯”" class="headerlink" title="ä¸‰ç§æ–¹å¼çš„å¯¹æ¯”"></a>ä¸‰ç§æ–¹å¼çš„å¯¹æ¯”</h1><table><thead><tr><th></th><th><code>display: none</code></th><th><code>visibility: hidden</code></th><th><code>opacity: 0</code></th></tr></thead><tbody><tr><td>é¡µé¢ä¸­</td><td>ä¸å­˜åœ¨</td><td>å­˜åœ¨</td><td>å­˜åœ¨</td></tr><tr><td>é‡æ’ï¼ˆreflowï¼‰</td><td>ä¼š</td><td>ä¸ä¼š</td><td>ä¸ä¼š</td></tr><tr><td>é‡ç»˜ï¼ˆpaintï¼‰</td><td>ä¼š</td><td>ä¼š</td><td>ä¸ä¸€å®š</td></tr><tr><td>è‡ªèº«ç»‘å®šäº‹ä»¶</td><td>ä¸è§¦å‘</td><td>ä¸è§¦å‘</td><td>å¯è§¦å‘</td></tr><tr><td>transition</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>å­å…ƒç´ å¯å¤åŸ</td><td>ä¸èƒ½</td><td>èƒ½</td><td>ä¸èƒ½</td></tr><tr><td>è¢«é®æŒ¡çš„å…ƒç´ å¯è§¦å‘äº‹ä»¶</td><td>èƒ½</td><td>èƒ½</td><td>ä¸èƒ½</td></tr><tr><td></td><td></td><td></td></tr></tbody></table>]]></content>
      
      
      
        <tags>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æ¯ä¸ªäººéƒ½å¯ä»¥å‘å…‰</title>
      <link href="/2020/06/11/%E6%AF%8F%E4%B8%AA%E4%BA%BA%E9%83%BD%E5%8F%AF%E4%BB%A5%E5%8F%91%E5%85%89/"/>
      <url>/2020/06/11/%E6%AF%8F%E4%B8%AA%E4%BA%BA%E9%83%BD%E5%8F%AF%E4%BB%A5%E5%8F%91%E5%85%89/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©ç»“æŸäº†å­—èŠ‚çš„3é¢+HRé¢,æ€»çš„æ¥è¯´ä½“éªŒè¿˜æ˜¯å¾ˆä¸é”™çš„ï¼Œé¦–å…ˆè¦æ€’å¤¸ä¸€æ³¢bytedance,åŠå…¬æ•ˆç‡çœŸçš„æ˜¯å¾ˆé«˜ï¼Œä¸€å…±ç”¨äº†4å¤©ã€‚</p><p>day1:æˆ‘å»å®˜ç½‘æŠ•äº†é¢è¯•ï¼Œå¾ˆå¿«æ”¶åˆ°äº†å­—èŠ‚çš„é‚®ä»¶å›å¤ï¼Œçœ‹æ ·å­åƒæ˜¯è‡ªåŠ¨å›å¤ï¼ˆå°šæœªè€ƒè¯è¿‡ï¼‰ä¸è¿‡ç½²åæ˜¯æ¥è‡ªå­—èŠ‚çš„äººåŠ›èµ„æºã€‚</p><p>day2:äººäº‹è”ç³»äº†æˆ‘ï¼Œï¼ˆæ²¡æƒ³åˆ°é‚£ä¹ˆå¿«ï¼Œé‚£æ—©è¿˜åœ¨åºŠä¸Šï¼Œçªç„¶æ”¶åˆ°ç”µè¯ï¼Œå·®ç‚¹ä»¥ä¸ºæ˜¯éªšæ‰°ç”µè¯æŒ‚äº†<code>010</code>å¼€å¤´ï¼‰å’Œæˆ‘çº¦äº†æ—¶é—´ï¼Œå¥¹çœ‹äº†ä¸‹å½“å¤©ä¸‹åˆï¼Œåº”è¯¥æ˜¯æ’æ»¡äº†ï¼Œäºæ˜¯å°±å®‰æ’äº†æˆ‘äºç¬¬äºŒå¤©ä¸‹åˆ14:00,å°±æ˜¯å‰ä¸€ç§’çš„ä½ è¿˜åœ¨åºŠä¸Šçœ‹<code>bilibili</code>çš„æ²™é›•è§†é¢‘ï¼Œä¸‹ä¸€ç§’ä½ å°±å¾—çŸ¥æ˜å¤©é¢è¯•äº†ã€‚</p><p>day3:ä¸‹åˆ13:50å¤šï¼Œé¢è¯•å®˜ä¹ŸåŸºæœ¬æå‰æ¥äº†,å½“å¤©æ°”æ°›è¿˜ç®—å¯ä»¥ï¼Œ1é¢+2é¢ï¼ˆäºŒé¢ä»£ç ï¼Œæ€è€ƒåå¤šï¼Œç»“æŸåè¿é¢è¯•å®˜éƒ½ä¸å¤ªè®°å¾—é•¿ä»€ä¹ˆæ ·äº†ï¼‰ï¼Œå½“å¤©åšåˆ°16ç‚¹ï¼Œç»“æŸåï¼Œä¹Ÿç®—æ˜¯ä¼‘æ¯ä¸€æ³¢ï¼Œhré€šçŸ¥æˆ‘ï¼Œä»Šå¤©æ—¶é—´å¯èƒ½æ¥ä¸åŠäº†ï¼Œäºæ˜¯çº¦åˆ°äº†ç¬¬äºŒå¤©ä¸‹åˆ16ç‚¹ã€‚</p><p>day4:13:59é¢è¯•å®˜è¿˜æ²¡åˆ°ï¼Œæ„Ÿåˆ°æœ‰ç‚¹ä¸å¯¹åŠ²ï¼Œäºæ˜¯çœ‹äº†ä¸‹æ‰‹æœºï¼Œå‘ç°hrä¹‹å‰å‘äº†çŸ­ä¿¡ï¼Œè¿˜æ‰“äº†ç”µè¯ç»™æˆ‘ï¼Œï¼ˆç”µè¯è¢«æˆ‘é™éŸ³äº†ï¼Œå‘œå‘œå‘œï¼ï¼‰åé¢hråœ¨ç”µè¯é‡Œå¾ˆæ˜¯æŠ±æ­‰ï¼Œè¡¨ç¤ºæœ‰ä¸€ä¸ªç´§æ€¥ä¼šè®®ï¼Œè€Œä¸”å£°éŸ³å¾ˆå§”å©‰ã€‚ï¼ˆåº”è¯¥ç”¨è¿™ä¸ªå½¢å®¹è¯å§ï¼‰ä¸ç¦è®©æˆ‘ä¸€æƒŠ<code>Î£(ã£ Â°Ğ” Â°;)ã£</code>ï¼Œå¯¹é¢åªæ˜¯ä¸€ä¸ªè¿˜ä¸çŸ¥é“çŠ¶å†µçš„å®ä¹ ç”Ÿï¼Œä¹Ÿèƒ½å¦‚æ­¤å°Šæ•¬ï¼Œåæ¥æˆ‘ä»¥ä¸ºè¦æ”¹æ—¶é—´äº†ï¼Œä½†æ˜¯ä»–è¯´æ¨è¿Ÿåˆ°1ä¸ªå°æ—¶å³å¯ï¼Œé‚£ä¹ˆä»Šå¤©è¿˜æ˜¯å¯ä»¥æ­£å¸¸è¿›è¡Œçš„ï¼Œè¿˜æ˜¯å¾ˆå¥½çš„ã€‚æœ€å3é¢+HRé¢ï¼Œç»“æŸä¹Ÿéƒ½18ç‚¹40å¤šäº†ã€‚æ€»çš„æ¥è¯´ï¼Œå­—èŠ‚è¿˜æ˜¯å¾ˆè®¤çœŸçš„ï¼Œè€Œä¸”é¢è¯•å®˜ä¹Ÿæ˜¯å¾ˆä¸é”™çš„ï¼ŒæŒºåƒåŒå­¦çš„ï¼Œå’Œä»–èŠå¤©ã€‚</p><p>æœ€ç»ˆç»“æœè¦ç­‰åˆ°ä¸‹å‘¨ä¸€ï¼Œæ•´ä¸ªè¿‡ç¨‹è¿˜æ˜¯æŒºæ„‰å¿«çš„ï¼ŒæŒºä¸é”™çš„ä¸€æ¬¡ä½“éªŒï¼Œä¸å¾—ä¸è¯´ï¼Œbytedanceæ•ˆç‡çœŸé«˜ï¼Œéš”å£é¢Tencentçš„åŒå­¦ä¸¤è½®é¢è¯•ä¹‹é—´å·®äº†2å‘¨å¤šã€‚</p><blockquote><p>ä»¥ä¸‹å’Œè‡ªå·±é¢è¯•æ²¡å…³ç³»ï¼Œå•çº¯æ˜¯äº†è§£æŠ–éŸ³æ—¶çš„ä¸€äº›æ„Ÿæƒ³ã€‚</p></blockquote><p>è¿˜æœ‰å°±æ˜¯è‡ªå·±å¯¹æŠ–éŸ³çš„ç†è§£å§ï¼Œä¹‹å‰ä¸€ç›´è®¤ä¸ºæŠ–éŸ³åœ¨æ¶ˆè€—äººçš„æ—¶é—´ï¼Œä¼—å¤šçŸ­è§†é¢‘å¹³å°é‡Œçš„ä½¼ä½¼è€…ï¼Œä¹Ÿå‡ ä¹æ²¡æœ‰æ€ä¹ˆç»†ç»†å»çœ‹è¿‡ï¼Œä½†æ˜¯å‰ä¸¤å¤©ï¼Œå½“æˆ‘æ‰“å¼€æŠ–éŸ³å®˜ç½‘æ—¶ï¼Œè¢«ä»–éœ‡ä½äº†ï¼Œçªç„¶æ„Ÿè§‰æŠ–éŸ³ä¸æ˜¯æˆ‘æƒ³è±¡çš„è½¯ä»¶ï¼Œ<strong>è®°å½•ç¾å¥½ç”Ÿæ´»</strong>çªç„¶é—´æœ‰äº†æ›´æ·±çš„æ„ä¹‰ï¼Œæˆ–è®¸æˆ‘ä»¬æ¯ä¸ªäººå¹¶æ²¡æœ‰é‚£æ ·åä¸½çš„å…‰ç¯ï¼Œå¤§å¤šæ•°éƒ½æ˜¯åœ¨è‡ªå·±çš„ç”Ÿæ´»ä¸­é»˜é»˜æ— é—»çš„å¥‰çŒ®ï¼Œé‚£ä¹ˆæ¯ä¸ªäººå°†è‡ªå·±å¹³å‡¡çš„ç”Ÿæ´»åšä¸€ä¸ªè®°å½•ï¼Œç•™ä¸‹äº›è®¸è®°å¿†çš„ç‰‡åˆ»ï¼Œä½•å°ä¸æ˜¯å¥½äº‹æƒ…å‘¢ï¼Œæˆ–è®¸ä¸–ç•Œè¿™ä¹ˆå¤§ï¼Œæ¯ä¸ªäººéƒ½æœ‰æ¯ä¸ªäººçš„ç”Ÿæ´»ï¼Œè‡ªå·±æ‰æ˜¯äººç”Ÿçš„ä¸»è§’ï¼ŒåŠªåŠ›å»è®°å¿†ï¼Œç­‰åˆ°ä»¥åå›å¿†æ—¶ï¼Œä¹Ÿä¼šæœ‰æŸç§ç‹¬ç‰¹çš„æ€ç»ªå§ï¼Œæˆ–è®¸è¿™æ‰æ˜¯ç§‘æŠ€åº”è¯¥ç»™äººå¸¦æ¥çš„ï¼Œè®°å½•æ¯ä¸ªäººå¹³å‡¡çš„ç”Ÿæ´»ï¼Œç”¨æ•°å­—çš„æ–¹å¼è®°å½•ä¸‹æ¥ï¼Œæ›¾å‡ ä½•æ—¶ï¼Œå†è®©æˆ‘ä»¬å›å¿†èµ·ï¼Œé‚£ä¹ˆä¹Ÿä¼šæœ‰ç€æŸç§æ€ç»ªä¸‡åƒçš„å›å¿†å§ã€‚</p><hr><p>å¾ˆå–œæ¬¢å®˜ç½‘çš„è¿™ä¸ªå®£ä¼ ç‰‡ï¼Œå€Ÿæ­¤æœºä¼šä¿å­˜ä¸‹æ¥ã€‚</p><video width="100%" controls><br>  <source src="/uploads/videos/2020/douyin-value.mp4"><br></video><p>å¦‚æœ‰å¹¸å…¥èŒå®ä¹ ï¼Œé‚£ä¹ˆè¿˜æ˜¯åŠ æ²¹äº†ï¼æå‡ºç‚¹ä¸œè¥¿æ¥ï¼</p>]]></content>
      
      
      
        <tags>
            
            <tag> å¿ƒæƒ… </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å‰ç«¯è·¨åŸŸ</title>
      <link href="/2020/06/10/%E5%89%8D%E7%AB%AF%E8%B7%A8%E5%9F%9F/"/>
      <url>/2020/06/10/%E5%89%8D%E7%AB%AF%E8%B7%A8%E5%9F%9F/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸ºä»€ä¹ˆä¼šæœ‰è·¨åŸŸ"><a href="#ä¸ºä»€ä¹ˆä¼šæœ‰è·¨åŸŸ" class="headerlink" title="ä¸ºä»€ä¹ˆä¼šæœ‰è·¨åŸŸ"></a>ä¸ºä»€ä¹ˆä¼šæœ‰è·¨åŸŸ</h1><p>åªè¦åè®®ã€åŸŸåã€ç«¯å£æœ‰ä»»ä½•ä¸€ä¸ªä¸åŒï¼Œéƒ½è¢«å½“ä½œæ˜¯ä¸åŒçš„åŸŸã€‚</p><p>æµè§ˆå™¨ä¸ºäº†å®‰å…¨è€ƒè™‘ï¼Œéšä¾¿ä½¿ç”¨ä»–äººçš„èµ„æºå¯èƒ½ä¼šå‘ç”Ÿå®‰å…¨é—®é¢˜ï¼Œæ‰€ä»¥ä¼šæœ‰è·¨åŸŸé—®é¢˜ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">URL                      è¯´æ˜       æ˜¯å¦å…è®¸é€šä¿¡</span><br><span class="line">http://www.a.com/a.js</span><br><span class="line">http://www.a.com/b.js     åŒä¸€åŸŸåä¸‹   å…è®¸</span><br><span class="line"></span><br><span class="line">http://www.a.com/lab/a.js</span><br><span class="line">http://www.a.com/script/b.js åŒä¸€åŸŸåä¸‹ä¸åŒæ–‡ä»¶å¤¹ å…è®¸</span><br><span class="line"></span><br><span class="line">http://www.a.com:8000/a.js</span><br><span class="line">http://www.a.com/b.js     åŒä¸€åŸŸåï¼Œä¸åŒç«¯å£  ä¸å…è®¸</span><br><span class="line"></span><br><span class="line">http://www.a.com/a.js</span><br><span class="line">https://www.a.com/b.js åŒä¸€åŸŸåï¼Œä¸åŒåè®® ä¸å…è®¸</span><br><span class="line"></span><br><span class="line">http://www.a.com/a.js</span><br><span class="line">http://70.32.92.74/b.js åŸŸåå’ŒåŸŸåå¯¹åº”ip ä¸å…è®¸</span><br><span class="line"></span><br><span class="line">http://www.a.com/a.js</span><br><span class="line">http://script.a.com/b.js ä¸»åŸŸç›¸åŒï¼Œå­åŸŸä¸åŒ ä¸å…è®¸ï¼ˆcookieè¿™ç§æƒ…å†µä¸‹ä¹Ÿä¸å…è®¸è®¿é—®ï¼‰</span><br><span class="line"></span><br><span class="line">http://www.a.com/a.js</span><br><span class="line">http://a.com/b.js åŒä¸€åŸŸåï¼Œä¸åŒäºŒçº§åŸŸåï¼ˆåŒä¸Šï¼‰ ä¸å…è®¸ï¼ˆcookieè¿™ç§æƒ…å†µä¸‹ä¹Ÿä¸å…è®¸è®¿é—®ï¼‰</span><br><span class="line"></span><br><span class="line">http://www.cnblogs.com/a.js</span><br><span class="line">http://www.a.com/b.js ä¸åŒåŸŸå ä¸å…è®¸</span><br></pre></td></tr></table></figure><h1 id="é‡åˆ°è·¨åŸŸé—®é¢˜çš„æƒ…å†µ"><a href="#é‡åˆ°è·¨åŸŸé—®é¢˜çš„æƒ…å†µ" class="headerlink" title="é‡åˆ°è·¨åŸŸé—®é¢˜çš„æƒ…å†µ"></a>é‡åˆ°è·¨åŸŸé—®é¢˜çš„æƒ…å†µ</h1><h2 id="æ“ä½œä¸åŒåŸŸçš„DOM"><a href="#æ“ä½œä¸åŒåŸŸçš„DOM" class="headerlink" title="æ“ä½œä¸åŒåŸŸçš„DOM"></a>æ“ä½œä¸åŒåŸŸçš„DOM</h2><p>ä½¿ç”¨iframeçš„æ—¶å€™ï¼Œå¤–éƒ¨iframeå¦‚æœå’Œé‡Œé¢æºsrcä¸ä¸€æ ·ï¼Œæ“ä½œèµ·æ¥å¯èƒ½ä¼šæœ‰é—®é¢˜</p><h2 id="è·å–ç½‘é¡µçš„å­˜å‚¨ä¿¡æ¯ï¼Œcookie-localStorage"><a href="#è·å–ç½‘é¡µçš„å­˜å‚¨ä¿¡æ¯ï¼Œcookie-localStorage" class="headerlink" title="è·å–ç½‘é¡µçš„å­˜å‚¨ä¿¡æ¯ï¼Œcookie, localStorage"></a>è·å–ç½‘é¡µçš„å­˜å‚¨ä¿¡æ¯ï¼Œcookie, localStorage</h2><p>åœ¨<code>www.baidu.com</code>åšäº†ç™»å½•ï¼Œä¿¡æ¯æ˜¯åœ¨<code>www.baidu.com</code>ä½†æ˜¯åœ¨<code>yun.baidu.com</code>ä¹Ÿå¯ä»¥è·å–åˆ°ç›¸åº”çš„ç™»å½•ä¿¡æ¯ã€‚</p><h2 id="è·å–æ•°æ®æ“ä½œ"><a href="#è·å–æ•°æ®æ“ä½œ" class="headerlink" title="è·å–æ•°æ®æ“ä½œ"></a>è·å–æ•°æ®æ“ä½œ</h2><p>æ•°æ®åœ°å€ä¸å‰ç«¯é¡µé¢ä¸åœ¨ä¸€ä¸ªåŸŸä¸‹ï¼Œå¯ä»¥å‘é€æ•°æ®ï¼Œå•å‡ºäºåŒæºè€ƒè™‘ï¼Œæµè§ˆå™¨ä¸ä¼šä½¿ç”¨æ•°æ®</p><h1 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h1><h2 id="æ“ä½œä¸åŒåŸŸçš„DOM-1"><a href="#æ“ä½œä¸åŒåŸŸçš„DOM-1" class="headerlink" title="æ“ä½œä¸åŒåŸŸçš„DOM"></a>æ“ä½œä¸åŒåŸŸçš„DOM</h2><p>åªéœ€è¦èƒ½ä¿è¯èƒ½å¤Ÿé€šè¿‡çˆ¶å­é¡µé¢ä¸­ï¼Œç›´æ¥æ“ä½œåˆ°å…¶htmlçš„å†…å®¹å³å¯</p><p>çˆ¶è·å–å­ï¼Œå¯ä»¥è·å–åˆ°iframeå<code>iframe.contentWindow</code></p><p>å­è·å–çˆ¶ï¼Œå¯ä»¥ç›´æ¥è®¿é—®parent<code>parent</code>å³ä¸ºçˆ¶çš„windowã€‚ï¼ˆå­çš„<code>window.parent</code>æ˜¯çˆ¶å…ƒç´ <code>window</code>ï¼‰</p><h3 id="ä½¿ç”¨document-domain"><a href="#ä½¿ç”¨document-domain" class="headerlink" title="ä½¿ç”¨document.domain"></a>ä½¿ç”¨<code>document.domain</code></h3><p><strong>ä¿®æ”¹document.domainçš„æ–¹æ³•åªé€‚ç”¨äºä¸åŒå­åŸŸçš„æ¡†æ¶é—´çš„äº¤äº’ã€‚</strong></p><p>æµè§ˆå™¨ä¸­ä¸åŒåŸŸçš„æ¡†æ¶ä¹‹é—´æ˜¯ä¸èƒ½è¿›è¡Œjsçš„äº¤äº’æ“ä½œçš„ã€‚ä¸åŒçš„æ¡†æ¶ä¹‹é—´æ˜¯å¯ä»¥è·å–windowå¯¹è±¡çš„ï¼Œä½†å´æ— æ³•è·å–ç›¸åº”çš„å±æ€§å’Œæ–¹æ³•ã€‚æ¯”å¦‚ï¼Œæœ‰ä¸€ä¸ªé¡µé¢ï¼Œå®ƒçš„åœ°å€æ˜¯<a href="http://www.damonare.cn/a.html" target="_blank" rel="noopener">http://www.damonare.cn/a.html</a> ï¼Œ åœ¨è¿™ä¸ªé¡µé¢é‡Œé¢æœ‰ä¸€ä¸ªiframeï¼Œå®ƒçš„srcæ˜¯<a href="http://damonare.cn/b.html" target="_blank" rel="noopener">http://damonare.cn/b.html</a>, å¾ˆæ˜¾ç„¶ï¼Œè¿™ä¸ªé¡µé¢ä¸å®ƒé‡Œé¢çš„iframeæ¡†æ¶æ˜¯ä¸åŒåŸŸçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ˜¯æ— æ³•é€šè¿‡åœ¨é¡µé¢ä¸­ä¹¦å†™jsä»£ç æ¥è·å–iframeä¸­çš„ä¸œè¥¿çš„ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> iframe = <span class="built_in">document</span>.getElementById(<span class="string">'ifame'</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> win = iframe.contentWindow;<span class="comment">//å¯ä»¥è·å–åˆ°iframeé‡Œçš„windowå¯¹è±¡ï¼Œä½†è¯¥windowå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•å‡ ä¹æ˜¯ä¸å¯ç”¨çš„</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> doc = win.document;<span class="comment">//è¿™é‡Œè·å–ä¸åˆ°iframeé‡Œçš„documentå¯¹è±¡</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> name = win.name;<span class="comment">//è¿™é‡ŒåŒæ ·è·å–ä¸åˆ°windowå¯¹è±¡çš„nameå±æ€§</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">id</span> = <span class="string">"iframe"</span> <span class="attr">src</span>=<span class="string">"http://damonare.cn/b.html"</span> <span class="attr">onload</span> = <span class="string">"test()"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åªè¦æŠŠ<a href="http://www.damonare.cn/a.html" target="_blank" rel="noopener">http://www.damonare.cn/a.html</a> å’Œ damonare.cn/b.html è¿™ä¸¤ä¸ªé¡µé¢çš„document.domainéƒ½è®¾æˆç›¸åŒçš„åŸŸåå°±å¯ä»¥äº†ã€‚ä½†è¦æ³¨æ„çš„æ˜¯ï¼Œdocument.domainçš„è®¾ç½®æ˜¯æœ‰é™åˆ¶çš„ï¼Œæˆ‘ä»¬åªèƒ½æŠŠdocument.domainè®¾ç½®æˆè‡ªèº«æˆ–æ›´é«˜ä¸€çº§çš„çˆ¶åŸŸï¼Œä¸”ä¸»åŸŸå¿…é¡»ç›¸åŒã€‚</p><p>åœ¨é¡µé¢<a href="http://www.damonare.cn/a.html" target="_blank" rel="noopener">http://www.damonare.cn/a.html</a> ä¸­è®¾ç½®document.domain:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">id</span> = <span class="string">"iframe"</span> <span class="attr">src</span>=<span class="string">"http://damonare.cn/b.html"</span> <span class="attr">onload</span> = <span class="string">"test()"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.domain = <span class="string">'damonare.cn'</span>;<span class="comment">//è®¾ç½®æˆä¸»åŸŸ</span></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        alert(<span class="built_in">document</span>.getElementById(<span class="string">'iframe'</span>).contentWindow);<span class="comment">//contentWindow å¯å–å¾—å­çª—å£çš„ window å¯¹è±¡</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨é¡µé¢<a href="http://damonare.cn/b.html" target="_blank" rel="noopener">http://damonare.cn/b.html</a> ä¸­ä¹Ÿè®¾ç½®document.domain:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.domain = <span class="string">'damonare.cn'</span>;<span class="comment">//åœ¨iframeè½½å…¥è¿™ä¸ªé¡µé¢ä¹Ÿè®¾ç½®document.domainï¼Œä½¿ä¹‹ä¸ä¸»é¡µé¢çš„document.domainç›¸åŒ</span></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="è·å–ç½‘é¡µçš„å­˜å‚¨ä¿¡æ¯ï¼Œcookie-localStorage-1"><a href="#è·å–ç½‘é¡µçš„å­˜å‚¨ä¿¡æ¯ï¼Œcookie-localStorage-1" class="headerlink" title="è·å–ç½‘é¡µçš„å­˜å‚¨ä¿¡æ¯ï¼Œcookie, localStorage"></a>è·å–ç½‘é¡µçš„å­˜å‚¨ä¿¡æ¯ï¼Œcookie, localStorage</h2><blockquote><p><a href="http://www.baiduåŸŸåä¸‹é¢ç™»å½•äº†ï¼Œå‘ç°yun.baiduåŸŸåä¸‹é¢ä¹Ÿè‡ªç„¶è€Œç„¶ç™»å½•äº†ï¼›æ·˜å®ç™»å½•äº†ï¼Œå‘ç°å¤©çŒ«ä¹Ÿç™»å½•äº†ï¼Œæ·˜å®å’Œå¤©çŒ«æ˜¯å®Œå…¨ä¸ä¸€æ ·çš„2ä¸ªåŸŸåã€‚" target="_blank" rel="noopener">www.baiduåŸŸåä¸‹é¢ç™»å½•äº†ï¼Œå‘ç°yun.baiduåŸŸåä¸‹é¢ä¹Ÿè‡ªç„¶è€Œç„¶ç™»å½•äº†ï¼›æ·˜å®ç™»å½•äº†ï¼Œå‘ç°å¤©çŒ«ä¹Ÿç™»å½•äº†ï¼Œæ·˜å®å’Œå¤©çŒ«æ˜¯å®Œå…¨ä¸ä¸€æ ·çš„2ä¸ªåŸŸåã€‚</a></p></blockquote><p>ç”¨æ¥ä¼ é€’ä¿¡æ¯çš„ï¼Œå› ä¸ºæœ‰è·¨åŸŸä¸èƒ½å»æ‹¿å…¶ä»–é¡µé¢å­˜å‚¨çš„å†…å®¹ï¼Œæ‰€ä»¥å¯ä»¥åœ¨ç›®æ ‡é¡µé¢ç”Ÿæˆä¸€ä¸ªiframeï¼ŒåŒ¹é…å­˜å‚¨å†…å®¹çš„srcï¼Œä¹‹åæ‹¿åˆ°æ•°æ®å‘å›ä¸»é¡µé¢å³å¯ã€‚</p><h3 id="ä½¿ç”¨location-hashæ¥è·¨åŸŸ"><a href="#ä½¿ç”¨location-hashæ¥è·¨åŸŸ" class="headerlink" title="ä½¿ç”¨location.hashæ¥è·¨åŸŸ"></a>ä½¿ç”¨location.hashæ¥è·¨åŸŸ</h3><p>hashæ˜¯æ˜æ–‡å­˜å‚¨çš„ï¼Œå­˜åœ¨ç›´æ¥æš´éœ²åœ¨urlä¸­ï¼Œæ•°æ®å®¹é‡å’Œç±»å‹éƒ½æœ‰é™ç­‰çš„é—®é¢˜ã€‚</p><blockquote><p>URLæœ‰ä¸€éƒ¨åˆ†è¢«ç§°ä¸ºhashï¼Œå°±æ˜¯#å·åŠå…¶åé¢çš„å­—ç¬¦ï¼Œå®ƒä¸€èˆ¬ç”¨äºæµè§ˆå™¨é”šç‚¹å®šä½ï¼ŒServerç«¯å¹¶ä¸å…³å¿ƒè¿™éƒ¨åˆ†ï¼Œåº”è¯¥è¯´HTTPè¯·æ±‚è¿‡ç¨‹ä¸­ä¸ä¼šæºå¸¦hashï¼Œæ‰€ä»¥è¿™éƒ¨åˆ†çš„ä¿®æ”¹ä¸ä¼šäº§ç”ŸHTTPè¯·æ±‚ï¼Œä½†æ˜¯ä¼šäº§ç”Ÿæµè§ˆå™¨å†å²è®°å½•ã€‚</p></blockquote><p>å‡å¦‚çˆ¶é¡µé¢æ˜¯baidu.com/a.html,iframeåµŒå…¥çš„é¡µé¢ä¸ºgoogle.com/b.htmlï¼ˆæ­¤å¤„çœç•¥äº†åŸŸåç­‰urlå±æ€§ï¼‰ï¼Œè¦å®ç°æ­¤ä¸¤ä¸ªé¡µé¢é—´çš„é€šä¿¡å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ³•ã€‚</p><ul><li>a.htmlä¼ é€æ•°æ®åˆ°b.html<ul><li>a.htmlä¸‹ä¿®æ”¹iframeçš„srcä¸ºgoogle.com/b.html#paco</li><li>b.htmlç›‘å¬åˆ°urlå‘ç”Ÿå˜åŒ–ï¼Œè§¦å‘ç›¸åº”æ“ä½œ</li></ul></li><li>b.htmlä¼ é€æ•°æ®åˆ°a.htmlï¼Œç”±äºä¸¤ä¸ªé¡µé¢ä¸åœ¨åŒä¸€ä¸ªåŸŸä¸‹IEã€Chromeä¸å…è®¸ä¿®æ”¹parent.location.hashçš„å€¼ï¼Œæ‰€ä»¥è¦å€ŸåŠ©äºçˆ¶çª—å£åŸŸåä¸‹çš„ä¸€ä¸ªä»£ç†iframe<ul><li>b.htmlä¸‹åˆ›å»ºä¸€ä¸ªéšè—çš„iframeï¼Œæ­¤iframeçš„srcæ˜¯baidu.comåŸŸä¸‹çš„ï¼Œå¹¶æŒ‚ä¸Šè¦ä¼ é€çš„hashæ•°æ®ï¼Œå¦‚src=â€<a href="http://www.baidu.com/proxy.html#â€¦&quot;" target="_blank" rel="noopener">www.baidu.com/proxy.html#â€¦&quot;</a></li><li>proxy.htmlç›‘å¬åˆ°urlå‘ç”Ÿå˜åŒ–ï¼Œä¿®æ”¹a.htmlçš„urlï¼ˆå› ä¸ºa.htmlå’Œproxy.htmlåŒåŸŸï¼Œæ‰€ä»¥proxy.htmlå¯ä¿®æ”¹a.htmlçš„url hashï¼‰</li><li>a.htmlç›‘å¬åˆ°urlå‘ç”Ÿå˜åŒ–ï¼Œè§¦å‘ç›¸åº”æ“ä½œ</li></ul></li></ul><p>å­é¡µé¢b.htmlå…³é”®å¦‚ä¸‹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;  </span><br><span class="line">    parent.location.hash = <span class="string">'data'</span>;  </span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;  </span><br><span class="line">    <span class="comment">// ieã€chromeçš„å®‰å…¨æœºåˆ¶æ— æ³•ä¿®æ”¹parent.location.hashï¼Œ  </span></span><br><span class="line">    <span class="keyword">var</span> ifrproxy = <span class="built_in">document</span>.createElement(<span class="string">'iframe'</span>);  </span><br><span class="line">    ifrproxy.style.display = <span class="string">'none'</span>;  </span><br><span class="line">    ifrproxy.src = <span class="string">"http://www.baidu.com/proxy.html#data"</span>;  </span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(ifrproxy);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>proxy.htmlå…³é”®å¦‚ä¸‹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å› ä¸ºparent.parentï¼ˆå³baidu.com/a.htmlï¼‰å’Œbaidu.com/proxy.htmlå±äºåŒä¸€ä¸ªåŸŸï¼Œæ‰€ä»¥å¯ä»¥æ”¹å˜å…¶location.hashçš„å€¼  </span></span><br><span class="line">parent.parent.location.hash = self.location.hash.substring(<span class="number">1</span>);</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨document-domain-1"><a href="#ä½¿ç”¨document-domain-1" class="headerlink" title="ä½¿ç”¨document.domain"></a>ä½¿ç”¨<code>document.domain</code></h3><p>å¦‚æœä¸¤ä¸ªé¢ä¸»åŸŸåå®Œå…¨ç›¸åŒï¼Œåˆ™ä½¿ç”¨è¯¥æ–¹æ³•å°±å¯ä»¥ï¼Œå’Œä¸Šé¢ä»‹ç»çš„æ–¹æ³•ä¸€æ ·</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// www.a.com</span></span><br><span class="line"><span class="built_in">document</span>.domain = <span class="string">'a.com'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// yun.a.com</span></span><br><span class="line"><span class="built_in">document</span>.domain = <span class="string">'a.com'</span></span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨postMessage"><a href="#ä½¿ç”¨postMessage" class="headerlink" title="ä½¿ç”¨postMessage"></a>ä½¿ç”¨<code>postMessage</code></h3><p>å¦‚æœä¸¤ä¸ªåŸŸåå®Œå…¨ä¸ç›¸åŒï¼Œå¯ä»¥ç”¨postMessageå’Œiframeç›¸ç»“åˆçš„æ–¹æ³•ã€‚postMessage(data,origin)æ–¹æ³•å…è®¸æ¥è‡ªä¸åŒæºçš„è„šæœ¬é‡‡ç”¨å¼‚æ­¥æ–¹å¼è¿›è¡Œé€šä¿¡ã€‚</p><p>postMessageçš„ä½¿ç”¨æ–¹æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">otherWindow.postMessage(message, targetOrigin);</span><br><span class="line"></span><br><span class="line">otherWindow:æŒ‡ç›®æ ‡çª—å£ï¼Œä¹Ÿå°±æ˜¯ç»™å“ªä¸ª<span class="built_in">window</span>å‘æ¶ˆæ¯ï¼Œæ˜¯ <span class="built_in">window</span>.frames å±æ€§çš„æˆå‘˜æˆ–è€…ç”± <span class="built_in">window</span>.open æ–¹æ³•åˆ›å»ºçš„çª—å£</span><br><span class="line">message:   æ˜¯è¦å‘é€çš„æ¶ˆæ¯ï¼Œç±»å‹ä¸º <span class="built_in">String</span>ã€<span class="built_in">Object</span> (IE8ã€<span class="number">9</span> ä¸æ”¯æŒ)</span><br><span class="line">targetOrigin:   æ˜¯é™å®šæ¶ˆæ¯æ¥æ”¶èŒƒå›´ï¼Œä¸é™åˆ¶è¯·ä½¿ç”¨ <span class="string">'*'</span></span><br></pre></td></tr></table></figure><p>æ¯”å¦‚damonare.cnåŸŸçš„Aé¡µé¢é€šè¿‡iframeåµŒå…¥äº†ä¸€ä¸ªgoogle.comåŸŸçš„Bé¡µé¢ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ³•å®ç°Aå’ŒBçš„é€šä¿¡ã€‚</p><h4 id="A-gt-Bå‘é€æ•°æ®"><a href="#A-gt-Bå‘é€æ•°æ®" class="headerlink" title="A-&gt;Bå‘é€æ•°æ®"></a>A-&gt;Bå‘é€æ•°æ®</h4><p>ä½¿ç”¨Aé¡µé¢é€šè¿‡postMessageå‘é€æ•°æ®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">var</span> ifr = <span class="built_in">document</span>.getElementById(<span class="string">'ifr'</span>);  </span><br><span class="line">    <span class="keyword">var</span> targetOrigin = <span class="string">"http://www.google.com"</span>;  </span><br><span class="line">    ifr.contentWindow.postMessage(<span class="string">'hello world!'</span>, targetOrigin);  </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>Bé¡µé¢é€šè¿‡messageäº‹ä»¶ç›‘å¬å¹¶æ¥å—æ¶ˆæ¯:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> onmessage = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;  </span><br><span class="line">  <span class="keyword">var</span> data = event.data;<span class="comment">//æ¶ˆæ¯  </span></span><br><span class="line">  <span class="keyword">var</span> origin = event.origin;<span class="comment">//æ¶ˆæ¯æ¥æºåœ°å€  </span></span><br><span class="line">  <span class="keyword">var</span> source = event.source;<span class="comment">//æºWindowå¯¹è±¡  </span></span><br><span class="line">  <span class="keyword">if</span>(origin==<span class="string">"http://www.baidu.com"</span>)&#123;  </span><br><span class="line">    <span class="built_in">console</span>.log(data);<span class="comment">//hello world!  </span></span><br><span class="line">  &#125;  </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤„ç†å…¼å®¹ï¼Œç»‘å®šäº‹ä»¶</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">window</span>.addEventListener != <span class="string">'undefined'</span>) &#123;  </span><br><span class="line">  <span class="built_in">window</span>.addEventListener(<span class="string">'message'</span>, onmessage, <span class="literal">false</span>);  </span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">window</span>.attachEvent != <span class="string">'undefined'</span>) &#123;  </span><br><span class="line">  <span class="comment">//for ie  </span></span><br><span class="line">  <span class="built_in">window</span>.attachEvent(<span class="string">'onmessage'</span>, onmessage);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="B-gt-Aå‘é€æ•°æ®"><a href="#B-gt-Aå‘é€æ•°æ®" class="headerlink" title="B-&gt;Aå‘é€æ•°æ®"></a>B-&gt;Aå‘é€æ•°æ®</h4><p>ä¸A-&gt;Bå‘é€æ•°æ®æ˜¯ç›¸åŒçš„</p><p>åœ¨å­é¡µé¢Bä¸­ï¼Œè¦åœ¨Bå†…æ“ä½œé€»è¾‘ï¼Œ<code>parent</code>å³ä¸ºçˆ¶å…ƒç´ Açš„window</p><p>Bå…ƒç´ å‘é€æ—¶<code>parent.postMessage(data, target)</code></p><p>Aå…ƒç´ æ¥æ”¶æ—¶<code>window.addEventListener(&#39;message&#39;, handle)</code>å³å¯ã€‚</p><h2 id="ä¸æœåŠ¡ç«¯æ‹‰å–æ•°æ®çš„"><a href="#ä¸æœåŠ¡ç«¯æ‹‰å–æ•°æ®çš„" class="headerlink" title="ä¸æœåŠ¡ç«¯æ‹‰å–æ•°æ®çš„"></a>ä¸æœåŠ¡ç«¯æ‹‰å–æ•°æ®çš„</h2><p>å‰ç«¯ç¯å¢ƒéƒ¨ç½²çš„æœåŠ¡å™¨åœ°å€ï¼Œä¸åç«¯ç¯å¢ƒçš„æ•°æ®åœ°å€å¹¶ä¸åœ¨åŒä¸€ä¸ªåœ°æ–¹ï¼Œæ‰€ä»¥æµè§ˆå™¨åœ¨è®¿é—®æ—¶å°±ä¼šé‡åˆ°è·¨åŸŸçš„é—®é¢˜ã€‚</p><h3 id="ä½¿ç”¨åå‘ä»£ç†"><a href="#ä½¿ç”¨åå‘ä»£ç†" class="headerlink" title="ä½¿ç”¨åå‘ä»£ç†"></a>ä½¿ç”¨åå‘ä»£ç†</h3><blockquote><p>å‰ç«¯å¼€å‘æ—¶ï¼Œå¯ä»¥é…ç½®webpackçš„ä»£ç†ã€‚å¤šç”¨äºå¼€å‘ç¯å¢ƒ</p></blockquote><p>è·¨åŸŸæ˜¯æµè§ˆå™¨ç«¯çš„ï¼ŒæœåŠ¡ç«¯å¹¶æ— æ­¤é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¼€å‘æ—¶çš„nodeä¸­è½¬ä¸€ä¸‹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mmodule.exports = &#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">  devServer: &#123;</span><br><span class="line">      proxy: &#123;</span><br><span class="line">          <span class="string">'/api'</span>: <span class="string">'http://localhost:3000'</span></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><code>fetch(&#39;/api/xxx&#39;)</code>ä¹Ÿå°±æ˜¯å¯¹è‡ªå·±å‘å‡ºè®¿é—®ï¼Œé€šè¿‡ä»£ç†èµ°ä¸€å±‚ã€‚</p><p>è¯·æ±‚åˆ° /api/xxx ç°åœ¨ä¼šè¢«ä»£ç†åˆ°è¯·æ±‚ <a href="http://localhost:3000/api/xxx" target="_blank" rel="noopener">http://localhost:3000/api/xxx</a>, ä¾‹å¦‚ /api/user ç°åœ¨ä¼šè¢«ä»£ç†åˆ°è¯·æ±‚ <a href="http://localhost:3000/api/user" target="_blank" rel="noopener">http://localhost:3000/api/user</a></p><h3 id="ä½¿ç”¨jsonp"><a href="#ä½¿ç”¨jsonp" class="headerlink" title="ä½¿ç”¨jsonp"></a>ä½¿ç”¨jsonp</h3><blockquote><p>jsonpå’Œajaxå¹¶æ— å…³ç³»ï¼Œæ˜¯ä¸¤ç§ä¸ä¸€æ ·çš„ä¸œè¥¿ï¼Œåªæ˜¯jQueryåšäº†å°è£…ï¼Œä½¿å¾—<code>$.ajax</code>å¯ä»¥åšjsonp</p></blockquote><p>jsonpéœ€è¦åç«¯æ¥é…åˆ,åªèƒ½ä½¿ç”¨ä¸€äº›ç®€å•çš„è¯·æ±‚ã€‚<strong>ä¾èµ–åç«¯é…åˆ</strong></p><p>æˆ‘ä»¬å®šä¹‰äº†ä½¿ç”¨è¿™ä¸ªæ•°æ®çš„æ–¹æ³•ï¼Œç­‰åˆ°è¿™ä¸ªæ•°æ®è¯·æ±‚æˆåŠŸåï¼Œè¿”å›ç»“æœå°±æ˜¯è°ƒç”¨æ–¹æ³•ï¼Œå¹¶ä¸”å‚æ•°å·²ç»æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœäº†ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">dosomething</span>(<span class="params">jsondata</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">//å¤„ç†è·å¾—çš„jsonæ•°æ®</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://example.com/data.php?callback=dosomething"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </span><br><span class="line"><span class="comment">&lt;!-- è¿”å›ç»“æœï¼Œdosomething(['a','b','c']);ä¸Šè¿°å‡½æ•°ä¼šè¢«ç›´æ¥è§¦å‘ --&gt;</span></span><br></pre></td></tr></table></figure><p>jQueryä¸­çš„å¤„ç†æ–¹æ³•ï¼Œå…¶å®ä»–åœ¨å†…éƒ¨ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œä»–åˆ›å»ºäº†ä¸ªä¸´æ—¶æ–¹æ³•ï¼Œå¹¶ä¸”åœ¨ä½¿ç”¨å®Œæ¯•ä¹‹åç«‹å³é”€æ¯äº†</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    $.getJSON(<span class="string">'http://example.com/data.php?callback=?,function(jsondata)'</span>)&#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">//å¤„ç†è·å¾—çš„jsonæ•°æ®</span></span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨CORS"><a href="#ä½¿ç”¨CORS" class="headerlink" title="ä½¿ç”¨CORS"></a>ä½¿ç”¨CORS</h3><p>è¿™ä¹Ÿæ˜¯ç›®å‰ä½¿ç”¨æœ€ä¸»æµçš„æ–¹å¼,<strong>ä¾èµ–åç«¯é…åˆ</strong>ã€‚</p><blockquote><p>CORSï¼ˆCross-Origin Resource Sharingï¼‰è·¨åŸŸèµ„æºå…±äº«ï¼Œå®šä¹‰äº†å¿…é¡»åœ¨è®¿é—®è·¨åŸŸèµ„æºæ—¶ï¼Œæµè§ˆå™¨ä¸æœåŠ¡å™¨åº”è¯¥å¦‚ä½•æ²Ÿé€šã€‚CORSèƒŒåçš„åŸºæœ¬æ€æƒ³å°±æ˜¯ä½¿ç”¨è‡ªå®šä¹‰çš„HTTPå¤´éƒ¨è®©æµè§ˆå™¨ä¸æœåŠ¡å™¨è¿›è¡Œæ²Ÿé€šï¼Œä»è€Œå†³å®šè¯·æ±‚æˆ–å“åº”æ˜¯åº”è¯¥æˆåŠŸè¿˜æ˜¯å¤±è´¥ã€‚ç›®å‰ï¼Œæ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒè¯¥åŠŸèƒ½ï¼ŒIEæµè§ˆå™¨ä¸èƒ½ä½äºIE10ã€‚æ•´ä¸ªCORSé€šä¿¡è¿‡ç¨‹ï¼Œéƒ½æ˜¯æµè§ˆå™¨è‡ªåŠ¨å®Œæˆï¼Œä¸éœ€è¦ç”¨æˆ·å‚ä¸ã€‚å¯¹äºå¼€å‘è€…æ¥è¯´ï¼ŒCORSé€šä¿¡ä¸åŒæºçš„AJAXé€šä¿¡æ²¡æœ‰å·®åˆ«ï¼Œä»£ç å®Œå…¨ä¸€æ ·ã€‚æµè§ˆå™¨ä¸€æ—¦å‘ç°AJAXè¯·æ±‚è·¨æºï¼Œå°±ä¼šè‡ªåŠ¨æ·»åŠ ä¸€äº›é™„åŠ çš„å¤´ä¿¡æ¯ï¼Œæœ‰æ—¶è¿˜ä¼šå¤šå‡ºä¸€æ¬¡é™„åŠ çš„è¯·æ±‚ï¼Œä½†ç”¨æˆ·ä¸ä¼šæœ‰æ„Ÿè§‰ã€‚<a href="http://www.ruanyifeng.com/blog/2016/04/cors.html" target="_blank" rel="noopener">è·¨åŸŸèµ„æºå…±äº« CORS è¯¦è§£</a></p></blockquote><p>ä¹Ÿå°±æ˜¯è¯´æµè§ˆå™¨ç”¨äº†å„ç§åŸå› é™åˆ¶äº†æˆ‘ä»¬ï¼Œæˆ‘ä»¬ç”¨å„ç§æ–¹æ³•ç»•è¿‡è·¨åŸŸæ£€æŸ¥ï¼Œä¹Ÿå¯ä»¥ä»æ­£é¢èµ°ï¼Œå°±æ˜¯è®©æµè§ˆå™¨çŸ¥é“è¿™ä¸ªæºï¼Œæˆ‘è·¨åŸŸäº†ï¼Œä½†æ˜¯ä»–å°±æ˜¯æˆ‘æƒ³è¦çš„ï¼Œä»–æ˜¯å®‰å…¨çš„ï¼Œè€Œä¸”æœåŠ¡ç«¯è¿”å›çš„åœ°å€é‡Œï¼Œä¹Ÿæœ‰å®¢æˆ·ç«¯çš„åœ°å€ï¼Œæ˜¯å¼€å‘äººå‘˜æŒ‡å®šçš„ï¼Œæˆ‘ä»¬å‘é€è¯·æ±‚å’Œä¹‹å‰å¹¶æ— å¼‚æ ·ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">xhr.open(<span class="string">"GET"</span>, <span class="string">"http://segmentfault.com/u/trigkit4/"</span>,<span class="literal">true</span>);</span><br><span class="line">xhr.send();</span><br></pre></td></tr></table></figure><p>å¦‚æœå‰ç«¯è¦å‘é€å‡­è¯(æºå¸¦<code>cookie</code>)æ—¶ï¼Œè®¾ç½®<code>withCredentials: true</code></p><blockquote><p>å¦‚æœè¦ä½¿ç”¨<code>withCredentials</code>ï¼ŒæœåŠ¡ç«¯è¯·æ±‚å¤´<code>Access-Control-Allow-Origin: ä¸èƒ½ä¸º*</code></p></blockquote><ul><li>xhrï¼š<code>xhr.withCredentials = true</code></li><li>fetch: <code>fetch(url, {credentials: &#39;include&#39;});</code></li></ul><p>æœåŠ¡ç«¯è¦é…ç½®<code>CORS</code>ç›¸å…³å¤´</p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a href="https://juejin.im/post/5815f4abbf22ec006893b431" target="_blank" rel="noopener">https://juejin.im/post/5815f4abbf22ec006893b431</a></p><p><a href="https://www.cnblogs.com/xjy20170907/p/11772416.html" target="_blank" rel="noopener">https://www.cnblogs.com/xjy20170907/p/11772416.html</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>BFCå—çŠ¶æ ¼å¼åŒ–åŒºåŸŸ</title>
      <link href="/2020/06/09/BFC%E5%9D%97%E7%8A%B6%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%8C%BA%E5%9F%9F/"/>
      <url>/2020/06/09/BFC%E5%9D%97%E7%8A%B6%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%8C%BA%E5%9F%9F/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯BFC"><a href="#ä»€ä¹ˆæ˜¯BFC" class="headerlink" title="ä»€ä¹ˆæ˜¯BFC"></a>ä»€ä¹ˆæ˜¯BFC</h1><p>BFCï¼ˆblock-fomatting-contextï¼‰æ˜¯ä¸€ç§cssæ¸²æŸ“è§„åˆ™ï¼Œè§„å®šäº†å…¶å†…éƒ¨å…ƒç´ çš„æ¸²æŸ“è§„å¾‹ï¼Œcss2.1è§„å®šäº†BFC,IFC,css3åˆè§„å®šäº†BFC,IFC,GFC,FFCã€‚</p><p>BFCå°±æ˜¯å—çº§çš„ä½œç”¨åŸŸã€‚GFCå°±æ˜¯gridä½œç”¨åŸŸã€‚IFCå°±æ˜¯å†…è”ä½œç”¨åŸŸã€‚FFCå°±æ˜¯flexä½œç”¨åŸŸã€‚</p><p>BFCå¯ä»¥ç†è§£ä¸ºä¸€ç§æ¸²æŸ“çš„ç‹¬ç«‹åŒºåŸŸï¼Œè§„å®šäº†å†…éƒ¨å¦‚ä½•æ¸²æŸ“ï¼Œå¹¶ä¸”ä¸å¤–éƒ¨ä¹Ÿæ¯«ä¸å…³è”ã€‚å¸¸ç”¨åœ¨ç‹¬ç«‹çš„å®šä½åŒºåŸŸï¼Œå¹¶å¤šä½™floatå…³è”ï¼ˆfloatä¹Ÿæ˜¯è¥é€ å‡ºBFCçš„ä¸€ç§æ–¹å¼ï¼‰</p><h1 id="BFCå†…éƒ¨ç‰¹æ€§å¦‚ä¸‹"><a href="#BFCå†…éƒ¨ç‰¹æ€§å¦‚ä¸‹" class="headerlink" title="BFCå†…éƒ¨ç‰¹æ€§å¦‚ä¸‹"></a>BFCå†…éƒ¨ç‰¹æ€§å¦‚ä¸‹</h1><ul><li>å†…éƒ¨çš„Boxä¼šåœ¨å‚ç›´æ–¹å‘ä¸Šä¸€ä¸ªæ¥ç€ä¸€ä¸ªæ”¾ç½®ã€‚</li><li>Boxå‚ç›´æ–¹å‘çš„è·ç¦»ç”± margin å†³å®šã€‚å±äºåŒä¸€ä¸ªBFCä¸­çš„ä¸¤ä¸ªç›¸é‚»çš„Boxä¸Šä¸‹marginä¼šå‘ç”Ÿå åŠ ã€‚</li><li>æ¯ä¸ªå…ƒç´ çš„margin box çš„å·¦è¾¹ï¼Œä¸åŒ…å«å—border box çš„å·¦è¾¹ç›¸æ¥è§¦ã€‚å³ä½¿æµ®åŠ¨ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</li><li>BFC çš„åŒºåŸŸä¸ä¼šä¸float box é‡å ã€‚</li><li>BFCå°±æ˜¯é¡µé¢ä¸Šçš„ä¸€ä¸ªéš”ç¦»çš„ç‹¬ç«‹å®¹å™¨ï¼Œå®¹å™¨é‡Œé¢çš„å­å…ƒç´ ä¸ä¼šå½±å“å¤–é¢çš„å…ƒç´ ï¼Œåä¹‹ä¹Ÿå¦‚æ­¤ã€‚</li><li>è®¡ç®—BFCçš„é«˜åº¦æ—¶ï¼Œæµ®åŠ¨å…ƒç´ ä¹Ÿå‚ä¸è®¡ç®—ã€‚</li></ul><p>ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬çš„BFCç¯å¢ƒä¸­ï¼Œä»–çš„è®¡ç®—éƒ½æ˜¯ç‹¬ç«‹å‡ºæ¥çš„ï¼Œä¸å¤–éƒ¨çš„BFCåŒºåŸŸè¾¹ç•Œæ¥è§¦ã€‚å¹¶ä¸”å†…éƒ¨ä¸å¤–éƒ¨ä¸ç›¸äº’å½±å“ã€‚</p><h1 id="è¥é€ å‡ºBFCç¯å¢ƒçš„å‡ ç§æ–¹å¼"><a href="#è¥é€ å‡ºBFCç¯å¢ƒçš„å‡ ç§æ–¹å¼" class="headerlink" title="è¥é€ å‡ºBFCç¯å¢ƒçš„å‡ ç§æ–¹å¼"></a>è¥é€ å‡ºBFCç¯å¢ƒçš„å‡ ç§æ–¹å¼</h1><ul><li><code>position</code>:absoluteæˆ–è€…fixedã€‚</li><li><code>float</code>:ä¸æ˜¯noneã€‚</li><li><code>overflow</code>: ä¸æ˜¯visibleã€‚</li><li><code>display</code>: inline-boxæˆ–è€…flex</li><li>æ ¹å…ƒç´ <code>&lt;html&gt;</code></li></ul><h1 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h1><h2 id="å³ä¸‹è§’å¹¿å‘Š"><a href="#å³ä¸‹è§’å¹¿å‘Š" class="headerlink" title="å³ä¸‹è§’å¹¿å‘Š"></a>å³ä¸‹è§’å¹¿å‘Š</h2><p>è·Ÿéšå±å¹•ç§»åŠ¨ï¼Œè®¾ç½®å…¶<code>position: fixed</code>å½¢æˆäº†ä¸€ä¸ªBFCï¼Œå¯å¯¹å†…å¸ƒå±€ã€‚</p><h2 id="æµ®åŠ¨åŒºåŸŸ"><a href="#æµ®åŠ¨åŒºåŸŸ" class="headerlink" title="æµ®åŠ¨åŒºåŸŸ"></a>æµ®åŠ¨åŒºåŸŸ</h2><p>leftä¸rightä¸¤ä¸ªå…ƒç´ ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œå°†leftè®¾ç½®ä¸ºBFC(float)é‚£ä¹ˆå¦‚æœrightçš„é«˜åº¦ç‰¹åˆ«å¤§ï¼Œrightå…ƒç´ ä¼šç¯ç»•åœ¨leftçš„å››å‘¨ï¼Œè¿™ä¹Ÿæ˜¯floatæœ€åˆçš„è®¾è®¡ï¼Œæ–‡å­—æ’ç‰ˆä¸­åšå›¾ç‰‡ç¯ç»•çš„åŠŸèƒ½ã€‚å¦‚æœå°†rightä¹Ÿè®¾ç½®ä¸ºBFC(float)é‚£ä¹ˆä¸¤ä¸ªå…ƒç´ çš„è¾¹ç•Œæ‰ä¼šæŒ¨åœ¨ä¸€èµ·ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">  .float-wrapper &#123;</span></span><br><span class="line"><span class="undefined">    border: 2px solid red;</span></span><br><span class="line"><span class="undefined">    overflow: auto;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">  .left &#123;</span></span><br><span class="line"><span class="undefined">    float: left;</span></span><br><span class="line"><span class="undefined">    background: yellowgreen;</span></span><br><span class="line"><span class="undefined">    width: 50px;</span></span><br><span class="line"><span class="undefined">    height: 50px;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">  .right &#123;</span></span><br><span class="line"><span class="undefined">    float: left;</span></span><br><span class="line"><span class="undefined">    background: hotpink;</span></span><br><span class="line"><span class="undefined">    height: 100px;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"float-wrapper"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span>left<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span>right<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="æ¸…é™¤æµ®åŠ¨"><a href="#æ¸…é™¤æµ®åŠ¨" class="headerlink" title="æ¸…é™¤æµ®åŠ¨"></a>æ¸…é™¤æµ®åŠ¨</h2><p>å½“å…¶å†…éƒ¨å…ƒç´ éƒ½ä¸ºfloatæ—¶ï¼Œä¼šé€ æˆé«˜åº¦å¡Œé™·ï¼Œå› ä¸ºæˆ‘ä»¬çš„BFCæ˜¯ç‹¬ç«‹çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä¸ºçˆ¶å…ƒç´ è®¾ç½®ä¸ºBFCï¼Œè§£å†³æ¸…é™¤æµ®åŠ¨ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">.wrapper &#123; overflow: auto; &#125;</span></span><br><span class="line"><span class="undefined">.box &#123; float: left; width: 50px; height: 50px; &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrapper"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="è§£å†³marginæ— æ•ˆçš„é—®é¢˜"><a href="#è§£å†³marginæ— æ•ˆçš„é—®é¢˜" class="headerlink" title="è§£å†³marginæ— æ•ˆçš„é—®é¢˜"></a>è§£å†³marginæ— æ•ˆçš„é—®é¢˜</h2><p>åŒä¸€ä¸ªBFCå†…ï¼Œä¼šå‡ºç°marginåˆå¹¶çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åŒºåŸŸå†…è¥é€ å‡ºä»–è‡ªå·±çš„BFCç¯å¢ƒï¼Œä¸å¤–ç•Œéš”ç¦»å³å¯ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">  .box &#123;</span></span><br><span class="line"><span class="undefined">    width: 50px;</span></span><br><span class="line"><span class="undefined">    height: 50px;</span></span><br><span class="line"><span class="undefined">    margin: 50px 0;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">  .wrapper &#123;</span></span><br><span class="line"><span class="undefined">    overflow: auto;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- marginå‡ºç°é‡åˆ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- marginæ¢å¤ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrapper"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrapper"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="å…¶ä»–-åœ£æ¯å¸ƒå±€"><a href="#å…¶ä»–-åœ£æ¯å¸ƒå±€" class="headerlink" title="å…¶ä»–-åœ£æ¯å¸ƒå±€"></a>å…¶ä»–-åœ£æ¯å¸ƒå±€</h1><p>æŒ‰ç…§è§£æé¡ºåºï¼Œcenteråœ¨å‰ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"center"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¼šä½¿ç”¨åˆ°<code>margin-left: -100px;</code>ä»–ä¼šå‘å·¦å»èµ°ï¼Œå¦‚æœè¿™ä¸ªå…ƒç´ ä¹‹å‰è¢«æŒ¤ä¸‹æ¥äº†ï¼Œé‚£ä¹ˆä»–ä¼šåˆä¸Šå»ã€‚</p><p>ä½¿ç”¨<code>padding: 0 100px</code>ç„¶ååœ¨å°†å…ƒç´ æµ®åŠ¨åˆ°ä½ç½®ï¼Œä½¿ç”¨<code>position</code>ä¹‹åï¼Œå®šä½åˆ°ç©ºç¼ºé‡Œï¼Œå®ç°å·¦å³ä¸¤ä¾§å›ºå®šã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">  header, footer &#123;</span></span><br><span class="line"><span class="undefined">    background: hotpink;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">  .wrapper &#123;</span></span><br><span class="line"><span class="undefined">    padding: 0 50px;</span></span><br><span class="line"><span class="undefined">    overflow: auto;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">  .center &#123;</span></span><br><span class="line"><span class="undefined">    float: left;</span></span><br><span class="line"><span class="undefined">    width: 100%;</span></span><br><span class="line"><span class="undefined">    background: yellowgreen;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">  .left &#123;</span></span><br><span class="line"><span class="undefined">    position: relative;</span></span><br><span class="line"><span class="undefined">    float: left;</span></span><br><span class="line"><span class="undefined">    left: -50px;</span></span><br><span class="line"><span class="undefined">    width: 50px;</span></span><br><span class="line"><span class="undefined">    margin-left: -100%;</span></span><br><span class="line"><span class="undefined">    background: deeppink;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">  .right &#123;</span></span><br><span class="line"><span class="undefined">    position: relative;</span></span><br><span class="line"><span class="undefined">    right: -50px;</span></span><br><span class="line"><span class="undefined">    float: left;</span></span><br><span class="line"><span class="undefined">    width: 50px;</span></span><br><span class="line"><span class="undefined">    margin-left: -50px;</span></span><br><span class="line"><span class="undefined">    background: deeppink;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"> </span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">header</span>&gt;</span>header<span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrapper"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"center"</span>&gt;</span>center<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span>left<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span>right<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">footer</span>&gt;</span>footer<span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æœ¬èº«ä½¿ç”¨<code>float</code>+<code>margin-left: -50px</code>å°±å¯ä»¥å®ç°ï¼Œä½†æ˜¯ä¼šè¦†ç›–ä½<code>center</code>æ‰€ä»¥ï¼Œè®¾ç½®äº†<code>wrapper</code>çš„ä¸¤ä¾§çš„<code>padding</code>,å¹¶ä¸”å°†å…¶å‘ä¸¤ä¾§å®šä½å³å¯ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æ¨¡æ‹Ÿasyncè‡ªæ‰§è¡Œå‡½æ•°</title>
      <link href="/2020/06/07/%E6%A8%A1%E6%8B%9Fasync%E8%87%AA%E6%89%A7%E8%A1%8C%E5%87%BD%E6%95%B0/"/>
      <url>/2020/06/07/%E6%A8%A1%E6%8B%9Fasync%E8%87%AA%E6%89%A7%E8%A1%8C%E5%87%BD%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="å›é¡¾generatorå‡½æ•°"><a href="#å›é¡¾generatorå‡½æ•°" class="headerlink" title="å›é¡¾generatorå‡½æ•°"></a>å›é¡¾generatorå‡½æ•°</h1><p>generatorå‡½æ•°æ˜¯ç”¨æ¥å¤„ç†å¼‚æ­¥ç¼–ç¨‹çš„è§£å†³æ–¹æ¡ˆï¼Œå®ƒä½¿å¾—ä¸€ä¸ªå‡½æ•°å¯ä»¥æš‚æ—¶ç¦»å¼€å½“å‰çš„æ‰§è¡Œæ ˆï¼Œå¹¶å°†å‡½æ•°çš„æ‰§è¡Œæƒäº¤ç”±å¤–éƒ¨å»å¤„ç†ã€‚</p><p><code>next</code>æ–¹æ³•ï¼Œæ‰‹åŠ¨è·å–å½“å‰çš„æ‰§è¡Œæƒ…å†µï¼Œ<code>next()</code>æ–¹æ³•çš„è¿”å›å€¼ï¼Œæ˜¯yieldçš„å³ä¾§å†…å®¹ï¼Œè€Œ<code>next(param)</code>å‚æ•°paramåˆ™æ˜¯ä¼ é€’ç»™generatorå‡½æ•°ä¸­è¢«yieldæŒ‚èµ·çš„å·¦ä¾§è¿”å›å€¼ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">generator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> data1 = <span class="keyword">yield</span> <span class="number">2</span></span><br><span class="line">  <span class="keyword">const</span> data2 = <span class="keyword">yield</span> data1 + <span class="number">1</span></span><br><span class="line">  <span class="keyword">return</span> data2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* æ‰§è¡Œæƒ…å†µ1 */</span></span><br><span class="line"><span class="keyword">const</span> gen = generator()</span><br><span class="line">gen.next() <span class="comment">// &#123; value: 2, done: false &#125; å‡½æ•°ä»å¤´å¼€å§‹ï¼Œåœåœ¨åœ¨yield 2å³å¤„</span></span><br><span class="line">gen.next() <span class="comment">// &#123; value: NaN, done: false &#125; å‡½æ•°ä»yield 2 å·¦ä¾§å¼€å§‹ï¼Œå¹¶è¿”å›undefined, åœåœ¨yield data1 + 1 </span></span><br><span class="line">gen.next() <span class="comment">// &#123; value: NaN, done: true &#125; å‡½æ•°ä»yield data1 + 1 å·¦ä¾§å¼€å§‹ å¹¶è¿”å›undefined åœåœ¨æ‰§è¡Œå®Œå‡½æ•°return</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* æ‰§è¡Œæƒ…å†µ2 */</span></span><br><span class="line"><span class="keyword">const</span> gen = generator()</span><br><span class="line">gen.next() <span class="comment">// &#123; value: 2, done: false &#125; å‡½æ•°ä»å¤´å¼€å§‹ï¼Œåœåœ¨åœ¨yield 2å³å¤„</span></span><br><span class="line">gen.next(<span class="number">8</span>) <span class="comment">// &#123; value: 9, done: false &#125; å‡½æ•°ä»yield 2 å·¦ä¾§å¼€å§‹ï¼Œå¹¶è¿”å›8, åœåœ¨yield data1 + 1 </span></span><br><span class="line">gen.next(<span class="number">2</span>) <span class="comment">// &#123; value: 2, done: true &#125; å‡½æ•°ä»yield data1 + 1 å·¦ä¾§å¼€å§‹, å¹¶è¿”å›2, åœåœ¨æ‰§è¡Œå®Œå‡½æ•°return</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºgeneratorè®¾è®¡å¹¶ä¸æ˜¯å°†yieldå³ä¾§å†…å®¹ï¼Œå¼‚æ­¥å¤„ç†å®Œæ¯•åè§£æç»™å·¦ä¾§ï¼Œä»–æ˜¯è®©ä½ æ¥å¤„ç†ï¼Œåªä¸è¿‡å¤§å¤šæ•°æƒ…å†µæˆ‘ä»¬éƒ½å°†å¤„ç†çš„ç»“æœè¿”å›yield,é€ æˆäº†ä¸€ç§å‡è±¡ï¼Œå¹¶ä¸”å…¶å®ç›´æ¥è¿”å›å†…å®¹ç»™yieldæ­£æ˜¯æˆ‘ä»¬çš„æœ¬æ„</p><p><code>for-of</code>å¾ªç¯å¯ä»¥åœ¨doneä¸ºfalseçš„æƒ…å†µä¸‹ï¼Œä¸æ–­æ‰§è¡Œï¼Œä½¿ç”¨generatoræ‰§è¡Œfibonacci</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">fibonacci</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> [pre, cur] = [<span class="number">0</span>, <span class="number">1</span>];</span><br><span class="line">  <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    [pre, cur] = [cur, pre + cur];</span><br><span class="line">    <span class="keyword">yield</span> cur</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> n <span class="keyword">of</span> fibonacci()) &#123;</span><br><span class="line">  <span class="keyword">if</span> (n &gt; <span class="number">100</span>) &#123;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(n) <span class="comment">// 1 ... 89</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å®ç°ä¸€ä¸ªasync-awaitçš„å®ç°"><a href="#å®ç°ä¸€ä¸ªasync-awaitçš„å®ç°" class="headerlink" title="å®ç°ä¸€ä¸ªasync/awaitçš„å®ç°"></a>å®ç°ä¸€ä¸ª<code>async/await</code>çš„å®ç°</h1><blockquote><p><code>async/await</code>æ˜¯<code>generator</code>å‡½æ•°çš„ä¸€ä¸ªè¯­æ³•ç³–</p></blockquote><h2 id="ç›®çš„"><a href="#ç›®çš„" class="headerlink" title="ç›®çš„"></a>ç›®çš„</h2><p>ä½¿ç”¨<code>async/await</code>é‡å†™ä¾‹å­</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">asyncFunc</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> data1 = <span class="keyword">await</span> <span class="number">2</span></span><br><span class="line">  <span class="keyword">const</span> data2 = <span class="keyword">await</span> data1 + <span class="number">1</span></span><br><span class="line">  <span class="keyword">return</span> data2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">asyncFunc().then(<span class="function"><span class="params">val</span> =&gt;</span> <span class="built_in">console</span>.log(val)) <span class="comment">// 3</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æœŸæœ›é€šè¿‡å°è£…ä¹‹åèƒ½å¤Ÿå®ç°<code>async/await</code>ç±»ä¼¼çš„æ•ˆæœ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> asyncFunc = asyncToGenerator(<span class="function"><span class="keyword">function</span>* <span class="title">generator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> data1 = <span class="keyword">yield</span> <span class="number">2</span></span><br><span class="line">  <span class="keyword">const</span> data2 = <span class="keyword">yield</span> data1 + <span class="number">1</span></span><br><span class="line">  <span class="keyword">return</span> data2</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">asyncFunc().then(<span class="function"><span class="params">val</span> =&gt;</span> <span class="built_in">console</span>.log(val)) <span class="comment">// 3</span></span><br></pre></td></tr></table></figure><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><p>å¦‚æœå®ç°ä¸²å¼ï¼Œéœ€è¦ä½¿ç”¨åˆ°Promise,æ ¸å¿ƒå†…å®¹ä¸ºï¼Œå¦‚æœå½“å‰<code>next</code>æœªæ‰§è¡Œå®Œæ¯•ï¼Œåˆ™åœ¨ä¸‹ä¸€ä¸ª<code>promise.then</code>ä¸­ç»§ç»­è°ƒç”¨next(),ä¹Ÿå³æˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªPromiseï¼Œçœç•¥äº†generatorä¸­è‹¥å¹²å¯æ§åˆ¶çš„yield,åªå°†ä»–çš„è¿”å›å€¼å–å‡ºæ¥äº†ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">asyncToGenerator</span>(<span class="params">generatorFunc</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">...args</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> gen = generatorFunc.apply(<span class="keyword">this</span>, args)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="function"><span class="keyword">function</span> <span class="title">step</span>(<span class="params">key, arg</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> generatorResult</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          generatorResult = gen[key](arg)</span><br><span class="line">        &#125; <span class="keyword">catch</span>(error) &#123;</span><br><span class="line">          <span class="keyword">return</span> reject(error)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">const</span> &#123; value, done &#125; = generatorResult</span><br><span class="line">        <span class="keyword">if</span> (done) &#123;</span><br><span class="line">          <span class="keyword">return</span> resolve(value)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(value).then(<span class="function"><span class="params">val</span> =&gt;</span> step(<span class="string">'next'</span>,val), err =&gt; step(<span class="string">'throw'</span>,err))</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// å¼€å¯ä»»åŠ¡</span></span><br><span class="line">      step(<span class="string">'next'</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">calcFunc</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> x = <span class="keyword">yield</span> num * <span class="number">2</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(x);</span><br><span class="line">  <span class="keyword">const</span> y = <span class="number">3</span> * (<span class="keyword">yield</span> x + <span class="number">1</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(y);</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> gen = asyncToGenerator(calcFunc)</span><br><span class="line">gen(<span class="number">2</span>).then(<span class="function"><span class="params">val</span> =&gt;</span> <span class="built_in">console</span>.log(val)); <span class="comment">// 16</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>jsä¸­å¸¸ç”¨ç»§æ‰¿æ–¹å¼</title>
      <link href="/2020/06/06/js%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%BB%A7%E6%89%BF%E6%96%B9%E5%BC%8F/"/>
      <url>/2020/06/06/js%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%BB%A7%E6%89%BF%E6%96%B9%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ç»§æ‰¿èƒ½å¤Ÿå®ç°ï¼Œæ˜¯å› ä¸ºå¯¹è±¡æ‰¾å±æ€§ï¼Œå¦‚æœæ‰¾ä¸åˆ°ä¼šä¸€ç›´é¡ºç€åŸå‹é“¾èµ°ä¸‹å»ï¼Œç›´åˆ°æ‰¾åˆ°nullä¸ºä¹‹ã€‚</p></blockquote><h1 id="åŸå‹é“¾ç»§æ‰¿"><a href="#åŸå‹é“¾ç»§æ‰¿" class="headerlink" title="åŸå‹é“¾ç»§æ‰¿"></a>åŸå‹é“¾ç»§æ‰¿</h1><p>å°†åŸå‹æŒ‡å‘ä¸€ä¸ªåˆ›å»ºçš„æ–°çš„çˆ¶å¯¹è±¡</p><p>ä¼˜ç‚¹ï¼šå¯ä»¥è®¿é—®çˆ¶å¯¹è±¡çš„æ‰€æœ‰æ–¹æ³•<br>ç¼ºç‚¹ï¼š1.çˆ¶å¯¹è±¡çš„æ•°æ®ä¼šè¢«æ‰€ä»¥å­ç±»å…±äº«ï¼Œ2.æ— æ³•å‘æ„é€ å‡½æ•°å†…ä¼ å‚</p><p>å¦‚æœä¸ºå­ç±»æ”¹åŸå‹ä¹‹åï¼Œè¦ä¿®æ”¹å¥½ä¹‹åå†å»æ·»åŠ åŸå‹ä¸Šçš„æ–¹æ³•ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Parent</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.names = [<span class="string">'kevin'</span>, <span class="string">'daisy'</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">Child.prototype = <span class="keyword">new</span> Parent();</span><br><span class="line"> </span><br><span class="line"><span class="keyword">let</span> child1 = <span class="keyword">new</span> Child();</span><br><span class="line"> </span><br><span class="line">child1.names.push(<span class="string">'yayu'</span>);</span><br><span class="line"> </span><br><span class="line"><span class="built_in">console</span>.log(child1.names); <span class="comment">// ["kevin", "daisy", "yayu"]</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">let</span> child2 = <span class="keyword">new</span> Child();</span><br><span class="line"> </span><br><span class="line"><span class="built_in">console</span>.log(child2.names); <span class="comment">// ["kevin", "daisy", "yayu"]</span></span><br></pre></td></tr></table></figure><h1 id="ç±»å¼ç»§æ‰¿ï¼Œæ„é€ å™¨ç»§æ‰¿ï¼Œç»å…¸ç»§æ‰¿"><a href="#ç±»å¼ç»§æ‰¿ï¼Œæ„é€ å™¨ç»§æ‰¿ï¼Œç»å…¸ç»§æ‰¿" class="headerlink" title="ç±»å¼ç»§æ‰¿ï¼Œæ„é€ å™¨ç»§æ‰¿ï¼Œç»å…¸ç»§æ‰¿"></a>ç±»å¼ç»§æ‰¿ï¼Œæ„é€ å™¨ç»§æ‰¿ï¼Œç»å…¸ç»§æ‰¿</h1><p>åˆ©ç”¨åˆ›å»ºå¯¹è±¡æ—¶ï¼Œ<em>åŒes6ä¸­ç±»çš„constructä¸­thisçš„ç‰¹æ€§</em>,ä¹Ÿå³æœ€ç»ˆè¿”å›çš„ç»“æœä¼šæ˜¯çœŸæ­£åˆ›å»ºå‡ºæ¥</p><p>ä»–é¿å…äº†åŸå‹ç»§æ‰¿çš„å¤§éƒ¨åˆ†ç¼ºç‚¹ï¼Œå¹¶ä¸”ç­‰äºå°†çˆ¶ç±»â€™æ„é€ å™¨â€˜å€Ÿç”¨äº†è‡ªå·±ä¸€ä¸‹ã€‚</p><p>ä¼˜ç‚¹ï¼š1.é¿å…å­ç±»æ‰€æœ‰å±æ€§å…±äº«ã€‚2.å¯ä»¥å‘æ„é€ å™¨å†…ä¼ å‚<br>ç¼ºç‚¹ï¼š1.ä¸èƒ½è®¿é—®çˆ¶ç±»åŸå‹æ–¹æ³•ã€‚2.åªæ˜¯ä½¿ç”¨ä¸€ä¸‹çˆ¶ç±»åŸå‹ï¼Œä½†æ˜¯æ¯ä¸€æ¬¡éƒ½è¦é‡æ–°åˆ›å»ºçˆ¶ç±»</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Parent</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">  Parent.call(<span class="keyword">this</span>, name);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> child1 = <span class="keyword">new</span> Child(<span class="string">'kevin'</span>);</span><br><span class="line"> </span><br><span class="line"><span class="built_in">console</span>.log(child1.name); <span class="comment">// kevin</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> child2 = <span class="keyword">new</span> Child(<span class="string">'daisy'</span>);</span><br><span class="line"> </span><br><span class="line"><span class="built_in">console</span>.log(child2.name); <span class="comment">// daisy</span></span><br></pre></td></tr></table></figure><h1 id="ç»„åˆç»§æ‰¿"><a href="#ç»„åˆç»§æ‰¿" class="headerlink" title="ç»„åˆç»§æ‰¿"></a>ç»„åˆç»§æ‰¿</h1><p>åŸå‹é“¾ç»§æ‰¿ + ç±»å¼ç»§æ‰¿</p><p>åŸå‹ç»§æ‰¿é‡ç‚¹å…³æ³¨äº†åŸå‹éƒ¨åˆ†ï¼Œç±»å¼ç»§æ‰¿é‡ç‚¹å…³æ³¨äº†å®ä¾‹éƒ¨åˆ†ï¼Œå°†ä»–ä»¬è¿›è¡Œä¸€æ¬¡ç»„åˆ</p><p>ä¼˜ç‚¹ï¼š1.ä¸èƒ½è®¿é—®çˆ¶ç±»åŸå‹æ–¹æ³•ã€‚2.é¿å…å­ç±»æ‰€æœ‰å±æ€§å…±äº«ã€‚3.å¯ä»¥å‘æ„é€ å™¨å†…ä¼ å‚<br>ç¼ºç‚¹ï¼š1.åªæ˜¯ä½¿ç”¨ä¸€ä¸‹çˆ¶ç±»åŸå‹ï¼Œä½†æ˜¯æ¯ä¸€æ¬¡éƒ½è¦é‡æ–°åˆ›å»ºçˆ¶ç±»ï¼Œè°ƒç”¨2æ¬¡ï¼Œåˆ›å»ºå®ä¾‹ä¸€æ¬¡ï¼Œç»‘å®šåŸå‹ä¸€æ¬¡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Parent</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.colors = [<span class="string">'red'</span>, <span class="string">'blue'</span>, <span class="string">'green'</span>];</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">Parent.prototype.getName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child</span> (<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  Parent.call(<span class="keyword">this</span>, name);</span><br><span class="line">   </span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">Child.prototype = <span class="keyword">new</span> Parent();</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> child1 = <span class="keyword">new</span> Child(<span class="string">'kevin'</span>, <span class="string">'18'</span>);</span><br><span class="line"> </span><br><span class="line">child1.colors.push(<span class="string">'black'</span>);</span><br><span class="line"> </span><br><span class="line"><span class="built_in">console</span>.log(child1.name); <span class="comment">// kevin</span></span><br><span class="line"><span class="built_in">console</span>.log(child1.age); <span class="comment">// 18</span></span><br><span class="line"><span class="built_in">console</span>.log(child1.colors); <span class="comment">// ["red", "blue", "green", "black"]</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> child2 = <span class="keyword">new</span> Child(<span class="string">'daisy'</span>, <span class="string">'20'</span>);</span><br><span class="line"> </span><br><span class="line"><span class="built_in">console</span>.log(child2.name); <span class="comment">// daisy</span></span><br><span class="line"><span class="built_in">console</span>.log(child2.age); <span class="comment">// 20</span></span><br><span class="line"><span class="built_in">console</span>.log(child2.colors); <span class="comment">// ["red", "blue", "green"]</span></span><br></pre></td></tr></table></figure><h1 id="åŸå‹å¼ç»§æ‰¿"><a href="#åŸå‹å¼ç»§æ‰¿" class="headerlink" title="åŸå‹å¼ç»§æ‰¿"></a>åŸå‹å¼ç»§æ‰¿</h1><p>åˆ›å»ºå¯¹è±¡æ—¶ï¼Œç›´æ¥ä»¥æŸä¸ªå¯¹è±¡ä¸ºåŸå‹æŒ‚è½½ï¼Œå’ŒåŸå‹é“¾ç»§æ‰¿ç›¸ä¼¼ï¼Œåªä¸è¿‡æˆ‘ä»¬å¹¶æ²¡æœ‰æä¾›æ„é€ å‡½æ•°ã€‚</p><p>ä»–å’ŒåŸå‹é“¾ç»§æ‰¿çš„åŒºåˆ«æ˜¯ï¼š</p><ul><li>åŸå‹é“¾ç»§æ‰¿ï¼Œæœ‰æ„é€ å‡½æ•°ï¼Œæ”¹å˜<code>prototype</code></li><li>åŸå‹å¼ç»§æ‰¿ï¼Œæ— æ„é€ å‡½æ•°ï¼Œå†…éƒ¨åˆ›å»ºä¸€ä¸ªç©ºæ„é€ å‡½æ•°ï¼Œç›´æ¥æ›¿æ¢<code>prototype</code>,åªå…³å¿ƒä»¥æŸä¸ªå¯¹è±¡ä¸ºåŸå‹çš„åˆ›å»ºã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// es6å®˜æ–¹å®ç°</span></span><br><span class="line"><span class="built_in">Object</span>.create()</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨å†…éƒ¨æ‰‹åŠ¨åˆ›å»ºäº†æ„é€ å™¨</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createObj</span>(<span class="params">proto</span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">  F.prototype = proto</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> F()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¼˜ç‚¹ï¼š1.å¯ä»¥ä½¿ç”¨åŸå‹é“¾çš„æ–¹æ³•ã€‚2.åˆ›å»ºèµ·æ¥æ¯”è¾ƒç®€å•ã€‚<br>ç¼ºç‚¹ï¼š1.ä¼šå…±äº«çˆ¶å¯¹è±¡æ–¹æ³•ï¼Œä½†ä¸ä¸€å®šä¼šæ”¹å˜</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">  name: <span class="string">'kevin'</span>,</span><br><span class="line">  friends: [<span class="string">'daisy'</span>, <span class="string">'kelly'</span>]</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">let</span> person1 = createObj(person);</span><br><span class="line"><span class="keyword">let</span> person2 = createObj(person);</span><br><span class="line"> </span><br><span class="line">person1.name = <span class="string">'person1'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(person2.name); <span class="comment">// kevin</span></span><br><span class="line"> </span><br><span class="line">person1.friends.push(<span class="string">'taylor'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(person2.friends); <span class="comment">// ["daisy", "kelly", "taylor"]</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œä¸€å®šè¦æ³¨æ„<code>.</code>æ“ä½œç¬¦ï¼Œå¦‚æœä»–æ²¡æœ‰è¯¥å±æ€§ï¼Œä¼šè¿›è¡Œæ·»åŠ ï¼Œç„¶åè¿›è¡Œä¿®æ”¹çš„è¯æ˜¯ä¸ä¼šå‘ç”Ÿæ”¹å˜çš„ã€‚</p><p>æ‰€ä»¥ï¼Œä¿®æ”¹<code>person1.name</code>çš„å€¼ï¼Œ<code>person2.name</code>çš„å€¼å¹¶æœªå‘ç”Ÿæ”¹å˜ï¼Œå¹¶ä¸æ˜¯å› ä¸º<code>person1</code>å’Œ<code>person2</code>æœ‰ç‹¬ç«‹çš„ <code>name</code> å€¼ï¼Œè€Œæ˜¯å› ä¸º<code>person1.name = &#39;person1&#39;</code>ï¼Œç»™<code>person1</code>æ·»åŠ äº†<code>name</code>å€¼ï¼Œå¹¶éä¿®æ”¹äº†åŸå‹ä¸Šçš„<code>name</code>å€¼ã€‚</p><p>åŒæ ·ï¼Œå¦‚æœæ˜¯<code>person1.friends = [ xxx ]</code>è¿™æ ·ä»¥åå†ä¿®æ”¹ï¼Œä¹Ÿæ˜¯ä¸ä¼šå½±å“åˆ°åŸå‹ä¸Šçš„æ–¹æ³•çš„ã€‚</p><h1 id="å¯„ç”Ÿå¼ç»§æ‰¿"><a href="#å¯„ç”Ÿå¼ç»§æ‰¿" class="headerlink" title="å¯„ç”Ÿå¼ç»§æ‰¿"></a>å¯„ç”Ÿå¼ç»§æ‰¿</h1><p>å’ŒåŸå‹å¼ç»§æ‰¿å¾ˆåƒï¼Œåªæ˜¯å¢æ·»äº†ä¸€äº›æ–¹æ³•ï¼Œç±»ä¼¼äºåŒ…è£…äº†ä¸€å±‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createObj</span>(<span class="params">o</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> clone = <span class="built_in">Object</span>.create(o)</span><br><span class="line">  clone.sayName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'hi'</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> clone</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿"><a href="#å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿" class="headerlink" title="å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿"></a>å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿</h1><p>ä»–æ˜¯ç»“åˆäº†ä¸Šè¿°çš„ä¼˜ç‚¹ï¼Œåªæ˜¯æˆ‘ä»¬å†ä½¿ç”¨ç»§æ‰¿æ—¶ï¼Œä¸€èˆ¬ä¸ä¼šå¸Œæœ›å­ç±»å»å…±äº«çˆ¶ç±»çš„æ–¹æ³•ï¼Œï¼ˆæœ‰çš„è¯ï¼Œå°±ä½¿ç”¨ç»„åˆç»§æ‰¿ï¼‰æ‰€ä»¥ä¼šåˆ›å»ºå¾ˆå¤šå¯¹è±¡ï¼Œå…¶åŸå‹ä¸Šå¯èƒ½ä¼šæœ‰ä¸€äº›ç”¨ä¸åˆ°çš„å¯¹è±¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç”¨ç»„åˆç»§æ‰¿å°±å¯ä»¥é¿å…</p><p>ä¼˜ç‚¹ï¼š1.å¯ä»¥è®¿é—®çˆ¶ç±»åŸå‹ã€‚2.é¿å…å…±äº«çˆ¶ç±»æ•°æ®ã€‚3.å¯ä»¥è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ä¼ å‚ã€‚4.å…å»åŸå‹ä¸Šä¸å¿…è¦çš„å±æ€§ã€‚</p><p>å°±æ˜¯åœ¨ç»„åˆç»§æ‰¿çš„åŸºç¡€ä¸Šï¼Œé¿å…ç›´æ¥<code>prototype = new Xxx()</code>,è€Œæ˜¯é‡‡ç”¨è¿‚å›çš„æ–¹å¼ã€‚</p><p>æœ€ç»ˆParentä¸Šçš„å±æ€§ï¼Œé€šè¿‡ç±»å¼ç»§æ‰¿ï¼Œå€Ÿç»™å­ç±»ï¼Œç­‰äºç›´æ¥å˜æˆäº†å­ç±»çš„å±æ€§ï¼Œè€Œåœ¨åŸå‹ä¸Šï¼Œç”±äºå¹¶æ²¡æœ‰newæ“ä½œï¼Œæ‰€ä»¥ä¹Ÿå¹¶ä¸ä¼šå°†Parentä¸Šçš„éƒ¨åˆ†æ— ç”¨å±æ€§æŒ‚è½½åˆ°åŸå‹ä¸Šã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Parent</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.colors = [<span class="string">'red'</span>, <span class="string">'blue'</span>, <span class="string">'green'</span>];</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">Parent.prototype.getName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child</span> (<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  Parent.call(<span class="keyword">this</span>, name);</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">inheritPrototype</span>(<span class="params">subObj, supperObj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> prototype = <span class="built_in">Object</span>.create(supperObj.prototype)</span><br><span class="line">  prototype.constructor = subObj</span><br><span class="line">  prototype.constructor.prototype = prototype</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">inheritPrototype(Child, Parent)</span><br></pre></td></tr></table></figure><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p>(<a href="https://www.cnblogs.com/lanyueff/p/7792009.html)[https://www.cnblogs.com/lanyueff/p/7792009.html]" target="_blank" rel="noopener">https://www.cnblogs.com/lanyueff/p/7792009.html)[https://www.cnblogs.com/lanyueff/p/7792009.html]</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>è‡´2å¹´å‰çš„è‡ªå·±</title>
      <link href="/2020/06/04/%E8%87%B42%E5%B9%B4%E5%89%8D%E7%9A%84%E8%87%AA%E5%B7%B1/"/>
      <url>/2020/06/04/%E8%87%B42%E5%B9%B4%E5%89%8D%E7%9A%84%E8%87%AA%E5%B7%B1/</url>
      
        <content type="html"><![CDATA[<p><img src="/img/2020/06/05/bear.png" alt="bear"></p><p>2å¹´å‰çš„è‡ªå·±åº”è¯¥æ˜¯åœ¨å‡†å¤‡é«˜è€ƒäº†ï¼Œä»Šå¹´å—åˆ°ç–«æƒ…å½±å“æœ‰æ‰€æ¨è¿Ÿï¼Œåº”è¯¥æ˜¯åˆ°7æœˆä»½äº†ã€‚ä»Šå¤©å’ŒåŒå­¦èŠäº†èŠäººç”Ÿï¼Œæ„Ÿè§‰ä¸çŸ¥ä¸è§‰å¤§å®¶ä¹Ÿéƒ½å¼€å§‹è€ƒè™‘äººç”Ÿäº†ï¼Œåè§‚è‡ªå·±ï¼Œè¿™é‡Œä¸€è·¯èµ°æ¥è¿˜æ˜¯å¾—ä»¥æœ‰çˆ¶æ¯èƒ½ä¸€ç›´æ”¯æŒä¸é¼“åŠ±æˆ‘ã€‚æ•™è‚²çœŸçš„å¾ˆé‡è¦ï¼Œä¸€å®šä¸èƒ½å°çœ‹äº†ä»–çš„ä½œç”¨ï¼Œä¸ä»…æ˜¯æ•™æˆä¸€ä¸ªäººçŸ¥è¯†ï¼Œæ›´æ˜¯çº¦æŸä¸€ä¸ªäººåœ¨æ­£ç¡®æ—¶é—´å¹²æ­£ç¡®çš„äº‹ï¼Œå¸Œæœ›çˆ¶æ¯ä¸€åˆ‡å®‰å¥½ï¼Œä¹Ÿç»™è‡ªå·±æ‰“æ°”ï¼ŒåŠ æ²¹ï¼</p>]]></content>
      
      
      
        <tags>
            
            <tag> å¿ƒæƒ… </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æ ‡å‡†Packageæ‰“åŒ…æ–¹å¼</title>
      <link href="/2020/05/31/%E6%A0%87%E5%87%86Package%E6%89%93%E5%8C%85%E6%96%B9%E5%BC%8F/"/>
      <url>/2020/05/31/%E6%A0%87%E5%87%86Package%E6%89%93%E5%8C%85%E6%96%B9%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å‰åŠéƒ¨åˆ†æ˜¯father-buildï¼Œåéƒ¨åˆ†æ˜¯æ‰“åŒ…éœ€è¦æ³¨æ„çš„éƒ¨åˆ†</p></blockquote><p>ä½¿ç”¨<a href="https://github.com/umijs/father/tree/2.x" target="_blank" rel="noopener">father-build</a>æ‰“åŒ…</p><p>å…·ä½“å¯å‚è€ƒ<a href="https://github.com/search?q=redux&amp;ref=opensearch" target="_blank" rel="noopener">redux</a>çš„åŒ…ç®¡ç†ï¼Œæ˜¯ä¸€ä¸ªç›¸å¯¹æ¯”è¾ƒè§„èŒƒçš„åŒ…ç®¡ç†ä»“åº“(<a href="https://unpkg.com/browse/redux@4.0.1/" target="_blank" rel="noopener">unpkg</a>)</p><h1 id="ä½¿ç”¨æ–¹å¼"><a href="#ä½¿ç”¨æ–¹å¼" class="headerlink" title="ä½¿ç”¨æ–¹å¼"></a>ä½¿ç”¨æ–¹å¼</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…æ–¹å¼</span></span><br><span class="line">yarn add father-build -D</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨æ–¹å¼</span></span><br><span class="line"><span class="string">"build"</span>: <span class="string">"father-build"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åº”è¯¥ä¸ºåœ¨å½“å‰ç›®å½•ä¸‹å®‰è£…ä¾èµ–åç›´æ¥ä½¿ç”¨</span></span><br><span class="line">father-build</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ­¤å¤„ä¸ºäº†èŠ‚çœnode_modulesï¼Œå‡å®‰è£…åœ¨äº†ä¸Šä¸€çº§ç›®å½•</span></span><br><span class="line">../node_modules/.bin/father-build</span><br></pre></td></tr></table></figure><h1 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h1><p><code>.fatherrc.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// rollupï¼ˆæ¨èï¼‰</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  entry: <span class="string">'src/index.js'</span>,</span><br><span class="line">  esm: &#123;</span><br><span class="line">    type: <span class="string">'rollup'</span>,</span><br><span class="line">    mjs: <span class="literal">true</span>, <span class="comment">// å¼€å¯mjs</span></span><br><span class="line">  &#125;,</span><br><span class="line">  cjs: <span class="string">'rollup'</span>,</span><br><span class="line">  umd: &#123;</span><br><span class="line">    name: <span class="string">'demo'</span>, <span class="comment">// æš´éœ²å…¨å±€çš„åç§°</span></span><br><span class="line">    minFile: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦æ‰“å‡ºumd.min</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// babel</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  entry: <span class="string">'src/index.js'</span>,</span><br><span class="line">  esm: &#123;</span><br><span class="line">    type: <span class="string">'babel'</span>,</span><br><span class="line">    mjs: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  cjs: <span class="string">'babel'</span>,</span><br><span class="line">  umd: &#123;</span><br><span class="line">    name: <span class="string">'demo'</span>,</span><br><span class="line">    minFile: <span class="literal">true</span>,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ³¨æ„åŒ…åç§°"><a href="#æ³¨æ„åŒ…åç§°" class="headerlink" title="æ³¨æ„åŒ…åç§°"></a>æ³¨æ„åŒ…åç§°</h1><ul><li>ç›®å½•åç§°</li><li>package.jsonåç§°</li><li>package.jsonç‰ˆæœ¬</li></ul><h1 id="åŒ…æŒ‡å‘"><a href="#åŒ…æŒ‡å‘" class="headerlink" title="åŒ…æŒ‡å‘"></a>åŒ…æŒ‡å‘</h1><ul><li>main(cjs)</li><li>module(esm)</li><li>unpkg(umd)</li></ul><h1 id="åŒ…å«çš„æ–‡ä»¶"><a href="#åŒ…å«çš„æ–‡ä»¶" class="headerlink" title="åŒ…å«çš„æ–‡ä»¶"></a>åŒ…å«çš„æ–‡ä»¶</h1><p>package.json</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"files"</span>: [</span><br><span class="line">    <span class="string">"dist/"</span>,</span><br><span class="line">    <span class="string">"lib/"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å‘åŒ…å‰æ£€æŸ¥"><a href="#å‘åŒ…å‰æ£€æŸ¥" class="headerlink" title="å‘åŒ…å‰æ£€æŸ¥"></a>å‘åŒ…å‰æ£€æŸ¥</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm pack</span><br></pre></td></tr></table></figure><h1 id="å‘å¸ƒ"><a href="#å‘å¸ƒ" class="headerlink" title="å‘å¸ƒ"></a>å‘å¸ƒ</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm publish</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ä½¿ç”¨requestIdleCallbackè°ƒåº¦ä»»åŠ¡</title>
      <link href="/2020/05/27/%E4%BD%BF%E7%94%A8requestIdleCallback%E8%B0%83%E5%BA%A6%E4%BB%BB%E5%8A%A1/"/>
      <url>/2020/05/27/%E4%BD%BF%E7%94%A8requestIdleCallback%E8%B0%83%E5%BA%A6%E4%BB%BB%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ"><a href="#ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ" class="headerlink" title="ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ"></a>ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ</h1><h2 id="æ“ä½œç³»ç»Ÿä¸­è°ƒåº¦"><a href="#æ“ä½œç³»ç»Ÿä¸­è°ƒåº¦" class="headerlink" title="æ“ä½œç³»ç»Ÿä¸­è°ƒåº¦"></a>æ“ä½œç³»ç»Ÿä¸­è°ƒåº¦</h2><p>æ“ä½œç³»ç»Ÿä¸­ï¼ŒåŸºäºæ—¶é—´ç‰‡è°ƒåº¦æ—¶ï¼Œå¦‚æœåˆ°äº†æ—¶é—´è¯¥ç¨‹åºè¿˜æ²¡æœ‰è¿è¡Œå®Œæ¯•ï¼Œé‚£ä¹ˆæ­¤æ—¶ä¼šæœ‰ä¸­æ–­ï¼Œå°†è¯¥ç¨‹åºçš„ç›¸å…³è¿è¡Œä½ç½®ï¼Œä»¥åŠä¸Šä¸‹æ–‡ç¯å¢ƒç­‰å­˜å…¥ç›¸å…³çš„å¯„å­˜å™¨ä¸­ï¼Œä¹‹åè¿›è¡Œæ¢å¤</p><h2 id="æµè§ˆå™¨ä¸­è°ƒåº¦"><a href="#æµè§ˆå™¨ä¸­è°ƒåº¦" class="headerlink" title="æµè§ˆå™¨ä¸­è°ƒåº¦"></a>æµè§ˆå™¨ä¸­è°ƒåº¦</h2><p>æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­ï¼Œä¹Ÿå¯ä»¥è¿‘ä¼¼çš„æ¨¡æ‹Ÿå‡ºè°ƒåº¦ç®—æ³•ï¼Œä½†æ˜¯jsç¨‹åºå¿…é¡»è‡ªå·±å®ˆæ—¶ï¼Œå¦‚æœåˆ°äº†æ—¶é—´ä¸è‡ªå·±é€€å‡ºï¼Œæˆ–è€…æ˜¯é•¿æ—¶é—´å ç”¨ä¸»çº¿ç¨‹ï¼Œé‚£ä¹ˆå¡é¡¿æ˜¯å¿…ç„¶çš„ï¼Œæ‰€ä»¥åœ¨æµè§ˆå™¨ä¸­å¿…é¡»æ¥æ‰‹åŠ¨å°½å¯èƒ½çš„æ§åˆ¶ç¨‹åºçš„è¿è¡Œã€‚</p><h1 id="æµè§ˆå™¨ä¸­ç›®å‰æä¾›çš„æ–¹å¼"><a href="#æµè§ˆå™¨ä¸­ç›®å‰æä¾›çš„æ–¹å¼" class="headerlink" title="æµè§ˆå™¨ä¸­ç›®å‰æä¾›çš„æ–¹å¼"></a>æµè§ˆå™¨ä¸­ç›®å‰æä¾›çš„æ–¹å¼</h1><p>åœ¨ä¸€ä¸ªEventLoopï¼Œå¦‚æœå½“å‰è¿™ä¸ªå¾ªç¯éœ€è¦æ›´æ–°ï¼Œjsä»£ç -requestAnimationFrame-UIæ¸²æŸ“(layout, paint)-requestIdleCallback(0ä¸ªæˆ–å¤šä¸ª)-macroTask</p><h2 id="requestIdleCallback"><a href="#requestIdleCallback" class="headerlink" title="requestIdleCallback"></a>requestIdleCallback</h2><p>å½“æµè§ˆå™¨è¿è¡Œæ—¶ï¼Œä¸»çº¿ç¨‹æœ‰ç©ºé—²çš„æ—¶é—´ï¼Œé‚£ä¹ˆå°±ä¼šå»è¿è¡Œä»£ç ï¼Œä½†æ˜¯æµè§ˆå™¨ç©ºé—²ä¸‹æ¥ï¼Œè°ä¹Ÿä¸èƒ½ä¿è¯æ¥ä¸‹æ¥æµè§ˆå™¨ä¼šå‘ç”Ÿä»€ä¹ˆï¼Œä¼šä¸ä¼šæœ‰ä¼˜å…ˆçº§æ›´é«˜çš„ä»»åŠ¡è¿›æ¥,å¦‚ç”¨æˆ·ç‚¹å‡»çš„äº¤äº’äº‹ä»¶ï¼Œæˆ–è€…æ˜¯åŠ¨ç”»äº‹ä»¶,ç›¸å…³çš„ç ”ç©¶å‘ç°ï¼Œäººåœ¨50mså†…æ˜¯ä¸å¤ªå®¹æ˜“å¯Ÿè§‰å‡ºå˜åŒ–æ¥çš„ï¼Œæ‰€ä»¥å¦‚æœå½“å‰çº¿ç¨‹ç©ºé—²ï¼ˆç”¨æˆ·ä¸æ“ä½œï¼Œæˆ–è€…å½“å‰å¹¶æ²¡ä»€ä¹ˆæ“ä½œè¿›è¡Œï¼‰å½“å‰requestIdleCallbackä¼šè®¾å®š<code>&lt;50ms</code>æ‰§è¡Œæ—¶é—´ã€‚</p><p>requestIdleCallback(fn, timeout?)</p><ul><li>fnæœ€ç»ˆå›è°ƒæ‰§è¡Œ<code>fn(deadline)</code>,<code>deadline.timeoutæ˜¯å¦è¶…æ—¶</code>,<code>deadline.timeRemaining()</code>å‰©ä½™æ—¶é—´ï¼Œ&gt;=0, åˆ°0è¡¨ç¤ºå·²ç»æ‰§è¡Œè¶…æ—¶äº†ã€‚</li><li>timeout,è¡¨ç¤ºè¶…æ—¶æ—¶é—´ï¼Œå› ä¸º<code>rIC</code>å¹¶ä¸ä¸€å®šä¼šæ‰§è¡Œï¼Œå¦‚æœæµè§ˆå™¨é•¿æ—¶é—´å¿™ç¢Œï¼Œé‚£ä¹ˆä»–ä¼šåœ¨timeoutè¶…æ—¶ä¸‹å¼ºåˆ¶æ‰§è¡Œ</li></ul><h2 id="Reactçš„polyfill"><a href="#Reactçš„polyfill" class="headerlink" title="Reactçš„polyfill"></a>Reactçš„<code>polyfill</code></h2><blockquote><p><a href="mailto:`React@16.6.x" target="_blank" rel="noopener">`React@16.6.x</a>`</p></blockquote><p>Reactå›¢é˜Ÿè€ƒè™‘åˆ°æµè§ˆå™¨å…¼å®¹é—®é¢˜ï¼Œå¹¶æ²¡æœ‰ä½¿ç”¨<code>rIC</code>,è€Œæ˜¯ä½¿ç”¨<code>rAF</code>+<code>setTimeout</code>æ¥è¿›è¡Œ<code>polyfill</code></p><ul><li><code>rAF,requestAnimationFrame</code>ç”¨æ¥åœ¨æ¯ä¸ªæ¸²æŸ“æ—¶ï¼Œå‘å‡ºæ‰§è¡Œçš„ä¿¡å·</li></ul><p>å¹¶ä¸”å…¶è°ƒåŠ¨callbackæ—¶ï¼Œä¼šä¼ å…¥ç±»ä¼¼å½“å‰<code>performace.now</code>ï¼Œä»–ä½¿ç”¨è®¡ç®—å±å¹•çš„åˆ·æ–°ç‡ï¼ˆå¤šæ¬¡<code>rAF</code>é—´éš”ï¼‰è®¡ç®—å‡ºä¸‹ä¸€æ¬¡æ¸²æŸ“çš„<code>deadline</code>å½“ç„¶è¿™é‡ŒåŒ…æ‹¬äº†UIçº¿ç¨‹çš„æ—¶é—´ï¼Œ<code>deadline</code>ä¸å½“å‰æ—¶é—´<code>now</code>å¯è¿‘ä¼¼ç®—å‡ºï¼Œè¿™ä¸€å¸§è¿˜æœ‰å¤šå°‘çš„æ‰§è¡Œæ—¶é—´ã€‚</p><ul><li><p><code>setTimeout</code>åŒæ ·æ˜¯ä¸ºäº†é˜²æ­¢è¯¥ä»»åŠ¡åœ¨æµè§ˆå™¨ç¹å¿™æ—¶ï¼Œå¤šæ¬¡å¾—ä¸åˆ°æ‰§è¡Œè€Œè®¾å®šçš„ä¸€ä¸ªè¶…æ—¶</p></li><li><p>åœ¨<code>rAF</code>ä¸­å‘å‡º<code>postMessage</code>ï¼ŒUIæ¸²æŸ“ç»“æŸåï¼Œè°ƒç”¨<code>macroTask</code>,ç›‘å¬<code>message</code>å›è°ƒçš„äº‹ä»¶ä¼šæ‰§è¡Œï¼Œå¹¶é€šè¿‡ä¸Šä¸‹æ–‡è®¡ç®—æ˜¯å¦è¶…æ—¶</p></li></ul><h1 id="ä½¿ç”¨rIC-requestIdleCallback-å°ä¾‹å­"><a href="#ä½¿ç”¨rIC-requestIdleCallback-å°ä¾‹å­" class="headerlink" title="ä½¿ç”¨rIC(requestIdleCallback)å°ä¾‹å­"></a>ä½¿ç”¨<code>rIC(requestIdleCallback)</code>å°ä¾‹å­</h1><blockquote><p>ä½¿ç”¨chromeæ—¶ï¼Œå¯åœ¨<code>Performance</code>è°ƒä½æ€§èƒ½ï¼Œæ•ˆæœè¾ƒä¸ºæ˜æ˜¾ã€‚</p></blockquote><p>æ‰§è¡Œä¸€å®šæ•°é‡çš„console.logæ“ä½œï¼Œä½¿ç”¨åŒæ­¥å¼‚æ­¥æ¥æ‰§è¡Œ</p><h2 id="æ¨¡æ‹Ÿæµè§ˆå™¨å¿™ç¢Œçš„æƒ…å†µ"><a href="#æ¨¡æ‹Ÿæµè§ˆå™¨å¿™ç¢Œçš„æƒ…å†µ" class="headerlink" title="æ¨¡æ‹Ÿæµè§ˆå™¨å¿™ç¢Œçš„æƒ…å†µ"></a>æ¨¡æ‹Ÿæµè§ˆå™¨å¿™ç¢Œçš„æƒ…å†µ</h2><p>ä½¿ç”¨ä¸€ä¸ªcssåŠ¨ç”»æ¨¡æ‹Ÿæµè§ˆå™¨çš„å¿™ç¢Œæƒ…å†µï¼Œä»è€Œæ›´å¥½çš„æµ‹è¯•æ€§èƒ½ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå·¦å³ç§»åŠ¨çš„box</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="comment">/* ä½¿ç”¨marginç§»åŠ¨ï¼Œæ›´å¥½éªŒè¯æ•ˆæœï¼Œå¦‚æœåšåŠ¨ç”»ï¼Œtransformè¿˜æ˜¯é¦–é€‰ */</span></span></span><br><span class="line"><span class="css">@<span class="keyword">keyframes</span> slide &#123;</span></span><br><span class="line"><span class="undefined">  0% &#123;</span></span><br><span class="line"><span class="undefined">    margin-left: 0;</span></span><br><span class="line"><span class="css">    <span class="comment">/* transform: translateX(0); */</span></span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">  50% &#123;</span></span><br><span class="line"><span class="undefined">    margin-left: 200px;</span></span><br><span class="line"><span class="css">    <span class="comment">/* transform: translateX(200px); */</span></span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">  100% &#123;</span></span><br><span class="line"><span class="undefined">    margin-left: 0;</span></span><br><span class="line"><span class="css">    <span class="comment">/* transform: translateX(0); */</span></span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-class">.box</span> &#123;</span></span><br><span class="line"><span class="undefined">  width: 400px;</span></span><br><span class="line"><span class="undefined">  height: 200px;</span></span><br><span class="line"><span class="undefined">  animation-duration: 3s;</span></span><br><span class="line"><span class="undefined">  animation-name: slide;</span></span><br><span class="line"><span class="undefined">  animation-iteration-count: infinite;</span></span><br><span class="line"><span class="undefined">  background: red;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span><span class="tag">&lt;/<span class="name">box</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="åŒæ­¥"><a href="#åŒæ­¥" class="headerlink" title="åŒæ­¥"></a>åŒæ­¥</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> TEST_SIZE = <span class="number">1000</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">performSync</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(TEST_SIZE)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.time(<span class="string">'push'</span>)</span><br><span class="line">  <span class="comment">// æ”¾å…¥æ•°ç»„ä¸­</span></span><br><span class="line">  <span class="keyword">for</span> (; i &lt; TEST_SIZE; i++) &#123;</span><br><span class="line">    arr[i] = i</span><br><span class="line">  &#125;</span><br><span class="line">  i = <span class="number">0</span></span><br><span class="line">  <span class="built_in">console</span>.timeEnd(<span class="string">'push'</span>) <span class="comment">// push: 0.41015625ms</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.time(<span class="string">'sync-log'</span>)</span><br><span class="line">  <span class="comment">// æ‰“å°</span></span><br><span class="line">  <span class="keyword">for</span> (; i &lt; TEST_SIZE; i++) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(arr[i])</span><br><span class="line">  &#125;</span><br><span class="line">  i = <span class="number">0</span></span><br><span class="line">  <span class="built_in">console</span>.timeEnd(<span class="string">'sync-log'</span>) <span class="comment">// sync-log: 2690.320068359375ms</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œæ‰§è¡ŒperformSyncæ—¶ï¼Œæµè§ˆå™¨åŠ¨ç”»å‘ç”Ÿäº†æ˜æ˜¾çš„å¡é¡¿ï¼Œä¹Ÿå³jså ç”¨æ—¶é—´è¿‡é•¿ï¼Œå¯¼è‡´åé¢å‡ºç°æ‰å¸§</p><h2 id="å¼‚æ­¥"><a href="#å¼‚æ­¥" class="headerlink" title="å¼‚æ­¥"></a>å¼‚æ­¥</h2><p>æˆ‘ä»¬è¿™é‡Œå­˜å–æ•°æ®æ—¶ï¼Œéœ€è¦ä½¿ç”¨é“¾è¡¨è¿›è¡Œæ“ä½œäº†ï¼Œå¯èƒ½ä¼šæ¶‰åŠåˆ°é¢‘ç¹çš„å¢æ·»å…ƒç´ ï¼Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">performAsync</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> deadline = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">let</span> firstCallbackNode = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">let</span> lastCallbackNode = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">const</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(TEST_SIZE)</span><br><span class="line">  <span class="keyword">let</span> i = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.time(<span class="string">'push'</span>)</span><br><span class="line">  <span class="comment">// æ”¾å…¥é“¾ä¸­</span></span><br><span class="line">  <span class="keyword">let</span> obj = &#123;&#125;</span><br><span class="line">  <span class="keyword">for</span> (; i &lt; TEST_SIZE; i++) &#123;</span><br><span class="line">    obj = &#123; <span class="attr">next</span>: <span class="literal">null</span>, <span class="attr">payload</span>: i &#125;</span><br><span class="line">    <span class="keyword">if</span> (firstCallbackNode === <span class="literal">null</span>) &#123;</span><br><span class="line">      lastCallbackNode = firstCallbackNode = obj</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">      lastCallbackNode = lastCallbackNode.next = obj</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  i = <span class="number">0</span></span><br><span class="line">  <span class="built_in">console</span>.timeEnd(<span class="string">'push'</span>) <span class="comment">// push: 1.015869140625ms</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ‰§è¡Œé“¾è¡¨ä¸­çš„ä»»åŠ¡</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">flushWork</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (deadline.timeRemaining() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">// ç»“æŸä»»åŠ¡</span></span><br><span class="line">      <span class="keyword">if</span> (firstCallbackNode === <span class="literal">null</span>) &#123;</span><br><span class="line">        lastCallbackNode = <span class="literal">null</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      callback(firstCallbackNode.payload)</span><br><span class="line">      firstCallbackNode = firstCallbackNode.next</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿›è¡Œè°ƒåº¦</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">scheduleWork</span>(<span class="params">deadlineObj</span>) </span>&#123;</span><br><span class="line">    deadline = deadlineObj</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç»“æŸ</span></span><br><span class="line">    <span class="keyword">if</span> (firstCallbackNode === <span class="literal">null</span>) &#123;</span><br><span class="line">      deadline = <span class="literal">null</span></span><br><span class="line">      <span class="built_in">console</span>.timeEnd(<span class="string">'async-log'</span>) <span class="comment">// async-log: 7676.759033203125ms</span></span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸‹ä¸€æ¬¡ç»§ç»­è°ƒåº¦</span></span><br><span class="line">    requestIdleCallback(scheduleWork)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å½“å‰æ‰§è¡Œåˆ·æ–°ä»»åŠ¡</span></span><br><span class="line">    flushWork(<span class="built_in">console</span>.log)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.time(<span class="string">'async-log'</span>)</span><br><span class="line">  <span class="comment">// å¯åŠ¨è°ƒåº¦</span></span><br><span class="line">  requestIdleCallback(scheduleWork)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°åœ¨æ‰§è¡ŒperformAsyncæ—¶ï¼ŒåŠ¨ç”»æ‰§è¡Œä¾æ—§æ¯”è¾ƒæµç•…ï¼Œå½“ç„¶ç›¸åº”æ‰€è€—è´¹æ—¶é—´è¿˜æ˜¯å¢åŠ çš„ã€‚</p><h1 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h1><p>æµè§ˆè¦å¹²çš„æ´»æ˜¯ä¸€å®šçš„ï¼Œä½ è®©ä»–ä¸€ä¸‹å¹²å®Œï¼Œæ—¶é—´å¾ˆå°‘ï¼Œä½†æ˜¯å‘ç”Ÿäº†æ˜æ˜¾çš„å¡é¡¿ï¼ˆä»–è‡ªå·±çš„æ´»æ¥ä¸åŠå¹²äº†ï¼‰ã€‚è®©ä»–ç©ºé—²çš„æ—¶å€™æ‰§è¡Œï¼ŒåŠ¨ç”»è¾ƒä¸ºæµç•…ï¼Œæ‰§è¡Œä»»åŠ¡æ‰€éœ€çš„æ—¶é—´ä¹Ÿä¹…äº†ï¼ˆç»™ä½ å¹²æ´»çš„æ—¶é—´å°‘äº†ï¼‰</p><p>Reactå›¢é˜ŸåŒæ—¶å¼•è¿›äº†<code>ConcurrentMode</code>æ„ä¸ºç»™ä»»åŠ¡å¢åŠ ä¸åŒçš„ä¼˜å…ˆçº§ï¼Œè¿™æ ·èƒ½å¤Ÿæ›´å¥½çš„è°ƒåº¦ï¼Œå½“ç„¶ä»–é‡‡ç”¨â€œæ‡’â€ç­–ç•¥ï¼Œèƒ½ä¸æ‰§è¡Œå°±ä¸æ‰§è¡Œï¼Œç­‰ä»–è¦è¶…æ—¶äº†ï¼Œèµ¶ç´§æ‰§è¡Œã€‚ä¿è¯äº†æœ‰å¤§é‡é—´éš™æ—¶é—´ç»™ç”¨æˆ·äº¤äº’ï¼Œä½†æ˜¯ä»»åŠ¡è¶Šç§¯è¶Šå¤šï¼Œåˆ°æœ€å<code>ä¸€å¤§ç¬”å¸</code>è¦ç®—çš„æ—¶å€™ï¼Œè¿˜æ˜¯ä¼šå‡ºç°å¡é¡¿ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ä½¿ç”¨å¯¹è±¡æ± åˆ›å»ºæ•°æ®</title>
      <link href="/2020/05/25/%E4%BD%BF%E7%94%A8%E5%AF%B9%E8%B1%A1%E6%B1%A0%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE/"/>
      <url>/2020/05/25/%E4%BD%BF%E7%94%A8%E5%AF%B9%E8%B1%A1%E6%B1%A0%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åœ¨Reactä¸­,ä½¿ç”¨åˆ°poolçš„åœ°æ–¹å¹¶ä¸å°‘ï¼Œæ¯”å¦‚<em><code>SyntheticEvent.js</code>ä¸­ä½¿ç”¨äº‹ä»¶å¯¹è±¡æ± ï¼Œæ¥åˆ›å»ºé”€æ¯äº‹ä»¶ã€‚<code>ReactChild.js</code>ä½¿ç”¨childå¯¹è±¡æ± ï¼Œ<code>React.Children.forEach</code>æ¥éå†å­èŠ‚ç‚¹ã€‚</em></p></blockquote><p>ä½¿ç”¨å¯¹è±¡æ± æ¥åˆ›å»ºæ•°æ®ï¼Œå¯ä»¥å¾ˆå¥½åœ°å¸®åŠ©æˆ‘ä»¬åˆ›å»ºé‚£äº›éœ€è¦é¢‘ç¹åˆ›å»ºé”€æ¯çš„å…ƒç´ ,å¹¶åœ¨æ€§èƒ½ä¸Šåšä¸€éƒ¨åˆ†ä¼˜åŒ–ã€‚</p><h1 id="ä¸¾ä¾‹"><a href="#ä¸¾ä¾‹" class="headerlink" title="ä¸¾ä¾‹"></a>ä¸¾ä¾‹</h1><p>æˆ‘ä»¬ä½¿ç”¨Markeræ¥æ ‡è®°åœ°å›¾ä¸Šçš„ç‚¹</p><blockquote><p>å‚è€ƒ<code>React.16.6.0</code>ä¸­<code>SyntheticEvent.js</code>åˆ›å»ºäº‹ä»¶æ± çš„å†™æ³•</p></blockquote><h2 id="å®šä¹‰Markerå¯¹è±¡"><a href="#å®šä¹‰Markerå¯¹è±¡" class="headerlink" title="å®šä¹‰Markerå¯¹è±¡"></a>å®šä¹‰Markerå¯¹è±¡</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Marker</span>(<span class="params">x, y, containerInfo</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.x = x</span><br><span class="line">  <span class="keyword">this</span>.y = y</span><br><span class="line">  <span class="keyword">this</span>.containerInfo = containerInfo</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Marker.prototype.destroy = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.x = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">this</span>.y = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">this</span>.containerInfo = <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Marker.prototype.show = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`x: <span class="subst">$&#123;<span class="keyword">this</span>.x&#125;</span> y:<span class="subst">$&#123;<span class="keyword">this</span>.y&#125;</span> containerInfo:<span class="subst">$&#123;<span class="keyword">this</span>.containerInfo&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å®šä¹‰å¯¹è±¡æ± ç›¸å…³"><a href="#å®šä¹‰å¯¹è±¡æ± ç›¸å…³" class="headerlink" title="å®šä¹‰å¯¹è±¡æ± ç›¸å…³"></a>å®šä¹‰å¯¹è±¡æ± ç›¸å…³</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¹è±¡æ± å¤§å°</span></span><br><span class="line"><span class="keyword">const</span> MARKER_POOL_SIZE = <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»poolä¸­å¾—åˆ°ä¸€ä¸ªmarkerå¯¹è±¡</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPooledMarker</span>(<span class="params">x, y, containerInfo</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> MarkerConstructor = <span class="keyword">this</span></span><br><span class="line">  <span class="keyword">if</span> (MarkerConstructor.markerPool.length) &#123;</span><br><span class="line">    <span class="keyword">const</span> instance = MarkerConstructor.markerPool.pop()</span><br><span class="line">    MarkerConstructor.call(instance, x, y, containerInfo)</span><br><span class="line">    <span class="keyword">return</span> instance</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> MarkerConstructor(x, y, containerInfo)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å½’è¿˜ä¸€ä¸ªmarkerå¯¹è±¡åˆ°poolä¸­</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">releasePooledMarker</span>(<span class="params">marker</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> MarkerConstructor = <span class="keyword">this</span></span><br><span class="line">  <span class="keyword">if</span> (marker <span class="keyword">instanceof</span> MarkerConstructor === <span class="literal">false</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="built_in">Error</span>() <span class="comment">// å½“å‰markerä¸æ˜¯ç”±å…¶åˆ›é€ ,é”™è¯¯æç¤º</span></span><br><span class="line">  &#125;</span><br><span class="line">  marker.destroy()</span><br><span class="line">  <span class="keyword">if</span> (MarkerConstructor.markerPool.length &lt; MARKER_POOL_SIZE) &#123;</span><br><span class="line">    MarkerConstructor.markerPool.push(marker)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘Markerä¸ŠæŒ‚è½½å¯¹è±¡æ± çš„æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addMarkerPoolingTo</span>(<span class="params">MarkerConstructor</span>) </span>&#123;</span><br><span class="line">  MarkerConstructor.markerPool = []</span><br><span class="line">  MarkerConstructor.getPooled = getPooledMarker</span><br><span class="line">  MarkerConstructor.release = releasePooledMarker</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†å¯¹è±¡æ± åº”ç”¨åˆ°Markerä¸Š</span></span><br><span class="line">addMarkerPoolingTo(Marker)</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨æ–¹å¼"><a href="#ä½¿ç”¨æ–¹å¼" class="headerlink" title="ä½¿ç”¨æ–¹å¼"></a>ä½¿ç”¨æ–¹å¼</h2><blockquote><p>è¿™é‡Œæ‰‹åŠ¨é‡Šæ”¾marker,å³<code>marker = null</code></p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æœªä½¿ç”¨å¯¹è±¡æ± </span></span><br><span class="line"><span class="keyword">let</span> marker1 = <span class="keyword">new</span> Marker(<span class="number">1</span>, <span class="number">1</span>, <span class="string">'container1'</span>)</span><br><span class="line"></span><br><span class="line">marker1.show()</span><br><span class="line"></span><br><span class="line">marker1.destroy()</span><br><span class="line">marker1 = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨å¯¹è±¡æ± </span></span><br><span class="line"><span class="keyword">let</span> marker2 = Marker.getPooled(<span class="number">2</span>, <span class="number">2</span>, <span class="string">'container2'</span>)</span><br><span class="line"></span><br><span class="line">marker2.show()</span><br><span class="line"></span><br><span class="line">Marker.release(marker2)</span><br><span class="line">marker2 = <span class="literal">null</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>äº‹ä»¶å›è°ƒç³»ç»Ÿä¸­å¤„ç†é”™è¯¯</title>
      <link href="/2020/05/21/%E4%BA%8B%E4%BB%B6%E5%9B%9E%E8%B0%83%E7%B3%BB%E7%BB%9F%E4%B8%AD%E5%A4%84%E7%90%86%E9%94%99%E8%AF%AF/"/>
      <url>/2020/05/21/%E4%BA%8B%E4%BB%B6%E5%9B%9E%E8%B0%83%E7%B3%BB%E7%BB%9F%E4%B8%AD%E5%A4%84%E7%90%86%E9%94%99%E8%AF%AF/</url>
      
        <content type="html"><![CDATA[<h2 id="æ›´ä¼˜çš„è°ƒè¯•æ–¹å¼"><a href="#æ›´ä¼˜çš„è°ƒè¯•æ–¹å¼" class="headerlink" title="æ›´ä¼˜çš„è°ƒè¯•æ–¹å¼"></a>æ›´ä¼˜çš„è°ƒè¯•æ–¹å¼</h2><p>å¦‚ä½•è®©æˆ‘ä»¬åœ¨è°ƒè¯•ä»£ç æ—¶ï¼Œæ—¢çœ‹åˆ°å…·ä½“çš„æŠ¥é”™ä¿¡æ¯ï¼Œåˆèƒ½ä¸å½±å“å½“å‰çš„æ‰§è¡Œç¯å¢ƒ,ä½¿ç”¨<code>try-catch</code>çš„æ–¹å¼ä¼šå¸®æˆ‘ä»¬é™é»˜æ•è·</p><blockquote><p>ç¨‹åºå‡ºé”™æ˜¯ä¸èƒ½èµ°æ­£å¸¸çš„é€»è¾‘ï¼Œæ‰€ä»¥æˆ‘ä»¬ä»…æ˜¯è®°å½•é”™è¯¯ä¿¡æ¯ï¼ŒhasErrorç­‰å¹¶ä¸”å»èµ°å‡ºé”™çš„é€»è¾‘ï¼Œ<em><code>Reactçš„ErrorBandage</code>æ¸²æŸ“é”™è¯¯çš„å¤‡ç”¨UI</em>ï¼Œè¿™é‡Œä»…æ˜¯èƒ½çœ‹åˆ°æŠ¥é”™çš„å…·ä½“ä¿¡æ¯ï¼Œä½†æ˜¯åˆä¸å½±å“å‡ºé”™çš„é€»è¾‘ã€‚</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¨¡æ‹Ÿå‡ºæ•ˆæœ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toggleError</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="built_in">Error</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'script start'</span>)</span><br><span class="line">toggleError()</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'script end'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®é™…æ‰§è¡Œæ•ˆæœ</span></span><br><span class="line">script start</span><br><span class="line">Uncaught <span class="built_in">Error</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æœ€ç»ˆæœŸæœ›çš„æ‰§è¡Œç»“æœ</span></span><br><span class="line">script start</span><br><span class="line">Uncaught <span class="built_in">Error</span></span><br><span class="line">script end</span><br></pre></td></tr></table></figure><h2 id="äº‹ä»¶å›è°ƒç³»ç»Ÿ"><a href="#äº‹ä»¶å›è°ƒç³»ç»Ÿ" class="headerlink" title="äº‹ä»¶å›è°ƒç³»ç»Ÿ"></a>äº‹ä»¶å›è°ƒç³»ç»Ÿ</h2><p>äº‹ä»¶å›è°ƒç³»ç»Ÿæ‹¥æœ‰è‡ªå·±çš„ä¸Šä¸‹æ–‡ï¼Œå³ä¾¿åœ¨è‡ªå·±çš„äº‹ä»¶å›è°ƒç³»ç»Ÿä¸­è§¦å‘äº†é”™è¯¯ä¹Ÿä¸ä¼šå½±å“åˆ°æ•´ä¸ªäº‹ä»¶çš„å¤„ç†ç³»ç»Ÿ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨äº‹ä»¶å›è°ƒç³»ç»Ÿ</span></span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">"DOMContentLoaded"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"Init: 1"</span>);</span><br><span class="line">  DOES_NOT_EXIST++; <span class="comment">// error</span></span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">"DOMContentLoaded"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"Init: 2"</span>);</span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¤æ—¶consoleä¸­ä¼šæ˜¾ç¤ºå¦‚ä¸‹å†…å®¹</span></span><br><span class="line">Init: <span class="number">1</span></span><br><span class="line">Uncaught <span class="built_in">ReferenceError</span>: DOES_NOT_EXIST is not defined</span><br><span class="line">Init: <span class="number">2</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQueryä¸­ä½¿ç”¨å›è°ƒç³»ç»Ÿå®ç°</span></span><br><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"Init: 1"</span>);</span><br><span class="line">  DOES_NOT_EXIST++; <span class="comment">// error</span></span><br><span class="line">&#125;);</span><br><span class="line"> </span><br><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"Init: 2"</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¤æ—¶consoleä¸­ä¼šæ˜¾ç¤ºå¦‚ä¸‹å†…å®¹</span></span><br><span class="line">Init: <span class="number">1</span></span><br><span class="line">Uncaught <span class="built_in">ReferenceError</span>: DOES_NOT_EXIST is not defined</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ä½¿ç”¨äº†äº‹ä»¶å¤„ç†å‡½æ•°ä¼šä½¿å¾—æŸä¸ªå›è°ƒäº‹ä»¶ä¸­å‘ç”Ÿäº†é”™è¯¯ä¸ä¼šç ´ååˆ°æ•´ä¸ªç³»ç»Ÿ</p><h2 id="ä¸åŒç¯å¢ƒä¸‹å¤„ç†é”™è¯¯çš„ä¸åŒ"><a href="#ä¸åŒç¯å¢ƒä¸‹å¤„ç†é”™è¯¯çš„ä¸åŒ" class="headerlink" title="ä¸åŒç¯å¢ƒä¸‹å¤„ç†é”™è¯¯çš„ä¸åŒ"></a>ä¸åŒç¯å¢ƒä¸‹å¤„ç†é”™è¯¯çš„ä¸åŒ</h2><h3 id="ç”Ÿäº§ç¯å¢ƒä½¿ç”¨çš„try-catch"><a href="#ç”Ÿäº§ç¯å¢ƒä½¿ç”¨çš„try-catch" class="headerlink" title="ç”Ÿäº§ç¯å¢ƒä½¿ç”¨çš„try-catch"></a>ç”Ÿäº§ç¯å¢ƒä½¿ç”¨çš„<code>try-catch</code></h3><p>æ­¤æ—¶å‘ç”Ÿçš„é”™è¯¯ä¼šè¢«æˆ‘ä»¬æ•è·ï¼Œå¹¶ä¸”ç»§ç»­è¿›è¡Œåç»­çš„æ‰§è¡Œï¼Œ(æ¯”å¦‚Reactä¸­ErrorBandageå¯æ¸²æŸ“å¤‡ç”¨çš„é”™è¯¯UI)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toggleError</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="built_in">Error</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  toggleError()</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  <span class="comment">// å¤„ç†é”™è¯¯ä¿¡æ¯</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¼€å‘ç¯å¢ƒä¸­"><a href="#å¼€å‘ç¯å¢ƒä¸­" class="headerlink" title="å¼€å‘ç¯å¢ƒä¸­"></a>å¼€å‘ç¯å¢ƒä¸­</h3><p>å½“ç„¶ä½¿ç”¨<code>try-catch</code>æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯æ—¢ç„¶æˆ‘ä»¬æ­£åœ¨å¼€å‘ï¼Œå°±åº”è¯¥å¾—çŸ¥å…·ä½“çš„æŠ¥é”™æƒ…å†µï¼Œå¹¶ä¸”å¤„ç†æ‰ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸€æ—¦ä½¿ç”¨<code>try-catch</code>å°±ä¼šå¸®æˆ‘ä»¬é™é»˜çš„å¤„ç†ï¼Œå¹¶ä¸ä¼šæš´éœ²é”™è¯¯ï¼Œ<em>chromeä¸­æœ‰è°ƒè¯•å·¥å…·<code>pause on caught exception</code>åªæœ‰å‡ºé”™å°±æš‚åœåˆ°æ­¤å¤„</em>,æ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ä¸€ç§æ›²çº¿æ•‘å›½çš„æ–¹å¼ï¼Œä½¿ç”¨äº‹ä»¶å›è°ƒçš„æ–¹å¼å»è¿è¡Œï¼ŒæŠ¥é”™å¹¶ä¸ä¼šå½±å“åˆ°å¤–éƒ¨ç¯å¢ƒã€‚</p><p>æ¨¡æ‹ŸReactä¸­çš„<code>invokeGuardedCallback</code>ï¼Œå³å°†å›è°ƒæ”¾åˆ°ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶å‡½æ•°ä¸­ï¼Œç«‹å³è§¦å‘ï¼Œæœ‰é”™è¯¯ä¸ä¼šå½±å“å¤–éƒ¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> hasError = <span class="literal">true</span></span><br><span class="line"><span class="keyword">let</span> error = <span class="literal">null</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">invokeGuardedCallback</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å…¨å±€erroräº‹ä»¶ï¼Œæœ‰é”™è¯¯è®°å½•errorä¿¡æ¯</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">handleWindowError</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    error = event.error</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">window</span>.addEventListener(<span class="string">'error'</span>, handleWindowError);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è‡ªå®šä¹‰äº‹ä»¶å¤„ç†å›è°ƒ</span></span><br><span class="line">  <span class="keyword">const</span> eventType = <span class="string">'fakeErrEventType'</span></span><br><span class="line">  <span class="keyword">const</span> evt = <span class="built_in">document</span>.createEvent(<span class="string">'Event'</span>)</span><br><span class="line">  evt.initEvent(eventType, <span class="literal">false</span>, <span class="literal">false</span>)</span><br><span class="line">  <span class="keyword">const</span> fakeNode = <span class="built_in">document</span>.createElement(<span class="string">'fake-err'</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¤„ç†å›è°ƒ</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">callCallback</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    fakeNode.removeEventListener(eventType, callCallback, <span class="literal">false</span>)</span><br><span class="line">    callback.call(<span class="literal">null</span>)</span><br><span class="line">    <span class="comment">// é»˜è®¤æœ‰é”™è¯¯ï¼Œå¦‚æœæ­£å¸¸æ‰§è¡Œcallbackï¼Œåˆ™è®¤ä¸ºæ²¡æœ‰é”™è¯¯å‘ç”Ÿ</span></span><br><span class="line">    hasError = <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶å¹¶è§¦å‘</span></span><br><span class="line">  fakeNode.addEventListener(eventType, callCallback, <span class="literal">false</span>)</span><br><span class="line">  fakeNode.dispatchEvent(evt)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸åŒæ–¹æ³•å¤„ç†å®ä¾‹"><a href="#ä¸åŒæ–¹æ³•å¤„ç†å®ä¾‹" class="headerlink" title="ä¸åŒæ–¹æ³•å¤„ç†å®ä¾‹"></a>ä¸åŒæ–¹æ³•å¤„ç†å®ä¾‹</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç›®æ ‡å›è°ƒå‡½æ•°toggleError</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toggleError</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="built_in">Error</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¸è¿›è¡Œé”™è¯¯å¤„ç†"><a href="#ä¸è¿›è¡Œé”™è¯¯å¤„ç†" class="headerlink" title="ä¸è¿›è¡Œé”™è¯¯å¤„ç†"></a>ä¸è¿›è¡Œé”™è¯¯å¤„ç†</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'script start'</span>)</span><br><span class="line">toggleError()</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'script end'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œç»“æœ</span></span><br><span class="line">script start</span><br><span class="line">Uncaught <span class="built_in">Error</span></span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨try-catchå¤„ç†"><a href="#ä½¿ç”¨try-catchå¤„ç†" class="headerlink" title="ä½¿ç”¨try-catchå¤„ç†"></a>ä½¿ç”¨<code>try-catch</code>å¤„ç†</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'script start'</span>)</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  toggleError()</span><br><span class="line">&#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">  <span class="comment">// err é”™è¯¯ç›¸å…³ä¿¡æ¯</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'script end'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œç»“æœï¼Œ å¹¶ä¸èƒ½çœ‹å‡ºé”™è¯¯è¯¦æƒ…ä½ç½®ï¼Œå¯èƒ½ä¼šå¿½ç•¥å‘ç”Ÿäº†é”™è¯¯ï¼Œå› ä¸ºè¢«å¤„ç†äº†</span></span><br><span class="line">script start</span><br><span class="line">script end</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨invokeGuardedCallback"><a href="#ä½¿ç”¨invokeGuardedCallback" class="headerlink" title="ä½¿ç”¨invokeGuardedCallback"></a>ä½¿ç”¨<code>invokeGuardedCallback</code></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'script start'</span>)</span><br><span class="line">invokeGuardedCallback(toggleError)</span><br><span class="line"><span class="keyword">if</span> (hasError) &#123;</span><br><span class="line">  <span class="comment">// error æ˜¯å…¨å±€æ•è·çš„å‡ºé”™ä¿¡æ¯</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'script end'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œç»“æœï¼Œ èƒ½çœ‹å‡ºé”™è¯¯è¯¦æƒ…ä½ç½®</span></span><br><span class="line">script start</span><br><span class="line">Uncaught <span class="built_in">Error</span></span><br><span class="line">script end</span><br></pre></td></tr></table></figure><p>å‚è€ƒèµ„æ–™</p><p><a href="https://www.cnblogs.com/fangzhaolee/p/3719384.html" target="_blank" rel="noopener">https://www.cnblogs.com/fangzhaolee/p/3719384.html</a></p><p><a href="https://github.com/facebook/react/blob/22f7663f14f12ebd6174292931e94d2b352cf666/packages/shared/invokeGuardedCallbackImpl.js#L61" target="_blank" rel="noopener">https://github.com/facebook/react/blob/22f7663f14f12ebd6174292931e94d2b352cf666/packages/shared/invokeGuardedCallbackImpl.js#L61</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æ­£è´Ÿ0çš„é—®é¢˜</title>
      <link href="/2020/05/16/0-0%E7%9A%84%E9%97%AE%E9%A2%98/"/>
      <url>/2020/05/16/0-0%E7%9A%84%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>åœ¨å…¶ä»–è¯­è¨€ä¸­ï¼ˆJavaï¼‰å¦‚æœå‡ºç°äº†<code>1/0</code>è¿™ç§æ“ä½œï¼Œåˆ™ä¼šç›´æ¥æŠ¥å‡ºException,ä½†æ˜¯åœ¨jsä¸­å¹¶ä¸ä¼šæŠ¥é”™ï¼Œè€Œæ˜¯ç»™å‡ºä¸€ä¸ªç‰¹æ®Šå€¼<code>Infinity</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>/<span class="number">1</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span>/<span class="number">0</span> = <span class="literal">Infinity</span> <span class="comment">// æ— é™å¤§</span></span><br></pre></td></tr></table></figure><h1 id="0å’Œ-0çš„åŒºåˆ«"><a href="#0å’Œ-0çš„åŒºåˆ«" class="headerlink" title="+0å’Œ-0çš„åŒºåˆ«"></a><code>+0</code>å’Œ<code>-0</code>çš„åŒºåˆ«</h1><p><code>+0</code>å’Œ<code>-0</code>æ˜¯å®Œå…¨ç›¸ç­‰çš„ï¼Œæ‰€ä»¥è¦æ˜¯è¿›è¡Œæ¯”è¾ƒè¿˜æ˜¯åº”è¯¥ä»<code>1/0</code>çš„ç‰¹æ€§æ¥è¯´</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">+<span class="number">0</span> === <span class="number">-0</span> <span class="comment">// true</span></span><br><span class="line">+<span class="number">0</span> === <span class="number">0</span> <span class="comment">// true</span></span><br><span class="line"><span class="number">-0</span> === <span class="number">0</span> <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">1</span>/<span class="number">0</span> = <span class="literal">Infinity</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span>/<span class="number">-0</span> = -<span class="literal">Infinity</span></span><br><span class="line"></span><br><span class="line"><span class="literal">Infinity</span> === <span class="literal">Infinity</span> <span class="comment">// true</span></span><br><span class="line"><span class="literal">Infinity</span> === -<span class="literal">Infinity</span> <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä»¥ä¸‹è®¡ç®—åœ¨æ­£å¸¸æƒ…å†µï¼Œä¸è¦æ•…æ„æ”¹å˜ .e.g</span></span><br><span class="line"><span class="comment"> *  Infinity + (-Infinity) = NaN</span></span><br><span class="line"><span class="comment"> *  Infinity * (1 / Infinity) = NaN</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * è¿™æ ·ä¸æ”¹å˜è¿ç®—æƒ…å†µæ˜¯å¯ä»¥çš„</span></span><br><span class="line"><span class="comment"> *  Infinity * -Infinity = -Infinity</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * `*`ï¼Œ`/`è¿ç®—è¦è€ƒè™‘nçš„ç¬¦å·</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="literal">Infinity</span> + n = <span class="literal">Infinity</span> <span class="comment">// nä¸ºæ‰€æœ‰å€¼</span></span><br><span class="line"></span><br><span class="line"><span class="literal">Infinity</span> - n = <span class="literal">Infinity</span> <span class="comment">// nä¸ºéInfinity</span></span><br><span class="line"><span class="literal">Infinity</span> - <span class="literal">Infinity</span> = <span class="literal">NaN</span></span><br><span class="line"></span><br><span class="line"><span class="literal">Infinity</span> * n = <span class="literal">Infinity</span> <span class="comment">// nä¸ºæ‰€æœ‰å€¼</span></span><br><span class="line"></span><br><span class="line"><span class="literal">Infinity</span> / n = <span class="literal">Infinity</span> <span class="comment">// nä¸ºéInfinity</span></span><br><span class="line"><span class="literal">Infinity</span> / <span class="literal">Infinity</span> = <span class="literal">NaN</span></span><br></pre></td></tr></table></figure><h1 id="NaNå’Œ0çš„å…³ç³»"><a href="#NaNå’Œ0çš„å…³ç³»" class="headerlink" title="NaNå’Œ0çš„å…³ç³»"></a><code>NaN</code>å’Œ<code>0</code>çš„å…³ç³»</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>/<span class="number">0</span> = <span class="literal">NaN</span> <span class="comment">// ç‰¹æ®Š</span></span><br><span class="line"></span><br><span class="line">+n / <span class="number">0</span> = <span class="literal">Infinity</span></span><br><span class="line">-n / <span class="number">0</span> = -<span class="literal">Infinity</span></span><br><span class="line"></span><br><span class="line"><span class="number">0</span> / n = <span class="literal">NaN</span> <span class="comment">// (n !== 0)</span></span><br><span class="line"></span><br><span class="line"><span class="literal">NaN</span> === <span class="literal">NaN</span> <span class="comment">// false</span></span><br></pre></td></tr></table></figure><h1 id="Object-isçš„polyfill"><a href="#Object-isçš„polyfill" class="headerlink" title="Object.isçš„polyfill"></a><code>Object.is</code>çš„polyfill</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">is</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (x === y) &#123; <span class="comment">// åˆ¤æ–­æ­£è´Ÿ0</span></span><br><span class="line">    <span class="keyword">return</span> x !== <span class="number">0</span> || y !== <span class="number">0</span> || <span class="number">1</span>/x === <span class="number">1</span>/y</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123; <span class="comment">// NaN !== Nan, è¿™é‡Œpolyfillè®¤ä¸º ä¸¤è€…ç›¸ç­‰</span></span><br><span class="line">    <span class="keyword">return</span> x !== x || y !== y</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>jså¯¹é¦–å±æ¸²æŸ“çš„é—®é¢˜</title>
      <link href="/2020/05/12/js%E5%AF%B9%E9%A6%96%E5%B1%8F%E6%B8%B2%E6%9F%93%E7%9A%84%E9%97%AE%E9%A2%98/"/>
      <url>/2020/05/12/js%E5%AF%B9%E9%A6%96%E5%B1%8F%E6%B8%B2%E6%9F%93%E7%9A%84%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h2 id="æµè§ˆå™¨å‘å‡ºè¯·æ±‚åï¼Œæ¥æ”¶æµç¨‹"><a href="#æµè§ˆå™¨å‘å‡ºè¯·æ±‚åï¼Œæ¥æ”¶æµç¨‹" class="headerlink" title="æµè§ˆå™¨å‘å‡ºè¯·æ±‚åï¼Œæ¥æ”¶æµç¨‹"></a>æµè§ˆå™¨å‘å‡ºè¯·æ±‚åï¼Œæ¥æ”¶æµç¨‹</h2><ol><li>Bytes, <code>(3C 62 5F 49 ....)</code></li><li>Characters, <code>&lt;html&gt;&lt;head&gt;....&lt;/head&gt;..</code></li><li>Tokens, <code>StartTag: html, StartTag: head, ... Hello .... EndTag: html</code></li><li>Nodes, <code>html, head, meta, body, p, Hello</code></li><li>DOM, <code>ç”Ÿæˆæœ€ç»ˆDOMæ ‘ï¼Œ HTML - head, body(æ ‘ç»“æ„)</code></li></ol><h2 id="æµè§ˆå™¨æ¸²æŸ“æµç¨‹"><a href="#æµè§ˆå™¨æ¸²æŸ“æµç¨‹" class="headerlink" title="æµè§ˆå™¨æ¸²æŸ“æµç¨‹"></a>æµè§ˆå™¨æ¸²æŸ“æµç¨‹</h2><p>HTMLç”Ÿæˆä¸ºDOMå¯¹è±¡ï¼ŒCSSç”Ÿæˆä¸ºCSSOMå¯¹è±¡ï¼Œä¸¤è€…è¿›è¡ŒAttachedæ“ä½œåï¼Œå³å¯ç”Ÿæˆä¸€ä¸ªrender treeï¼Œé€šè¿‡layoutï¼ˆreflowï¼‰è®¡ç®—å…¶åœ¨æµè§ˆå™¨ä¸Šçš„æ ·å¼ï¼Œæœ€ç»ˆè¿›è¡Œpaintç»˜åˆ¶åˆ°æµè§ˆå™¨ä¸Š</p><h3 id="åœ¨æ²¡æœ‰JSçš„æƒ…å†µ"><a href="#åœ¨æ²¡æœ‰JSçš„æƒ…å†µ" class="headerlink" title="åœ¨æ²¡æœ‰JSçš„æƒ…å†µ"></a>åœ¨æ²¡æœ‰JSçš„æƒ…å†µ</h3><p>DOMå¯¹è±¡å’ŒCSSOMå¯¹è±¡åŒæ­¥ç”Ÿæˆï¼Œå¾…CSSOMå¯¹è±¡ç”Ÿæˆå®Œæ¯•å(å¦‚æœä¹‹åçš„CSSå¯¹ä¹‹å‰çš„æ ·å¼è¿›è¡Œä¿®æ”¹ï¼Œæµè§ˆå™¨ä¼šå‘ç”Ÿå¤šæ¬¡é‡ç»˜å’Œå›æµï¼Œè¦ç­‰CSSOMç”Ÿæˆå®Œæ¯•ååœ¨è¿›è¡Œæ¸²æŸ“)ï¼Œä¹‹åä»ä¸Šåˆ°ä¸‹æ˜¾ç¤ºé¡µé¢ï¼Œç›´åˆ°æ•´ä¸ªDOMæ¸²æŸ“å®Œæˆã€‚</p><h3 id="JSå¯¹æµè§ˆå™¨æ¸²æŸ“å¼•æ“çš„å½±å“"><a href="#JSå¯¹æµè§ˆå™¨æ¸²æŸ“å¼•æ“çš„å½±å“" class="headerlink" title="JSå¯¹æµè§ˆå™¨æ¸²æŸ“å¼•æ“çš„å½±å“"></a>JSå¯¹æµè§ˆå™¨æ¸²æŸ“å¼•æ“çš„å½±å“</h3><p>å› ä¸ºJSå¯ä»¥æ“ä½œDOM, CSSæ‰€ä»¥ï¼Œjså¯èƒ½ä¼šä¿®æ”¹ä¹‹å‰çš„å†…å®¹ï¼Œä½¿æµè§ˆå™¨å‘ç”Ÿé‡ç»˜ï¼Œå½±å“æ€§èƒ½ï¼Œæµè§ˆå™¨æ­¤æ—¶éœ€è¦é˜»å¡å½“å‰çº¿ç¨‹ï¼Œè½¬è€Œå»è¿è¡Œjså†…å®¹ï¼Œè¿è¡Œå®Œåï¼Œç»§ç»­è¿›è¡Œä¹‹åçš„æ¸²æŸ“é€»è¾‘ã€‚</p><p>æ³¨æ„ï¼šå¦‚æœscriptæ ‡ç­¾æ˜¯å¼‚æ­¥æ‹‰å–çš„ï¼Œé‚£ä¹ˆæ‹‰å–ä¹‹ååˆ°æœ¬åœ°ï¼Œå½“è¿è¡ŒJSæ—¶ï¼Œçº¿ç¨‹ä¾ç„¶ä¼šé˜»å¡</p><h3 id="HTML-CSS-JSå­˜åœ¨çš„æ¸²æŸ“æƒ…å†µ"><a href="#HTML-CSS-JSå­˜åœ¨çš„æ¸²æŸ“æƒ…å†µ" class="headerlink" title="HTML,CSS,JSå­˜åœ¨çš„æ¸²æŸ“æƒ…å†µ"></a>HTML,CSS,JSå­˜åœ¨çš„æ¸²æŸ“æƒ…å†µ</h3><p>æµè§ˆå™¨æ¥æ”¶åˆ°å†…å®¹åï¼Œå¼€å§‹è§£æï¼Œå…ˆå»åŒ¹é…ä¸€ä¸‹scriptæ ‡ç­¾ï¼Œæœ‰çš„è¯å°±ä¼šåŒ¹é…åˆ°ä¹Ÿç»™tcpï¼Œå»è¿›è¡Œä¸‹è½½ï¼ˆå¹¶éæ‰§è¡Œåˆ°æ‰å›å»åŠ è½½ï¼Œåªæ˜¯æå‰ä¸‹è½½ï¼‰,æµè§ˆå™¨DOM,CSSOMï¼Œç”ŸæˆrenderTree,ä¹‹åç»˜åˆ¶åˆ°æµè§ˆå™¨ï¼Œä¸€æ—¦é‡åˆ°scriptæ ‡ç­¾åï¼Œé˜»å¡å½“å‰çº¿ç¨‹ï¼Œå»è¿è¡Œscriptæ ‡ç­¾å†…çš„ä¸œè¥¿ï¼ˆä¹Ÿå°±æ˜¯scriptå†…çš„æ“ä½œä¹‹å‰çš„DOMç»“æ„ï¼Œåé¢çš„è¿˜æ²¡æœ‰ç”Ÿæˆï¼‰ï¼Œå¦‚æœåé¢è¿˜æœ‰å†…å®¹ï¼Œåˆ™ä¸ä¼šæ¸²æŸ“ï¼Œä¸¥é‡æƒ…å†µå¯èƒ½ä¼šå‡ºç°é¡µé¢æ¸²æŸ“äº†ä¸€åŠçš„æƒ…å†µã€‚</p><h2 id="é¦–å±æ¸²æŸ“æ—¶é—´ï¼Œé¡µé¢åŠ è½½å®Œæˆæ—¶é—´"><a href="#é¦–å±æ¸²æŸ“æ—¶é—´ï¼Œé¡µé¢åŠ è½½å®Œæˆæ—¶é—´" class="headerlink" title="é¦–å±æ¸²æŸ“æ—¶é—´ï¼Œé¡µé¢åŠ è½½å®Œæˆæ—¶é—´"></a>é¦–å±æ¸²æŸ“æ—¶é—´ï¼Œé¡µé¢åŠ è½½å®Œæˆæ—¶é—´</h2><p>FPï¼ˆFirst Paintï¼‰ï¼šé¦–å±æ¸²æŸ“ï¼Œè¿™é‡Œæ˜¯é¦–é¡µéœ€è¦æ˜¾ç¤ºçš„å†…å®¹ï¼ˆéƒ¨åˆ†æ˜¯ä¸éœ€è¦è¢«é¦–æ¬¡æ¸²æŸ“å‡ºæ¥çš„ï¼‰</p><p>DCL(DOM Content Loaded)ï¼š é¡µé¢åŠ è½½å®Œæˆ (æ‰€æœ‰çš„jsæ‰§è¡Œå®Œæˆï¼Œè§¦å‘DOMContentLoadedäº‹ä»¶ï¼Œwindow.onLoad)</p><p>æˆ‘ä»¬å…³å¿ƒçš„æ˜¯é¦–å±æ¸²æŸ“äº‹ä»¶ï¼Œå¦‚æœé¦–å±æ¸²æŸ“åˆ°ä¸€åŠï¼Œä¸­é—´æ’å…¥äº†jsï¼Œå¦‚æœè¯¥jså ç”¨è¾ƒé•¿æ—¶é—´ï¼Œæˆ–åŠ è½½é—®é¢˜ï¼Œä¼šé€ æˆé¡µé¢è¢«æˆªæ–­ï¼Œåªèƒ½æ˜¾ç¤ºä¸€éƒ¨åˆ†é¡µé¢ï¼Œæ‰€ä»¥æˆ‘ä»¬å…³å¿ƒçš„æ˜¯è¿™ä¸ªéƒ¨åˆ†ã€‚</p><h2 id="ä¸ºä»€ä¹ˆjsæ”¾åˆ°bodyæœ€å"><a href="#ä¸ºä»€ä¹ˆjsæ”¾åˆ°bodyæœ€å" class="headerlink" title="ä¸ºä»€ä¹ˆjsæ”¾åˆ°bodyæœ€å"></a>ä¸ºä»€ä¹ˆjsæ”¾åˆ°bodyæœ€å</h2><p>jsæ”¾åˆ°æœ€åä¹Ÿä¼šä¸‹è½½ï¼Œä½†æ˜¯ç”±äºä»–åœ¨æœ€åï¼Œå¹¶ä¸ä¼šå½±å“ä¹‹å‰é¦–å±å†…å®¹çš„æ¸²æŸ“ï¼Œä¹Ÿå°±æ˜¯è¯´jsæ–‡ä»¶æ”¾åˆ°å‰é¢è¿˜æ˜¯åé¢ï¼ŒDOMContentLoadæ˜¯ä¸ä¼šæ”¹å˜çš„ï¼Œä½†æ˜¯ä¸åŒçš„ä½ç½®ä¼šå½±å“FP,è¿™é‡Œè‚¯å®šæ˜¯å…ˆè®©ç”¨æˆ·çœ‹åˆ°é¡µé¢æœ€å¥½ï¼Œæ‰€ä»¥ä¸€èˆ¬jsè¯·æ±‚ä¼šæ”¾åˆ°æœ€åé¢</p><blockquote><p>å…¶å®æµè§ˆå™¨å‘ç°æœ‰jså­˜åœ¨ï¼Œä¼šå»å¼€å¯ä¸‹è½½ï¼Œé‚£ä¹ˆå¿…ç„¶ä¼šå ç”¨é‚£ä¹ˆä¸€ä¸¢ä¸¢æµè§ˆèµ„æºï¼ŒåŒ…æ‹¬CPU</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> æ°é¥­ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>åˆ©ç”¨äºŒè¿›åˆ¶ç è¡¨ç¤ºçŠ¶æ€</title>
      <link href="/2020/04/20/%E5%88%A9%E7%94%A8%E4%BA%8C%E8%BF%9B%E5%88%B6%E7%A0%81%E8%A1%A8%E7%A4%BA%E7%8A%B6%E6%80%81/"/>
      <url>/2020/04/20/%E5%88%A9%E7%94%A8%E4%BA%8C%E8%BF%9B%E5%88%B6%E7%A0%81%E8%A1%A8%E7%A4%BA%E7%8A%B6%E6%80%81/</url>
      
        <content type="html"><![CDATA[<p>åœ¨å‰ç«¯ä¸­ï¼ŒäºŒè¿›åˆ¶ç ä¼¼ä¹åœ¨å¹³å¸¸çš„å¼€å‘ä¸­å¾ˆå°‘ä¼šå»ä½¿ç”¨åˆ°ï¼Œä½†æ˜¯åœ¨ä¸€äº›æ¡†æ¶ä¸­ï¼Œä¹Ÿä¼šçœ‹åˆ°å…¶ä½œä¸ºå¼€å‘çš„ä¸€éƒ¨åˆ†å­˜åœ¨ï¼Œå¹¶ä¸”ç»“åˆä½è¿ç®—ï¼Œæœ‰æ—¶ä¹Ÿèƒ½è¾¾åˆ°è¾ƒå¥½çš„ä½¿ç”¨æ•ˆæœã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// react\packages\shared\ReactSideEffectTags.js ä¸­ä½¿ç”¨çš„ç›¸å…³çŠ¶æ€ç </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> type SideEffectTag = number;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Don't change these two values. They're used by React Dev Tools.</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> NoEffect = <span class="comment">/*              */</span> <span class="number">0b00000000000</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> PerformedWork = <span class="comment">/*         */</span> <span class="number">0b00000000001</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// You can change the rest (and add more).</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> Placement = <span class="comment">/*             */</span> <span class="number">0b00000000010</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> Update = <span class="comment">/*                */</span> <span class="number">0b00000000100</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> PlacementAndUpdate = <span class="comment">/*    */</span> <span class="number">0b00000000110</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> Deletion = <span class="comment">/*              */</span> <span class="number">0b00000001000</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> ContentReset = <span class="comment">/*          */</span> <span class="number">0b00000010000</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> Callback = <span class="comment">/*              */</span> <span class="number">0b00000100000</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> DidCapture = <span class="comment">/*            */</span> <span class="number">0b00001000000</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> Ref = <span class="comment">/*                   */</span> <span class="number">0b00010000000</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> Snapshot = <span class="comment">/*              */</span> <span class="number">0b00100000000</span>;</span><br></pre></td></tr></table></figure><h2 id="ç®€å•çš„ä½è¿ç®—"><a href="#ç®€å•çš„ä½è¿ç®—" class="headerlink" title="ç®€å•çš„ä½è¿ç®—"></a>ç®€å•çš„ä½è¿ç®—</h2><p>ä½è¿ç®—ä¸ä¼šè¿›ä½ï¼Œä¸è¦ä¸äºŒè¿›åˆ¶çš„åŠ å‡è¿ç®—æ··æ·†</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> ä¸(AND)      æˆ–(OR)      å¼‚æˆ–(XOR)     é(NOT)</span><br><span class="line"></span><br><span class="line">  0b001       0b001        0b011        </span><br><span class="line">&amp; 0b010     | 0b010      ^ 0b001      ~ 0b011</span><br><span class="line">--------    --------     --------     --------</span><br><span class="line">  0b000       0b011        0b010        0b100</span><br></pre></td></tr></table></figure><p>åœ¨jsä¸­çš„æ•°å­—ç±»å‹è½¬æ¢ä¸­:</p><ul><li><code>0</code>,<code>NaN</code>å¯¹åº”çš„booleanå€¼ä¸º<code>false</code>  </li><li><code>123</code>,<code>-123</code>,<code>Infinity</code>,<code>...</code>å¯¹åº”çš„booleanå€¼ä¸º<code>true</code>ã€‚</li></ul><p>æ‰€ä»¥åˆ©ç”¨è¿™ä¸€ç‰¹æ€§å¯ä»¥å°†äºŒè¿›åˆ¶æ•°ä½è¿ç®—çš„å€¼è½¬æ¢ä¸ºbooleanå€¼ã€‚</p><h2 id="è¿ç”¨ä½è¿ç®—å®ä¾‹"><a href="#è¿ç”¨ä½è¿ç®—å®ä¾‹" class="headerlink" title="è¿ç”¨ä½è¿ç®—å®ä¾‹"></a>è¿ç”¨ä½è¿ç®—å®ä¾‹</h2><p>åƒé¥­ï¼Œç¡è§‰ï¼Œæ‰“è±†è±†ä¸ºä¾‹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å­˜åœ¨çš„å„ç§çŠ¶æ€ï¼ˆä¸ºäº†å¯¹é½ï¼Œå€Ÿé‰´Reactçš„ä¹¦å†™æ–¹å¼ï¼‰</span></span><br><span class="line"><span class="keyword">const</span> Eat = <span class="comment">/*      */</span> <span class="number">0b001</span> <span class="comment">// åƒé¥­</span></span><br><span class="line"><span class="keyword">const</span> Sleep = <span class="comment">/*    */</span> <span class="number">0b010</span> <span class="comment">// ç¡è§‰</span></span><br><span class="line"><span class="keyword">const</span> Fight = <span class="comment">/*    */</span> <span class="number">0b100</span> <span class="comment">// æ‰“è±†è±†</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Mode = <span class="comment">/*       */</span> <span class="number">0b000</span> <span class="comment">// ç”¨æˆ·çš„åˆå§‹çŠ¶æ€</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> eatAndSleep = Mode | Eat | Sleep <span class="comment">// 0b011</span></span><br><span class="line"><span class="keyword">let</span> emptyMode = Mode <span class="comment">// 0b000</span></span><br><span class="line"><span class="keyword">let</span> fightMode = Mode | Fight <span class="comment">// 0b100</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ£€éªŒæ˜¯å¦åƒé¥­</span></span><br><span class="line"><span class="built_in">console</span>.log(eatAndSleep &amp; Eat) <span class="comment">// 1 (0b001) -&gt; true</span></span><br><span class="line"><span class="built_in">console</span>.log(emptyMode &amp; Eat) <span class="comment">// 0 (0b000) -&gt; false</span></span><br><span class="line"><span class="built_in">console</span>.log(fightMode &amp; Eat) <span class="comment">// 0 (0b000) -&gt; false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ£€éªŒæ˜¯å¦æ‰“è±†è±†</span></span><br><span class="line"><span class="built_in">console</span>.log(eatAndSleep &amp; Fight) <span class="comment">// 0 (0b000) -&gt; false</span></span><br><span class="line"><span class="built_in">console</span>.log(emptyMode &amp; Fight) <span class="comment">// 0 (0b000) -&gt; false</span></span><br><span class="line"><span class="built_in">console</span>.log(fightMode &amp; Fight) <span class="comment">// 4 (0b100) -&gt; true</span></span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ ç±»å‹"><a href="#æ·»åŠ ç±»å‹" class="headerlink" title="æ·»åŠ ç±»å‹"></a>æ·»åŠ ç±»å‹</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> mode = Mode | Eat <span class="comment">// å¢åŠ åƒé¥­çš„æ ‡è®° 0b001</span></span><br></pre></td></tr></table></figure><h3 id="æ˜¯å¦æœ‰ç±»å‹"><a href="#æ˜¯å¦æœ‰ç±»å‹" class="headerlink" title="æ˜¯å¦æœ‰ç±»å‹"></a>æ˜¯å¦æœ‰ç±»å‹</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> hasEat = Mode &amp; Eat <span class="comment">// ç»“æœ0æˆ–è€…é0</span></span><br><span class="line"><span class="comment">// let hasEat = !!(Mode &amp; Eat) // ç»“æœä¸ºtrue/false</span></span><br></pre></td></tr></table></figure><h3 id="å»é™¤ç±»å‹"><a href="#å»é™¤ç±»å‹" class="headerlink" title="å»é™¤ç±»å‹"></a>å»é™¤ç±»å‹</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mode = mode ^ Eat <span class="comment">// å»é™¤ç¡è§‰çš„æ ‡è®° 0b000</span></span><br><span class="line"></span><br><span class="line">mode = mode &amp; ~(Eat) <span class="comment">// å»é™¤ç¡è§‰çš„æ ‡è®°</span></span><br><span class="line">mode = mode &amp; ~(Eat | Sleep) <span class="comment">// å»é™¤ ç¡è§‰ï¼Œåƒé¥­ çš„æ ‡è®°</span></span><br></pre></td></tr></table></figure><h3 id="æ›´ä¸ºé€šç”¨çš„æ–¹æ³•"><a href="#æ›´ä¸ºé€šç”¨çš„æ–¹æ³•" class="headerlink" title="æ›´ä¸ºé€šç”¨çš„æ–¹æ³•"></a>æ›´ä¸ºé€šç”¨çš„æ–¹æ³•</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ¤æ–­æ˜¯å¦å­˜åœ¨å½“å‰çš„çŠ¶æ€</span></span><br><span class="line"><span class="comment"> * @param  &#123;Number&#125;  currentMode å½“å‰çš„çŠ¶æ€</span></span><br><span class="line"><span class="comment"> * @param  &#123;Number&#125;  targetMode  ç›®æ ‡çŠ¶æ€</span></span><br><span class="line"><span class="comment"> * @return &#123;Boolean&#125;             æ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hasMode</span>(<span class="params">currentMode, targetMode</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (currentMode &amp; targetMode) !== <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¸ºå½“å‰çŠ¶æ€ç æ·»åŠ çŠ¶æ€</span></span><br><span class="line"><span class="comment"> * @param  &#123;Number&#125;  currentMode å½“å‰çš„çŠ¶æ€</span></span><br><span class="line"><span class="comment"> * @param  &#123;Number&#125;  targetMode  ç›®æ ‡çŠ¶æ€</span></span><br><span class="line"><span class="comment"> * @return &#123;Number&#125;              æ–°ç”Ÿæˆçš„çŠ¶æ€å—</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addMode</span>(<span class="params">currentMode, targetMode</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> currentMode | targetMode</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¸ºå½“å‰çŠ¶æ€ç å»é™¤çŠ¶æ€</span></span><br><span class="line"><span class="comment"> * @param  &#123;Number&#125;  currentMode å½“å‰çš„çŠ¶æ€</span></span><br><span class="line"><span class="comment"> * @param  &#123;Number&#125;  targetMode  ç›®æ ‡çŠ¶æ€</span></span><br><span class="line"><span class="comment"> * @return &#123;Number&#125;              æ–°ç”Ÿæˆçš„çŠ¶æ€å—</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeMode</span>(<span class="params">currentMode, targetMode</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// return currentMode &amp; ~targetMode // ä¹Ÿå¯ä½¿ç”¨</span></span><br><span class="line">  <span class="keyword">return</span> currentMode ^ targetMode <span class="comment">// å¯ä½¿ç”¨ ^å¼‚æˆ–å»é™¤</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨æ–¹å¼"><a href="#ä½¿ç”¨æ–¹å¼" class="headerlink" title="ä½¿ç”¨æ–¹å¼"></a>ä½¿ç”¨æ–¹å¼</h2><h3 id="ä½¿ç”¨å°è£…çš„æ–¹æ³•"><a href="#ä½¿ç”¨å°è£…çš„æ–¹æ³•" class="headerlink" title="ä½¿ç”¨å°è£…çš„æ–¹æ³•"></a>ä½¿ç”¨å°è£…çš„æ–¹æ³•</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> eatMode = addMode(Mode, Eat)</span><br><span class="line"><span class="keyword">let</span> eatAndSleepMode = addMode(eatMode, Sleep)</span><br><span class="line"><span class="built_in">console</span>.log(hasMode(eatAndSleepMode, Eat)) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sleepMode = removeMode(eatAndSleepMode, Eat)</span><br><span class="line"><span class="built_in">console</span>.log(hasMode(sleepMode, Eat)) <span class="comment">// false</span></span><br></pre></td></tr></table></figure><h3 id="ç›´æ¥ä½¿ç”¨äºŒè¿›åˆ¶æ“ä½œ"><a href="#ç›´æ¥ä½¿ç”¨äºŒè¿›åˆ¶æ“ä½œ" class="headerlink" title="ç›´æ¥ä½¿ç”¨äºŒè¿›åˆ¶æ“ä½œ"></a>ç›´æ¥ä½¿ç”¨äºŒè¿›åˆ¶æ“ä½œ</h3><blockquote><p>Reactæºç ä¸­å¤§é‡ä½¿ç”¨åˆ°äº†ä½æ“ä½œ</p></blockquote><p><code>!!</code>æ“ä½œå¯ä»¥ç›´æ¥è½¬æ¢ä¸ºbooleanå€¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> eatAndSleepMode = Mode | Eat | Sleep</span><br><span class="line"><span class="built_in">console</span>.log(!!(eatAndSleepMode &amp; Eat)) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sleepMode = eatAndSleepMode &amp; ~Eat</span><br><span class="line"><span class="built_in">console</span>.log(!!(sleepMode &amp; Eat)) <span class="comment">// false</span></span><br></pre></td></tr></table></figure><p>æœ‰æ—¶Reactä¼šç›´æ¥æ“ä½œå½“å‰mode</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">effectTag |= Ref <span class="comment">// å°†Refæ ‡è¯†æ·»åŠ åˆ°effectTagä¸­</span></span><br><span class="line"></span><br><span class="line">effectTag &amp;= ~Placement <span class="comment">// å°†PlacementçŠ¶æ€ä»effectTagä¸­å»é™¤</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æ·±æ‹·è´</title>
      <link href="/2020/04/14/%E6%B7%B1%E6%8B%B7%E8%B4%9D/"/>
      <url>/2020/04/14/%E6%B7%B1%E6%8B%B7%E8%B4%9D/</url>
      
        <content type="html"><![CDATA[<h1 id="JSä¸­çš„æ·±æ‹·è´"><a href="#JSä¸­çš„æ·±æ‹·è´" class="headerlink" title="JSä¸­çš„æ·±æ‹·è´"></a>JSä¸­çš„æ·±æ‹·è´</h1><h2 id="æœ€ä¸ºç®€å•çš„æ–¹å¼"><a href="#æœ€ä¸ºç®€å•çš„æ–¹å¼" class="headerlink" title="æœ€ä¸ºç®€å•çš„æ–¹å¼"></a>æœ€ä¸ºç®€å•çš„æ–¹å¼</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(obj))</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨é€’å½’ï¼Œæ‰‹å†™æ·±æ‹·è´"><a href="#ä½¿ç”¨é€’å½’ï¼Œæ‰‹å†™æ·±æ‹·è´" class="headerlink" title="ä½¿ç”¨é€’å½’ï¼Œæ‰‹å†™æ·±æ‹·è´"></a>ä½¿ç”¨é€’å½’ï¼Œæ‰‹å†™æ·±æ‹·è´</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clone</span> (<span class="params">target</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> target === <span class="string">'object'</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> cloneTarget = <span class="built_in">Array</span>.isArray(target) ? [] : &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> target) &#123;</span><br><span class="line">      cloneTarget[key] = clone(target[key])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cloneTarget</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> target</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨map-é˜²æ­¢å¾ªç¯å¼•ç”¨è‡ªèº«çš„æƒ…å†µ-é‡å¤å¼•ç”¨æƒ…å†µ"><a href="#ä½¿ç”¨map-é˜²æ­¢å¾ªç¯å¼•ç”¨è‡ªèº«çš„æƒ…å†µ-é‡å¤å¼•ç”¨æƒ…å†µ" class="headerlink" title="ä½¿ç”¨map,é˜²æ­¢å¾ªç¯å¼•ç”¨è‡ªèº«çš„æƒ…å†µ(é‡å¤å¼•ç”¨æƒ…å†µ)"></a>ä½¿ç”¨map,é˜²æ­¢å¾ªç¯å¼•ç”¨è‡ªèº«çš„æƒ…å†µ(é‡å¤å¼•ç”¨æƒ…å†µ)</h2><blockquote><p>WeakMap,å¦‚æœæ”¾å…¥çš„å¯¹è±¡å…¶å¼•ç”¨å·²ç»ä¸ºnull,åˆ™å…¶ä¸­çš„å…ƒç´ ä¼šè‡ªåŠ¨é”€æ¯ï¼Œè¢«åƒåœ¾å›æ”¶å™¨å¤„ç†</p></blockquote><p>è¿™é‡Œä»…ä»…è€ƒè™‘æœ€ä¸ºæ™®é€šçš„å½¢å¼ï¼Œå³æ·±å±‚æ¬¡é€’å½’çš„æ˜¯ä¸€ä¸ªæ•°ç»„æˆ–è€…æ˜¯å¯¹è±¡ï¼Œ<em>å¦‚æœæ˜¯å‡½æ•°functionï¼Œåˆ™ç›´æ¥è¿”å›å…¶å¼•ç”¨å³å¯ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆæ·±å±‚æ¬¡æ‹·è´çš„æ„ä¹‰</em></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clone</span> (<span class="params">target, map = new WeakMap(</span>)) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> target === <span class="string">'object'</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> cloneTarget = <span class="built_in">Array</span>.isArray(target) ? [] : &#123;&#125;</span><br><span class="line">    <span class="keyword">if</span> (map.get(target)) &#123;</span><br><span class="line">      <span class="keyword">return</span> map.get(target)</span><br><span class="line">    &#125;</span><br><span class="line">    map.set(target, cloneTarget)</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> target) &#123;</span><br><span class="line">      cloneTarget[key] = clone(target[key], map)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cloneTarget</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> target</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç”±äºwhileå¾ªç¯é€Ÿåº¦è¾ƒå¿«ï¼Œå¯ä»¥å°†for-in-å¾ªç¯æ”¹è¿›æˆwhileå¾ªç¯"><a href="#ç”±äºwhileå¾ªç¯é€Ÿåº¦è¾ƒå¿«ï¼Œå¯ä»¥å°†for-in-å¾ªç¯æ”¹è¿›æˆwhileå¾ªç¯" class="headerlink" title="ç”±äºwhileå¾ªç¯é€Ÿåº¦è¾ƒå¿«ï¼Œå¯ä»¥å°†for in å¾ªç¯æ”¹è¿›æˆwhileå¾ªç¯"></a>ç”±äºwhileå¾ªç¯é€Ÿåº¦è¾ƒå¿«ï¼Œå¯ä»¥å°†<code>for in å¾ªç¯æ”¹è¿›æˆwhileå¾ªç¯</code></h2><blockquote><p>whileå¾ªç¯æ•ˆç‡ &gt; æ™®é€šforå¾ªç¯çš„æ•ˆç‡ &gt; <code>for in</code>çš„æ•ˆç‡</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">forEach</span>(<span class="params">array, callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> index = <span class="number">-1</span></span><br><span class="line">  <span class="keyword">const</span> length = array.length</span><br><span class="line">  <span class="keyword">while</span> (++index &lt; length) &#123;</span><br><span class="line">    callback.call(array[index], array[index], index)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è€ƒè™‘å¤šç§æ•°æ®ç±»å‹"><a href="#è€ƒè™‘å¤šç§æ•°æ®ç±»å‹" class="headerlink" title="è€ƒè™‘å¤šç§æ•°æ®ç±»å‹"></a>è€ƒè™‘å¤šç§æ•°æ®ç±»å‹</h2><h3 id="é‡æ„åˆ¤æ–­åŸºæœ¬ç±»å‹"><a href="#é‡æ„åˆ¤æ–­åŸºæœ¬ç±»å‹" class="headerlink" title="é‡æ„åˆ¤æ–­åŸºæœ¬ç±»å‹"></a>é‡æ„åˆ¤æ–­åŸºæœ¬ç±»å‹</h3><blockquote><p>functionç›´æ¥å½“åšåŸºæœ¬ç±»å‹ï¼Œå¤åˆ¶è¿‡å»</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isObject</span> (<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> type = <span class="keyword">typeof</span> obj</span><br><span class="line">  <span class="keyword">return</span> type !== <span class="literal">null</span> &amp;&amp; (type === <span class="string">'object'</span> || type === <span class="string">'function'</span> )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getType</span> (<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(obj)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å…‹éš†æ—¶ï¼Œä¿è¯å…¶åŸå‹å¯¹è±¡æŒ‚è½½æ­£å¸¸"><a href="#å…‹éš†æ—¶ï¼Œä¿è¯å…¶åŸå‹å¯¹è±¡æŒ‚è½½æ­£å¸¸" class="headerlink" title="å…‹éš†æ—¶ï¼Œä¿è¯å…¶åŸå‹å¯¹è±¡æŒ‚è½½æ­£å¸¸"></a>å…‹éš†æ—¶ï¼Œä¿è¯å…¶åŸå‹å¯¹è±¡æŒ‚è½½æ­£å¸¸</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getInit</span> (<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> Ctor = obj.constructor</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Ctor()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ„å»ºå¤šç§ç±»å‹ï¼ŒåŒ…æ‹¬é€‚åˆæ·±æ‹·è´"><a href="#æ„å»ºå¤šç§ç±»å‹ï¼ŒåŒ…æ‹¬é€‚åˆæ·±æ‹·è´" class="headerlink" title="æ„å»ºå¤šç§ç±»å‹ï¼ŒåŒ…æ‹¬é€‚åˆæ·±æ‹·è´"></a>æ„å»ºå¤šç§ç±»å‹ï¼ŒåŒ…æ‹¬é€‚åˆæ·±æ‹·è´</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// é€‚åˆé€’å½’æ·±æ‹·è´çš„ç±»å‹</span></span><br><span class="line"><span class="keyword">const</span> mapTag = <span class="string">'[object Map]'</span></span><br><span class="line"><span class="keyword">const</span> setTag = <span class="string">'[object Set]'</span></span><br><span class="line"><span class="keyword">const</span> arrayTag = <span class="string">'[object Array]'</span></span><br><span class="line"><span class="keyword">const</span> objectTag = <span class="string">'[object Object]'</span></span><br><span class="line"><span class="keyword">const</span> deepTag = [mapTag, setTag, arrayTag, objectTag]</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¶ä½™é‡æ–°æ‹·è´çš„ç±»å‹</span></span><br><span class="line"><span class="keyword">const</span> booleanTag = <span class="string">'[object Boolean]'</span></span><br><span class="line"><span class="keyword">const</span> dateTag = <span class="string">'[object Date]'</span></span><br><span class="line"><span class="keyword">const</span> errorTag = <span class="string">'[object Error]'</span></span><br><span class="line"><span class="keyword">const</span> numberTag = <span class="string">'[object Number]'</span></span><br><span class="line"><span class="keyword">const</span> regexpTag = <span class="string">'[object RegExp]'</span></span><br><span class="line"><span class="keyword">const</span> stringTag = <span class="string">'[object String]'</span></span><br><span class="line"><span class="keyword">const</span> symbolTag = <span class="string">'[object Symbol]'</span></span><br><span class="line"><span class="keyword">const</span> functionTag = <span class="string">'[object Function]'</span></span><br></pre></td></tr></table></figure><p>æ·±åº¦clone</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clone</span> (<span class="params">target, map = new WeakMap(</span>)) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å…‹éš†åŸå§‹ç±»å‹</span></span><br><span class="line">  <span class="keyword">if</span> (!isObject(target)) &#123;</span><br><span class="line">    <span class="keyword">return</span> target</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line">  <span class="keyword">const</span> type = getType(target)</span><br><span class="line">  <span class="keyword">let</span> cloneTarget</span><br><span class="line">  <span class="keyword">if</span> (deepTag.includes(type)) &#123;</span><br><span class="line">    cloneTarget = getInit(target)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é˜²æ­¢å¾ªç¯å¼•ç”¨</span></span><br><span class="line">  <span class="keyword">if</span> (map.get(target)) &#123;</span><br><span class="line">    <span class="keyword">return</span> map.get(target)</span><br><span class="line">  &#125;</span><br><span class="line">  map.set(target, cloneTarget)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å…‹éš†set</span></span><br><span class="line">  <span class="keyword">if</span> (type === setTag) &#123;</span><br><span class="line">    target.foreach(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">      cloneTarget.add(clone(value, map))</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å…‹éš†map</span></span><br><span class="line">  <span class="keyword">if</span> (type === mapTag) &#123;</span><br><span class="line">    target.foreach(<span class="function">(<span class="params">value, key</span>) =&gt;</span> &#123;</span><br><span class="line">      cloneTarget.set(key, clone(value, map))</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å…‹éš†æ•°ç»„</span></span><br><span class="line">  <span class="keyword">if</span> (type === arrayTag) &#123;</span><br><span class="line">    foreach(target, (value, index) =&gt; &#123;</span><br><span class="line">      <span class="comment">// [a, b, c] =&gt; 0:a 1:b 2:c ä½¿ç”¨çš„æ˜¯0,1,2</span></span><br><span class="line">      cloneTarget[index] = clone(target[index], map) </span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å…‹éš†å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">if</span> (type === objectTag) &#123;</span><br><span class="line">    <span class="keyword">const</span> keys = <span class="built_in">Object</span>.keys(target)</span><br><span class="line">    foreach(keys, (key, index) =&gt; &#123;</span><br><span class="line">      <span class="comment">// ['name', 'age'] =&gt; 0: 'name', 1: 'age' æˆ‘ä»¬ä½¿ç”¨åˆ°çš„æ˜¯name, age</span></span><br><span class="line">      cloneTarget[key] = clone(target[key], map)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å…‹éš†å‡½æ•°çš„æ–¹å¼"><a href="#å…‹éš†å‡½æ•°çš„æ–¹å¼" class="headerlink" title="å…‹éš†å‡½æ•°çš„æ–¹å¼"></a>å…‹éš†å‡½æ•°çš„æ–¹å¼</h2><blockquote><p>å‡½æ•°å¯ä»¥ç›´æ¥å¼•ç”¨åœ°å€ï¼Œè¿™é‡Œä¹Ÿå¯ä»¥ä½¿ç”¨æ­£åˆ™åŒ¹é…</p></blockquote><ul><li>ç®­å¤´å‡½æ•°æ²¡æœ‰åŸå‹ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨<code>eval()</code>ç”Ÿæˆ</li><li>æ™®é€šå‡½æ•°æœ‰åŸå‹ï¼Œéœ€è¦ä½¿ç”¨<code>new Function(...params, functionBody)</code></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cloneFunction</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> bodyReg = <span class="regexp">/(?&lt;=\&#123;)(.|\n)+(?=\&#125;)/m</span></span><br><span class="line">  <span class="keyword">const</span> paramsReg = <span class="regexp">/(?&lt;=\().+(?=\)\s+\&#123;)/</span></span><br><span class="line">  <span class="keyword">const</span> fnStr = fn.toString()</span><br><span class="line">  <span class="keyword">if</span> (fn.prototype) &#123;</span><br><span class="line">    <span class="comment">// æ™®é€šå‡½æ•°</span></span><br><span class="line">    <span class="keyword">const</span> body = bodyReg.exec(fnStr)</span><br><span class="line">    <span class="keyword">const</span> params = paramsReg.exec(fnStr)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ— å‡½æ•°ä½“</span></span><br><span class="line">    <span class="keyword">if</span> (!body) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ— å‚æ•°</span></span><br><span class="line">    <span class="keyword">if</span> (!params) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Function</span>(body[<span class="number">0</span>])</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æœ‰å‚æ•°</span></span><br><span class="line">    <span class="keyword">const</span> paramsArr = params[<span class="number">0</span>].split(<span class="string">','</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Function</span>(...paramsArr, body[<span class="number">0</span>])</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// ç®­å¤´å‡½æ•°</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">eval</span>(fnStr)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å…‹éš†å…¶ä»–ç±»å‹çš„æ–¹å¼"><a href="#å…‹éš†å…¶ä»–ç±»å‹çš„æ–¹å¼" class="headerlink" title="å…‹éš†å…¶ä»–ç±»å‹çš„æ–¹å¼"></a>å…‹éš†å…¶ä»–ç±»å‹çš„æ–¹å¼</h2><p>é™¤äº†<code>map, set, object, array</code>å…¶ä½™å¯ä»¥ä½¿ç”¨æ„é€ å™¨ï¼Œæˆ–è€…å†ç”Ÿæˆ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> type = getType(target)</span><br><span class="line"><span class="keyword">let</span> cloneTarget</span><br><span class="line"><span class="keyword">if</span> (deepTag.includes(type)) &#123;</span><br><span class="line">  cloneTarget = getInit(target)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> cloneOtherType(target, type)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…‹éš†å…¶ä»–ç±»å‹</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cloneOtherType</span> (<span class="params">target, type</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> Ctor = target.constructor</span><br><span class="line">  <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">    <span class="keyword">case</span> booleanTag:</span><br><span class="line">    <span class="keyword">case</span> numberTag:</span><br><span class="line">    <span class="keyword">case</span> stringTag:</span><br><span class="line">    <span class="keyword">case</span> dateTag:</span><br><span class="line">    <span class="keyword">case</span> errorTag:</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> Ctor(target)</span><br><span class="line">    <span class="keyword">case</span> functionTag:</span><br><span class="line">      <span class="keyword">return</span> cloneFunction(target)</span><br><span class="line">    <span class="keyword">case</span> symbolTag:</span><br><span class="line">      <span class="keyword">return</span> cloneSymbol(target)</span><br><span class="line">    <span class="keyword">case</span> regexpTag:</span><br><span class="line">      <span class="keyword">return</span> cloneRegExp(target)</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…‹éš†Symbol</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cloneSymbol</span> (<span class="params">symbol</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>(<span class="built_in">Symbol</span>.prototype.valueOf.call(symbol))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…‹éš†æ­£åˆ™</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cloneRegExp</span> (<span class="params">regExp</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// const flagReg = /[i|m|g]*$/g</span></span><br><span class="line">  <span class="keyword">const</span> flagReg = <span class="regexp">/\w*$/g</span></span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">new</span> <span class="built_in">RegExp</span>(regExp.source, flagReg.exec(regExp))</span><br><span class="line">  result.lastIndex = regExp.lastIndex</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><blockquote><p>åŸºæœ¬æ•°æ®ç±»å‹åœ¨æ ˆä¸­å­˜å‚¨ï¼Œä¸€æ—¦åˆ›å»ºåˆ™ä¸å¯æ”¹å˜ï¼›å­˜å‚¨åœ¨å †ä¸­çš„å¼•ç”¨ç±»å‹åˆ™éœ€è¦æ·±æ‹·è´ã€‚</p></blockquote><p>æ·±æ‹·è´æ—¶ï¼Œè¦è€ƒè™‘ä¸‰ç§ç±»å‹çš„æ‹·è´ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹ï¼Œé€šè¿‡é€’å½’æ“ä½œçš„å¼•ç”¨ç±»å‹ï¼Œé€šè¿‡åˆ›å»ºå®ä¾‹çš„å…¶ä»–å¼•ç”¨ç±»å‹</p><h2 id="åŸºæœ¬æ•°æ®ç±»å‹"><a href="#åŸºæœ¬æ•°æ®ç±»å‹" class="headerlink" title="åŸºæœ¬æ•°æ®ç±»å‹"></a>åŸºæœ¬æ•°æ®ç±»å‹</h2><p>é¦–å…ˆJSä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹æœ‰,<code>null undefined boolean number string symbol object</code></p><p>è¦åˆ¤æ–­æ˜¯åŸºæœ¬æ•°æ®ç±»å‹è¿˜æ˜¯å¼•ç”¨ç±»å‹ï¼Œéœ€è¦ä½¿ç”¨<code>typeof</code> å¯åŒºåˆ†</p><ul><li><code>typeof</code>ä¼šå°†<code>function</code>ç±»å‹å•ç‹¬åŒºåˆ†å‡ºæ¥ï¼Œå…¶å®æ˜¯å±äº<code>object</code>ç±»å‹ä¸­çš„</li><li><code>typeof null === &#39;object&#39;</code>è¿™æ˜¯æ—©æœŸjsè®¾è®¡çš„bug,åæ¥è€ƒè™‘åˆ°å…¼å®¹æ€§çš„é—®é¢˜ï¼Œå°±æ²¡æœ‰åœ¨è¿›è¡Œä¿®å¤</li></ul><p>å› ä¸ºfunctionç±»å‹å¹¶æ²¡æœ‰å®é™…æ‹·è´çš„éœ€è¦ï¼Œ<code>lodash</code>ä¸­ä¹Ÿæ˜¯ç›´æ¥è¿”å›çš„</p><p>æ‰€ä»¥åˆ›å»ºå‡ºä¸€ä¸ªåˆ¤æ–­æ˜¯å¦æ˜¯Objectç±»å‹çš„æ–¹æ³•ï¼Œæ ¸å¿ƒä½¿ç”¨typeofè¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœä¸æ˜¯<code>object</code>ç±»å‹(<code>function</code>ç±»å‹ä¹Ÿç›´æ¥è¢«è¿”å›äº†)ï¼Œç›´æ¥è¿”å›è¯¥å€¼</p><h2 id="é€šè¿‡é€’å½’æ“ä½œçš„å¼•ç”¨ç±»å‹"><a href="#é€šè¿‡é€’å½’æ“ä½œçš„å¼•ç”¨ç±»å‹" class="headerlink" title="é€šè¿‡é€’å½’æ“ä½œçš„å¼•ç”¨ç±»å‹"></a>é€šè¿‡é€’å½’æ“ä½œçš„å¼•ç”¨ç±»å‹</h2><p>å…¶æ¬¡åˆ¤æ–­ç±»å‹åº”è¯¥ä½¿ç”¨<code>Object.prototype.toString.call(target)</code>æ¥åˆ¤æ–­ï¼Œåˆ†ä¸ºä¸¤ç±»</p><ul><li>éœ€è¦è¿›è¡Œé€’å½’æ“ä½œæ‹·è´çš„ç±»å‹<code>map, set, object, array</code><em>æš‚ä¸è€ƒè™‘<code>WeakMap</code>, <code>WeakSet</code></em></li><li>å¦ä¸€ç±»åŒ…æ‹¬åŸºæœ¬ç±»å‹çš„ä¸€äº›åŒ…è£…ç±»å‹<code>Number, Boolean, String</code>, è¿˜æœ‰å…¶ä»–ç±»å‹<code>Date, Symbol, RegExp</code></li></ul><p>éœ€è¦æ·±æ‹·è´çš„ç±»å‹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> Ctor = target.constructor</span><br><span class="line"><span class="keyword">let</span> cloneTarget = <span class="keyword">new</span> Ctor()</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…‹éš†set</span></span><br><span class="line">  <span class="keyword">if</span> (type === setTag) &#123;</span><br><span class="line">    target.foreach(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">      cloneTarget.add(clone(value, map))</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å…‹éš†map</span></span><br><span class="line">  <span class="keyword">if</span> (type === mapTag) &#123;</span><br><span class="line">    target.foreach(<span class="function">(<span class="params">value, key</span>) =&gt;</span> &#123;</span><br><span class="line">      cloneTarget.set(key, clone(value, map))</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å…‹éš†æ•°ç»„</span></span><br><span class="line">  <span class="keyword">if</span> (type === arrayTag) &#123;</span><br><span class="line">    foreach(target, (value, index) =&gt; &#123;</span><br><span class="line">      <span class="comment">// [a, b, c] =&gt; 0:a 1:b 2:c ä½¿ç”¨çš„æ˜¯0,1,2</span></span><br><span class="line">      cloneTarget[index] = clone(target[index], map) </span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å…‹éš†å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">if</span> (type === objectTag) &#123;</span><br><span class="line">    <span class="keyword">const</span> keys = <span class="built_in">Object</span>.keys(target)</span><br><span class="line">    foreach(keys, (key, index) =&gt; &#123;</span><br><span class="line">      <span class="comment">// ['name', 'age'] =&gt; 0: 'name', 1: 'age' æˆ‘ä»¬ä½¿ç”¨åˆ°çš„æ˜¯name, age</span></span><br><span class="line">      cloneTarget[key] = clone(target[key], map)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h2 id="å…¶ä»–ç±»å‹-é€šè¿‡åˆ›å»ºå®ä¾‹çš„å…¶ä»–å¼•ç”¨ç±»å‹"><a href="#å…¶ä»–ç±»å‹-é€šè¿‡åˆ›å»ºå®ä¾‹çš„å…¶ä»–å¼•ç”¨ç±»å‹" class="headerlink" title="å…¶ä»–ç±»å‹ é€šè¿‡åˆ›å»ºå®ä¾‹çš„å…¶ä»–å¼•ç”¨ç±»å‹"></a>å…¶ä»–ç±»å‹ é€šè¿‡åˆ›å»ºå®ä¾‹çš„å…¶ä»–å¼•ç”¨ç±»å‹</h2><p>å…¶ä»–ç±»å‹ï¼ŒåŒ…è£…ç±»å‹ï¼Œä»¥åŠä¸€äº›ç®€å•çš„ç±»å‹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Ctor = target.constructor</span><br><span class="line"><span class="keyword">switch</span> (type) &#123;</span><br><span class="line">  <span class="keyword">case</span> booleanTag:</span><br><span class="line">  <span class="keyword">case</span> numberTag:</span><br><span class="line">  <span class="keyword">case</span> stringTag:</span><br><span class="line">  <span class="keyword">case</span> dateTag:</span><br><span class="line">  <span class="keyword">case</span> errorTag:</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Ctor(target)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä»–ç±»å‹ <code>Symbol</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> s1 = <span class="built_in">Symbol</span>(<span class="string">'foo'</span>)</span><br><span class="line"><span class="comment">// const s2 = Symbol.prototype.valueOf.call(s1) // s1 === s2</span></span><br><span class="line"><span class="keyword">const</span> s2 = <span class="built_in">Object</span>(<span class="built_in">Symbol</span>.prototype.valueOf.call(s1)) <span class="comment">// s1 !== s2</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cloneSymbol</span>(<span class="params">symbol</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>(<span class="built_in">Symbol</span>.prototype.valueOf.call(symbol))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä»–ç±»å‹ <code>RegExp</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cloneRegExp</span>(<span class="params">regExp</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> flagReg = <span class="regexp">/\w*$/</span> <span class="comment">// åŒ¹é…ç»“å°¾çš„æ¨¡å¼ä¿®é¥°ç¬¦img</span></span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">new</span> <span class="built_in">RegExp</span>(regExp.source, flagReg.exec(regExp)) <span class="comment">// é‡æ–°åˆ›å»ºç¤ºä¾‹</span></span><br><span class="line">  result.lastIndex = regExp.lastIndex <span class="comment">// ä¿®æ­£lastIndex</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä»–ç±»å‹ <code>function</code></p><p><code>function</code>ç±»å‹å¯ä»¥ç›´æ¥è¿”å›ï¼Œä½†æ˜¯è¿™é‡Œä¹Ÿåšå‡ºå®ç°</p><ul><li>ç®­å¤´å‡½æ•°æ²¡æœ‰åŸå‹ï¼Œå¯ä»¥ç”¨<code>eval</code>ç›´æ¥è¿”å›</li><li>æ™®é€šå‡½æ•°æœ‰åŸå‹ï¼Œå¯ä»¥ä½¿ç”¨<code>new Function(...params, functionBody)</code></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cloneFunction</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> bodyReg = <span class="regexp">/(?&gt;=\&#123;)(.|\n)+(?=\&#125;)/m</span></span><br><span class="line">  <span class="keyword">const</span> paramsReg = <span class="regexp">/(?&gt;=\().+(?=\)\s+\&#123;)/</span></span><br><span class="line">  <span class="keyword">const</span> fnStr = fn.toString()</span><br><span class="line">  <span class="keyword">if</span> (fn.prototype) &#123;</span><br><span class="line">    <span class="comment">// æ™®é€šå‡½æ•°</span></span><br><span class="line">    <span class="keyword">const</span> body = bodyReg.exec(fnStr)</span><br><span class="line">    <span class="keyword">const</span> params = paramsReg.exec(fnStr)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ— å‡½æ•°ä½“</span></span><br><span class="line">    <span class="keyword">if</span> (!body) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ— å‚æ•°</span></span><br><span class="line">    <span class="keyword">if</span> (!params) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Function</span>(body[<span class="number">0</span>])</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æœ‰å‚æ•°</span></span><br><span class="line">    <span class="keyword">const</span> paramsArr = params[<span class="number">0</span>].split(<span class="string">','</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Function</span>(...paramsArr, body[<span class="number">0</span>])</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// ç®­å¤´å‡½æ•°</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">eval</span>(fnStr)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¤„ç†å¾ªç¯å¼•ç”¨"><a href="#å¤„ç†å¾ªç¯å¼•ç”¨" class="headerlink" title="å¤„ç†å¾ªç¯å¼•ç”¨"></a>å¤„ç†å¾ªç¯å¼•ç”¨</h2><p><code>WeakMap</code>,è‹¥keyå¯¹åº”ä¸åœ¨æœ‰å¼•ç”¨ï¼Œåˆ™ä¸‹ä¸€æ¬¡<code>GC</code>ä¼šå¯¹å…¶å¼•ç”¨å›æ”¶ï¼Œé¿å…å†…å­˜æ³„æ¼</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clone</span></span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> æ°é¥­ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>win10ä¼˜åŒ–</title>
      <link href="/2020/04/10/win10%E4%BC%98%E5%8C%96/"/>
      <url>/2020/04/10/win10%E4%BC%98%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<h2 id="å…³é—­åº”ç”¨å•†åº—ä¸­çš„åå°åº”ç”¨"><a href="#å…³é—­åº”ç”¨å•†åº—ä¸­çš„åå°åº”ç”¨" class="headerlink" title="å…³é—­åº”ç”¨å•†åº—ä¸­çš„åå°åº”ç”¨"></a>å…³é—­åº”ç”¨å•†åº—ä¸­çš„åå°åº”ç”¨</h2><p>è®¾ç½®ä¸­æœç´¢-åå°åº”ç”¨ï¼Œæˆ–è€…å†éšç§ä¸­æ‰¾åˆ°åå°å…³é—­ä¸éœ€è¦çš„åº”ç”¨</p><h2 id="å…³é—­ä¸éœ€è¦çš„é€šçŸ¥"><a href="#å…³é—­ä¸éœ€è¦çš„é€šçŸ¥" class="headerlink" title="å…³é—­ä¸éœ€è¦çš„é€šçŸ¥"></a>å…³é—­ä¸éœ€è¦çš„é€šçŸ¥</h2><p>è®¾ç½®ä¸­æœç´¢-é€šçŸ¥ï¼Œå…³é—­ä¸éœ€è¦çš„é€šçŸ¥æé†’</p><h2 id="å…³é—­åŠ¨ç”»"><a href="#å…³é—­åŠ¨ç”»" class="headerlink" title="å…³é—­åŠ¨ç”»"></a>å…³é—­åŠ¨ç”»</h2><p>è®¾ç½®ä¸­æœç´¢-è½»æ¾ä½¿ç”¨ï¼Œå…³é—­ä¸éœ€è¦çš„åŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœ</p><h2 id="å…³é—­å¹³æ¿æ¨¡å¼"><a href="#å…³é—­å¹³æ¿æ¨¡å¼" class="headerlink" title="å…³é—­å¹³æ¿æ¨¡å¼"></a>å…³é—­å¹³æ¿æ¨¡å¼</h2><p>è®¾ç½®ä¸­æœç´¢-å¹³æ¿æ¨¡å¼ï¼Œå§‹ç»ˆä½¿ç”¨æ¡Œé¢æ¨¡å¼ï¼Œä¸è¯¢é—®æˆ‘ï¼Œä¸åˆ‡æ¢</p><h2 id="å…³é—­ä¸éœ€è¦å¯åŠ¨é¡¹"><a href="#å…³é—­ä¸éœ€è¦å¯åŠ¨é¡¹" class="headerlink" title="å…³é—­ä¸éœ€è¦å¯åŠ¨é¡¹"></a>å…³é—­ä¸éœ€è¦å¯åŠ¨é¡¹</h2><p>ä»»åŠ¡ç®¡ç†å™¨ä¸­ï¼Œé€‰æ‹©å¯åŠ¨ä¹‹åå…³é—­ä¸éœ€è¦çš„å¯åŠ¨é¡¹</p><h2 id="å¼€å¯å“è¶Šæ€§èƒ½æ¨¡å¼ï¼ˆå™ªå£°å¤§ï¼Œå¯é€‰ï¼‰"><a href="#å¼€å¯å“è¶Šæ€§èƒ½æ¨¡å¼ï¼ˆå™ªå£°å¤§ï¼Œå¯é€‰ï¼‰" class="headerlink" title="å¼€å¯å“è¶Šæ€§èƒ½æ¨¡å¼ï¼ˆå™ªå£°å¤§ï¼Œå¯é€‰ï¼‰"></a>å¼€å¯å“è¶Šæ€§èƒ½æ¨¡å¼ï¼ˆå™ªå£°å¤§ï¼Œå¯é€‰ï¼‰</h2><p>è®¾ç½®ä¸­ï¼Œæœç´¢ç”µæ± ï¼Œé€‰æ‹©ç”µæºè®¡åˆ’ï¼Œé€‰æ‹©å“è¶Šæ€§èƒ½</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># powershellä¸­ï¼Œè¾“å…¥æ­¤ä»£ç ï¼Œè·å–å“è¶Šæ€§èƒ½æ¨¡å¼</span></span><br><span class="line">powercfg -duplicatescheme e9a42b02-d5df-448d-aa00-03f14749eb61</span><br></pre></td></tr></table></figure><h2 id="ç¦ç”¨æœåŠ¡ï¼ˆè§†æƒ…å†µï¼‰"><a href="#ç¦ç”¨æœåŠ¡ï¼ˆè§†æƒ…å†µï¼‰" class="headerlink" title="ç¦ç”¨æœåŠ¡ï¼ˆè§†æƒ…å†µï¼‰"></a>ç¦ç”¨æœåŠ¡ï¼ˆè§†æƒ…å†µï¼‰</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨win+R</span></span><br><span class="line">services.msc</span><br></pre></td></tr></table></figure><ul><li><code>Connected User Experiences and Telemetry</code> ä¸Šä¼ å¯å…³é—­</li><li><code>Windows Search</code> å¯å…³é—­</li></ul><h2 id="åˆ†æç”µè„‘å®‰è£…çš„é©±åŠ¨"><a href="#åˆ†æç”µè„‘å®‰è£…çš„é©±åŠ¨" class="headerlink" title="åˆ†æç”µè„‘å®‰è£…çš„é©±åŠ¨"></a>åˆ†æç”µè„‘å®‰è£…çš„é©±åŠ¨</h2><p>ä½¿ç”¨<a href="https://github.com/lostindark/DriverStoreExplorer" target="_blank" rel="noopener"><code>driverstore</code></a>è¿›è¡Œåˆ†æç”µè„‘é©±åŠ¨ï¼Œåˆ é™¤åŒå‘½åçš„é©±åŠ¨ï¼Œå°†æ—§çš„åˆ é™¤å³å¯</p><blockquote><p>å¦‚æœä½ é€‰æ‹©äº†é”™è¯¯çš„é©±åŠ¨ï¼Œå¦‚æœä¸å‹¾é€‰å¼ºåˆ¶åˆ é™¤ï¼Œæ˜¯æ²¡æœ‰é—®é¢˜çš„,ä¸ä¼šåˆ é™¤æ‰æ­£åœ¨ä½¿ç”¨çš„é©±åŠ¨</p></blockquote><h2 id="åˆ†æç”µè„‘ç£ç›˜ä¸­å®‰è£…çš„å¤§å°"><a href="#åˆ†æç”µè„‘ç£ç›˜ä¸­å®‰è£…çš„å¤§å°" class="headerlink" title="åˆ†æç”µè„‘ç£ç›˜ä¸­å®‰è£…çš„å¤§å°"></a>åˆ†æç”µè„‘ç£ç›˜ä¸­å®‰è£…çš„å¤§å°</h2><p>ä½¿ç”¨<a href="https://spacesniffer.en.softonic.com/" target="_blank" rel="noopener"><code>sspacesniffer</code></a>åˆ†æç”µè„‘ä¸­å„ç›˜æ‰€å çš„å¤§å°ï¼Œè‡ªå·±å»å¯»æ‰¾å ç”¨è¾ƒå¤§çš„æ–‡ä»¶è¿›è¡Œå¤„ç†</p>]]></content>
      
      
      
        <tags>
            
            <tag> æŠ€å·§ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Gitå›é¡¾</title>
      <link href="/2020/04/05/git%E5%9B%9E%E9%A1%BE/"/>
      <url>/2020/04/05/git%E5%9B%9E%E9%A1%BE/</url>
      
        <content type="html"><![CDATA[<p>Gitæ˜¯ä¸€ç§åˆ†å¸ƒå¼ä»£ç ç®¡ç†çš„æ–¹å¼ï¼Œç›¸æ¯”ä¼ ç»Ÿçš„SVNç›¸æ¯”ï¼Œå…¶é€Ÿåº¦æ›´å¿«ï¼ˆæ¯ä¸ªæäº¤éƒ½æ˜¯å­˜å‚¨çš„å®Œæ•´å¿«ç…§ï¼Œè€Œä¸æ˜¯é¡¹ç›®è¡¥ä¸ï¼‰ï¼Œæ€§èƒ½æ›´å¥½ï¼ˆä½¿ç”¨æè‡´çš„å‹ç¼©ç®—æ³•ï¼Œä½¿å¾—å­˜å‚¨å ç”¨å¾ˆå°‘ï¼‰</p><h2 id="åˆ†å¸ƒå¼VSé›†ä¸­å¼"><a href="#åˆ†å¸ƒå¼VSé›†ä¸­å¼" class="headerlink" title="åˆ†å¸ƒå¼VSé›†ä¸­å¼"></a>åˆ†å¸ƒå¼VSé›†ä¸­å¼</h2><p>åœ¨æ—©å‰ï¼Œéƒ½æ˜¯ç”¨é›†ä¸­å¼ï¼ˆSVNï¼‰ä»£ç ç®¡ç†çš„æ–¹å¼ï¼Œå³ä½¿ç”¨ä¸€å°ä¸­å¿ƒæœåŠ¡å™¨ä½œä¸ºä»£ç ç®¡ç†ï¼Œå¤§å®¶éƒ½ä»ä¸Šé¢æ‹‰ä»£ç ï¼Œç„¶åæäº¤ä»£ç ï¼Œä½†æ˜¯ä¸€æ—¦æ­¤ä¸­å¿ƒæœåŠ¡å™¨å‘ç”Ÿé—®é¢˜ï¼Œåˆ™å¯èƒ½ä¼šä¸¢å¤±ä»£ç ï¼ˆå¦‚æœè¦æ¢å¤ï¼Œè‡³å°‘æœ‰ä¸€ä¸ªäººä¿å­˜è¿‡é¡¹ç›®çš„æ‰€æœ‰å®Œæ•´å¿«ç…§ï¼‰å¹¶ä¸”æ­¤æœåŠ¡å™¨å¦‚æœå‘ç”Ÿé—®é¢˜åï¼Œå†™çš„ä»£ç éƒ½æ˜¯ä¸ä¿é™©çš„ï¼Œå› ä¸ºæ²¡æœ‰æœ¬åœ°çš„ä»£ç æ°¸è¿œæ˜¯é‚£ä¸€ä»½ï¼Œä¸å­˜åœ¨ç‰ˆæœ¬ï¼Œå¦‚æœé”™äº†ï¼Œåªèƒ½å›é€€åˆ°æœåŠ¡å™¨å‘ç”Ÿæ•…éšœä¹‹å‰çš„ä»£ç ã€‚</p><p>åˆ†å¸ƒå¼ï¼ˆGitï¼‰ä»£ç ç®¡ç†çš„æ–¹å¼ï¼Œå¾ˆå¥½çš„è§£å†³äº†ä¸Šé¢çš„é—®é¢˜ï¼Œæ¯ä¸ªäººçš„å®¢æˆ·ç«¯éƒ½å¯ä»¥ä½œä¸ºä¸€ä¸ªé¡¹ç›®ç®¡ç†ä»“åº“ï¼Œå¹¶ä¸”åœ¨æœ¬åœ°ä¹Ÿå¯ä»¥åšç‰ˆæœ¬æ§åˆ¶ï¼Œæ­¤æ—¶å…¬å¸é‡Œå¯ä»¥æ‰¾ä¸€å°æœåŠ¡å™¨å½“åšä¸€ä¸ªç‰¹æ®Šçš„å®¢æˆ·ç«¯ï¼Œå½“ç„¶å¦‚æœå®ƒåäº†ï¼Œåªæ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯åäº†ï¼Œæ‰€æœ‰äººé‚£è¾¹éƒ½æ˜¯æœ‰ä»£ç çš„ï¼Œä¸ä¼šé€ æˆå¤ªå¤§çš„æŸå¤±</p><p>æ ¹æ®ä»–ä»¬çš„å­˜å‚¨æ–¹å¼è€Œè¨€ï¼Œåˆ†å¸ƒå¼ä»£ç çš„ç®¡ç†æ–¹å¼è¦æ¯”é›†ä¸­å¼ä»£ç çš„ç®¡ç†æ–¹å¼ï¼Œå­˜å‚¨çš„å†…å®¹å¤šå¾ˆå¤šï¼Œå› ä¸ºæ¯ä¸ªäººéƒ½è¦å­˜å®Œæ•´çš„é¡¹ç›®å†å²ï¼Œ<strong>ä½†æ˜¯ï¼Œç”±äºGitå›¢é˜Ÿçš„æè‡´ä¼˜åŒ–å‹ç¼©ï¼Œæ‰€å ç”¨çš„å­˜å‚¨ç©ºé—´å¹¶ä¸æ˜¯å¾ˆå¤§ï¼Œç›¸æ¯”SVNå¤§é‚£ä¹ˆä¸€ç‚¹ç‚¹ç‚¹</strong></p><h2 id="åº•å±‚åŸç†"><a href="#åº•å±‚åŸç†" class="headerlink" title="åº•å±‚åŸç†"></a>åº•å±‚åŸç†</h2><p>gitå…¶å®æœ¬è´¨æ˜¯ä¸€ä¸ªæ•°æ®åº“ï¼Œå°†å„ä¸ªæ–‡ä»¶ï¼Œè¿›è¡Œå‹ç¼©åï¼Œå¾—åˆ°ä¸€ä¸²hashå€¼ï¼Œä¿å­˜åˆ°<code>.git</code>ï¼ˆé€šå¸¸éšè—ç›®å½•ï¼‰ç›®å½•ä¸­ï¼Œé€šè¿‡Gitå¯¹è±¡ï¼ŒTreeå¯¹è±¡ï¼ŒCommitå¯¹è±¡æ¥å¯¹æ•´ä¸ªé¡¹ç›®è¿›è¡Œç®¡ç†ã€‚</p><h3 id="Gitå¯¹è±¡"><a href="#Gitå¯¹è±¡" class="headerlink" title="Gitå¯¹è±¡"></a>Gitå¯¹è±¡</h3><p>ä¸€ä¸ªæ–‡ä»¶å­˜å‚¨åˆ°Gitä¸­æ—¶ï¼Œå°±æ˜¯ä¸€ä¸ªGitå¯¹è±¡ï¼Œå¦‚æœè¯¥æ–‡ä»¶å‘ç”Ÿäº†æ”¹å˜ï¼Œé‚£ä¹ˆå­˜å‚¨è¿‡åï¼Œä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„Gitå¯¹è±¡ã€‚</p><p>åªèƒ½å­˜å‚¨Gitå¯¹è±¡çš„å†…å®¹ï¼Œå¹¶ä¸èƒ½å­˜å‚¨æ–‡ä»¶åç§°ã€‚</p><h3 id="Treeå¯¹è±¡"><a href="#Treeå¯¹è±¡" class="headerlink" title="Treeå¯¹è±¡"></a>Treeå¯¹è±¡</h3><p>å¤šä¸ªä¿®æ”¹å¥½çš„æ–‡ä»¶ï¼Œå¯ä»¥æ”¾åˆ°åŒä¸€ä¸ªæäº¤æ ‘ä¸Šï¼Œå¹¶ä¸”å¯ä»¥æŒ‡å®šå¯¹è±¡çš„Gitå¯¹è±¡çš„Hashå€¼æ‰€å¯¹åº”çš„æ–‡ä»¶åç§°ï¼Œç­‰äºä¸€æ¬¡å­˜å‚¨äº†è¯¥é¡¹ç›®çš„æ‰€æœ‰æ–‡ä»¶ã€‚</p><p><em>ä¸€ä¸ªæ ‘å¯¹è±¡è‡³å°‘æœ‰ä¸¤ä¸ªGitå¯¹è±¡ï¼Œä¸€ä¸ªæ˜¯æ–‡ä»¶å¯¹è±¡å¯¹åº”çš„Gitå¯¹è±¡ï¼Œä¸€ä¸ªæ˜¯æ­¤æ ‘å¯¹è±¡å¯¹åº”çš„Gitå¯¹è±¡</em>ã€‚</p><h3 id="Commitå¯¹è±¡"><a href="#Commitå¯¹è±¡" class="headerlink" title="Commitå¯¹è±¡"></a>Commitå¯¹è±¡</h3><p>ç­‰äºå¯¹æ•´ä¸ªé¡¹ç›®å¿«ç…§è¿›è¡Œäº†ä¸€æ¬¡åŒ…è£¹ï¼Œä¹Ÿå°±æ˜¯åŒ…è£¹äº†ä¸€ä¸ªtreeå¯¹è±¡ï¼Œå¹¶ä¸”å¢åŠ äº†å…¶ä¸­æäº¤å¤‡æ³¨ï¼Œæäº¤äººï¼Œé‚®ç®±ï¼Œæ—¶é—´ç­‰ï¼Œå¹¶ä¸”å¯ä»¥æŒ‡å®šä»–çš„çˆ¶æäº¤å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æ…¢æ…¢å½¢æˆäº†ä¸€é¢—Commitæ ‘ã€‚</p><p>ä¸€ä¸ªæäº¤å¯¹è±¡å¯¹åº”çš„æ˜¯ä¸€ä¸ªé¡¹ç›®çš„ç‰ˆæœ¬ï¼Œè€Œå…¶ä¸­åŒ…è£¹çš„æ ‘å¯¹è±¡æ‰æ˜¯ä¸€ä¸ªé¡¹ç›®çš„å¿«ç…§ã€‚</p><h2 id="é«˜çº§æŒ‡ä»¤"><a href="#é«˜çº§æŒ‡ä»¤" class="headerlink" title="é«˜çº§æŒ‡ä»¤"></a>é«˜çº§æŒ‡ä»¤</h2><h3 id="git-init-åˆå§‹åŒ–é¡¹ç›®"><a href="#git-init-åˆå§‹åŒ–é¡¹ç›®" class="headerlink" title="git init åˆå§‹åŒ–é¡¹ç›®"></a><code>git init</code> åˆå§‹åŒ–é¡¹ç›®</h3><h3 id="git-add-æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒº"><a href="#git-add-æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒº" class="headerlink" title="git add ./ æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒº"></a><code>git add ./</code> æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒº</h3><blockquote><p><code>git hash-object -w</code>, <code>git update-index ...</code></p></blockquote><p>å…ˆå°†æ‰€æœ‰ä¿®æ”¹çš„æ–‡ä»¶ç”ŸæˆGitå¯¹è±¡ï¼Œä¹‹åå°†å…¶å­˜å…¥æš‚å­˜åŒºä¸­</p><p>è¡¨é¢ä¸Šæ˜¯ï¼šå·¥ä½œåŒº-æš‚å­˜åŒºï¼Œå…¶å®æ˜¯ï¼šå·¥ä½œåŒº-ç‰ˆæœ¬åº“-æš‚å­˜åŒº</p><h3 id="git-commit-m-quot-quot-åˆ›å»ºä¸€æ¬¡æäº¤"><a href="#git-commit-m-quot-quot-åˆ›å»ºä¸€æ¬¡æäº¤" class="headerlink" title="git commit -m &quot;.....&quot; åˆ›å»ºä¸€æ¬¡æäº¤"></a><code>git commit -m &quot;.....&quot;</code> åˆ›å»ºä¸€æ¬¡æäº¤</h3><blockquote><p><code>git write-tree</code>, <code>git commit-tree</code></p></blockquote><p>å…ˆå°†æš‚å­˜åŒºä¸­çš„å†…å®¹ç”Ÿæˆä¸€ä¸ªæ ‘å¯¹è±¡ï¼Œæ”¾å…¥ç‰ˆæœ¬åº“ä¸­ï¼Œåœ¨å°†è¿™ä¸ªæ ‘å¯¹è±¡åŒ…è£¹æˆä¸€ä¸ªæäº¤å¯¹è±¡ï¼Œå­˜å‚¨ç‰ˆæœ¬åº“ä¸­</p><h3 id="git-status-æŸ¥çœ‹æ–‡ä»¶çš„çŠ¶æ€"><a href="#git-status-æŸ¥çœ‹æ–‡ä»¶çš„çŠ¶æ€" class="headerlink" title="git status æŸ¥çœ‹æ–‡ä»¶çš„çŠ¶æ€"></a><code>git status</code> æŸ¥çœ‹æ–‡ä»¶çš„çŠ¶æ€</h3><p>å·²æš‚å­˜ï¼Œå·²ä¿®æ”¹ï¼Œå·²æäº¤</p><h3 id="git-commit-æäº¤ä¿®æ”¹"><a href="#git-commit-æäº¤ä¿®æ”¹" class="headerlink" title="git commit æäº¤ä¿®æ”¹"></a><code>git commit</code> æäº¤ä¿®æ”¹</h3><ul><li><code>git commit</code> ç›´æ¥æäº¤å½“å‰ç¼“å­˜åŒºçš„æ–‡ä»¶ï¼Œè¿›å…¥Vimç¼–è¾‘å™¨ç¼–å†™æäº¤æ³¨é‡Š</li><li><code>git commit -m &quot;è¿™é‡Œæ˜¯æ³¨é‡Šä¿¡æ¯&quot;</code> ç›´æ¥æäº¤å½“å‰ç¼“å­˜åŒºçš„æ–‡ä»¶ï¼Œè·³è¿‡Vimç¼–è¾‘å™¨</li><li><code>git commit -a</code> ç›´æ¥æäº¤å½“å‰æ‰€æœ‰è¿½è¸ªæ–‡ä»¶ï¼Œè·³è¿‡å­˜å…¥æš‚å­˜åŒºï¼Œç›´æ¥æäº¤</li></ul><h3 id="git-diff-æŸ¥çœ‹æ–‡ä»¶ä¿®æ”¹çŠ¶å†µ"><a href="#git-diff-æŸ¥çœ‹æ–‡ä»¶ä¿®æ”¹çŠ¶å†µ" class="headerlink" title="git diff æŸ¥çœ‹æ–‡ä»¶ä¿®æ”¹çŠ¶å†µ"></a><code>git diff</code> æŸ¥çœ‹æ–‡ä»¶ä¿®æ”¹çŠ¶å†µ</h3><ul><li><code>git diff --staged</code> æŸ¥çœ‹æš‚å­˜åŒºä¸­çš„æ–‡ä»¶æ”¹å˜æƒ…å†µ</li></ul><h3 id="git-log-æŸ¥çœ‹gitæäº¤å†å²è®°å½•"><a href="#git-log-æŸ¥çœ‹gitæäº¤å†å²è®°å½•" class="headerlink" title="git log æŸ¥çœ‹gitæäº¤å†å²è®°å½•"></a><code>git log</code> æŸ¥çœ‹gitæäº¤å†å²è®°å½•</h3><ul><li><code>git log</code> æŸ¥çœ‹å®Œæ•´çš„gitæäº¤è®°å½•</li><li><code>git log --oneline  /  git log --pretty=oneline</code> æŸ¥çœ‹gitå†å²ä¸€è¡Œ</li></ul><h3 id="åˆ é™¤-é‡å‘½å"><a href="#åˆ é™¤-é‡å‘½å" class="headerlink" title="åˆ é™¤/é‡å‘½å"></a>åˆ é™¤/é‡å‘½å</h3><ul><li><code>git rm xxx</code> ç›´æ¥åˆ é™¤æ–‡ä»¶ï¼Œåªéœ€è¦<code>git commit</code>ï¼Œç›¸å½“äºå·¥ä½œç›®å½•åˆ é™¤ï¼Œå¹¶ä¸”è¿½è¸ª</li><li><code>git mv xxx yyy</code> ç›´æ¥é‡å‘½åï¼Œåªéœ€è¦<code>git commit</code>ï¼Œç›¸å½“äºå·¥ä½œç›®å½•é‡å‘½åï¼Œå¢åŠ åˆ é™¤è¿½è¸ªå’Œæ–°å¢è¿½è¸ªï¼Œå¹¶ä¸”åˆå¹¶åˆ°rename</li></ul><h2 id="åˆ†æ”¯æŒ‡ä»¤"><a href="#åˆ†æ”¯æŒ‡ä»¤" class="headerlink" title="åˆ†æ”¯æŒ‡ä»¤"></a>åˆ†æ”¯æŒ‡ä»¤</h2><p>gitçš„åˆ†æ”¯ç›¸æ¯”å…¶ä»–è€Œè¨€æ¥è¯´ï¼Œè¾ƒä¸ºå¿«é€Ÿï¼Œä¹Ÿæ˜¯è®©å…¶è„±é¢–è€Œå‡ºçš„åŠŸèƒ½</p><p>åˆ†æ”¯æœ¬è´¨å°±æ˜¯ä¸€ä¸ªæäº¤å¯¹è±¡ï¼ŒHeadé»˜è®¤æŒ‡å‘master,åˆ‡æ¢åˆ†æ”¯å°±æ˜¯è®©HeadæŒ‡å‘ä¸åŒçš„åˆ†æ”¯ï¼Œå½“å‘ç”Ÿæäº¤æ—¶ï¼Œæœ¬è´¨ä¸Šå°±Headå¸¦ç€åˆ†æ”¯èµ°</p><h3 id="git-branch"><a href="#git-branch" class="headerlink" title="git branch"></a><code>git branch</code></h3><ul><li><code>git branch</code> æ˜¾ç¤ºå½“å‰çš„åˆ†æ”¯åˆ—è¡¨</li><li><code>git branch xxx</code> åˆ›å»ºxxxåˆ†æ”¯</li><li><code>git branch xxx &lt;commitHash&gt;</code> åœ¨æŒ‡å®šçš„æäº¤ä¸Šåˆ›å»ºåˆ†æ”¯</li><li><code>git branch -d xxx</code> åˆ é™¤åˆ†æ”¯, è¦æ±‚ä¸èƒ½è‡ªå®¶åˆ è‡ªå·±ï¼Œè¦åˆ°åˆ«çš„åˆ†æ”¯æ¥åˆ é™¤<ul><li><code>git branch -D xxx</code> å¤§Dï¼Œå¼ºåˆ¶åˆ é™¤</li></ul></li><li><code>git branch -v</code> æŸ¥çœ‹branchç‰ˆæœ¬</li><li><code>git branch -r</code> æŸ¥çœ‹è¿œç«¯çš„åˆ†æ”¯ç‰ˆæœ¬</li></ul><h3 id="git-checkout-xxx-æ£€å‡ºåˆ†æ”¯"><a href="#git-checkout-xxx-æ£€å‡ºåˆ†æ”¯" class="headerlink" title="git checkout xxx æ£€å‡ºåˆ†æ”¯"></a><code>git checkout xxx</code> æ£€å‡ºåˆ†æ”¯</h3><ul><li><code>git checkout -b xxx</code> åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æ”¯å¹¶åˆ‡æ¢è¿‡å»</li></ul><h3 id="git-merge-xxx-åˆå¹¶åˆ†æ”¯"><a href="#git-merge-xxx-åˆå¹¶åˆ†æ”¯" class="headerlink" title="git merge xxx åˆå¹¶åˆ†æ”¯"></a><code>git merge xxx</code> åˆå¹¶åˆ†æ”¯</h3><p>å½“å‰çš„åˆ†æ”¯ï¼Œä¼šå°†xxxåˆ†æ”¯åˆå¹¶è¿‡æ¥</p><ul><li><code>git reset --hard &lt;branchName&gt;</code> ä½¿ç”¨åˆ†æ”¯å¼ºåˆ¶åˆå¹¶</li><li>å¦‚æœæ˜¯å…‹éš†ä¸‹æ¥çš„åˆ†æ”¯ï¼Œé»˜è®¤æ²¡æœ‰å…³è”å…³ç³»ï¼Œéœ€è¦æ‰‹åŠ¨åˆå¹¶è·Ÿè¸ªåˆ†æ”¯ï¼Œæˆ–è€…ä¸æœ¬åœ°åˆ›å»ºå…³è”</li></ul><h2 id="ç‰ˆæœ¬å›é€€"><a href="#ç‰ˆæœ¬å›é€€" class="headerlink" title="ç‰ˆæœ¬å›é€€"></a>ç‰ˆæœ¬å›é€€</h2><h3 id="å·¥ä½œåŒºï¼Œæš‚å­˜åŒºï¼Œç‰ˆæœ¬åº“å›é€€å›é€€"><a href="#å·¥ä½œåŒºï¼Œæš‚å­˜åŒºï¼Œç‰ˆæœ¬åº“å›é€€å›é€€" class="headerlink" title="å·¥ä½œåŒºï¼Œæš‚å­˜åŒºï¼Œç‰ˆæœ¬åº“å›é€€å›é€€"></a>å·¥ä½œåŒºï¼Œæš‚å­˜åŒºï¼Œç‰ˆæœ¬åº“å›é€€å›é€€</h3><ul><li><code>git checkout --filename</code> æ’¤é”€å·¥ä½œåŒºçš„å†…å®¹</li><li><code>git reset HEAD filename</code> æ’¤é”€æš‚å­˜åŒºçš„å†…å®¹</li><li><code>git reset HEAD~</code> è¿”å›ä¸Šä¸€æ¬¡æäº¤ï¼Œç‰ˆæœ¬åº“çš„å†…å®¹<ul><li><code>git reset HEAD~2</code> è¿”å›ä¸Š2æ¬¡æäº¤</li><li><code>git reset &lt;commitHash&gt;</code> è¿”å›åˆ°æäº¤å¯¹è±¡ä¸Š</li><li><code>git reset --soft</code> ä»…æ˜¯HEADç§»åŠ¨è¿‡å»<ul><li>ä¿®æ”¹HEADæŒ‡å‘</li></ul></li><li><code>git reset --mixed</code>é»˜è®¤æƒ…å†µï¼Œç­‰äº<code>git reset</code>ï¼Œå°†HEADç§»åŠ¨è¿‡å»ï¼Œå¹¶ä¸”å°†æœªä¿®æ”¹çš„æ–‡ä»¶å…¨éƒ¨æ”¾å…¥å·¥ä½œç›®å½•<ul><li>ä¿®æ”¹HEAD</li><li>ä¿®æ”¹æš‚å­˜åŒºçš„å†…å®¹</li></ul></li><li><code>git reset --hard</code>ï¼ˆè¯¥æ“ä½œæ˜¯æœ‰ç ´åæ€§çš„ï¼‰ï¼Œç›´æ¥å›åˆ°é‚£ä¸ªçŠ¶æ€<ul><li>ä¿®æ”¹HEAD</li><li>ä¿®æ”¹æš‚å­˜åŒºçš„å†…å®¹</li><li>ä¿®æ”¹å·¥ä½œç›®å½•çš„å†…å®¹çš„å†…å®¹</li></ul></li></ul></li></ul><p><code>git reset</code>æœ¬è´¨ä¸Šè¿˜æ˜¯å›åˆ°åˆ†æ”¯ä¸Šï¼Œå¹¶æ²¡æœ‰çœŸæ­£çš„å›é€€ï¼Œåªæ˜¯HEADå¸¦ç€åˆ†æ”¯è¿”å›åˆ°äº†æŒ‡å®šçš„ä½ç½®ï¼Œå½“ä½¿ç”¨<code>git reflog</code>è¿˜å¯ä»¥æŸ¥çœ‹åˆ°ï¼Œå½“å‰çš„åˆ†æ”¯</p><p>å°½é‡å°‘ä½¿ç”¨<code>reset --hard</code>ï¼Œåº”è¯¥å¤šå¼€åˆ†æ”¯ï¼Œä¹‹åè¿›è¡Œmerge, <code>git branch bugfix &lt;commitHash&gt;</code> ä¹‹ååˆ‡æ¢è¿‡å»ï¼Œå¹¶ä¸”è¿›è¡Œmergeã€‚</p><p><code>git checkout &lt;commitHash&gt;</code>å’Œ<code>git reset --hard &lt;commitHash&gt;</code>çš„åŒºåˆ«</p><ul><li><code>checkout</code> ä»…æ˜¯ç‰µç€HEADèµ°ï¼Œè€Œ<code>reset --hard</code>æ˜¯ç‰µç€HEADï¼Œå¹¶ä¸”ç‰µç€åˆ†æ”¯èµ°</li><li><code>checkout</code> ä¸ä¼šç ´åå·¥ä½œåŒºæ–‡ä»¶ï¼Œè€Œ<code>reset --hard</code>ä¼šç ´åå·¥ä½œåŒºçš„æ–‡ä»¶</li></ul><h3 id="æŸ¥çœ‹ç‰ˆæœ¬è®°å½•"><a href="#æŸ¥çœ‹ç‰ˆæœ¬è®°å½•" class="headerlink" title="æŸ¥çœ‹ç‰ˆæœ¬è®°å½•"></a>æŸ¥çœ‹ç‰ˆæœ¬è®°å½•</h3><ul><li><code>git log --oneline</code> åªä¼šæŸ¥çœ‹å½“å‰HEADæ‰€åœ¨åˆ†æ”¯çš„é“¾</li><li><code>git reflog --oneline</code> ä¼šæŸ¥çœ‹gitçš„æ‰€æœ‰æ“ä½œè®°å½•</li><li><code>git log --graph --decorate --all --oneline</code> æŸ¥çœ‹å½“å‰gitæ ‘çŠ¶å†µ</li></ul><h2 id="è¿œç¨‹åä½œ"><a href="#è¿œç¨‹åä½œ" class="headerlink" title="è¿œç¨‹åä½œ"></a>è¿œç¨‹åä½œ</h2><p>æœ¬åœ°åˆ†æ”¯-è¿œç¨‹è·Ÿè¸ªåˆ†æ”¯-è¿œç¨‹åˆ†æ”¯</p><ul><li>æœ¬åœ°åˆ†æ”¯ï¼šæœ¬åœ°ä»£ç åº“çš„åˆ†æ”¯</li><li>è¿œç¨‹åˆ†æ”¯ï¼šè¿œç¨‹ä»“åº“çš„åˆ†æ”¯</li><li>è¿œç¨‹è·Ÿè¸ªåˆ†æ”¯ï¼šä»£ç è¢«pullæ—¶è‡ªåŠ¨åˆ›å»ºï¼Œä»–ä¼šè·Ÿéšè¿œç«¯è‡ªå·±å‘å‰ï¼Œéœ€è¦æ ¹æ®ä½¿ç”¨æœ¬åœ°åˆ†æ”¯æ¥åˆå¹¶è¿œç¨‹è·Ÿè¸ªåˆ†æ”¯ä»¥è¾¾åˆ°æ•ˆæœã€‚</li></ul><p>åœ¨æœ¬åœ°åˆ›å»ºçš„ä»£ç ï¼Œæ¨é€åˆ°è¿œç«¯ã€‚æœ¬åœ°åˆ†æ”¯æ¨é€åï¼Œä¼šç”Ÿæˆè¿œç¨‹è·Ÿè¸ªåˆ†æ”¯ã€‚</p><h3 id="åˆ›å»ºè¿œç«¯"><a href="#åˆ›å»ºè¿œç«¯" class="headerlink" title="åˆ›å»ºè¿œç«¯"></a>åˆ›å»ºè¿œç«¯</h3><ul><li><code>git remote -v</code> æŸ¥çœ‹å½“å‰å…³è”çš„è¿œç¨‹åˆ†æ”¯</li><li><code>git remote add &lt;storageName&gt; &lt;sotrageURL&gt;</code> å¢åŠ ä»“åº“</li><li><code>git remote rm &lt;storageName&gt;</code> åˆ é™¤ä»“åº“</li><li><code>git remote rename &lt;oldName&gt; &lt;newName&gt;</code> é‡å‘½åä»“åº“åç§°</li></ul><h3 id="è¿œç¨‹æ¨æ‹‰ï¼ˆæ— å…³è”å…³ç³»Â·ä¸æ¨èï¼‰"><a href="#è¿œç¨‹æ¨æ‹‰ï¼ˆæ— å…³è”å…³ç³»Â·ä¸æ¨èï¼‰" class="headerlink" title="è¿œç¨‹æ¨æ‹‰ï¼ˆæ— å…³è”å…³ç³»Â·ä¸æ¨èï¼‰"></a>è¿œç¨‹æ¨æ‹‰ï¼ˆæ— å…³è”å…³ç³»Â·ä¸æ¨èï¼‰</h3><p><code>git push &lt;origin&gt; &lt;branchName&gt;</code> æ¨é€ä»£ç </p><p><code>git fetch &lt;origin&gt;</code> æ‹‰å–ä»£ç <br>ä¹‹ååˆ‡æ¢åˆ°è¿œç¨‹è·Ÿè¸ªåˆ†æ”¯<code>git checkout &lt;origin&gt;/&lt;branchName&gt;</code>,ä¹‹åæŸ¥çœ‹å½“å‰çŠ¶æ€(å¦‚æœç¡®å®šå®‰å…¨ï¼Œä¹Ÿå¯ä¸æŸ¥è¯¢çŠ¶æ€)<br>å¦‚æœæ²¡æœ‰é—®é¢˜çš„è¯ï¼Œå¯ä»¥ç›´æ¥åˆå¹¶åˆ†æ”¯ï¼Œ<code>git merge &lt;origin&gt;/&lt;branchName&gt;</code></p><h3 id="åˆ é™¤è¿œç¨‹è·Ÿè¸ªåˆ†æ”¯"><a href="#åˆ é™¤è¿œç¨‹è·Ÿè¸ªåˆ†æ”¯" class="headerlink" title="åˆ é™¤è¿œç¨‹è·Ÿè¸ªåˆ†æ”¯"></a>åˆ é™¤è¿œç¨‹è·Ÿè¸ªåˆ†æ”¯</h3><ol start="0"><li><code>git push &lt;origin&gt; --delete &lt;branchName&gt;</code> åˆ é™¤è¿œç¨‹åˆ†æ”¯</li><li><code>git remote prune &lt;origin&gt; --dry-run</code> åˆ—å‡ºè¿œç¨‹åˆ†æ”¯å·²ç»æ— ç”¨ï¼Œä½†æ˜¯è¿œç¨‹è·Ÿè¸ªåˆ†æ”¯ä»»å­˜åœ¨</li><li><code>git remote prune &lt;origin&gt;</code> åˆ é™¤ä¸Šè¿°åˆ—å‡ºçš„è¿œç¨‹è·Ÿè¸ª</li></ol><h3 id="è¿œç¨‹æ¨æ‹‰ï¼ˆæœ‰å…³è”å…³ç³»Â·æ¨èï¼‰"><a href="#è¿œç¨‹æ¨æ‹‰ï¼ˆæœ‰å…³è”å…³ç³»Â·æ¨èï¼‰" class="headerlink" title="è¿œç¨‹æ¨æ‹‰ï¼ˆæœ‰å…³è”å…³ç³»Â·æ¨èï¼‰"></a>è¿œç¨‹æ¨æ‹‰ï¼ˆæœ‰å…³è”å…³ç³»Â·æ¨èï¼‰</h3><blockquote><p>é»˜è®¤æƒ…å†µä¸‹ cloneä¸‹æ¥çš„åº“ï¼Œå…¶masteråˆ†æ”¯ä¸è¿œç«¯çš„masteråˆ†æ”¯æ˜¯æœ‰å…³è”çš„ï¼Œä½†æ˜¯å’Œæœ¬åœ°åˆ›å»ºçš„åº“masteråˆ†æ”¯ä¸è¿œç«¯masteræ— å…³è”</p></blockquote><h4 id="åˆ›å»ºè¿œç«¯å…³è”"><a href="#åˆ›å»ºè¿œç«¯å…³è”" class="headerlink" title="åˆ›å»ºè¿œç«¯å…³è”"></a>åˆ›å»ºè¿œç«¯å…³è”</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿œç¨‹åˆ›å»ºä¸€ä¸ªåˆ†æ”¯</span></span><br><span class="line">git push --<span class="built_in">set</span>-upstream &lt;origin&gt; &lt;localBranch&gt;:&lt;originBranch&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–°å»ºè·Ÿè¸ªåˆ†æ”¯å…³è”</span></span><br><span class="line">git checkout -b æœ¬åœ°åˆ†æ”¯ è¿œç¨‹è·Ÿè¸ªåˆ†æ”¯</span><br><span class="line"></span><br><span class="line">git checkout --track è¿œç¨‹è·Ÿè¸ªåˆ†æ”¯ <span class="comment">#ï¼ˆæœ¬åœ°ï¼Œè¿œç¨‹è·Ÿè¸ªåˆ†æ”¯åç§°ç›¸åŒï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å·²æœ‰çš„åˆ†æ”¯è¿›è¡Œå…³è”</span></span><br><span class="line">git branch --<span class="built_in">set</span>-upstream-to=origin/<span class="built_in">test</span></span><br><span class="line">git branch -u origin/<span class="built_in">test</span> <span class="comment">#ï¼ˆç®€å†™ï¼‰</span></span><br></pre></td></tr></table></figure><h4 id="æ‹‰å–ä»£ç "><a href="#æ‹‰å–ä»£ç " class="headerlink" title="æ‹‰å–ä»£ç "></a>æ‹‰å–ä»£ç </h4><p>åœ¨å½“å‰åˆ†ä¹‹ä¸‹ï¼Œ<code>git pull</code></p><h4 id="æ¨é€ä»£ç "><a href="#æ¨é€ä»£ç " class="headerlink" title="æ¨é€ä»£ç "></a>æ¨é€ä»£ç </h4><p>åœ¨å½“å‰åˆ†æ”¯ä¸‹ï¼Œ<code>git push</code></p>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ç®­å¤´å‡½æ•°çš„thisæŒ‡å‘</title>
      <link href="/2020/03/23/%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0%E7%9A%84this%E6%8C%87%E5%90%91/"/>
      <url>/2020/03/23/%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0%E7%9A%84this%E6%8C%87%E5%90%91/</url>
      
        <content type="html"><![CDATA[<h2 id="thisç¡®å®šæœºåˆ¶"><a href="#thisç¡®å®šæœºåˆ¶" class="headerlink" title="thisç¡®å®šæœºåˆ¶"></a>thisç¡®å®šæœºåˆ¶</h2><blockquote><p>jsä¸­å‡½æ•°ä¼šå»ºç«‹ä¸€ä¸ªä½œç”¨åŸŸï¼Œ<em>å¦‚æœæ˜¯ç±»å…¶å†…éƒ¨ä¹Ÿæ˜¯å‡½æ•°ï¼Œä¹Ÿå³åˆ›é€ äº†ä½œç”¨åŸŸ</em>ä¼šä»å½“å‰ä½œç”¨åŸŸä¸­å¯»æ‰¾this</p></blockquote><h3 id="ä¼ ç»Ÿå‡½æ•°çš„thisæ˜¯è¿è¡Œæ—¶ç¡®å®šçš„"><a href="#ä¼ ç»Ÿå‡½æ•°çš„thisæ˜¯è¿è¡Œæ—¶ç¡®å®šçš„" class="headerlink" title="ä¼ ç»Ÿå‡½æ•°çš„thisæ˜¯è¿è¡Œæ—¶ç¡®å®šçš„"></a>ä¼ ç»Ÿå‡½æ•°çš„thisæ˜¯è¿è¡Œæ—¶ç¡®å®šçš„</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.id)</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">id</span>: <span class="number">666</span> &#125;</span><br><span class="line">obj.foo = foo</span><br><span class="line">obj.foo() <span class="comment">// è¾“å‡ºundefined</span></span><br></pre></td></tr></table></figure><p>å› ä¸ºåœ¨äº‹ä»¶å¾ªç¯ä¸­ï¼Œtimeoutä¹‹åï¼Œç”±windowè°ƒç”¨äº†è¯¥å‡½æ•°,å³è¿è¡Œæ—¶è¯¥thisä¸ºwindow</p><h3 id="ç®­å¤´å‡½æ•°çš„thisæ˜¯å®šä¹‰æ—¶ç¡®å®šçš„"><a href="#ç®­å¤´å‡½æ•°çš„thisæ˜¯å®šä¹‰æ—¶ç¡®å®šçš„" class="headerlink" title="ç®­å¤´å‡½æ•°çš„thisæ˜¯å®šä¹‰æ—¶ç¡®å®šçš„"></a>ç®­å¤´å‡½æ•°çš„thisæ˜¯å®šä¹‰æ—¶ç¡®å®šçš„</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.id)</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">id</span>: <span class="number">666</span> &#125;</span><br><span class="line">obj.foo = foo</span><br><span class="line">obj.foo() <span class="comment">// è¾“å‡º666</span></span><br></pre></td></tr></table></figure><p>åœ¨å‡½æ•°è¢«å®šä¹‰çš„æ—¶å€™ï¼Œå°±ç¡®å®šäº†è¯¥è°ƒç”¨è€…ä¸ºobj</p><h2 id="ç®­å¤´å‡½æ•°ä¼šä¾æ¬¡å‘ä¸Šå¯»æ‰¾ä½œç”¨åŸŸä¸­çš„this"><a href="#ç®­å¤´å‡½æ•°ä¼šä¾æ¬¡å‘ä¸Šå¯»æ‰¾ä½œç”¨åŸŸä¸­çš„this" class="headerlink" title="ç®­å¤´å‡½æ•°ä¼šä¾æ¬¡å‘ä¸Šå¯»æ‰¾ä½œç”¨åŸŸä¸­çš„this"></a>ç®­å¤´å‡½æ•°ä¼šä¾æ¬¡å‘ä¸Šå¯»æ‰¾ä½œç”¨åŸŸä¸­çš„this</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'id:'</span>, <span class="keyword">this</span>.id);</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> f = foo.call(&#123;<span class="attr">id</span>: <span class="number">1</span>&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> t1 = f.call(&#123;<span class="attr">id</span>: <span class="number">2</span>&#125;)()(); <span class="comment">// id: 1</span></span><br><span class="line"><span class="keyword">var</span> t2 = f().call(&#123;<span class="attr">id</span>: <span class="number">3</span>&#125;)(); <span class="comment">// id: 1</span></span><br><span class="line"><span class="keyword">var</span> t3 = f()().call(&#123;<span class="attr">id</span>: <span class="number">4</span>&#125;); <span class="comment">// id: 1</span></span><br></pre></td></tr></table></figure><h2 id="ç®­å¤´å‡½æ•°ä»…æ˜¯å›ºåŒ–äº†thisï¼Œåœ¨å…¶å‡½æ•°å†…éƒ¨å¹¶æ²¡æœ‰thiså®ä¾‹"><a href="#ç®­å¤´å‡½æ•°ä»…æ˜¯å›ºåŒ–äº†thisï¼Œåœ¨å…¶å‡½æ•°å†…éƒ¨å¹¶æ²¡æœ‰thiså®ä¾‹" class="headerlink" title="ç®­å¤´å‡½æ•°ä»…æ˜¯å›ºåŒ–äº†thisï¼Œåœ¨å…¶å‡½æ•°å†…éƒ¨å¹¶æ²¡æœ‰thiså®ä¾‹"></a>ç®­å¤´å‡½æ•°ä»…æ˜¯å›ºåŒ–äº†thisï¼Œåœ¨å…¶å‡½æ•°å†…éƒ¨å¹¶æ²¡æœ‰thiså®ä¾‹</h2><p>ç”±äºç®­å¤´å‡½æ•°å†…å¹¶æ²¡æœ‰thisï¼Œæ‰€ä»¥å¹¶ä¸èƒ½ä½¿ç”¨bind,call,applyæ–¹æ³•æ¥å†æ¬¡ç¡®å®šthisæŒ‡å‘</p><h2 id="ç±»ä¸­çš„thisæŒ‡å‘"><a href="#ç±»ä¸­çš„thisæŒ‡å‘" class="headerlink" title="ç±»ä¸­çš„thisæŒ‡å‘"></a>ç±»ä¸­çš„thisæŒ‡å‘</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Person &#123;</span><br><span class="line">  name: <span class="built_in">string</span> = <span class="string">'zhn'</span></span><br><span class="line"></span><br><span class="line">  hello() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`hello <span class="subst">$&#123;this.name&#125;</span>`</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  study = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`study <span class="subst">$&#123;this.name&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  bye = <span class="function"><span class="keyword">function</span> (<span class="params"><span class="keyword">this</span>: Person</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`bye <span class="subst">$&#123;this.name&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> Person()</span><br><span class="line">p.hello() <span class="comment">// hello zhn</span></span><br><span class="line">p.study() <span class="comment">// study zhn</span></span><br><span class="line">p.bye() <span class="comment">// bye zhn</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> proxy: <span class="built_in">any</span> = &#123; name: <span class="number">666</span> &#125;</span><br><span class="line">p.hello.call(proxy) <span class="comment">// hello 666</span></span><br><span class="line">p.study.call(proxy) <span class="comment">// study zhn å·²ç»å›ºåŒ–äº†this</span></span><br><span class="line">p.bye.call(proxy) <span class="comment">// bye 666</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­helloæ–¹æ³•ï¼Œä½œä¸ºå…¶æ–¹æ³•ï¼Œä¼šæŒ‚è½½åˆ°åŸå‹ä¸Šï¼Œæ‰€ä»¥thisï¼Œå³å®ä¾‹å¯¹è±¡</p><p>å…¶ä¸­studyæ–¹æ³•ï¼Œä½œä¸ºä¸€ä¸ªæˆå‘˜ï¼Œå®ä¾‹å±æ€§ï¼Œ(ä¸ºå…¶æŒ‚è½½äº†åˆå§‹åŒ–å€¼)ï¼Œç”±äºæ˜¯ç®­å¤´å‡½æ•°ï¼Œæ— æ³•ä¿®æ”¹thisæŒ‡å‘ï¼ˆä¸ºå½“å‰ç»‘å®šçš„ç¯å¢ƒï¼‰</p><p>å…¶ä¸­byeæ–¹æ³•ï¼Œä½œä¸ºä¸€ä¸ªæˆå‘˜ï¼Œå®ä¾‹å±æ€§ï¼Œ(ä¸ºå…¶æŒ‚è½½äº†åˆå§‹åŒ–å€¼)ï¼Œç”±äºæ˜¯æ™®é€šå‡½æ•°ï¼Œå¯ä»¥ä¿®æ”¹thisæŒ‡å‘ï¼Œé»˜è®¤è¿è¡Œæ—¶çš„è°ƒç”¨è€…ä¸ºpersonå®ä¾‹</p><h2 id="å­—é¢é‡ä¸­çš„thisæŒ‡å‘"><a href="#å­—é¢é‡ä¸­çš„thisæŒ‡å‘" class="headerlink" title="å­—é¢é‡ä¸­çš„thisæŒ‡å‘"></a>å­—é¢é‡ä¸­çš„thisæŒ‡å‘</h2><p>å­—é¢é‡ä¸­å®šä¹‰å‡½æ•°çš„æ–¹æ³•</p><ul><li>ä½¿ç”¨å±æ€§å€¼å®šä¹‰<code>study: function () {},</code></li><li>ä½¿ç”¨çŸ­å±æ€§çš„æ–¹å¼ï¼Œå’Œä¸Šè¿°ä¸€æ ·<code>study() {},</code></li><li>ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œ<strong>æ³¨æ„æ— æ³•ç›´æ¥è·å–this</strong> <code>study: () =&gt; {}</code></li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj: <span class="built_in">any</span> = &#123;</span><br><span class="line">  name: <span class="string">'obj'</span>,</span><br><span class="line">  study: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`study <span class="subst">$&#123;this.name&#125;</span>`</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  hello() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`hello <span class="subst">$&#123;this.name&#125;</span>`</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  eat: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// console.log(`eat $&#123;this.name&#125;`);</span></span><br><span class="line">  &#125;,</span><br><span class="line">  designFn() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`designFn <span class="subst">$&#123;this.name&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">obj.study.call(&#123; name: <span class="string">'666'</span> &#125;) <span class="comment">// è¾“å‡º study 666</span></span><br><span class="line">obj.hello.call(&#123; name: <span class="string">'666'</span> &#125;) <span class="comment">// è¾“å‡º hello 666</span></span><br><span class="line">obj.eat.call(&#123; name: <span class="string">'666'</span> &#125;) <span class="comment">// ç”±äºç®­å¤´å‡½æ•°ä¸­ç›´æ¥ä½¿ç”¨this,tsä¼šæŠ¥é”™</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fn = obj.designFn.call(&#123; name: <span class="string">'666'</span> &#125;) <span class="comment">// ç®­å¤´å‡½æ•°å‘ä¸Šç»‘å®šäº†ä¸€å±‚ä¸Šä¸‹æ–‡</span></span><br><span class="line">fn() <span class="comment">// è¾“å‡ºdesignFn 666</span></span><br></pre></td></tr></table></figure><p>tsä¸­ä½¿ç”¨this</p><p>åœ¨tsä¸­ï¼Œå¯¹è±¡å±æ€§é‡Œä½¿ç”¨thisæ—¶ï¼Œé»˜è®¤ä¼šä¸ºä¸€ä¸ªanyç±»å‹çš„å¯¹è±¡ï¼Œå¯ä»¥è‡ªå·±ç”³æ˜è¯¥å¯¹è±¡ç±»å‹ï¼Œä¹‹åå°†thiså¸¦å…¥</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Obj &#123;</span><br><span class="line">  name: <span class="built_in">string</span>;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj: Obj = &#123;</span><br><span class="line">  name: <span class="string">'z'</span>,</span><br><span class="line">  fn(<span class="keyword">this</span>: Obj) &#123;</span><br><span class="line">    <span class="comment">// this.name</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç®­å¤´å‡½æ•°ä¸­ï¼Œthisæ˜¯voidç±»å‹ï¼Œä¸å¯æ”¹å˜ï¼Œä¸èƒ½æ˜¾ç¤ºç”³æ˜</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fn = <span class="function">(<span class="params"><span class="keyword">this</span>: <span class="built_in">void</span></span>) =&gt;</span> &#123;&#125; <span class="comment">// Error Arrow function can not have 'this'</span></span><br></pre></td></tr></table></figure><p>åœ¨å‡½æ•°çš„æ¥å£ç”³æ˜ä¸­ï¼Œå¯ä»¥ç”³æ˜å‡ºthis</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Obj &#123;</span><br><span class="line">  fn: <span class="function">(<span class="params"><span class="keyword">this</span>: <span class="built_in">void</span></span>) =&gt;</span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> o1: Obj = &#123;</span><br><span class="line">  fn: <span class="function"><span class="params">()</span> =&gt;</span> &#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> o2: Obj = &#123;</span><br><span class="line">  fn(<span class="keyword">this</span>: <span class="built_in">void</span>) &#123; ... &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>eventå¯¹è±¡çš„å‡ ç§å®šä½</title>
      <link href="/2020/03/12/event%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%87%A0%E7%A7%8D%E5%AE%9A%E4%BD%8D/"/>
      <url>/2020/03/12/event%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%87%A0%E7%A7%8D%E5%AE%9A%E4%BD%8D/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ç³»åˆ—å‡æœ‰x,yç­‰ä¸¤ä¸ªæ–¹å‘çš„å€¼</p></blockquote><h2 id="offset"><a href="#offset" class="headerlink" title="offset"></a>offset</h2><p>è·ç¦»å…¶çˆ¶å…ƒç´ çš„å·¦ä¾§å†…éƒ¨è¾¹æ¡†çš„è·ç¦»,<em>å¦‚æœè¾¹æ¡†è¾ƒå®½ï¼Œç‚¹åœ¨è¾¹æ¡†ä¸Šä¸ºè´Ÿå€¼ï¼Œå› ä¸ºæ˜¯åˆ°è¾¹æ¡†å†…ä¾§è·ç¦»</em></p><h2 id="client"><a href="#client" class="headerlink" title="client"></a>client</h2><p>å…¶è·ç¦»æµè§ˆå™¨å·¦ä¾§çš„è·ç¦»</p><h2 id="page"><a href="#page" class="headerlink" title="page"></a>page</h2><p>å…¶è·ç¦»å½“å‰é¡µé¢çš„è¾¹æ¡†è·ç¦»ï¼ˆclient+é¡µé¢æ»šåŠ¨çš„è·ç¦»ï¼‰</p><h2 id="screen"><a href="#screen" class="headerlink" title="screen"></a>screen</h2><p>å…¶è·ç¦»å½“å‰æ˜¾ç¤ºå™¨çš„è¾¹æ¡†è·ç¦»</p><p><img src="/img/2020/03/12/event.jpg" alt="eventçš„å„è·ç¦»å›¾ç¤º"><br><em>å›¾ç‰‡æ¥æº,<a href="https://www.cnblogs.com/jiangxiaobo/p/6593584.html" target="_blank" rel="noopener">åšå®¢å›­</a></em></p>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>DOMå¯¹è±¡å„å®šä½å€¼</title>
      <link href="/2020/03/12/DOM%E5%AF%B9%E8%B1%A1%E5%90%84%E5%AE%9A%E4%BD%8D%E5%80%BC/"/>
      <url>/2020/03/12/DOM%E5%AF%B9%E8%B1%A1%E5%90%84%E5%AE%9A%E4%BD%8D%E5%80%BC/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åœ¨ä½¿ç”¨ç›’æ¨¡å‹çš„æ—¶å€™ï¼Œè¿™é‡Œé»˜è®¤ä½¿ç”¨çš„æ˜¯<code>box-sizing: content-box;</code>ä¹Ÿæ˜¯ç»å…¸çš„ç›’æ¨¡å‹ï¼Œå¦‚æœé‡‡ç”¨çš„ä¸º<code>box-sizing: border-box;</code>ä¼šç•¥æœ‰ä¸åŒ</p></blockquote><h2 id="offsetç³»åˆ—"><a href="#offsetç³»åˆ—" class="headerlink" title="offsetç³»åˆ—"></a>offsetç³»åˆ—</h2><p>offsetè¡¨ç¤ºçš„ä¸ºè·ç¦»çˆ¶<strong>å®šä½</strong>å…ƒç´ çš„åç§»å€¼ï¼Œå¦‚æœå…¶çˆ¶å…ƒç´ æ²¡æœ‰å®šä½å…ƒç´ ï¼Œåˆ™ä¼šè¾ƒä¸æ–‡æ¡£æœ€å¤–å±‚æ¯”è¾ƒ</p><ul><li>offsetTop å…¶boderçš„ä¸Šéƒ¨å¤–ä¾§ä¸çˆ¶å…ƒç´ borderä¸‹éƒ¨å†…ä¾§ä¹‹é—´çš„è·ç¦»,æœ‰ç‚¹åƒmargin-top</li><li>offsetLeft å…¶borderçš„å·¦ä¾§å¤–éƒ¨ä¸çˆ¶å…ƒç´ borderå³ä¾§ä¹‹é—´çš„è·ç¦»,æœ‰ç‚¹åƒmargin-left</li><li>offsetWidth å…¶å…ƒç´ çš„å®½åº¦ï¼ŒåŒ…æ‹¬å·¦å³ä¸¤ä¾§çš„borderå®½åº¦</li><li>offsetHeight å…¶å…ƒç´ çš„é«˜åº¦ï¼ŒåŒ…æ‹¬ä¸Šä¸‹ä¸¤ä¾§çš„borderå®½åº¦</li></ul><h2 id="scrollç³»åˆ—"><a href="#scrollç³»åˆ—" class="headerlink" title="scrollç³»åˆ—"></a>scrollç³»åˆ—</h2><p>scrollè¡¨ç¤ºå·æ›²ç›¸å…³,ä¸€èˆ¬æ˜¯ç”¨å…¶çˆ¶å…ƒç´ çš„ä½ç½®,ä¸€èˆ¬åœ¨å†…å®¹è¶…å‡ºçˆ¶å…ƒç´ çš„ä½ç½®æ—¶ï¼Œæ‰ä¼šäºˆä»¥æ˜¾ç¤ºï¼Œä¸€çˆ¶å…ƒç´ ä¸ºåŸºå‡†ï¼Œè¦è®¾ç½®çˆ¶å…ƒç´ <code>overflow: auto;</code></p><ul><li>scrollTop  å…¶å†…éƒ¨å…ƒç´ å·æ›²å‘ä¸Šå‡ºå»çš„è·ç¦»ï¼ˆçœ‹ä¸è§çš„è·ç¦»ï¼‰,å…¶borderä¸Šè¾¹è·å¤–ä¾§å¼€å§‹ï¼Œè®¡ç®—åˆ°çˆ¶å…ƒç´ å†…å®¹åŒº</li><li>scrollLeft å…¶å†…éƒ¨å…ƒç´ å·æ›²å·¦ä¸Šå‡ºå»çš„è·ç¦»ï¼ˆçœ‹ä¸è§çš„è·ç¦»ï¼‰,å…¶borderå·¦è¾¹è·å¤–ä¾§å¼€å§‹ï¼Œè®¡ç®—åˆ°çˆ¶å…ƒç´ å†…å®¹åŒº</li><li>scrollWidth è¡¨ç¤ºæ€»å…±å¯ä»¥å·æ›²çš„å®½åº¦ï¼Œï¼ˆå…¶å­å…ƒç´ å·¦å³å¤–ä¾§è¾¹æ¡†å¼€å§‹è®¡ç®—ï¼‰</li><li>scrollHeight è¡¨ç¤ºæ€»å…±å¯ä»¥å·æ›²çš„é«˜åº¦ï¼Œï¼ˆå…¶å­å…ƒç´ ä¸Šä¸‹å¤–ä¾§è¾¹è·å¼€å§‹è®¡ç®—ï¼‰</li></ul><h2 id="clientç³»åˆ—"><a href="#clientç³»åˆ—" class="headerlink" title="clientç³»åˆ—"></a>clientç³»åˆ—</h2><p>clientè¡¨ç¤ºè¯¥å…ƒç´ è‡ªèº«ï¼Œå°±æ˜¯å†…å®¹åŒºåŸŸ</p><ul><li>clientTop å…¶å†…éƒ¨è·ç¦»é¡¶éƒ¨borderé¡¶éƒ¨å¤–æµ‹çš„è·ç¦»ï¼Œç›¸å½“äºborderçš„å®½åº¦</li><li>clientLeft å…¶å†…éƒ¨è·ç¦»borderå·¦ä¾§å¤–ä¾§çš„è·ç¦»ï¼Œç›¸å½“äºborderçš„å®½åº¦</li><li>clientWidth å…¶å†…éƒ¨å·¦å³ä¸¤ä¾§borderå†…ä¾§çš„è·ç¦»ï¼Œç›¸å½“äºä¸å¸¦borderçš„å®½åº¦</li><li>clientHeight å…¶å†…éƒ¨ä¸Šä¸‹ä¸¤ä¾§borderå†…ä¾§çš„è·ç¦»ï¼Œç›¸å½“äºä¸å¸¦borderçš„å®½åº¦</li></ul><h2 id="currentStyleå’ŒgetComputedStyle"><a href="#currentStyleå’ŒgetComputedStyle" class="headerlink" title="currentStyleå’ŒgetComputedStyle"></a>currentStyleå’ŒgetComputedStyle</h2><p>ç”±äº<code>element.style</code>çš„æ–¹å¼ä»…èƒ½è·å–è¡Œé—´æ ·å¼ï¼Œæ‰€ä»¥è¦è·å–æ›´å¤šçš„æ ·å¼ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹çš„æ–¹å¼</p><blockquote><p>åªèƒ½è¿›è¡Œè·å–ï¼Œä¸å¯è¿›è¡Œä¿®æ”¹</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> element = <span class="built_in">document</span>.getElementById(<span class="string">'#xx'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// IEä¸­</span></span><br><span class="line">element.currentStyle[<span class="string">'color'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// éIEä¸­(é«˜çº§IEä¹Ÿæ”¯æŒ)</span></span><br><span class="line"><span class="built_in">window</span>.getComputedStyle(element, <span class="literal">null</span>)[<span class="string">'color'</span>]</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>åˆ›å»ºsshè¿æ¥</title>
      <link href="/2020/03/11/%E4%BD%BF%E7%94%A8ssh%E8%BF%9B%E8%A1%8C%E6%8E%A8%E9%80%81/"/>
      <url>/2020/03/11/%E4%BD%BF%E7%94%A8ssh%E8%BF%9B%E8%A1%8C%E6%8E%A8%E9%80%81/</url>
      
        <content type="html"><![CDATA[<p>ä½¿ç”¨hexoç­‰è¿›è¡Œgitæ¨é€çš„æ—¶å€™ï¼Œæ¨é€æ—¶éƒ½éœ€è¦æˆ‘ä»¬è¾“å…¥è´¦æˆ·å¯†ç ï¼Œè¾ƒä¸ºç¹çï¼Œè¿™é‡Œä½¿ç”¨sshçš„æ–¹å¼å¯ä»¥è¾ƒå¥½çš„è§£å†³</p><h2 id="ç”Ÿæˆssh"><a href="#ç”Ÿæˆssh" class="headerlink" title="ç”Ÿæˆssh"></a>ç”Ÿæˆssh</h2><h3 id="è®¾ç½®gitçš„userä¸email"><a href="#è®¾ç½®gitçš„userä¸email" class="headerlink" title="è®¾ç½®gitçš„userä¸email"></a>è®¾ç½®gitçš„userä¸email</h3><p>å¦‚æœç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼Œéœ€è¦è®¾ç½®gitçš„è´¦æˆ·å’Œé‚®ç®±</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">"xxx"</span></span><br><span class="line">git config --global user.email <span class="string">"xxxx@xx.com"</span></span><br></pre></td></tr></table></figure><h3 id="æ£€æµ‹æ˜¯å¦å­˜åœ¨ssh"><a href="#æ£€æµ‹æ˜¯å¦å­˜åœ¨ssh" class="headerlink" title="æ£€æµ‹æ˜¯å¦å­˜åœ¨ssh"></a>æ£€æµ‹æ˜¯å¦å­˜åœ¨ssh</h3><blockquote><p>ä¸€èˆ¬éƒ½ä¼šå®‰è£…åˆ°ç”¨æˆ·æ ¹ç›®å½•ä¸‹ <code>~</code></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/.ssh</span><br><span class="line"></span><br><span class="line">ls</span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">ll</span><br><span class="line"><span class="comment"># çœ‹æ˜¯å¦å­˜åœ¨ id_rsa å’Œ id_rsa.pubæ–‡ä»¶ï¼Œå¦‚æœå­˜åœ¨ï¼Œè¯´æ˜å·²ç»æœ‰SSH Key</span></span><br></pre></td></tr></table></figure><h3 id="ç”Ÿæˆæœ¬åœ°ssh"><a href="#ç”Ÿæˆæœ¬åœ°ssh" class="headerlink" title="ç”Ÿæˆæœ¬åœ°ssh"></a>ç”Ÿæˆæœ¬åœ°ssh</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">"xxxxx@xxx.com"</span></span><br></pre></td></tr></table></figure><p>ä¹‹åå¯è¿›è¡Œæ£€æµ‹æ˜¯å¦ç”Ÿæˆäº†ssh</p><ul><li>id_rsa.pub æ˜¯å…¬é’¥</li><li>id_rsa æ˜¯ç§é’¥</li></ul><h2 id="è¿›è¡Œsshè¿æ¥"><a href="#è¿›è¡Œsshè¿æ¥" class="headerlink" title="è¿›è¡Œsshè¿æ¥"></a>è¿›è¡Œsshè¿æ¥</h2><p>è¿›å…¥åˆ°ä»£ç æ‰˜ç®¡å¹³å°ï¼Œå¦‚github,å†å…¶è®¾ç½®ä¸­ï¼Œsecurityæ‰¾åˆ°sshé€‰é¡¹ï¼Œå°†id_rsa.pubçš„å†…å®¹è¿›è¡Œæäº¤å³å¯</p><p>æ‹‰å–ä»£ç æ—¶ï¼Œæ¢ä¸º<code>git@xxx</code>,å³åœ¨ä»¥åçš„æäº¤ä¸­éƒ½å¯ä½¿ç”¨sshçš„æ–¹å¼,è¿›è¡Œé“¾æ¥</p>]]></content>
      
      
      
        <tags>
            
            <tag> è¿ç»´ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ç¾åŒ–ç›’å­</title>
      <link href="/2020/03/11/%E7%BE%8E%E5%8C%96%E7%9B%92%E5%AD%90/"/>
      <url>/2020/03/11/%E7%BE%8E%E5%8C%96%E7%9B%92%E5%AD%90/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åˆ—ä¸¾å‡ ç§ç¾åŒ–cssç›’å­çš„æ–¹å¼</p></blockquote><h2 id="ä½¿ç”¨æ¸å˜èƒŒæ™¯"><a href="#ä½¿ç”¨æ¸å˜èƒŒæ™¯" class="headerlink" title="ä½¿ç”¨æ¸å˜èƒŒæ™¯"></a>ä½¿ç”¨æ¸å˜èƒŒæ™¯</h2><p>æ¸å˜èƒŒæ™¯å®é™…ä¸Šä½¿ç”¨çš„æ˜¯èƒŒæ™¯å›¾è¿›è¡Œæ¸å˜ç»˜åˆ¶çš„</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.bg</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: xxx</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="çº¿æ€§æ¸å˜-linear-gradient"><a href="#çº¿æ€§æ¸å˜-linear-gradient" class="headerlink" title="çº¿æ€§æ¸å˜ linear-gradient()"></a>çº¿æ€§æ¸å˜ <code>linear-gradient()</code></h3><p>ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºæ–¹å‘ï¼Œä¸yè½´çš„å¤¹è§’,æ”¯æŒå…³é”®å­—<code>to right</code>,<code>to bottom</code></p><p>ä¹‹åçš„å‚æ•°ç±»ä¼¼é¢œè‰²æ ‡ç‚¹çš„ä½ç½®ï¼Œå¦‚æœä¸åŠ ä½ç½®ï¼Œä¼šè‡ªåŠ¨å¹³åˆ†ä½ç½®ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.bg</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(45deg, #d0418e 0%, #9a08e3 100%)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¾„å‘æ¸å˜-radial-gradient"><a href="#å¾„å‘æ¸å˜-radial-gradient" class="headerlink" title="å¾„å‘æ¸å˜ radial-gradient()"></a>å¾„å‘æ¸å˜ <code>radial-gradient()</code></h3><p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¾„å‘æ¸å˜çš„å½¢çŠ¶ï¼Œé»˜è®¤æ˜¯æ¤­åœ†å½¢çš„æ¸å˜æ–¹å¼ï¼Œå¯ä»¥æ›´æ”¹ä¸ºåœ†å½¢çš„æ¸å˜æ–¹å¼ï¼Œ<code>circle closest-side(æœ€è¿‘çš„è¾¹), circle closest-corner as 10% 20%(æœ€è¿‘çš„è§’)</code></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.bg</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">radial-gradient</span>(#d0418e, #9a08e3)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.bg</span> &#123;</span><br><span class="line">  <span class="attribute">background-iamge</span>: <span class="built_in">radial-gradient</span>(</span><br><span class="line">    circle closest-side,</span><br><span class="line">    #d0418e 0%,</span><br><span class="line">    #9a08e3 100%</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¾ªç¯æ¸å˜-repeating-liner-gradient-repeating-radial-gradient-çº¿æ€§æ¸å˜å’Œå¾„å‘æ¸å˜çš„å åŠ "><a href="#å¾ªç¯æ¸å˜-repeating-liner-gradient-repeating-radial-gradient-çº¿æ€§æ¸å˜å’Œå¾„å‘æ¸å˜çš„å åŠ " class="headerlink" title="å¾ªç¯æ¸å˜ repeating-liner-gradient, repeating-radial-gradient,çº¿æ€§æ¸å˜å’Œå¾„å‘æ¸å˜çš„å åŠ "></a>å¾ªç¯æ¸å˜ <code>repeating-liner-gradient</code>, <code>repeating-radial-gradient</code>,çº¿æ€§æ¸å˜å’Œå¾„å‘æ¸å˜çš„å åŠ </h3><p>å…¶ä¸­ä¼šæŒ‰ç…§å…¶å®šä¹‰çš„æ–¹å¼è¿›è¡Œé‡å¤,å¯å åŠ å¤šä¸ªå€¼ï¼Œä½¿ç”¨<code>,</code>éš”å¼€</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.bg</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">repeating-liner-gradient</span>(</span><br><span class="line">    to right,</span><br><span class="line">    transparent 0, // 0pxå¼€å§‹ é€æ˜</span><br><span class="line">    transparent 10px, // 10ç»“æŸ é€æ˜</span><br><span class="line">    rgba(208, 65, 232, 0.3) <span class="number">10px</span>, // <span class="number">10px</span>å¼€å§‹ rgba</span><br><span class="line">    <span class="built_in">rgba</span>(208, 65, 232, 0.3) <span class="number">20px</span>, // <span class="number">20px</span>ç»“æŸ rgba</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.tablecloth &#123; // ç´«è‰²çš„æ¡Œå¸ƒæ•ˆæœ</span><br><span class="line">  <span class="selector-tag">background-image</span>: <span class="selector-tag">repeating-linear-gradient</span>(</span><br><span class="line">    <span class="selector-tag">to</span> <span class="selector-tag">bottom</span>,</span><br><span class="line">    <span class="selector-tag">transparent</span> 0,</span><br><span class="line">    <span class="selector-tag">transparent</span> 10<span class="selector-tag">px</span>,</span><br><span class="line">    <span class="selector-tag">rgba</span>(208, 65, 232, 0<span class="selector-class">.3</span>) 10<span class="selector-tag">px</span>,</span><br><span class="line">    <span class="selector-tag">rgba</span>(208, 65, 232, 0<span class="selector-class">.3</span>) 20<span class="selector-tag">px</span></span><br><span class="line">  ), <span class="selector-tag">repeating-linear-gradient</span>(</span><br><span class="line">    <span class="selector-tag">to</span> <span class="selector-tag">right</span>,</span><br><span class="line">    <span class="selector-tag">transparent</span> 0,</span><br><span class="line">    <span class="selector-tag">transparent</span> 10<span class="selector-tag">px</span>,</span><br><span class="line">    <span class="selector-tag">rgba</span>(208, 65, 232, 0<span class="selector-class">.3</span>) 10<span class="selector-tag">px</span>,</span><br><span class="line">    <span class="selector-tag">rgba</span>(208, 65, 232, 0<span class="selector-class">.3</span>) 20<span class="selector-tag">px</span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨èƒŒæ™¯å›¾"><a href="#ä½¿ç”¨èƒŒæ™¯å›¾" class="headerlink" title="ä½¿ç”¨èƒŒæ™¯å›¾"></a>ä½¿ç”¨èƒŒæ™¯å›¾</h2><p>ä½¿ç”¨å›¾ç‰‡ä¸ä»…å¯ä»¥ä½¿ç”¨<code>img</code>æ ‡ç­¾,å¦‚æœè¯¥å›¾ç‰‡å»æ‰ä¸ä¼šå½±å“é¡µé¢çš„åŠŸèƒ½ï¼Œé‚£ä¹ˆè¯¥å›¾ç‰‡åº”è¯¥å°±ä»¥èƒŒæ™¯å›¾çš„å½¢å¼å‘ˆç°å‡ºæ¥</p><p><code>background</code>å¯ä»¥ä¸ºä¸€ç³»åˆ—ç»„åˆå€¼</p><ul><li><code>background-repeat</code> å›¾ç‰‡é‡å¤<ul><li>repeat-x</li><li>repeat-y</li><li>no-repeat</li></ul></li><li><code>background-size</code> èƒŒæ™¯å›¾çš„å°ºå¯¸<ul><li>xçš„å€¼ï¼Œyçš„å€¼, ä¸€èˆ¬è®¾ç½®ä¸€ä¸ªä¸ºå›ºå®šå€¼ï¼Œå¦ä¸€ä¸ªä¸ºautoï¼Œé˜²æ­¢å›¾ç‰‡å˜å½¢ï¼Œ<code>80px auto</code></li><li>contain è‡ªåŠ¨é€‚åº”ï¼Œæ”¾åˆ°æœ€å¤§çš„æ¯”ä¾‹ï¼Œä¸ä¼šè£å‰ªï¼Œä½†æ˜¯ä¼šäº§ç”Ÿç©ºè¢­ </li><li>cover è¦†ç›–ï¼Œä¹Ÿæ”¾åˆ°æœ€å¤§çš„æ¯”ä¾‹ï¼Œä¼šå¯¹å›¾ç‰‡è¿›è¡Œè£å‰ªï¼Œç›´åˆ°å®Œå…¨å¡«æ»¡èƒŒæ™¯å›¾</li></ul></li><li><p><code>background-position</code> èƒŒæ™¯å›¾çš„ä½ç½®</p><ul><li>x:left,center,right.y:top, center,bottom.è™½ç„¶æœªæŒ‡æ˜x,yä½†å»ºè®®å…ˆå£°æ˜x,åœ¨å£°æ˜y <code>left 10px top 10px</code></li><li>å¯ä»¥å…ˆå£°æ˜å…³é”®å­—ï¼Œå†æ¬¡ç¡®å®šå…·ä½“çš„æ•°å€¼<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">background: url(https://...) left center;</span><br><span class="line"><span class="selector-tag">background-position</span>: <span class="selector-tag">left</span> 10<span class="selector-tag">px</span> <span class="selector-tag">top</span> 50%;</span><br></pre></td></tr></table></figure></li></ul></li><li><p><code>background-clip, background-origin</code>èƒŒæ™¯å›¾å¡«å……ä½ç½®</p><ul><li>å…¶å¯é€‰å€¼éƒ½æœ‰<code>border-box(default), padding-box, content-box</code></li><li>background-clipï¼Œå¦‚æœèƒŒæ™¯å›¾è¢«è£å‰ªæ—¶ï¼Œä»å“ªé‡Œå¼€å§‹è¿›è¡Œè£å‰ª</li><li>background-origin, æŒ‡æ˜èƒŒæ™¯å›¾ä»å“ªé‡Œè¿›è¡Œå¡«å……</li></ul></li></ul><p><strong>ä½¿ç”¨èƒŒæ™¯å›¾çš„backgroundçš„ç»„åˆå±æ€§çš„å†™æ³•</strong></p><blockquote><p>ç»„åˆå†™æ³•è¾ƒä¸ºç†è§£è¾ƒä¸ºå¤æ‚ï¼Œä½†æ˜¯æ€§èƒ½è¾ƒå¥½</p></blockquote><p>ç»„åˆå†™æ³•æ—¶ï¼Œä¸ç”¨è€ƒè™‘å±æ€§çš„é¡ºåºæµè§ˆå™¨ä¼šè‡ªåŠ¨è¯†åˆ«</p><ul><li>background-position, background-sizeéƒ½æ—¶å…·ä½“çš„æ•°å€¼ï¼Œæ‰€ä»¥shiyong<code>/</code>éš”å¼€,<code>background-position/background-size</code></li><li>background-origin,background-clipéƒ½æ˜¯ç›¸åŒçš„å€¼ï¼Œå†™ä¸€ä¸ªè®¤å®šä¸ºç›¸åŒï¼Œä¸¤ä¸ªè®¤å®šä¸ºorigin clip</li></ul><p>ä¹Ÿå¯ä»¥ä½¿ç”¨å¤šé‡èƒŒæ™¯ï¼Œä½¿ç”¨<code>,</code>éš”å¼€å³å¯</p><h2 id="è®¾ç½®è¾¹æ¡†"><a href="#è®¾ç½®è¾¹æ¡†" class="headerlink" title="è®¾ç½®è¾¹æ¡†"></a>è®¾ç½®è¾¹æ¡†</h2><p>å…¶ä¸­è¾¹æ¡†borderæ˜¯ä¸‰ä¸ªå¤åˆå€¼ï¼Œä¸åˆ†å…ˆåé¡ºåº</p><ul><li>border-width è¾¹æ¡†çš„å®½åº¦</li><li>border-color è¾¹æ¡†çš„é¢œè‰²</li><li>border-style è¾¹æ¡†çš„æ ·å¼<ul><li>solidå®çº¿</li><li>dashedè™šçº¿</li><li>dottedç‚¹è™šçº¿</li><li>doubleåŒå¹³è¡Œçº¿</li></ul></li></ul><p>å…¶ä¸­borderå±æ€§ä¹Ÿå¯ä»¥åˆ†åˆ«è®¾ç½® <code>border-left-width</code>,<code>border-bottom-style</code></p><h3 id="è®¾ç½®å›¾ç‰‡è¾¹æ¡†"><a href="#è®¾ç½®å›¾ç‰‡è¾¹æ¡†" class="headerlink" title="è®¾ç½®å›¾ç‰‡è¾¹æ¡†"></a>è®¾ç½®å›¾ç‰‡è¾¹æ¡†</h3><p>ä½¿ç”¨<code>border-image: url(./...) 10 repeat</code></p><ul><li>è¾¹æ¡†å›¾ç‰‡çš„èµ„æº</li><li>è£å‰ªä¹å®«æ ¼çš„å•ä½ï¼Œé»˜è®¤æ˜¯100%</li><li>ä¸­é—´é‡å¤çš„æ•ˆæœ</li></ul><p>ä¹å®«æ ¼ï¼Œæ˜¯æŒ‡å°†å›¾ç‰‡ï¼Œç”¨å››æ¡çº¿æ‹†åˆ†ï¼Œåˆ†åˆ«æ˜¯ä¸Šå³ä¸‹å·¦çš„æ–¹å‘ï¼Œåˆ†æˆ9å—åŒºåŸŸï¼Œ4ä¸ªè§’ä¸ºè¾¹æ¡†è§’ï¼Œä¸­é—´çš„åŒºåŸŸå»é™¤ï¼Œä¸Šä¸‹å·¦å³ä¸­é—´çš„éƒ¨åˆ†è¿›è¡Œé‡å¤/æ‹‰ä¼¸ç­‰æ“ä½œ</p><p><img src="/img/2020/03/11/grid.gif" alt="9å®«æ ¼è£å‰ªå››æ¡çº¿"></p><h3 id="ä½¿ç”¨border-radius"><a href="#ä½¿ç”¨border-radius" class="headerlink" title="ä½¿ç”¨border-radius"></a>ä½¿ç”¨<code>border-radius</code></h3><blockquote><p>50%ï¼Œå³è®¾ç½®è¯¥è§’ä¸ºçš„åŠåœ†ï¼Œå…¶å®æ˜¯x/y = 50%/50%</p></blockquote><p>æŒ‰ç…§ä¸Šå³ä¸‹å·¦çš„é¡ºåº<code>border-radius: 10px 20px 30px 40px</code></p><p>ä¹Ÿå¯ä»¥ç”¨<code>/</code>åŒºåˆ†å·¦ï¼Œå³ï¼Œå…¶å®æ˜¯ä»¥ç”»æ¤­åœ†çš„æ–¹å¼è¿›è¡Œç»˜åˆ¶çš„<code>0 50% 0 50%/0 100% 0 100%</code></p><p>å…¶ä¸­ä¹Ÿå¯ä»¥åˆ†åˆ«è®¾ç½®å››ä¸ªè§’çš„ä½ç½®<code>border-top-right-radius</code></p><h3 id="50-å’Œ-100"><a href="#50-å’Œ-100" class="headerlink" title="50% å’Œ 100%"></a>50% å’Œ 100%</h3><p>å¦‚æœè®¾ç½®çš„å€¼è¶…å‡ºè‡ªç„¶å€¼ï¼Œæµè§ˆå™¨ä¼šåšå“åº”çš„ä¼˜åŒ–</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">border-top-left-raduis: 100%; // æ­¤æ—¶æ˜¯1/4çš„åœ†</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">border-top-left-raduis</span>: 100%;</span><br><span class="line"><span class="selector-tag">border-top-right-raduis</span>: 100%;</span><br><span class="line">// æ­¤æ—¶ä¼šæ˜¾ç¤ºæˆ50%çš„æ•ˆæœ</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨shadow"><a href="#ä½¿ç”¨shadow" class="headerlink" title="ä½¿ç”¨shadow"></a>ä½¿ç”¨shadow</h2><p>ä½¿ç”¨æ¨¡ç³ŠèƒŒæ™¯ï¼Œå¯ä»¥æœ‰ä¸€ç§ç«‹ä½“çš„æ„Ÿè§‰ï¼Œå…¶ä½¿ç”¨å¤šä¸ªå€¼</p><p><code>box-shadow: xåç§» yåç§» æ¨¡ç³ŠåŠå¾„ æ‹“å±•åŠå¾„ é¢œè‰²</code></p><ul><li>xåç§» å‘xè½´æ­£æ–¹å‘åç§»çš„ä½ç½®</li><li>yåç§» å‘yè½´æ­£æ–¹å‘åç§»çš„ä½ç½®</li><li>æ¨¡ç³ŠåŠå¾„ æ¨¡ç³ŠåŠå¾„çš„å¤§å°</li><li>æ‹“å±•åŠå¾„ åœ¨æ­¤åŸºç¡€ä¸Šæ‹“å±•å‡ºå»çš„åŠå¾„</li><li>é¢œè‰² æ¨¡ç³Šé¢œè‰²</li></ul><p>å¯ä»¥ä½¿ç”¨<code>,</code>åˆ†éš”å¤šä¸ªå€¼å‡ºå»</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.shadow</span> &#123;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">10px</span> <span class="number">10px</span> <span class="number">100px</span> yellowgreen, <span class="number">0</span> <span class="number">20px</span> <span class="number">10px</span> hotpink;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æµè§ˆå™¨ç¼“å­˜ç­–ç•¥</title>
      <link href="/2020/03/07/%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BC%93%E5%AD%98%E7%AD%96%E7%95%A5/"/>
      <url>/2020/03/07/%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BC%93%E5%AD%98%E7%AD%96%E7%95%A5/</url>
      
        <content type="html"><![CDATA[<p>æµè§ˆæ—¶ï¼Œä¼šé€šè¿‡ä¸€ä¸‹å‡ ç§æ–¹å¼è®¿é—®èµ„æº</p><ol><li>(æ–°æ ‡ç­¾)åœ°å€æ å›è½¦</li><li>é“¾æ¥è·³è½¬</li><li>å‰è¿›ã€åé€€</li><li>ä»æ”¶è—æ æ‰“å¼€é“¾æ¥</li><li>(window.open)æ–°å¼€çª—å£</li><li>åˆ·æ–°ï¼ˆCommand + R / F5ï¼‰</li><li>å¼ºåˆ¶åˆ·æ–°ï¼ˆCommand + Shift + R / Ctrl + F5ï¼‰</li></ol><p>å…¶ä¸­1-5ä¼šé€šè¿‡è®¿é—®ä¸€ç³»åˆ—çš„ç¼“å­˜ç­–ç•¥</p><p>æ˜¯å¦æœ‰ç¼“å­˜-&lt;è¿‡æœŸç­–ç•¥&gt;-&lt;åå•†ç­–ç•¥&gt;-&gt; çš„æ–¹å¼è¿›è¡Œç¼“å­˜</p><p>å½“æ‹¿åˆ°èµ„æºæ—¶åˆä¼šé€šè¿‡&lt;å­˜å‚¨ç­–ç•¥&gt;å“åº”å†…å®¹å­˜å…¥ç¼“å­˜å½“ä¸­</p><p>å¦‚æœåˆ·æ–°çš„æ–¹å¼ï¼Œåˆ™ä¼šç›´æ¥è¿›è¡Œ&lt;åå•†ç­–ç•¥&gt;ï¼Œå¦‚æœæ˜¯å¼ºåˆ¶åˆ·æ–°ï¼Œåˆ™ä¼šå…¨éƒ¨æ‹¿èµ„æº</p><h2 id="è§£é‡Š"><a href="#è§£é‡Š" class="headerlink" title="è§£é‡Š"></a>è§£é‡Š</h2><ul><li>è¿‡æœŸç­–ç•¥ï¼Œé€šè¿‡æœ¬åœ°ç¼“å­˜çš„æ–‡ä»¶ï¼ŒéªŒè¯æ˜¯å¦è¿‡å»ï¼Œæ˜¯å¦åº”ç”¨ç¼“å­˜ï¼Œåˆ<code>Expires</code>,<code>Cache-control</code></li><li>åå•†ç­–ç•¥ï¼Œé€šè¿‡è¯¢é—®è¿œç«¯çš„æœåŠ¡å™¨ï¼Œæ˜¯å¦éœ€è¦æŠ“å–æ–°çš„èµ„æºï¼Œæ˜¯å¦éœ€è¦é‡æ–°è·å–ï¼Œæœ‰<code>ETag</code>,<code>Last-Modified</code></li><li>å­˜å‚¨ç­–ç•¥ï¼Œå“åº”å†…å®¹å­˜å…¥ç¼“å­˜ä¸­</li></ul><h2 id="Expires-Cache-Control"><a href="#Expires-Cache-Control" class="headerlink" title="Expires,Cache-Control"></a><code>Expires</code>,<code>Cache-Control</code></h2><p>å…¶ä¸­éƒ½å±äº&lt;è¿‡æœŸç­–ç•¥&gt;çš„å†…å®¹</p><h3 id="Expires"><a href="#Expires" class="headerlink" title="Expires"></a>Expires</h3><p>å­˜å‚¨çš„æ—¶è¿‡æœŸçš„æ—¶é—´ï¼Œå¦‚æœæœ¬åœ°æ—¶é—´åäºæŸä¸€æ—¶åˆ»ï¼Œé‚£ä¹ˆå°±ç§°ä¹‹ä¸ºè¿‡æœŸäº†</p><p><code>Expires: Sat Oct 20 2018 00:00:00 GMT+0800 (CST)</code></p><h3 id="Cache-control"><a href="#Cache-control" class="headerlink" title="Cache-control"></a>Cache-control</h3><p>æ˜¯ä¸€ç³»åˆ—<code>cache-directiveï¼ˆç¼“å­˜æŒ‡ä»¤ï¼‰</code>å€¼ï¼Œä¸­é—´ä½¿ç”¨<code>,</code>éš”å¼€</p><ul><li>å¯ç¼“å­˜æ€§ç›¸å…³<ul><li><code>public</code> åœ¨å®¢æˆ·ç«¯å’Œä»£ç†æœåŠ¡å™¨ç¼“å­˜ï¼ˆå…¬å…±èµ„æºé€‚ç”¨ï¼‰</li><li><code>private</code> åœ¨å®¢æˆ·ç«¯ç¼“å­˜ï¼Œä»£ç†æœåŠ¡å™¨ä¸ç¼“å­˜ï¼ˆç”¨æˆ·ä¸ªäººèµ„æºï¼‰</li><li><code>no-cache</code> ä¸è¿›è¡Œè¿‡æœŸç­–ç•¥ï¼Œç›´æ¥èµ°åå•†ç­–ç•¥ï¼ˆno-cacheèµ°åå•†ç­–ç•¥ï¼Œno-storeæ˜¯å®Œå…¨ä¸ç¼“å­˜ï¼‰</li></ul></li><li>è¿‡æœŸç›¸å…³<ul><li><code>max-age=&lt;seconds&gt;</code> å¤šå°‘ç§’åè¿‡æœŸï¼Œå¦‚æœå’ŒExpiresåŒæ—¶è®¾ç½®ï¼Œåˆ™Expireså¤±æ•ˆ</li></ul></li><li>å…¶ä»–<ul><li><code>no-store</code> å®Œå…¨ä¸ç¼“å­˜</li></ul></li></ul><p>ä»…åˆ—ä¸¾äº†éƒ¨åˆ†èµ„æº</p><h2 id="ETag-Last-Modified"><a href="#ETag-Last-Modified" class="headerlink" title="ETag,Last-Modified"></a><code>ETag</code>,<code>Last-Modified</code></h2><h3 id="Last-Modified"><a href="#Last-Modified" class="headerlink" title="Last-Modified"></a><code>Last-Modified</code></h3><p>å­˜å‚¨çš„æ ¼å¼ä¸ºï¼Œ<code>Last-Modified: &lt;day-name&gt;ï¼Œ&lt;day&gt; &lt;month&gt; &lt;year&gt; &lt;hour&gt;:&lt;minute&gt;:&lt;second&gt; GMT</code>,è¡¨ç¤ºä¸Šä¸€æ¬¡ä¿®æ”¹çš„æ—¶é—´ï¼Œè¯¥ä¿®æ”¹åªä¼šç²¾ç¡®åˆ°ç§’ï¼Œä¼šå‘æœåŠ¡ç«¯è¯¢é—®æ˜¯å¦å‘ç”Ÿäº†æ›´æ”¹ã€‚</p><p>ä¸‹æ¬¡ä¸€æ¬¡åˆ·æ–°çš„æ—¶å€™ï¼Œä¼šå¸¦æœ‰<code>If-Modifued-Sience: xxx</code> å°±æ˜¯ä¸Šä¸€æ¬¡è·å–çš„last-modified,å»å’ŒæœåŠ¡å™¨åšå¯¹æ¯”ï¼Œå¦‚æœè¯·æ±‚è¿‡å»ï¼Œå‘ç°æ˜¯ä¸Šä¸€æ¬¡ä¸ºä¿®æ”¹è¿‡ï¼Œåˆ™ä¼šè¿”å›304</p><h3 id="ETag"><a href="#ETag" class="headerlink" title="ETag"></a><code>ETag</code></h3><p>æ–‡ä»¶ä¿®æ”¹ï¼Œåˆ™ä¼šæ”¹å˜è¯¥å€¼ï¼Œå¦‚æœæ–‡ä»¶æœªå‘ç”Ÿæ”¹å˜ï¼Œåˆ™è¿”å›304ï¼Œ<code>ETag: &quot;e6sda124q84ds4&quot;</code></p><h2 id="å››ç§æ–¹å¼ä¼˜ç¼ºç‚¹"><a href="#å››ç§æ–¹å¼ä¼˜ç¼ºç‚¹" class="headerlink" title="å››ç§æ–¹å¼ä¼˜ç¼ºç‚¹"></a>å››ç§æ–¹å¼ä¼˜ç¼ºç‚¹</h2><ul><li>Expires<ul><li>ä¼˜ç‚¹ï¼šhttp1.0, ç®€å•æ˜“ç”¨ï¼Œé€šè¿‡ç»å¯¹æ—¶é—´æ ‡è¯†</li><li>ç¼ºç‚¹ï¼šæœåŠ¡å™¨æ—¶é—´å’Œæœ¬åœ°æ—¶é—´ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œå¦‚æœèµ„æºè¿‡æœŸå‰å¯¹å…¶è¿›è¡Œäº†ä¿®æ”¹ï¼Œå®¢æˆ·ç«¯æ˜¯æ— æ³•çŸ¥é“çš„</li></ul></li><li>Cache-Control<ul><li>ä¼˜ç‚¹ï¼šhttp1.1å†…å®¹ï¼Œç›¸å¯¹æ—¶é—´æ ‡è¯†ï¼Œè¾ƒå®‰å…¨ï¼Œå¯é…ç½®çš„æŒ‡ä»¤ä¹Ÿå¾ˆå¤š</li><li>ç¼ºç‚¹ï¼šhttp1.1æ‰é€‚ç”¨ï¼Œä¸é€‚ç”¨ä¹‹å‰1.0ç‰ˆæœ¬ï¼Œå¦‚æœèµ„æºè¿‡æœŸå‰è¿›è¡Œäº†ä¿®æ”¹ï¼Œå®¢æˆ·ç«¯ä¹Ÿæ˜¯æ— æ³•æ›´æ”¹çš„</li></ul></li><li>Last-Modified<ul><li>ä¼˜ç‚¹ï¼šä¸å­˜åœ¨ç‰ˆæœ¬é—®é¢˜ï¼Œæ²¡è¿‡æœŸç›´æ¥è¿”å›304</li><li>ç¼ºç‚¹ï¼šç²¾ç¡®åˆ°ç§’ï¼Œä¸é€‚ç”¨å¤šæ¬¡é‡å¤ä¿®æ”¹ï¼Œå¦‚æœèµ„æºå¹¶æœªå‘ç”Ÿå®è´¨æ€§çš„ä¿®æ”¹ï¼Œåˆ™ä¹Ÿä¼šé‡æ–°è¿”å›</li></ul></li><li>ETag<ul><li>ä¼˜ç‚¹ï¼šä¸å­˜åœ¨ç‰ˆæœ¬é—®é¢˜ï¼Œæ²¡è¿‡æœŸç›´æ¥è¿”å›304ï¼Œå¯ä»¥è¯†åˆ«ä¸€ç§’å†…å¤šæ¬¡ä¿®æ”¹ï¼Œå¦‚æœèµ„æºä¿®æ”¹ï¼Œå¹¶æœªå‘ç”Ÿå®è´¨å†…å®¹ï¼Œåˆ™ETagå€¼å¯ä»¥ä¸åšæ”¹å˜</li><li>ç¼ºç‚¹ï¼šè®¡ç®—ETagä¼šæœ‰ä¸€å®šçš„æ€§èƒ½å¼€é”€ï¼Œå¦‚æœåˆ†å¸ƒå¼æœåŠ¡å™¨è®¡ç®—ETagä¸åŒ,éªŒè¯ä¸ä¼šé€šè¿‡</li></ul></li></ul><h2 id="æœ€ä½³å®è·µ"><a href="#æœ€ä½³å®è·µ" class="headerlink" title="æœ€ä½³å®è·µ"></a>æœ€ä½³å®è·µ</h2><ul><li>é€‚ç”¨å¾ˆå¤§çš„Cache-Control:max-age, å’ŒExpiresï¼Œé€‚ç”¨ETagè¿›è¡Œæ ¡éªŒ</li><li>é€‚ç”¨ä¸šåŠ¡é€»è¾‘ï¼Œæ¯”å¦‚<code>xxx/js/index.js?s84vcxzc</code>æ·»åŠ hashæˆ–è€…ï¼Œtimestamp</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æµè§ˆå™¨å·¥ä½œåŸç†</title>
      <link href="/2020/03/07/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/"/>
      <url>/2020/03/07/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h2 id="å®è§‚"><a href="#å®è§‚" class="headerlink" title="å®è§‚"></a>å®è§‚</h2><ol><li>å°†ç½‘å€è½¬æ¢ä¸ºIPåœ°å€ï¼Œé€šè¿‡æµè§ˆå™¨ç¼“å­˜-ç³»ç»Ÿç¼“å­˜-è·¯ç”±å™¨ç¼“å­˜-ISPä¾›åº”å•†ç¼“å­˜ å»DNSæœåŠ¡å™¨æŸ¥è¯¢ç½‘å€æ‰€å¯¹åº”çš„ipåœ°å€</li><li>å‘ipåœ°å€æœåŠ¡å™¨å‘å‡ºè¯·æ±‚</li><li>ç›®æ ‡æœåŠ¡å™¨è§£æè¯·æ±‚ï¼Œè¿”å›å†…å®¹</li><li>æµè§ˆå™¨ç›¸åº”å†…å®¹ï¼Œå¹¶å‘ˆç°ç»™ç”¨æˆ·</li></ol><h2 id="ä¸»è¦åˆ†ææµè§ˆå™¨æ‹¿åˆ°æ–‡æ¡£æ—¶ï¼Œä»–æ˜¯å¦‚ä½•è¿›è¡Œæ¸²æŸ“çš„"><a href="#ä¸»è¦åˆ†ææµè§ˆå™¨æ‹¿åˆ°æ–‡æ¡£æ—¶ï¼Œä»–æ˜¯å¦‚ä½•è¿›è¡Œæ¸²æŸ“çš„" class="headerlink" title="ä¸»è¦åˆ†ææµè§ˆå™¨æ‹¿åˆ°æ–‡æ¡£æ—¶ï¼Œä»–æ˜¯å¦‚ä½•è¿›è¡Œæ¸²æŸ“çš„"></a>ä¸»è¦åˆ†ææµè§ˆå™¨æ‹¿åˆ°æ–‡æ¡£æ—¶ï¼Œä»–æ˜¯å¦‚ä½•è¿›è¡Œæ¸²æŸ“çš„</h2><blockquote><p>æµè§ˆå™¨ä¸»è¦å†…æ ¸ä¸ºwebkitç‰ˆå’ŒGecko</p></blockquote><h3 id="å¤§è‡´æµç¨‹"><a href="#å¤§è‡´æµç¨‹" class="headerlink" title="å¤§è‡´æµç¨‹"></a>å¤§è‡´æµç¨‹</h3><p>æµè§ˆå™¨é¦–æ¬¡ç»˜åˆ¶</p><p>1.æ¸²æŸ“å¼•æ“ä»ç½‘ç»œå±‚è·å–æ–‡æ¡£å†…å®¹</p><p>2.DOMéƒ¨åˆ†æœ‰DOMè§£æå™¨ç”ŸæˆDOMæ ‘ï¼ˆDOM treeï¼‰ï¼Œæ ·å¼éƒ¨åˆ†ç”±æ ·å¼è§£æå™¨ç”Ÿæˆæ ·å¼è§„åˆ™ï¼ˆstyle rulesï¼‰</p><p>2.ä¸¤è€…é€šè¿‡é™„åŠ ï¼ˆattachmentï¼‰ç”Ÿæˆæ¸²æŸ“æ ‘ï¼ˆrender treeï¼‰</p><p>3.è¯¥æ¸²æŸ“æ ‘è¿›è¡Œå¸ƒå±€(layout),æ·»åŠ åæ ‡ä½ç½®ä¿¡æ¯</p><p>4.æœ€åç»è¿‡ç»˜åˆ¶ï¼ˆpaintingï¼‰ç»ç”±æ¸²æŸ“å¼•æ“ç»è¡Œç»˜åˆ¶</p><p>æµè§ˆå™¨è¿›è¡ŒäºŒæ¬¡ç»˜åˆ¶</p><p>å‘ç”Ÿé‡ç»˜ï¼ˆrepaintï¼‰å›æµ/é‡æ’ï¼ˆreflowï¼‰</p><p>é‡ç»˜å¯¹åº”çš„æ˜¯paintingé˜¶æ®µï¼Œä¹Ÿå°±æ˜¯æ”¹å˜äº†å…ƒç´ çš„æ ·å¼ï¼Œå¹¶æœªæ”¹å˜å…ƒç´ çš„ä½ç½®ï¼Œå¦‚background,color,visibleç­‰ï¼Œå¯¹å…¶ä»–å…ƒç´ æ²¡æœ‰ä»€ä¹ˆå½±å“</p><p>å›æµå¯¹åº”çš„æ˜¯layouté˜¶æ®µï¼Œä¹Ÿå°±æ˜¯å…ƒç´ çš„ä½ç½®å‘ç”Ÿäº†æ”¹å˜ï¼Œéœ€è¦æµè§ˆå™¨æ ¹æ®å½“å‰çª—å£çš„å¤§å°é‡æ–°è®¡ç®—å„ä¸ªå…ƒç´ çš„ä½ç½®ï¼Œè¿›è¡Œå®šä½åï¼Œåœ¨ç»˜åˆ¶ï¼Œå¦‚æœæµè§ˆå™¨è‡ªèº«çª—å£å¤§å°ä¹Ÿå‘ç”Ÿäº†æ”¹å˜ï¼Œé‚£ä¹ˆä¹Ÿå°±ä¼šåº”ç”¨äºreflow,å…ƒç´ çš„ä½ç½®æ˜¯æ ¹æ®å½“å‰çš„çª—å£å¤§å°è¿›è¡Œæ”¹å˜çš„</p><blockquote><p>æŒ‰ç…§æµç¨‹æ¥è®²ï¼Œreflow -&gt; repaintï¼Œæ‰€ä»¥å‘ç”Ÿreflowæ—¶ï¼Œä¸€å®šä¼šç»å†repaint, å‘ç”Ÿrepaintæ—¶ï¼Œä¸ä¼šè§¦å‘reflow</p></blockquote><h3 id="å¦‚ä½•é¿å…DOMå›æµ"><a href="#å¦‚ä½•é¿å…DOMå›æµ" class="headerlink" title="å¦‚ä½•é¿å…DOMå›æµ"></a>å¦‚ä½•é¿å…DOMå›æµ</h3><blockquote><p>é¿å…æ“ä½œDOMï¼Œå°±æ˜¯æœ€å¥½çš„é¿å…DOMå›æµçš„æ–¹å¼ï¼Œä½¿ç”¨ç°ä»£æ¡†æ¶ï¼ŒåŸºäºvirtualDOMä»¥åŠDOMDiffèƒ½å¾ˆå¥½çš„è§£å†³é—®é¢˜ï¼Œæ‰€ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹æ¡†æ¶æ˜¯è¾ƒå¥½çš„ä¸€ç§é€‰æ‹©ï¼Œè¿™é‡Œå±•ç¤ºçš„æ˜¯æ‰‹åŠ¨æ“ä½œDOMæ—¶çš„ä¸€äº›ä¼˜åŒ–å»ºè®®</p></blockquote><ul><li>åˆ†ç¦»è¯»å†™æ“ä½œ</li></ul><p>è¯»æ“ä½œï¼Œæ”¾åœ¨ä¸€èµ·ï¼Œå†™æ“ä½œæ”¾åœ¨ä¸€èµ·ï¼Œç°ä»£æµè§ˆå™¨ä¼šåšéƒ¨åˆ†ä¼˜åŒ–ï¼Œä¼šå¯¹è¿ç»­çš„å†™æ“ä½œè¿›è¡Œç¼“å­˜ï¼Œä¸€æ¬¡å¤„ç†</p><ul><li>ç¼“å­˜å¸ƒå±€ä¿¡æ¯</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// çœ‹ä¼¼ä¸€æ¬¡å›æµï¼Œå…¶å®ä¸­é—´ç©¿æ’äº†è¯»å†™ï¼Œè¾ƒå½±å“æ€§èƒ½</span></span><br><span class="line">element.style.width = element.clientWidth + <span class="number">10</span> + <span class="string">'px'</span></span><br><span class="line">element.style.height = element.clientHeight + <span class="number">10</span> + <span class="string">'px'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¼“å­˜å¸ƒå±€ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">const</span> widht = element.clientWidth</span><br><span class="line"><span class="keyword">const</span> height = element.clientHeight</span><br><span class="line"></span><br><span class="line">element.style.width = width + <span class="number">10</span> + <span class="string">'px'</span></span><br><span class="line">element.style.height = height + <span class="number">10</span> + <span class="string">'px'</span></span><br></pre></td></tr></table></figure><ul><li>æ‰¹é‡æ–‡æ¡£ä¿®æ”¹</li></ul><p>ä½¿ç”¨<code>fragment</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fragment = <span class="built_in">document</span>.createDocumentFragment()</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">const</span> newLi = <span class="built_in">document</span>.createElement(<span class="string">'li'</span>)</span><br><span class="line">  newLi.innerText = i</span><br><span class="line">  fragment.appendChild(newLi)</span><br><span class="line">&#125;</span><br><span class="line">element.appendChild(fragment)</span><br><span class="line">fragment = <span class="literal">null</span> <span class="comment">// æ‰‹åŠ¨é‡Šæ”¾</span></span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥</li></ul><p>åŸºäºæ¨¡æ¿å­—ç¬¦ä¸²çš„æ–¹å¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> liContent = <span class="string">''</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  liContent += <span class="string">`&lt;li&gt;<span class="subst">$&#123;i&#125;</span>&lt;/li&gt;`</span></span><br><span class="line">&#125;</span><br><span class="line">element.innerHtml = liContent</span><br></pre></td></tr></table></figure><ul><li><p>åŠ¨ç”»æ•ˆæœåº”è¯¥å°½å¯èƒ½çš„è„±ç¦»æ–‡æ¡£æµï¼Œé¿å…å½±å“å…¶ä»–å…ƒç´ </p></li><li><p>CSSä½¿ç”¨æœ‰ç¡¬ä»¶åŠ é€Ÿçš„æ•ˆæœï¼Œåº•å±‚åšäº†é¿å…å›æµæ“ä½œ</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">element.style.transform = <span class="string">'translateX(200px)'</span></span><br></pre></td></tr></table></figure><ul><li>å°½å¯èƒ½é¿å…ä½¿ç”¨tableå¸ƒå±€</li></ul><p>æ–‡æ¡£çš„ç‰¹æ€§æ˜¯æµå¼å¸ƒå±€ï¼Œæ‰€ä»¥ä½¿ç”¨tableå¸ƒå±€ï¼Œä¼šè¿›è¡Œå¤šæ¬¡å›æµæ“ä½œ</p><h2 id="æ¸²æŸ“å…³é”®è·¯åŠ²"><a href="#æ¸²æŸ“å…³é”®è·¯åŠ²" class="headerlink" title="æ¸²æŸ“å…³é”®è·¯åŠ²"></a>æ¸²æŸ“å…³é”®è·¯åŠ²</h2><h3 id="css"><a href="#css" class="headerlink" title="css"></a>css</h3><p>ç”±äºæ ·å¼æœ‰å±‚å çš„å±æ€§ï¼Œæ‰€ä»¥å¿…é¡»è¦ç­‰æ ·å¼å…¨éƒ¨åŠ è½½å®Œåå†è¿›è¡Œ,å¦åˆ™ä¼šè¿›è¡Œå¤šæ¬¡é‡å»ºCSSOM,ä¸€èˆ¬å»ºè®®å°†styleæ”¾åœ¨headéƒ¨åˆ†ï¼Œå»ºç«‹åœ¨ä¸‹æ–‡ä¸­çš„styleæ ‡ç­¾å®¹æ˜“ä¼šè¢«é˜»å¡ï¼Œä»è€Œé‡å»ºCSSOM</p><h3 id="html"><a href="#html" class="headerlink" title="html"></a>html</h3><p>ç”±äºæ–‡æ¡£æ˜¯ä»ä¸Šåˆ°ä¸‹æ„å»ºçš„ï¼Œä»è€Œå¯ä»¥ä¸€è¾¹æ¥å—ä¸€è¾¹å±•ç¤ºï¼Œæ‰€è°“çš„æµå¼ã€‚</p><h3 id="js"><a href="#js" class="headerlink" title="js"></a>js</h3><p>jsä»£ç åœ¨æ‰§è¡Œæ—¶ï¼Œä¹Ÿæ˜¯ä»ä¸Šåˆ°ä¸‹æ‰§è¡Œçš„ï¼Œä½†æ˜¯ç”±äºå…¶åˆå¯ä»¥æ”¹å˜cssï¼Œä¹Ÿå¯ä»¥æ”¹å˜DOMç»“æ„ï¼Œæ‰€ä»¥jsæ‰§è¡Œçš„æ—¶å€™ï¼ŒCSSOM,DOMæ„å»ºéœ€æš‚åœ</p><h3 id="ä¸€èˆ¬æƒ…å†µæ„å»º"><a href="#ä¸€èˆ¬æƒ…å†µæ„å»º" class="headerlink" title="ä¸€èˆ¬æƒ…å†µæ„å»º"></a>ä¸€èˆ¬æƒ…å†µæ„å»º</h3><p>å¦‚æœåªæœ‰htmlä¸css,å³æ²¡æœ‰scriptä»£ç åµŒå…¥åˆ°htmlä¸­ï¼Œé‚£ä¹ˆä¼šä¸€è¾¹æ„å»ºCSSOMï¼Œä¸€è¾¹æ„å»ºDOMï¼Œå¾…ä¸¤è€…æœ€é•¿çš„ä¸€ä¸ªå®Œæˆæ—¶ï¼ˆä¸¤è€…å¯ä»¥åŒæ—¶æ„å»ºï¼‰,ç»„æˆrender-treeï¼Œç»è¿‡å®šä½ï¼Œç»˜åˆ¶å‘ˆç°åˆ°æµè§ˆå™¨ä¸Š</p><p>å¦‚æœæœ‰html,css,js,é‚£ä¹ˆåœ¨æ‰§è¡Œåˆ°jsçš„æ—¶å€™ï¼Œå¿…é¡»è¦åœæ­¢css,å’Œhtmlçš„è§£æï¼Œåˆå› ä¸ºæ ·å¼å¿…é¡»ä¸€æ¬¡æ€§åŠ è½½å®Œæ¯•ï¼ˆå¦åˆ™å¯èƒ½è·å–çš„é”™è¯¯çš„CSSï¼‰ï¼Œæ‰€ä»¥æœ€ç»ˆçš„åŠ è½½é¡ºåº<code>CSSOM -&gt; JS -&gt; HTML</code>,æ‰€ä»¥å¦‚æœjsä»£ç å†™åœ¨htmlä¹‹å‰ï¼Œå°±æ— æ³•è·å–ä¹‹åçš„å†…å®¹ï¼Œå› ä¸ºä¹‹åçš„htmlè¿˜æœªæ‰§è¡Œåˆ°ã€‚</p><h2 id="ä¼˜åŒ–æ¸²æŸ“å…³é”®è·¯å¾„"><a href="#ä¼˜åŒ–æ¸²æŸ“å…³é”®è·¯å¾„" class="headerlink" title="ä¼˜åŒ–æ¸²æŸ“å…³é”®è·¯å¾„"></a>ä¼˜åŒ–æ¸²æŸ“å…³é”®è·¯å¾„</h2><p>ä¸‰ç§å› ç´ ä¼šäº’ç›¸åˆ¶çº¦</p><ul><li>å…³é”®èµ„æºçš„æ•°é‡</li><li>å…³é”®è·¯å¾„çš„é•¿åº¦</li><li>å…³é”®å­—èŠ‚çš„æ•°é‡</li></ul><p>å…³é”®èµ„æºæŒ‡çš„æ˜¯é‚£äº›é˜»å¡é¡µé¢é¦–æ¬¡æ¸²æŸ“çš„èµ„æºï¼Œå¦‚js,css,é˜»å¡å…³é”®æ¸²æŸ“ï¼Œæµè§ˆå™¨å¤„ç†æ¸²æŸ“çš„å·¥ä½œé‡è¶Šå°‘ï¼ŒCPUå ç”¨çš„å…¶ä»–èµ„æºä¹Ÿè¶Šå°‘</p><p>å…³é”®è·¯å¾„çš„é•¿åº¦æ˜¯æŒ‡å…³é”®è·¯å¾„çš„æ€»è€—æ—¶ï¼Œæ¯ä¸€æ­¥è€—æ—¶è¶Šé•¿å…¶æ€»ä½“è¢«é˜»å¡çš„æ—¶é—´å°±ä¼šè¶Šé•¿ï¼Œå…¶å—åˆ°ç½‘ç»œæƒ…å†µï¼Œå…³é”®èµ„æºæ•°é‡ï¼Œä»¥åŠå…³é”®å­—èŠ‚å¤§å°æœ‰å…³ã€‚</p><p>å…³é”®å­—èŠ‚æ•°é‡æ˜¯æŒ‡èµ„æºçš„å­—èŠ‚å¤§å°ï¼Œæµè§ˆå™¨ä¸‹è½½å­—èŠ‚è¶Šå°‘ï¼Œå…¶å¤„ç†é€Ÿåº¦å°±ä¼šè¶Šå¿«ã€‚</p><h3 id="ç¼©å°DOM"><a href="#ç¼©å°DOM" class="headerlink" title="ç¼©å°DOM"></a>ç¼©å°DOM</h3><ul><li>ç¼©å‡æ–‡ä»¶çš„å°ºå¯¸ï¼Œå»é™¤æ³¨é‡Šï¼Œå»é™¤æ— ç”¨çš„ä»£ç </li><li>ä½¿ç”¨gzipå‹ç¼©</li><li>ä½¿ç”¨ç¼“å­˜</li></ul><h3 id="ä¼˜åŒ–CSSOM"><a href="#ä¼˜åŒ–CSSOM" class="headerlink" title="ä¼˜åŒ–CSSOM"></a>ä¼˜åŒ–CSSOM</h3><ul><li>åªå°†é¦–å±èµ„æºæ”¾å…¥ï¼Œç”±äºcssä¼šé˜»å¡é¡µé¢ï¼Œåœ¨æš‚æ—¶ç”¨ä¸åˆ°çš„åœ°æ–¹å¯ä»¥è®¾ç½®ä¸ºé¢„åŠ è½½ï¼Œæˆ–è€…ä½¿ç”¨hackçš„æ–¹å¼åŠ è½½</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"style.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">media</span>=<span class="string">"print"</span> <span class="attr">onload</span>=<span class="string">"this.media='all'"</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><p>å°†ä¸»è¦çš„é¦–å±æ¸²æŸ“æ”¾å…¥headä¸­ï¼Œå‡ç¼“ä¸‹è½½çš„æ—¶é—´ï¼Œå¯å‚è€ƒ<a href="https://github.com/addyosmani/critical" target="_blank" rel="noopener">critical css</a></p></li><li><p>å°‘ä½¿ç”¨<code>@import</code>ä»–ä¼šä½¿æ–‡ä»¶ä¸²è¡ŒåŠ è½½</p></li></ul><h3 id="ä¼˜åŒ–js"><a href="#ä¼˜åŒ–js" class="headerlink" title="ä¼˜åŒ–js"></a>ä¼˜åŒ–js</h3><ul><li>jsæ–‡ä»¶ä¹Ÿè¦å‹ç¼©ï¼Œä½¿ç”¨tree-shakingåŠŸèƒ½è¿›è¡Œä¼˜åŒ–</li><li>ä½¿ç”¨å¼‚æ­¥åŠ è½½js,<code>&lt;script async src=&quot;...&quot;&gt;&lt;/script&gt;</code></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>css-åŸºç¡€-é€‰æ‹©å™¨</title>
      <link href="/2020/03/07/css-%E5%9F%BA%E7%A1%80-%E9%80%89%E6%8B%A9%E5%99%A8/"/>
      <url>/2020/03/07/css-%E5%9F%BA%E7%A1%80-%E9%80%89%E6%8B%A9%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="html-csså†å²"><a href="#html-csså†å²" class="headerlink" title="html,csså†å²"></a>html,csså†å²</h2><p>åœ¨ 1990 å¹´ï¼ŒTim Berners-Lee å‘æ˜ HTML æ—¶ï¼Œä¸»è¦æ˜¯ä¸ºäº†è§„èŒƒç§‘ç ”æ–‡æ¡£çš„æ ¼å¼ã€‚è¿™æ—¶ HTML æ˜¯ä¸€ä¸ªç®€å•çš„æ ‡è®°è¯­è¨€ï¼Œä¸ºæ–‡æ¡£èµ‹äºˆäº†åŸºæœ¬çš„ç»“æ„å’Œæ„ä¹‰ï¼ŒåŒ…æ‹¬å¦‚æ ‡é¢˜ã€åˆ—è¡¨ã€å®šä¹‰ç­‰æ ‡ç­¾ã€‚åæ¥ä¸ºäº†å±•ç¤ºæ›´å¤šçš„æ•ˆæœï¼Œä»¥åŠå¯¹éƒ¨åˆ†æ ‡ç­¾çš„æ»¥ç”¨ï¼Œæ¯”å¦‚tableæ ‡ç­¾è¢«ç”¨æ¥å¸ƒå±€ç­‰ï¼Œæ ·å¼å’Œç»“æ„é€ç»è¡Œäº†æŠ½ç¦»ã€‚</p><h2 id="csså†å²"><a href="#csså†å²" class="headerlink" title="csså†å²"></a>csså†å²</h2><ul><li>css1åœ¨1996å¹´æˆä¸ºæ ‡å‡†</li><li>css2åœ¨1998å¹´æˆä¸ºæ ‡å‡†</li><li>css3åœ¨2002å°±è¢«æä¸Šè®®æ¡ˆï¼Œå¹¶ä¸åŒçš„æ¨¡å—è¢«æä¸Šä¸åŒçš„ææ¡ˆï¼Œä¸åŒæ¨¡å—å•ç‹¬æ§åˆ¶ï¼Œä»level1å¼€å§‹ï¼Œå¦‚æœæ˜¯ä¹‹å‰å·²ç»æœ‰çš„å†…å®¹ï¼Œåˆ™é¢˜ä¸ºlevel3å¹¶ç»§ç»­å‘å±•</li></ul><h2 id="htmlå†å²"><a href="#htmlå†å²" class="headerlink" title="htmlå†å²"></a>htmlå†å²</h2><p>htmlç»è¿‡4.01ç‰ˆæœ¬åï¼Œè¡ç”Ÿå‡ºäº†xhtml1.0,ç”±äºå…¶è¿‡äºä¸¥æ ¼,æœ€ç»ˆæ— æ³•è½åœ°ï¼Œæœ€ç»ˆè¯ç”Ÿå‡ºäº†html5.</p><h2 id="cssçš„æ¸è¿›å¢å¼ºä¸å‘åå…¼å®¹"><a href="#cssçš„æ¸è¿›å¢å¼ºä¸å‘åå…¼å®¹" class="headerlink" title="cssçš„æ¸è¿›å¢å¼ºä¸å‘åå…¼å®¹"></a>cssçš„æ¸è¿›å¢å¼ºä¸å‘åå…¼å®¹</h2><h3 id="æ¸è¿›å¢å¼º"><a href="#æ¸è¿›å¢å¼º" class="headerlink" title="æ¸è¿›å¢å¼º"></a>æ¸è¿›å¢å¼º</h3><p>é¦–å…ˆä¸ºæœ€å°çš„ï¼Œå…¬å…±éƒ¨åˆ†çš„æµè§ˆå™¨å‡†å¤‡èƒ½ç”¨çš„å†…å®¹ï¼Œå…¶æ¬¡åœ¨ä¸ºæ”¯æŒæ–°ç‰¹æ€§çš„æµè§ˆå™¨å¢åŠ å†…å®¹</p><h3 id="å‘åå…¼å®¹"><a href="#å‘åå…¼å®¹" class="headerlink" title="å‘åå…¼å®¹"></a>å‘åå…¼å®¹</h3><p>åœ¨ä½¿ç”¨æ–°ç‰¹æ€§æ—¶ï¼Œæ–°å±æ€§åœ¨å‰ï¼Œåå±æ€§åœ¨åï¼Œå³ä½¿æ–°ç‰¹æ€§ç”¨ä¸äº†ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ—§çš„å…¼å®¹çš„ç‰¹æ€§ã€‚</p><h3 id="å‚å•†å‰ç¼€"><a href="#å‚å•†å‰ç¼€" class="headerlink" title="å‚å•†å‰ç¼€"></a>å‚å•†å‰ç¼€</h3><ul><li><code>-webkit-</code>é€‚ç”¨äºwebkitå†…æ ¸æµè§ˆå™¨ safari/chrome/opera</li><li><code>-moz-</code>é€‚ç”¨äºMozillaå†…æ ¸ Firefox</li><li><code>-ms-</code>é€‚ç”¨äºå¾®è½¯çš„IE</li></ul><p>å…¶ä¸­å¯ä½¿ç”¨autofixï¼Œæˆ–è€…webpackä¸­çš„postcss/postcss-preset-envæ¥è‡ªåŠ¨å¢åŠ å‰ç¼€ä¿¡æ¯ã€‚</p><h2 id="è¯­ä¹‰åŒ–æ ‡ç­¾"><a href="#è¯­ä¹‰åŒ–æ ‡ç­¾" class="headerlink" title="è¯­ä¹‰åŒ–æ ‡ç­¾"></a>è¯­ä¹‰åŒ–æ ‡ç­¾</h2><p>å¤šä½¿ç”¨è¯­ä¹‰åŒ–æ ‡ç­¾ï¼Œèƒ½å¤Ÿä¾¿äºæµè§ˆå™¨è¯†åˆ«ï¼Œæˆ–æ˜¯å±å¹•é˜…è¯»å™¨ï¼Œæˆ–æ˜¯å•çº¯çš„å¤„ç†æ–‡æœ¬çš„æµè§ˆå™¨ï¼Œæˆ–è€…ç›²æ–‡ç‚¹è§¦è®¾å¤‡ï¼Œæ›´åˆ©äºæœç´¢å¼•æ“è¿›è¡Œæœç´¢</p><h2 id="cssé€‰æ‹©å™¨ç§ç±»"><a href="#cssé€‰æ‹©å™¨ç§ç±»" class="headerlink" title="cssé€‰æ‹©å™¨ç§ç±»"></a>cssé€‰æ‹©å™¨ç§ç±»</h2><h3 id="ç‹¬ç«‹é€‰æ‹©å™¨"><a href="#ç‹¬ç«‹é€‰æ‹©å™¨" class="headerlink" title="ç‹¬ç«‹é€‰æ‹©å™¨"></a>ç‹¬ç«‹é€‰æ‹©å™¨</h3><p>è‡ªå·±å•ç‹¬å°±å¯ä½¿ç”¨</p><h4 id="æ ‡ç­¾é€‰æ‹©å™¨"><a href="#æ ‡ç­¾é€‰æ‹©å™¨" class="headerlink" title="æ ‡ç­¾é€‰æ‹©å™¨"></a>æ ‡ç­¾é€‰æ‹©å™¨</h4><p>åŒ¹é…ç»™å®šå…ƒç´ åç§°çš„å…ƒç´ </p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">input</span> &#123;&#125;</span><br></pre></td></tr></table></figure><h4 id="ç±»é€‰æ‹©å™¨"><a href="#ç±»é€‰æ‹©å™¨" class="headerlink" title="ç±»é€‰æ‹©å™¨"></a>ç±»é€‰æ‹©å™¨</h4><p>é€‰ä¸­classå±æ€§ä¸­åŒ…å«æŒ‡å®šçš„å±æ€§å€¼ï¼Œå¿…é¡»æ˜¯å®Œæ•´çš„å±æ€§</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.intro</span> &#123;&#125;</span><br></pre></td></tr></table></figure><h4 id="idé€‰æ‹©å™¨ï¼Œ"><a href="#idé€‰æ‹©å™¨ï¼Œ" class="headerlink" title="idé€‰æ‹©å™¨ï¼Œ"></a>idé€‰æ‹©å™¨ï¼Œ</h4><p>ä¸ä¹‹å”¯ä¸€çš„ä¸€ä¸ªid,é¡µé¢ä¸­å”¯ä¸€å‡ºç°çš„å±æ€§</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#idname</span> &#123;&#125;</span><br></pre></td></tr></table></figure><h4 id="é€šç”¨é€‰æ‹©å™¨"><a href="#é€šç”¨é€‰æ‹©å™¨" class="headerlink" title="é€šç”¨é€‰æ‹©å™¨"></a>é€šç”¨é€‰æ‹©å™¨</h4><p>é€‰æ‹©å™¨é€‰æ‹©æ‰€æœ‰çš„èŠ‚ç‚¹ï¼Œä¹Ÿç”¨<code>.intro &gt; *</code>è¡¨ç¤º<code>.introçš„æ‰€æœ‰å­å…ƒç´ </code></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* &#123;&#125;</span><br></pre></td></tr></table></figure><h4 id="å±æ€§é€‰æ‹©å™¨"><a href="#å±æ€§é€‰æ‹©å™¨" class="headerlink" title="å±æ€§é€‰æ‹©å™¨"></a>å±æ€§é€‰æ‹©å™¨</h4><p>æ ¹æ®å±æ€§æ¥åŒ¹é…ï¼Œ</p><ul><li>å±æ€§å€¼å¼€å¤´<code>img[src^=&quot;http://&quot;]</code></li><li>å±æ€§å€¼åŒ…å«<code>img[src*=&quot;http://&quot;]</code></li><li>å±æ€§å€¼ç»“æŸ<code>img[src$=&quot;http://&quot;]</code></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-attr">[type]</span> &#123;&#125;</span><br><span class="line"><span class="selector-attr">[class='intro']</span></span><br></pre></td></tr></table></figure><h4 id="ä¼ªå…ƒç´ "><a href="#ä¼ªå…ƒç´ " class="headerlink" title="ä¼ªå…ƒç´ "></a>ä¼ªå…ƒç´ </h4><p>é€‰æ‹©é¡µé¢çš„ç‰¹æ®ŠåŒºåŸŸï¼Œä¸æ˜¯é€šè¿‡å…ƒç´ æ¥è¡¨ç¤ºçš„</p><ul><li>æ’ç‰ˆç±»ï¼Œæš‚æ—¶åº”ç”¨äºinlineä¸­<ul><li>é¦–è¡Œ<code>::first-line</code>,</li><li>é¦–å­—æ¯<code>::first-letter</code>,</li></ul></li><li>å­˜åœ¨äºé¡µé¢DOMä¸­,<code>contentä¸ä¸ºnoneæ—¶ä¼šæ˜¾ç¤º</code><ul><li>ä¹‹å‰<code>::before</code></li><li>ä¹‹å<code>::after</code></li></ul></li><li>å…¶ä»–<ul><li>è¾“å…¥æ¡†å ä½å…ƒç´ <code>::placeholder</code></li></ul></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">::after</span> &#123;&#125;</span><br></pre></td></tr></table></figure><h4 id="ä¼ªç±»"><a href="#ä¼ªç±»" class="headerlink" title="ä¼ªç±»"></a>ä¼ªç±»</h4><p>é€‰æ‹©é¡µé¢ä¸­å…ƒç´ çš„ç‰¹æ®ŠçŠ¶æ€</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">:hover</span> &#123;&#125;</span><br></pre></td></tr></table></figure><p>ç”±äºåœ¨ç§»åŠ¨è®¾å¤‡ä¸­ï¼Œä¸ä¸€å®šæœ‰çœŸçš„æ‚¬æµ®çŠ¶æ€ï¼Œæ‰€ä»¥è¦æ…é‡ä½¿ç”¨<code>hover</code></p><h5 id="è¶…é“¾æ¥"><a href="#è¶…é“¾æ¥" class="headerlink" title="è¶…é“¾æ¥"></a>è¶…é“¾æ¥</h5><ul><li>æ™®é€šé“¾æ¥ï¼ˆæœªç‚¹å‡»è¿‡ï¼‰<code>a:link</code></li><li>è®¿é—®è¿‡çš„é“¾æ¥ <code>a:visited</code></li><li>æ‚¬åœ/é”®ç›˜tabé¢„é€‰æ—¶ <code>a:hover</code></li><li>æ´»åŠ¨çŠ¶æ€ï¼Œé¼ æ ‡ç‚¹å‡»æ—¶ <code>a:active</code></li></ul><h5 id="ç›®æ ‡ä¸åé€‰"><a href="#ç›®æ ‡ä¸åé€‰" class="headerlink" title="ç›®æ ‡ä¸åé€‰"></a>ç›®æ ‡ä¸åé€‰</h5><h6 id="æµè§ˆå™¨çš„ç›®æ ‡åŒ¹é…id-è¯¥å…ƒç´ è¢«åŒ¹é…-target"><a href="#æµè§ˆå™¨çš„ç›®æ ‡åŒ¹é…id-è¯¥å…ƒç´ è¢«åŒ¹é…-target" class="headerlink" title="æµè§ˆå™¨çš„ç›®æ ‡åŒ¹é…id, è¯¥å…ƒç´ è¢«åŒ¹é… :target"></a>æµè§ˆå™¨çš„ç›®æ ‡åŒ¹é…id, è¯¥å…ƒç´ è¢«åŒ¹é… <code>:target</code></h6><p>æµè§ˆå™¨åœ°å€ä¸º: <code>http://example.com/blog/1/#comment-3</code></p><p>å…ƒç´ idä¸ºhashå€¼ <code>&lt;article class=&quot;comment&quot; id=&quot;comment-3&quot;&gt;&lt;/article&gt;</code></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.comment</span><span class="selector-pseudo">:target</span> &#123;&#125;</span><br></pre></td></tr></table></figure><h6 id="åé€‰-not"><a href="#åé€‰-not" class="headerlink" title="åé€‰ :not()"></a>åé€‰ <code>:not()</code></h6><p>é€‰ä¸­comment,ä½†æ˜¯ä¸èƒ½æ˜¯è¿æ³•è¯„è®º(.illegal)</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.comment</span><span class="selector-pseudo">:not(.illegal)</span> &#123;&#125;</span><br></pre></td></tr></table></figure><h5 id="ç»“æ„åŒ–ä¼ªç±»"><a href="#ç»“æ„åŒ–ä¼ªç±»" class="headerlink" title="ç»“æ„åŒ–ä¼ªç±»"></a>ç»“æ„åŒ–ä¼ªç±»</h5><p>å…¶ä¸­é»˜è®¤ä»1å¼€å§‹ï¼Œå¦‚æœè®¾ç½®äº†nï¼Œåˆ™nçš„å–å€¼ä»0å¼€å§‹é€’å¢</p><ul><li>åªé€‰æ‹©å…ƒç´ <ul><li><code>:nth-child()</code> æ­£å‘é€‰æ‹©</li><li><code>:nth-last-child()</code> ä»åå¼€å§‹è®¡æ•°é€‰æ‹©</li><li><code>:first-child()</code></li><li><code>:last-child()</code></li></ul></li><li>é€‰æ‹©åŒç­‰ç±»å‹çš„,è¿‡æ»¤æ‰ä¸ç¬¦åˆç±»å‹çš„<ul><li><code>:nth-of-type()</code> æ­£å‘é€‰æ‹©</li><li><code>:nth-last-of-type()</code> ä»åå¼€å§‹è®¡æ•°é€‰æ‹©</li></ul></li></ul><h5 id="è¡¨å•ä¼ªç±»"><a href="#è¡¨å•ä¼ªç±»" class="headerlink" title="è¡¨å•ä¼ªç±»"></a>è¡¨å•ä¼ªç±»</h5><ul><li><code>:required</code>,<code>:optional</code> å¿…å¡«å’Œé€‰å¡«é¡¹</li><li><code>:disabled</code>,<code>:read-only</code>, <code>:read-write</code> ç¦ç”¨ï¼Œåªè¯»ï¼Œè¯»å†™</li><li><code>:vaild</code>,<code>:invaild</code>, æœ‰æ•ˆï¼Œæ— æ•ˆ</li></ul><h3 id="ç»„åˆé€‰æ‹©å™¨"><a href="#ç»„åˆé€‰æ‹©å™¨" class="headerlink" title="ç»„åˆé€‰æ‹©å™¨"></a>ç»„åˆé€‰æ‹©å™¨</h3><p>é€šè¿‡å•ç‹¬é€‰æ‹©å™¨çš„ç»„åˆï¼Œå…¶ä¸­s1,s2,s3è¡¨ç¤ºç‹¬ç«‹é€‰æ‹©å™¨</p><blockquote><p>ç”±äºæµè§ˆå™¨æ¸²æŸ“é¡ºåºï¼Œéƒ½æ˜¯å¾€åè¿›è¡Œé€‰æ‹©ï¼Œå¦‚å­˜åœ¨å‘å‰çš„é€‰æ‹©å™¨ï¼Œé‚£ä¹ˆæµè§ˆå™¨ä¼šå¯¹ä¸€ä¸ªæ–‡æ¡£è¿›è¡Œå¤šè½®æ¸²æŸ“</p></blockquote><h4 id="åˆ†ç»„é€‰æ‹©å™¨"><a href="#åˆ†ç»„é€‰æ‹©å™¨" class="headerlink" title="åˆ†ç»„é€‰æ‹©å™¨"></a>åˆ†ç»„é€‰æ‹©å™¨</h4><p>ç”¨é€—å·æœ€ä¸ºåˆ†éš”ï¼Œå¤šä¸ªé€‰æ‹©å™¨åŒæ—¶åº”ç”¨ä¸€ç§æ ·å¼</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">s1</span>, <span class="selector-tag">s2</span>, <span class="selector-tag">s3</span> &#123;&#125;</span><br></pre></td></tr></table></figure><h4 id="åä»£é€‰æ‹©å™¨"><a href="#åä»£é€‰æ‹©å™¨" class="headerlink" title="åä»£é€‰æ‹©å™¨"></a>åä»£é€‰æ‹©å™¨</h4><p>ç”¨ç©ºæ ¼ä½œä¸ºåˆ†å‰²ï¼Œé€‰æ‹©å…¶åä»£</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">s1</span> <span class="selector-tag">s2</span> <span class="selector-tag">s3</span> &#123;&#125;</span><br></pre></td></tr></table></figure><h4 id="å­é€‰æ‹©å™¨"><a href="#å­é€‰æ‹©å™¨" class="headerlink" title="å­é€‰æ‹©å™¨"></a>å­é€‰æ‹©å™¨</h4><p>ä½¿ç”¨å¤§äºå·ä½œä¸ºåˆ†éš”ï¼Œåªä¼šé€‰æ‹©å™¨å­å…ƒç´ ï¼Œä¸ä¼šè·¨è¶Šå…ƒç´ å»é€‰</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">s1</span> &gt; <span class="selector-tag">s2</span> &#123;&#125;</span><br></pre></td></tr></table></figure><h4 id="ç›¸é‚»å…ƒç´ é€‰æ‹©å™¨"><a href="#ç›¸é‚»å…ƒç´ é€‰æ‹©å™¨" class="headerlink" title="ç›¸é‚»å…ƒç´ é€‰æ‹©å™¨"></a>ç›¸é‚»å…ƒç´ é€‰æ‹©å™¨</h4><p>é€‰æ‹©å…¶åçš„ç›¸é‚»çš„å…ƒç´ ï¼Œå¦‚æœç¬¦åˆåˆ™é€‰å®šï¼Œä¸ç¬¦åˆåˆ™ä¸é€‰å®šï¼Œä¸ä¼šè·³è·ƒæŸ¥äºå…¶æ‰€æœ‰çš„å…„å¼Ÿå…ƒç´ ï¼Œä¹Ÿä¸ä¼šæŸ¥å…¶å­å…ƒç´ </p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// æŸ¥æ‰¾s1ç´§è·Ÿçš„å…„å¼Ÿå…ƒç´ s2, å¦‚æœs1åçš„ç´§é‚»å…„å¼Ÿå…ƒç´ ä¸æ˜¯s2ï¼Œåˆ™ä¸äºˆä»¥é€‰å®š</span><br><span class="line"><span class="selector-tag">s1</span> + <span class="selector-tag">s2</span> &#123;&#125;</span><br></pre></td></tr></table></figure><h4 id="ä¸€èˆ¬åŒç±»é€‰æ‹©å™¨"><a href="#ä¸€èˆ¬åŒç±»é€‰æ‹©å™¨" class="headerlink" title="ä¸€èˆ¬åŒç±»é€‰æ‹©å™¨"></a>ä¸€èˆ¬åŒç±»é€‰æ‹©å™¨</h4><p>é€‰æ‹©å…¶åçš„ç›¸é‚»çš„å…ƒç´ ï¼Œä¼šè·³è·ƒæŸ¥å…¶æ‰€æœ‰çš„å…„å¼Ÿå…ƒç´ </p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// æŸ¥æ‰¾s1ä»¥åçš„æ‰€æœ‰å…„å¼Ÿå…ƒç´ s2, ç´§è·Ÿå…ƒç´ æœ‰å¤šå°‘é€‰æ‹©å¤šå°‘</span><br><span class="line"><span class="selector-tag">s1</span> ~ <span class="selector-tag">s2</span> &#123;&#125;</span><br></pre></td></tr></table></figure><h2 id="cssé€‰æ‹©å™¨çš„ç‰¹æ®Šæ€§"><a href="#cssé€‰æ‹©å™¨çš„ç‰¹æ®Šæ€§" class="headerlink" title="cssé€‰æ‹©å™¨çš„ç‰¹æ®Šæ€§"></a>cssé€‰æ‹©å™¨çš„ç‰¹æ®Šæ€§</h2><p><code>a, b, c, d</code></p><p>cssæ˜¯é‡‡ç”¨4ä¸ªçº§åˆ«åˆ¤å®šè¯¥æ ·å¼çš„ä¼˜å…ˆçº§ï¼ˆä»å·¦å¾€å³æ¯”è¾ƒé¡ºåºï¼‰ï¼Œ<strong>æ¯ä¸ªçº§åˆ«åªä¼šåœ¨å…¶ä½ç½®ä¸Šå¢å‡ï¼Œå¹¶ä¸ä¼šè¿›ä½</strong>ï¼Œ<strong>ç›¸åŒä¼˜å…ˆçº§ï¼Œä»ä¸Šåˆ°ä¸‹çš„é¡ºåºæ’åˆ—</strong></p><ul><li>a=1,aæ˜¯è¡Œå†…æ ·å¼ï¼Œ</li><li>b=IDé€‰æ‹©å™¨çš„ä¸ªæ•°</li><li>c=ç±»é€‰æ‹©å™¨çš„ä¸ªæ•°å’Œä¼ªç±»é€‰æ‹©å™¨çš„ä¸ªæ•°</li><li>d=ç±»å‹é€‰æ‹©å™¨å’Œä¼ªå…ƒç´ é€‰æ‹©å™¨çš„ä¸ªæ•°</li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id="dv-1" class="box target current"&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">div &#123;&#125; // 0.0.0.1</span><br><span class="line">div .box &#123;&#125; // 0.0.1.1</span><br><span class="line">.box.target.current // 0.0.3.0</span><br><span class="line">#dv-1 &#123;&#125; // 0.1.0.0</span><br></pre></td></tr></table></figure><h2 id="cssçš„ç»§æ‰¿"><a href="#cssçš„ç»§æ‰¿" class="headerlink" title="cssçš„ç»§æ‰¿"></a>cssçš„ç»§æ‰¿</h2><p>æ‰€æœ‰çˆ¶å…ƒç´ çš„å±æ€§å‡ä¼šç»§æ‰¿ç»™å…¶å­å…ƒç´ ï¼Œ<strong>è¯¥å…ƒç´ æœ‰è‡ªå·±çš„æ ·å¼ï¼Œåˆ™ä¼šè¦†ç›–ç»§æ‰¿æ ·å¼</strong>ï¼ˆé’ˆå¯¹åŒæ ·å¼è€Œè¨€ï¼‰</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">  &lt;h1&gt;css&lt;/h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123; <span class="attribute">color</span>: red; &#125;</span><br><span class="line"><span class="selector-tag">h1</span> &#123; <span class="attribute">color</span>: blue; &#125;</span><br><span class="line"></span><br><span class="line">æœ€ç»ˆå†…å®¹ä¸º<span class="selector-tag">blue</span></span><br></pre></td></tr></table></figure><p>h1æ”¶åˆ°bodyçš„æ ·å¼ç»§æ‰¿ä¸ºred, åˆå› ä¸ºh1è®¾ç½®äº†è‡ªå·±çš„é¢œè‰²ï¼Œæ‰€ä»¥ä¼šè¦†ç›–ç»§æ‰¿çš„red,ä¸ºblue</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">  &lt;h1&gt;css&lt;/h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123; <span class="attribute">font-size</span>: <span class="number">50px</span>; &#125;</span><br><span class="line"></span><br><span class="line">æœ€ç»ˆ<span class="selector-tag">h1</span>çš„å­—å·ä¸ºæµè§ˆå™¨è‡ªå¸¦ï¼ˆå¹¶é<span class="selector-tag">body</span>ç»§æ‰¿çš„50ï¼‰</span><br></pre></td></tr></table></figure><p>h1æ”¶åˆ°bodyçš„æ ·å¼ç»§æ‰¿ä¸º50px,å› ä¸ºæµè§ˆå™¨é»˜è®¤å¯¹æ ‡é¢˜æœ‰å­—å·è®¾ç½®ï¼Œæ‰€ä»¥è¦†ç›–ç»§æ‰¿çš„50px,ä¸ºä¹‹å‰å­—å·å¤§å°</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// ç‰¹åˆ—</span><br><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">  &lt;<span class="selector-tag">h1</span>&gt;</span><br><span class="line">    hello&lt;em&gt;css&lt;/em&gt;</span><br><span class="line">  &lt;/h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">* &#123; <span class="attribute">color</span>: red; &#125;</span><br><span class="line"><span class="selector-tag">h1</span> &#123; <span class="attribute">color</span>: blue; &#125;</span><br><span class="line"></span><br><span class="line">æœ€ç»ˆ<span class="selector-tag">hello</span>å‘ˆç°<span class="selector-tag">blue</span>ï¼Œ<span class="selector-tag">css</span>å‘ˆç°<span class="selector-tag">red</span></span><br></pre></td></tr></table></figure><p><code>*</code>ç­‰äºä¸ºæ¯ä¸ªå…ƒç´ éƒ½è®¾å®šäº†æ ·å¼ï¼Œè™½ç„¶h1çš„blueç»§æ‰¿ç»™äº†å†…éƒ¨çš„emï¼Œä½†æ˜¯ä¹‹å‰çš„<code>*</code>ä¸ºå…¶è®¾ç½®çš„æ ·å¼è¿›è¡Œäº†è¦†ç›–ï¼Œæ‰€ä»¥å‘ˆç°red</p>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>é€ä½ ä¸ªæœˆäº®ï¼Œè®©ä½ å®‰ç„¶å…¥ç¡</title>
      <link href="/2020/02/27/%E9%80%81%E4%BD%A0%E4%B8%AA%E6%9C%88%E4%BA%AE%EF%BC%8C%E8%AE%A9%E4%BD%A0%E5%AE%89%E7%84%B6%E5%85%A5%E7%9D%A1/"/>
      <url>/2020/02/27/%E9%80%81%E4%BD%A0%E4%B8%AA%E6%9C%88%E4%BA%AE%EF%BC%8C%E8%AE%A9%E4%BD%A0%E5%AE%89%E7%84%B6%E5%85%A5%E7%9D%A1/</url>
      
        <content type="html"><![CDATA[<p><img src="/img/2020/02/27/moon.jpg" alt="moon"></p><p>å¤©ä¸Šæœ€äº®çš„æ˜Ÿï¼Œæ˜¯å¯æ˜æ˜Ÿï¼ŒåŸæ¥ä»–é‚£ä¹ˆäº®ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> å¿ƒæƒ… </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ä½¿ç”¨yumå®‰è£…nginxå¹¶é…ç½®httpsæœåŠ¡</title>
      <link href="/2020/02/14/%E4%BD%BF%E7%94%A8yum%E5%AE%89%E8%A3%85nginx%E5%B9%B6%E9%85%8D%E7%BD%AEhttps%E6%9C%8D%E5%8A%A1/"/>
      <url>/2020/02/14/%E4%BD%BF%E7%94%A8yum%E5%AE%89%E8%A3%85nginx%E5%B9%B6%E9%85%8D%E7%BD%AEhttps%E6%9C%8D%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<blockquote><p>centos7 è¿è¡Œç¯å¢ƒä¸ºè…¾è®¯äº‘</p></blockquote><h1 id="ä½¿ç”¨yumå®‰è£…nginx"><a href="#ä½¿ç”¨yumå®‰è£…nginx" class="headerlink" title="ä½¿ç”¨yumå®‰è£…nginx"></a>ä½¿ç”¨yumå®‰è£…nginx</h1><h2 id="æ·»åŠ nginxåˆ°yumæº"><a href="#æ·»åŠ nginxåˆ°yumæº" class="headerlink" title="æ·»åŠ nginxåˆ°yumæº"></a>æ·»åŠ nginxåˆ°yumæº</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -Uvh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…nginx"><a href="#å®‰è£…nginx" class="headerlink" title="å®‰è£…nginx"></a>å®‰è£…nginx</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y nginx</span><br></pre></td></tr></table></figure><h2 id="å¯åŠ¨nginx"><a href="#å¯åŠ¨nginx" class="headerlink" title="å¯åŠ¨nginx"></a>å¯åŠ¨nginx</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯åŠ¨nginx</span></span><br><span class="line">systemctl start nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€æœºè‡ªå¯</span></span><br><span class="line">systemctl <span class="built_in">enable</span> nginx</span><br></pre></td></tr></table></figure><h1 id="å®‰è£…certbot"><a href="#å®‰è£…certbot" class="headerlink" title="å®‰è£…certbot"></a>å®‰è£…certbot</h1><h2 id="å®‰è£…epel-å¢å¼ºæº"><a href="#å®‰è£…epel-å¢å¼ºæº" class="headerlink" title="å®‰è£…epel å¢å¼ºæº"></a>å®‰è£…epel å¢å¼ºæº</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum -y install epel-release</span><br><span class="line">wget -O /etc/yum.repos.d/epel-7.repo http://mirrors.aliyun.com/repo/epel-7.repo</span><br><span class="line"><span class="comment"># åˆ·æ–°yumæº</span></span><br><span class="line">yum clean all &amp;&amp; yum makecache &amp;&amp; yum update</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…yum-utils"><a href="#å®‰è£…yum-utils" class="headerlink" title="å®‰è£…yum-utils"></a>å®‰è£…yum-utils</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum -y install yum-utils</span><br><span class="line"></span><br><span class="line">yum-config-manager --<span class="built_in">enable</span> rhui-REGION-rhel-server-extras rhui-REGION-rhel-server-optional</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…python2-certbot-nginx"><a href="#å®‰è£…python2-certbot-nginx" class="headerlink" title="å®‰è£…python2-certbot-nginx"></a>å®‰è£…python2-certbot-nginx</h2><blockquote><p>ä½¿ç”¨python2å¼€å‘ï¼Œå†<code>nginx.conf</code>æ–‡ä»¶ä¸­ï¼Œå»æ‰ä¸­æ–‡å­—ç¬¦</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install python2-certbot-nginx</span><br></pre></td></tr></table></figure><h1 id="ä½¿ç”¨certbotå¼€å¯https"><a href="#ä½¿ç”¨certbotå¼€å¯https" class="headerlink" title="ä½¿ç”¨certbotå¼€å¯https"></a>ä½¿ç”¨certbotå¼€å¯https</h1><blockquote><p>å¦‚æœè‡ªå®šä¹‰makeç¼–è¯‘å®‰è£…nginxï¼Œè¦æ›´æ”¹ç›¸å…³è·¯å¾„ï¼Œæ·»åŠ è½¯è¿æ¥</p></blockquote><h2 id="å°†certboté…ç½®åˆ°nginx"><a href="#å°†certboté…ç½®åˆ°nginx" class="headerlink" title="å°†certboté…ç½®åˆ°nginx"></a>å°†certboté…ç½®åˆ°nginx</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">certbot --nginx</span><br></pre></td></tr></table></figure><h2 id="é…ç½®æ­¥éª¤"><a href="#é…ç½®æ­¥éª¤" class="headerlink" title="é…ç½®æ­¥éª¤"></a>é…ç½®æ­¥éª¤</h2><ol><li>è¾“å…¥ä½ çš„é‚®ç®±å: <a href="mailto:xxx@xxx.com" target="_blank" rel="noopener">xxx@xxx.com</a></li><li>åŒä¸€åè®®: A</li><li>å…è®¸é‚®ä»¶æ¨é€: Y</li><li>é€‰æ‹©æ·»åŠ httpsé…ç½®åŸŸå: <code>1 2</code> <em>è¾“å…¥ç›¸å…³æ•°å­—ä½¿ç”¨ç©ºæ ¼éš”å¼€</em></li><li>åŒæ—¶ä¿ç•™http,https: 1</li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> è¿ç»´ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ä½¿ç”¨now-cliéƒ¨ç½²å‰ç«¯é¡¹ç›®åˆ°zeitä¸Š</title>
      <link href="/2020/02/08/%E4%BD%BF%E7%94%A8now-cli%E9%83%A8%E7%BD%B2%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%88%B0zeit%E4%B8%8A/"/>
      <url>/2020/02/08/%E4%BD%BF%E7%94%A8now-cli%E9%83%A8%E7%BD%B2%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%88%B0zeit%E4%B8%8A/</url>
      
        <content type="html"><![CDATA[<p>ç”¨zeit( <a href="https://zeit.co/" target="_blank" rel="noopener">https://zeit.co/</a> )éƒ¨ç½²é¡¹ç›®ï¼Œç”¨æ¥åšæ¼”ç¤ºï¼Œåšdemoéƒ½æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</p><h2 id="å®‰è£…now-cli"><a href="#å®‰è£…now-cli" class="headerlink" title="å®‰è£…now-cli"></a>å®‰è£…now-cli</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨npm</span></span><br><span class="line">npm i now -g </span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–è€…ä½¿ç”¨yarn</span></span><br><span class="line">yarn global add now</span><br></pre></td></tr></table></figure><h2 id="ç™»å½•"><a href="#ç™»å½•" class="headerlink" title="ç™»å½•"></a>ç™»å½•</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">now login</span><br></pre></td></tr></table></figure><h2 id="éƒ¨ç½²é™æ€ç½‘ç«™"><a href="#éƒ¨ç½²é™æ€ç½‘ç«™" class="headerlink" title="éƒ¨ç½²é™æ€ç½‘ç«™"></a>éƒ¨ç½²é™æ€ç½‘ç«™</h2><p>æ ‡å‡†ç½‘ç«™çš„ç»“æ„ï¼Œå¦‚æœæ˜¯å•é¡µåº”ç”¨ï¼Œç”¨æ­¤æ–¹å¼è·¯ç”±ä¹‹åï¼Œæ‰‹åŠ¨åˆ·æ–°ä¼šå‡ºç°404çš„é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨hashRouterè§£å†³</p><p>ç›®å½•ç»“æ„ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€css</span><br><span class="line">â”œâ”€img</span><br><span class="line">â””â”€js</span><br><span class="line">â”‚</span><br><span class="line">â”‚  index.html</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨nowè¿›è¡Œéƒ¨ç½²,å¤„äºå½“å‰ç›®å½•ä¸­</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸€é”®éƒ¨ç½²</span></span><br><span class="line">now</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡æ–°å‘½åé¡¹ç›®</span></span><br><span class="line">now --name foo</span><br></pre></td></tr></table></figure><h2 id="éƒ¨ç½²å‰ç«¯é¡¹ç›®"><a href="#éƒ¨ç½²å‰ç«¯é¡¹ç›®" class="headerlink" title="éƒ¨ç½²å‰ç«¯é¡¹ç›®"></a>éƒ¨ç½²å‰ç«¯é¡¹ç›®</h2><p>ç›´æ¥åœ¨é¡¹ç›®æ›´ç›®å½•ä¸­è¿›è¡Œéƒ¨ç½²å³å¯ï¼Œè‡ªåŠ¨build,è¿™ç§éƒ¨ç½²æ–¹å¼æœ‰ä¸å­˜åœ¨è·¯ç”±åˆ·æ–°é—®é¢˜</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸€é”®éƒ¨ç½²</span></span><br><span class="line">now</span><br><span class="line"></span><br><span class="line"><span class="comment"># éƒ¨ç½²ç”Ÿäº§ç¯å¢ƒ</span></span><br><span class="line">now --prod</span><br></pre></td></tr></table></figure><blockquote><p>å®˜æ–¹æ–‡æ¡£<a href="https://zeit.co/docs/now-cli#commands/now" target="_blank" rel="noopener">https://zeit.co/docs/now-cli#commands/now</a></p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æ­£åˆ™åŠ å¼º</title>
      <link href="/2020/01/12/%E6%AD%A3%E5%88%99%E5%8A%A0%E5%BC%BA/"/>
      <url>/2020/01/12/%E6%AD%A3%E5%88%99%E5%8A%A0%E5%BC%BA/</url>
      
        <content type="html"><![CDATA[<h2 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>.prototype.match <span class="comment">// åŒ¹é…</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">RegExp</span>.prototype.test <span class="comment">// æ˜¯å¦ç¬¦åˆ</span></span><br><span class="line"><span class="built_in">RegExp</span>.prototype.exec <span class="comment">// æ‰§è¡Œï¼Œè¿›è¡Œæ•è·</span></span><br></pre></td></tr></table></figure><h2 id="å­—é¢é‡ï¼Œæ„é€ å‡½æ•°åˆ›å»ºçš„åŒºåˆ«"><a href="#å­—é¢é‡ï¼Œæ„é€ å‡½æ•°åˆ›å»ºçš„åŒºåˆ«" class="headerlink" title="å­—é¢é‡ï¼Œæ„é€ å‡½æ•°åˆ›å»ºçš„åŒºåˆ«"></a>å­—é¢é‡ï¼Œæ„é€ å‡½æ•°åˆ›å»ºçš„åŒºåˆ«</h2><h3 id="å­—é¢é‡åˆ›å»ºï¼Œå…ƒå­—ç¬¦ä½¿ç”¨æ¯”è¾ƒç®€å•ï¼Œæ„é€ å‡½æ•°éœ€è¦ç‰¹æ®Šè½¬ä¹‰ï¼Œè½¬ä¹‰ç¬¦æ‰èƒ½ä½¿ç”¨"><a href="#å­—é¢é‡åˆ›å»ºï¼Œå…ƒå­—ç¬¦ä½¿ç”¨æ¯”è¾ƒç®€å•ï¼Œæ„é€ å‡½æ•°éœ€è¦ç‰¹æ®Šè½¬ä¹‰ï¼Œè½¬ä¹‰ç¬¦æ‰èƒ½ä½¿ç”¨" class="headerlink" title="å­—é¢é‡åˆ›å»ºï¼Œå…ƒå­—ç¬¦ä½¿ç”¨æ¯”è¾ƒç®€å•ï¼Œæ„é€ å‡½æ•°éœ€è¦ç‰¹æ®Šè½¬ä¹‰ï¼Œè½¬ä¹‰ç¬¦æ‰èƒ½ä½¿ç”¨"></a>å­—é¢é‡åˆ›å»ºï¼Œå…ƒå­—ç¬¦ä½¿ç”¨æ¯”è¾ƒç®€å•ï¼Œæ„é€ å‡½æ•°éœ€è¦ç‰¹æ®Šè½¬ä¹‰ï¼Œè½¬ä¹‰ç¬¦æ‰èƒ½ä½¿ç”¨</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å­—é¢é‡æ–¹å¼åˆ›å»º</span></span><br><span class="line"><span class="keyword">let</span> reg1 = <span class="regexp">/\d+/</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”±æ„é€ å‡½æ•°åˆ›å»º,æ³¨æ„ç”±äºä½¿ç”¨å­—ç¬¦ä¸²çš„æ–¹å¼ï¼Œè¦æ³¨æ„è½¬ä¹‰çš„é—®é¢˜ï¼Œä¸€èˆ¬å°†\å˜ä¸º\\å³å¯</span></span><br><span class="line"><span class="keyword">let</span> reg2 = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'\\d+'</span>);</span><br></pre></td></tr></table></figure><h3 id="å¦‚æœè¦æ‹¼æ¥æ­£åˆ™ï¼Œåªèƒ½ä½¿ç”¨æ„é€ å‡½æ•°çš„æ–¹å¼"><a href="#å¦‚æœè¦æ‹¼æ¥æ­£åˆ™ï¼Œåªèƒ½ä½¿ç”¨æ„é€ å‡½æ•°çš„æ–¹å¼" class="headerlink" title="å¦‚æœè¦æ‹¼æ¥æ­£åˆ™ï¼Œåªèƒ½ä½¿ç”¨æ„é€ å‡½æ•°çš„æ–¹å¼"></a>å¦‚æœè¦æ‹¼æ¥æ­£åˆ™ï¼Œåªèƒ½ä½¿ç”¨æ„é€ å‡½æ•°çš„æ–¹å¼</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">'zhn'</span></span><br><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/^@'+type+'@$/</span></span><br><span class="line">reg.test(<span class="string">'@zhn@'</span>) <span class="comment">// false</span></span><br><span class="line">reg.test(<span class="string">"@'''''''typeeeee'@"</span>) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">'zhn'</span></span><br><span class="line"><span class="keyword">let</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'^@'</span> + name +<span class="string">'@$'</span>)</span><br><span class="line">reg.test(<span class="string">'@zhn@'</span>) <span class="comment">// true</span></span><br><span class="line">reg.test(<span class="string">"@'''''''typeeeee'@"</span>) <span class="comment">// false</span></span><br></pre></td></tr></table></figure><h2 id="æ­£åˆ™åŒ¹é…ä¿®é¥°ç¬¦"><a href="#æ­£åˆ™åŒ¹é…ä¿®é¥°ç¬¦" class="headerlink" title="æ­£åˆ™åŒ¹é…ä¿®é¥°ç¬¦"></a>æ­£åˆ™åŒ¹é…ä¿®é¥°ç¬¦</h2><p>i =&gt; ignoreCase å¿½ç•¥å¤§å°å†™<br>m =&gt; multiline  å¤šæ¬¡åŒ¹é…<br>g =&gt; global     å…¨å±€åŒ¹é…</p><h2 id="å¸¸ç”¨å…ƒå­—ç¬¦"><a href="#å¸¸ç”¨å…ƒå­—ç¬¦" class="headerlink" title="å¸¸ç”¨å…ƒå­—ç¬¦"></a>å¸¸ç”¨å…ƒå­—ç¬¦</h2><h3 id="é‡è¯å…ƒå­—ç¬¦"><a href="#é‡è¯å…ƒå­—ç¬¦" class="headerlink" title="é‡è¯å…ƒå­—ç¬¦"></a>é‡è¯å…ƒå­—ç¬¦</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* + ? &#123;m&#125; &#123;m,&#125; &#123;m,n&#125;</span><br></pre></td></tr></table></figure><h3 id="ç‰¹æ®Šå…ƒå­—ç¬¦"><a href="#ç‰¹æ®Šå…ƒå­—ç¬¦" class="headerlink" title="ç‰¹æ®Šå…ƒå­—ç¬¦"></a>ç‰¹æ®Šå…ƒå­—ç¬¦</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">\ . ^ $ \n \w \s \b \t a|b|c [abc] [a-z] [^n34]</span><br><span class="line">()  (?:) (?=) (?!)</span><br></pre></td></tr></table></figure><h3 id="æ™®é€šå…ƒå­—ç¬¦"><a href="#æ™®é€šå…ƒå­—ç¬¦" class="headerlink" title="æ™®é€šå…ƒå­—ç¬¦"></a>æ™®é€šå…ƒå­—ç¬¦</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/RegExp/ -&gt; åŒ¹é… &apos;RegExp&apos;</span><br></pre></td></tr></table></figure><h2 id="æ‹¬å·ç›¸å…³"><a href="#æ‹¬å·ç›¸å…³" class="headerlink" title="æ‹¬å·ç›¸å…³"></a>æ‹¬å·ç›¸å…³</h2><h3 id="è¡¨ç¤ºåˆ†ç»„"><a href="#è¡¨ç¤ºåˆ†ç»„" class="headerlink" title="() è¡¨ç¤ºåˆ†ç»„"></a><code>()</code> è¡¨ç¤ºåˆ†ç»„</h3><p>æ”¹å˜ä¼˜å…ˆçº§ï¼Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¡¨ç¤º18|29,ä¼šå‡ºç°è¾ƒä¸ºæ··ä¹±çš„ç»“æœ</span></span><br><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/^18|29$/</span></span><br><span class="line">reg.test(<span class="string">'18'</span>) <span class="comment">// true</span></span><br><span class="line">reg.test(<span class="string">'29'</span>) <span class="comment">// true</span></span><br><span class="line">reg.test(<span class="string">'189'</span>) <span class="comment">// true</span></span><br><span class="line">reg.test(<span class="string">'129'</span>) <span class="comment">// true</span></span><br><span class="line">reg.test(<span class="string">'1829'</span>) <span class="comment">// true</span></span><br><span class="line">reg.test(<span class="string">'829'</span>) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“åˆå°æ‹¬å·å®Œæˆéœ€æ±‚</span></span><br><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/^(18|29)$/</span></span><br><span class="line">reg.test(<span class="string">'18'</span>) <span class="comment">// true</span></span><br><span class="line">reg.test(<span class="string">'29'</span>) <span class="comment">// true</span></span><br><span class="line">reg.test(<span class="string">'189'</span>) <span class="comment">// false</span></span><br><span class="line">reg.test(<span class="string">'129'</span>) <span class="comment">// false</span></span><br><span class="line">reg.test(<span class="string">'1829'</span>) <span class="comment">// false</span></span><br><span class="line">reg.test(<span class="string">'829'</span>) <span class="comment">// false</span></span><br></pre></td></tr></table></figure><h3 id="è¡¨ç¤ºæœ¬èº«å«ä¹‰"><a href="#è¡¨ç¤ºæœ¬èº«å«ä¹‰" class="headerlink" title="[] è¡¨ç¤ºæœ¬èº«å«ä¹‰"></a><code>[]</code> è¡¨ç¤ºæœ¬èº«å«ä¹‰</h3><h3 id="ä»…è¡¨ç¤ºä¸€ä¸ªå­—æ¯"><a href="#ä»…è¡¨ç¤ºä¸€ä¸ªå­—æ¯" class="headerlink" title="ä»…è¡¨ç¤ºä¸€ä¸ªå­—æ¯"></a>ä»…è¡¨ç¤ºä¸€ä¸ªå­—æ¯</h3><p>ä¸­æ‹¬å·å†…ä»…è¡¨ç¤ºä¸€ä½å­—æ¯ï¼ˆæ‰€æœ‰å‡ºç°çš„å¯èƒ½æ€§ï¼Œä¹Ÿåªèƒ½ä»£è¡¨å‡ºç°çš„ä¸€æ¬¡ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">reg = <span class="regexp">/^[@+]$/</span> <span class="comment">// åŒ…å«åœ¨å†…</span></span><br><span class="line">reg.test(<span class="string">'+'</span>)  <span class="comment">// true</span></span><br><span class="line">reg.test(<span class="string">'@@'</span>) <span class="comment">// false // 2ä¸ªå­—æ¯</span></span><br><span class="line">reg.test(<span class="string">'@+'</span>) <span class="comment">// false</span></span><br><span class="line">reg.test(<span class="string">'ab'</span>) <span class="comment">// false // 2ä¸ªå­—æ¯</span></span><br><span class="line"></span><br><span class="line">reg = <span class="regexp">/^[^@+]$/</span> <span class="comment">// ä¸èƒ½å‡ºç°åœ¨å†…</span></span><br><span class="line">reg.test(<span class="string">'+'</span>)  <span class="comment">// false</span></span><br><span class="line">reg.test(<span class="string">'@@'</span>) <span class="comment">// false // 2ä¸ªå­—æ¯</span></span><br><span class="line">reg.test(<span class="string">'@+'</span>) <span class="comment">// false</span></span><br><span class="line">reg.test(<span class="string">'a'</span>) <span class="comment">// false</span></span><br></pre></td></tr></table></figure><h3 id="ç‰¹æ®Šå…ƒå­—ç¬¦ï¼ˆåŠå…ƒå­—ç¬¦åœ¨ä¸­æ‹¬å·å†…ï¼‰"><a href="#ç‰¹æ®Šå…ƒå­—ç¬¦ï¼ˆåŠå…ƒå­—ç¬¦åœ¨ä¸­æ‹¬å·å†…ï¼‰" class="headerlink" title="ç‰¹æ®Šå…ƒå­—ç¬¦ï¼ˆåŠå…ƒå­—ç¬¦åœ¨ä¸­æ‹¬å·å†…ï¼‰"></a>ç‰¹æ®Šå…ƒå­—ç¬¦ï¼ˆåŠå…ƒå­—ç¬¦åœ¨ä¸­æ‹¬å·å†…ï¼‰</h3><blockquote><p>æ³¨æ„ï¼Œ<code>\</code>æ˜¯è¡¨ç¤ºè½¬ä¹‰,<code>[\d]</code> è¡¨ç¤ºçš„ä¸º<code>\d</code>, å¦‚æœæ˜¯<code>[\\d]</code>,åˆ™è¡¨ç¤º<code>\</code>æˆ–è€…<code>d</code><br>æ‰€ä»¥åœ¨å­—ç¬¦ä¸²ä¸­ï¼Œä¹Ÿä¸è¦å¿˜è®°è½¬ä¹‰çš„å­˜åœ¨</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">reg = <span class="regexp">/^[\d]$/</span></span><br><span class="line">reg.test(<span class="string">'\\'</span>) <span class="comment">// false</span></span><br><span class="line">reg.test(<span class="string">'d'</span>) <span class="comment">// false</span></span><br><span class="line">reg.test(<span class="string">'6'</span>) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">reg = <span class="regexp">/^[\\d]$/</span></span><br><span class="line">reg.test(<span class="string">'\\'</span>) <span class="comment">// true</span></span><br><span class="line">reg.test(<span class="string">'d'</span>) <span class="comment">// true</span></span><br><span class="line">reg.test(<span class="string">'6'</span>) <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">reg = <span class="regexp">/^[\w]$/</span> <span class="comment">// \w å³æ•°å­—å­—æ¯ä¸‹åˆ’çº¿</span></span><br><span class="line">reg = <span class="regexp">/^[\\w]$/</span> <span class="comment">// åªè¡¨ç¤º \ å’Œ w, (å¦‚æœè¦ç”¨å­—ç¬¦ä¸²åšæ£€æµ‹ï¼ŒåŒæ ·éœ€è¦å¯¹å­—ç¬¦ä¸²\è½¬ä¹‰ '\\')</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">reg = <span class="regexp">/^[10-29]$/</span> <span class="comment">// è¡¨ç¤º1 | 0-2 | 9</span></span><br></pre></td></tr></table></figure><h2 id="æ­£åˆ™çš„æ‡’æƒ°æ€§"><a href="#æ­£åˆ™çš„æ‡’æƒ°æ€§" class="headerlink" title="æ­£åˆ™çš„æ‡’æƒ°æ€§"></a>æ­£åˆ™çš„æ‡’æƒ°æ€§</h2><p>åœ¨æ­£åˆ™åŒ¹é…ä¸­ï¼Œä¼šåœ¨å…¶å®ä¾‹å¯¹è±¡ä¸Šçš„lastIndexè®°å½•ä¸Šä¸€æ¬¡åŒ¹é…çš„ä½ç½®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/\d+/g</span></span><br><span class="line">reg.exec(<span class="string">'2020-01-08'</span>) <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">console</span>.log(reg.lastIndex)  <span class="comment">// 4</span></span><br><span class="line">reg.exec(<span class="string">'2020-01-08'</span>) <span class="comment">// 5</span></span><br><span class="line"><span class="built_in">console</span>.log(reg.lastIndex)  <span class="comment">// 7</span></span><br><span class="line">reg.exec(<span class="string">'2020-01-08'</span>) <span class="comment">// 8</span></span><br><span class="line"><span class="built_in">console</span>.log(reg.lastIndex)  <span class="comment">// 10</span></span><br></pre></td></tr></table></figure><p>æ­£åˆ™æ–¹æ³•execä¸­ï¼Œä¼šå±•ç°å‡ºå…¶æ‡’æƒ°æ€§ï¼Œä¸»è¦å–å†³äºæ˜¯å¦åŠ <code>g</code>,ä¹Ÿå³<code>regExp.global</code>æ˜¯å¦ä¸ºtrue,åœ¨ä¸ºtrueçš„æƒ…å†µä¸‹ï¼Œæ‰ä¼šç»§ç»­åŒ¹é…</p><blockquote><p>è¿™é‡Œçš„æ‡’æƒ°æ˜¯æŒ‡æ­£åˆ™æ˜¯å¦ä¼šç»§ç»­åœ¨è®°å½•åŒ¹é…ï¼Œ<code>/\d+/</code>ä¸<code>/\d+/g</code>åœ¨reg.execä¸­éƒ½ä¼šåªåŒ¹é…ä¸€æ¬¡ï¼Œåªæ˜¯<code>g</code>æ¨¡å¼å¯ä»¥ç»§ç»­æ‰§è¡Œreg.execã€‚è€Œstr.matchä¸­ï¼Œ<code>g</code>å¯ä»¥ä¸€æ¬¡æ€§å…¨åŒ¹é…å‡ºæ¥ï¼Œå³åŒ¹é…æˆä¹Ÿç»™æ•°ç»„<code>[&#39;2020&#39;,&#39;01&#39;,&#39;06&#39;]</code></p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/\d+/g</span></span><br><span class="line">reg.exec(<span class="string">'2020-01-08'</span>) <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">console</span>.log(reg.lastIndex)  <span class="comment">// 4</span></span><br><span class="line">reg.exec(<span class="string">'2020-01-08'</span>) <span class="comment">// 5</span></span><br><span class="line"><span class="built_in">console</span>.log(reg.lastIndex)  <span class="comment">// 7</span></span><br><span class="line">reg.exec(<span class="string">'2020-01-08'</span>) <span class="comment">// 8</span></span><br><span class="line"><span class="built_in">console</span>.log(reg.lastIndex)  <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/\d+/</span></span><br><span class="line">reg.exec(<span class="string">'2020-01-08'</span>) <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">console</span>.log(reg.lastIndex)  <span class="comment">// 0</span></span><br><span class="line">reg.exec(<span class="string">'2020-01-08'</span>) <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">console</span>.log(reg.lastIndex)  <span class="comment">// 0</span></span><br><span class="line">reg.exec(<span class="string">'2020-01-08'</span>) <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">console</span>.log(reg.lastIndex)  <span class="comment">// 0</span></span><br></pre></td></tr></table></figure><h3 id="åˆ©ç”¨æƒ°æ€§æ±‚å€¼ï¼Œå¤„ç†execall-æ ¸å¿ƒ"><a href="#åˆ©ç”¨æƒ°æ€§æ±‚å€¼ï¼Œå¤„ç†execall-æ ¸å¿ƒ" class="headerlink" title="åˆ©ç”¨æƒ°æ€§æ±‚å€¼ï¼Œå¤„ç†execall,æ ¸å¿ƒ"></a>åˆ©ç”¨æƒ°æ€§æ±‚å€¼ï¼Œå¤„ç†execall,æ ¸å¿ƒ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/\d+/g</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">'2019-01-08'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> res = reg.exec(str)</span><br><span class="line"><span class="keyword">while</span>(res) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res) <span class="comment">// ä¾æ­¤è¾“å‡º2019ï¼Œ01ï¼Œ08</span></span><br><span class="line">  res = reg.exec(str)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨äº†æƒ°æ€§æ±‚å€¼åï¼ŒregExpå‡ä¼šè®°å½•lastIndex</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> res = reg.exec(str)</span><br><span class="line"><span class="keyword">while</span>(reg.test(str) === <span class="literal">true</span>) &#123; <span class="comment">// æ­¤æ—¶ä¼šåšä¸€æ¬¡åŒ¹é… ç§»åŠ¨ä¸€æ¬¡lastIndex</span></span><br><span class="line">  <span class="built_in">console</span>.log(res)</span><br><span class="line">  res = reg.exec(str) <span class="comment">// æ­¤æ—¶ä¼šåšä¸€æ¬¡åŒ¹é… ç§»åŠ¨ä¸€æ¬¡lastIndex</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ­£åˆ™è´ªå©ªæ€§"><a href="#æ­£åˆ™è´ªå©ªæ€§" class="headerlink" title="æ­£åˆ™è´ªå©ªæ€§"></a>æ­£åˆ™è´ªå©ªæ€§</h2><p>æ‡’æƒ°æ€§ï¼š æ¯æ¬¡æ•è·æ—¶ä»…æ•è·ç¬¬ä¸€ä¸ªç¬¦åˆçš„åŒ¹é…ä¸²</p><p>è´ªå©ªæ€§ï¼š æ»¡è¶³æ¡ä»¶å°±ä¼šä¸€ç›´åŒ¹é…</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/\d+/g</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">'2020-01-10'</span></span><br><span class="line">str.match(reg) <span class="comment">// ["2020", "01", "10"]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/\d+?/g</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">'2020-01-10'</span></span><br><span class="line">str.match(reg) <span class="comment">// ["2", "0", "2", "0", "0", "1", "1", "0"]</span></span><br></pre></td></tr></table></figure><h3 id="çš„äº”å¤§ä½œç”¨"><a href="#çš„äº”å¤§ä½œç”¨" class="headerlink" title="?çš„äº”å¤§ä½œç”¨"></a><code>?</code>çš„äº”å¤§ä½œç”¨</h3><ul><li><code>/\d?/</code> è¡¨ç¤º0æ¬¡æˆ–1æ¬¡</li><li><code>/\d+?/</code> è¡¨ç¤ºæœ€ç»ˆæ•è·ä¸€ä¸ª</li><li><code>/(?:)/</code> åªåˆ†ç»„ä¸æ•è·</li><li><code>/(?=)/</code> æ­£å‘åŒ¹é…é¢„æŸ¥</li><li><code>/(?!)/</code> æ­£å‘ä¸åŒ¹é…é¢„æŸ¥</li><li><code>/(?&lt;=)/</code> è´Ÿå‘åŒ¹é…é¢„æŸ¥</li><li><code>/(?&lt;!)/</code> è´Ÿå‘ä¸åŒ¹é…é¢„æŸ¥</li></ul><h2 id="æ­£åˆ™æ›¿æ¢ï¼Œreplace"><a href="#æ­£åˆ™æ›¿æ¢ï¼Œreplace" class="headerlink" title="æ­£åˆ™æ›¿æ¢ï¼Œreplace"></a>æ­£åˆ™æ›¿æ¢ï¼Œreplace</h2><h3 id="åŒ¹é…å­—ç¬¦ä¸²æ›¿æ¢çš„é—®é¢˜"><a href="#åŒ¹é…å­—ç¬¦ä¸²æ›¿æ¢çš„é—®é¢˜" class="headerlink" title="åŒ¹é…å­—ç¬¦ä¸²æ›¿æ¢çš„é—®é¢˜"></a>åŒ¹é…å­—ç¬¦ä¸²æ›¿æ¢çš„é—®é¢˜</h3><p>æ¯æ¬¡åŒ¹é…ä¸€ä¸ª</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">'zhn and zhn'</span></span><br><span class="line">str = str.replace(<span class="string">'zhn'</span>, <span class="string">'me'</span>) <span class="comment">// 'me an zhn'</span></span><br><span class="line">str = str.replace(<span class="string">'zhn'</span>, <span class="string">'me'</span>) <span class="comment">// 'me an zhn'</span></span><br></pre></td></tr></table></figure><p>å¯èƒ½é€ æˆé‡å¤åŒ¹é…</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">'zhn and zhn'</span></span><br><span class="line">str = str.replace(<span class="string">'zhn'</span>, <span class="string">'goodzhn'</span>) <span class="comment">// 'goodzhn and zhn'</span></span><br><span class="line">str = str.replace(<span class="string">'zhn'</span>, <span class="string">'goodzhn'</span>) <span class="comment">// 'goodgoodzhn and zhn'</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ­£åˆ™åŒ¹é…è¾ƒä¼˜ï¼Œ<code>String.prototype.replace(reg, [String] | [Fn])</code>,ä¸æ­£åˆ™æ­é…æ˜¯æ¯”è¾ƒå¥½çš„</p><blockquote><p>è®°å¾—å…¨å±€åŒ¹é… <code>g</code></p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">'zhn and zhn'</span></span><br><span class="line">str = str.replace(<span class="regexp">/zhn/g</span>, <span class="string">'me'</span>) <span class="comment">// 'me an me'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">'zhn and zhn'</span></span><br><span class="line">str = str.replace(<span class="regexp">/zhn/g</span>, <span class="string">'goodzhn'</span>) <span class="comment">// 'goodzhn and goodzhn'</span></span><br></pre></td></tr></table></figure><p>å•è¯é¦–å­—æ¯å¤§å†™è½¬æ¢</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">'good good study, become a good man.'</span></span><br><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/\b([a-zA-Z])[a-zA-Z]+\b/g</span></span><br><span class="line">str = str.replace(reg, (...args) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> [content, $<span class="number">1</span>] = args</span><br><span class="line">    <span class="comment">// é¦–å­—æ¯å¤§å†™ï¼Œå¹¶ä¸”é™¤å»é¦–å­—æ¯çš„å†…å®¹</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;$<span class="number">1.</span>toUpperCase()&#125;</span><span class="subst">$&#123;content.substr(<span class="number">1</span>)&#125;</span>`</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(str) <span class="comment">// Good Good Study, Become a Good Man.</span></span><br></pre></td></tr></table></figure><h2 id="æ­£å‘è´Ÿå‘é¢„æŸ¥"><a href="#æ­£å‘è´Ÿå‘é¢„æŸ¥" class="headerlink" title="æ­£å‘è´Ÿå‘é¢„æŸ¥"></a>æ­£å‘è´Ÿå‘é¢„æŸ¥</h2><p>æ­£åˆ™è¡¨è¾¾å¼ä¸­åŒ¹é…å‡ºï¼šå½¢å‚ï¼Œå‡½æ•°ä½“</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bodyReg = <span class="regexp">/(?&gt;=\&#123;)(.|\n)+(?=\&#125;)/m</span></span><br><span class="line"><span class="keyword">const</span> paramsReg = <span class="regexp">/(?&gt;=\().+(?=\)\s+\&#123;)/</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>End.2019</title>
      <link href="/2019/12/31/End-2019/"/>
      <url>/2019/12/31/End-2019/</url>
      
        <content type="html"><![CDATA[<p>åœ¨2019å¹´çš„å°¾å·´ï¼Œç»™è‡ªå·±æ€»ç»“ä¸€ä¸‹ï¼Œäººå˜›ï¼Œæ¯•ç«Ÿè¿˜æ˜¯è¦å¤šåæ€è‡ªå·±æ‰å¯¹ã€‚</p><p>2019å¹´ï¼Œä¸å¤§ä¸å°çš„å¹´çºªäº†ï¼Œç°åœ¨è¿˜æ˜¯21å²ï¼Œé©¬ä¸Šå°±22å²äº†ï¼Œå†æ¥å†å‰ï¼Œæƒ³è¦çš„ï¼Œé è‡ªå·±çš„åŒæ‰‹éƒ½èƒ½å¾—åˆ°ã€‚</p><h2 id="å­¦ä¹ "><a href="#å­¦ä¹ " class="headerlink" title="å­¦ä¹ "></a>å­¦ä¹ </h2><p>å¤§å­¦çš„è¯¾ç¨‹ä¹Ÿéƒ½ä¸Šå®Œäº†ï¼Œæ—¶é—´çœŸå¿«ï¼Œä»Šå¹´ä¸€ä¸‹å­å…¨ä¸Šå®Œäº†ï¼Œä¸å‡ºæ„å¤–ï¼Œä¸‹å­¦æœŸå°±å®ä¹ ï¼Œæ¯•ä¸šè®¾è®¡ï¼Œè‡ªå·±å°±å¤§å­¦æ¯•ä¸šäº†ï¼Œæ›¾ç»æƒ³åŠªåŠ›ä¿®å®Œè¯¾ç¨‹ï¼Œç„¶è€Œç°åœ¨ï¼Œçªç„¶ä¸€ä¸‹ï¼Œå°±éƒ½æ²¡äº†ï¼Œå¤§å­¦ç”Ÿæ´»è¿˜ç®—æ˜¯å……å®å§ï¼Œè‡ªå·±ä¹Ÿå­¦ä¹ äº†å‰ç«¯ï¼Œè¿˜è›®ä¸é”™ï¼Œç»§ç»­åŠªåŠ›å§ã€‚</p><h2 id="å·¥ä½œ"><a href="#å·¥ä½œ" class="headerlink" title="å·¥ä½œ"></a>å·¥ä½œ</h2><p>å»å…¬äº¤äº‘å®ä¹ äº†ï¼Œä¹Ÿç®—æ˜¯äººç”Ÿç¬¬ä¸€å®¶å…¬å¸å§ï¼Œå°±å«ä»–è€ä¸œå®¶æŠŠï¼Œä¹Ÿå¾ˆæ„Ÿè°¢Marcoå¸¦æˆ‘ä¸Šé“ã€‚å…¶å®è¿˜è›®å¿«çš„ï¼Œè§‰å¾—è‡ªå·±è¿˜åƒä¸ªå­©å­ï¼Œçªç„¶å°±è¦å¼€å§‹å·¥ä½œäº†ï¼Œå†²å§ï¼ŒåŠ æ²¹ã€‚</p><h2 id="ç”Ÿæ´»"><a href="#ç”Ÿæ´»" class="headerlink" title="ç”Ÿæ´»"></a>ç”Ÿæ´»</h2><p>ç”Ÿæ´»ä¸Šï¼Œç®—æ˜¯ä¸å¹¸ï¼Œä¹Ÿç®—æ˜¯ä¸‡å¹¸ï¼Œæ€ä¹ˆè¯´å‘¢ï¼Œæœ‰å¥½æœ‰åï¼Œåçš„å‘¢ï¼Œå°±ä¸è¯´äº†ï¼Œäººä»¬æ€»æ˜¯ä¼šå¯¹æœ‰äº›äº‹æƒ…è€¿è€¿äºæ€€ï¼ŒåŠªåŠ›å°±å¥½ï¼Œå¥½äº‹å‘¢ï¼Œæ„Ÿè§‰è‡ªå·±åœ¨æ…¢æ…¢çš„æˆé•¿ï¼Œå”‰ï¼Œæ„Ÿè§‰è‡ªå·±è¦é•¿å¤§äº†ï¼Œçˆ¸çˆ¸å¦ˆå¦ˆè€äº†ï¼Œç°åœ¨è¿™ä¸ªæ ·å­ï¼Œè‚¯å®šä¸è¡Œï¼Œæ‰€ä»¥å‘¢ï¼Œè¿™å°±æ˜¯æˆ‘çš„åŠ¨åŠ›ï¼Œå¥½å¥½çš„ï¼Œä¸ç®¡å‘ç”Ÿäº†ä»€ä¹ˆï¼Œéƒ½è¿‡å»å¥½äº†ï¼Œäººç”Ÿè¿™æœ¬ä¹¦æ€»æ˜¯è¦ç¿»é¡µçš„ã€‚å°±è¿™æ ·å§ï¼Œæ¯•ç«ŸæŠ±æ€¨ä¹Ÿä»€ä¹ˆéƒ½ä¸ä¼šå¾—åˆ°ï¼Œè¢–å­ä¸€æ’¸ï¼Œå°±æ˜¯å¹²ã€‚</p><h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><p>å…¶ä»–å—ï¼Œä¹Ÿæ²¡ä»€ä¹ˆäº†ï¼Œå¸Œæœ›å¥¹è¿‡å¾—å¥½å¥½çš„ï¼Œå“ˆå“ˆå“ˆå“ˆï¼Œé‚£å°±è¿™æ ·å§ï¼Œæµ©å—å“¥ï¼Œè¦åŠªåŠ›å‘€ã€‚æ¯•ç«Ÿç°åœ¨å‡­å®åŠ›å•èº«ï¼Œæˆ–è®¸çœŸæ­£è‡ªå·±è¿˜æ²¡é‚£ä¸ªèƒ½åŠ›ï¼Œ<em>æ‹¿èµ·åˆ€æˆ‘å°±æ— æ³•æ‹¥æŠ±ä½  æ”¾ä¸‹åˆ€æˆ‘å°±æ— æ³•ä¿æŠ¤ä½ </em>,å…ˆè®©è‡ªå·±å¼ºå¤§èµ·æ¥å§ï¼Œå—¯åŠ æ²¹ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æ—¶é—´è›®å¿«çš„ï¼Œè¦å¤šèŠ±æ—¶é—´ç»™èº«è¾¹çš„äººï¼Œå…¶å®å‘¢ï¼Œè¿˜æ˜¯è¦å…ˆåŠªåŠ›å¼ºå¤§è‡ªå·±ï¼Œå¯¹äºè¿™ä¸€å¹´è¢«æˆ‘æœ‰æ„æ— æ„ä¼¤å®³çš„äººï¼Œè¯´ä¸€å£°æŠ±æ­‰ï¼Œå¯¹é‚£äº›åœ¨æ„æˆ‘ï¼Œçˆ±æŠ¤æˆ‘çš„äººï¼Œè¯´ä¸€å£°è°¢è°¢ï¼Œå…¶å®åœ¨è¿™é‡Œè¿˜æ˜¯æœ€æ„Ÿè°¢æˆ‘çš„çˆ¸çˆ¸å¦ˆå¦ˆï¼Œä½ ä»¬æ˜¯æˆ‘æœ€å¼ºå¤§çš„åŠ¨åŠ›ï¼Œè°¢è°¢ã€‚</p><p>æœ€åï¼Œæ–°å¹´æ„¿æœ›ï¼Œ2020å¹´ï¼Œä¿æŒä¸€é¢—å¥½å­¦çš„å¿ƒï¼Œé™ä¸‹å¿ƒæ¥å»å­¦ä¹ å‰ç«¯ï¼Œæœ¬èº«å°±æ˜¯æˆ‘çš„çˆ±å¥½ï¼Œæœ‰ä»€ä¹ˆç†ç”±è¢«åˆ«äººæ‹‰ä¸‹å‘¢ï¼Œè¿˜æœ‰å°±æ˜¯å¸Œæœ›æˆ‘çˆ¸çˆ¸å¦ˆå¦ˆèº«ä½“å¥åº·ã€‚Over!ä»…æ­¤è€Œå·²ï¼Œæ–°å¹´å¿«ä¹ï¼Œ2020ã€‚</p><blockquote><p>æˆ‘æ›¾éš¾è‡ªæ‹”äºä¸–ç•Œä¹‹å¤§<br>ä¹Ÿæ²‰æººäºå…¶ä¸­æ¢¦è¯<br>ä¸å¾—çœŸå‡ ä¸åšæŒ£æ‰ ä¸æƒ§ç¬‘è¯</p><p>â€“ã€Šèµ·é£äº†ã€‹Â·å´é’å³°</p></blockquote><p><img src="/img/2019/12/31/gold.jpg" alt="gold"></p>]]></content>
      
      
      
        <tags>
            
            <tag> å¿ƒæƒ… </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æ€»ç»“é¢˜4</title>
      <link href="/2019/12/27/%E6%80%BB%E7%BB%93%E9%A2%984/"/>
      <url>/2019/12/27/%E6%80%BB%E7%BB%93%E9%A2%984/</url>
      
        <content type="html"><![CDATA[<h1 id="å¡«å……æ•°æ®å¤„ç†"><a href="#å¡«å……æ•°æ®å¤„ç†" class="headerlink" title="å¡«å……æ•°æ®å¤„ç†"></a>å¡«å……æ•°æ®å¤„ç†</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  <span class="number">1</span>: <span class="number">111</span>,</span><br><span class="line">  <span class="number">2</span>: <span class="number">222</span>,</span><br><span class="line">  <span class="number">5</span>: <span class="number">555</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="literal">null</span>, <span class="literal">null</span>, <span class="number">111</span>, <span class="number">222</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="number">555</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>]</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºæ•°ç»„ï¼ŒæŒ‰ç…§indexä¾æ¬¡æ”¾å…¥"><a href="#åˆ›å»ºæ•°ç»„ï¼ŒæŒ‰ç…§indexä¾æ¬¡æ”¾å…¥" class="headerlink" title="åˆ›å»ºæ•°ç»„ï¼ŒæŒ‰ç…§indexä¾æ¬¡æ”¾å…¥"></a>åˆ›å»ºæ•°ç»„ï¼ŒæŒ‰ç…§indexä¾æ¬¡æ”¾å…¥</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">12</span>)</span><br><span class="line">  .fill(<span class="literal">null</span>)</span><br><span class="line">  .map(<span class="function">(<span class="params">item, index</span>) =&gt;</span> obj[index<span class="number">-1</span>] || item)</span><br></pre></td></tr></table></figure><h2 id="åˆ©ç”¨keysçš„ç‰¹æ€§"><a href="#åˆ©ç”¨keysçš„ç‰¹æ€§" class="headerlink" title="åˆ©ç”¨keysçš„ç‰¹æ€§"></a>åˆ©ç”¨keysçš„ç‰¹æ€§</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">12</span>).fill(<span class="literal">null</span>)</span><br><span class="line"><span class="built_in">Object</span>.keys(obj).forEach(<span class="function"><span class="params">item</span> =&gt;</span> arr[item<span class="number">-1</span>] = obj[item])</span><br><span class="line"><span class="string">``</span><span class="string">` </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">## è½¬æ¢æ•°ç»„åæ£€æŸ¥</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">åŠ å…¥lengthå±æ€§ï¼Œæ¨¡æ‹Ÿæˆä¸€ä¸ªç±»æ•°ç»„ï¼Œè½¬æ¢è¿‡æ¥ï¼Œä¸è¿‡è¦å¯¹ç…§æ¬¡åºå…³ç³»</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>js</span><br><span class="line">obj.length = <span class="number">13</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = <span class="built_in">Array</span>.from(obj)</span><br><span class="line">  .slice(<span class="number">1</span>)</span><br><span class="line">  .map(<span class="function"><span class="params">item</span> =&gt;</span> <span class="keyword">typeof</span> item === <span class="string">'undefined'</span> ? <span class="literal">null</span> : item)</span><br></pre></td></tr></table></figure><h1 id="ä¸‰ç§æ’åºæ–¹å¼"><a href="#ä¸‰ç§æ’åºæ–¹å¼" class="headerlink" title="ä¸‰ç§æ’åºæ–¹å¼"></a>ä¸‰ç§æ’åºæ–¹å¼</h1><h2 id="å†’æ³¡æ’åº-æ”¹å˜è¯¥æ•°ç»„"><a href="#å†’æ³¡æ’åº-æ”¹å˜è¯¥æ•°ç»„" class="headerlink" title="å†’æ³¡æ’åº(æ”¹å˜è¯¥æ•°ç»„)"></a>å†’æ³¡æ’åº(æ”¹å˜è¯¥æ•°ç»„)</h2><p>ä¾æ¬¡æ¯”è¾ƒå‰åçš„å…ƒç´ ï¼Œæ˜¯å¦éœ€è¦äº¤æ¢ä½ç½®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bubble</span> (<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; arr.length - i - <span class="number">1</span>; j++) &#123;</span><br><span class="line">      <span class="comment">// å°äºåˆ™äº¤æ¢</span></span><br><span class="line">      <span class="keyword">if</span> (arr[j] &gt; arr[j+<span class="number">1</span>]) &#123;</span><br><span class="line">        <span class="keyword">let</span> temp = arr[j]</span><br><span class="line">        arr[j] = arr[j+<span class="number">1</span>]</span><br><span class="line">        arr[j+<span class="number">1</span>] = temp</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ’å…¥æ’åº-è¿”å›ä¸€ä¸ªæ–°æ•°ç»„"><a href="#æ’å…¥æ’åº-è¿”å›ä¸€ä¸ªæ–°æ•°ç»„" class="headerlink" title="æ’å…¥æ’åº(è¿”å›ä¸€ä¸ªæ–°æ•°ç»„)"></a>æ’å…¥æ’åº(è¿”å›ä¸€ä¸ªæ–°æ•°ç»„)</h2><p>ç›´æ¥é‡æ–°ç”Ÿæˆä¸€ä¸ªæ•°ç»„ï¼Œæ’å…¥æ¯ä¸€é¡¹çš„æ—¶å€™æŒ‰ç…§é¡ºåºæ’å…¥å³å¯</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">insert</span> (<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> result = []</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é»˜è®¤æ”¾å…¥ç¬¬0ä¸ªå…ƒç´ </span></span><br><span class="line">  result.push(arr[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> nextValue = arr[i]</span><br><span class="line">    <span class="comment">// æŸ¥æ‰¾éœ€è¦æ’å…¥çš„ä½ç½®</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = result.length - <span class="number">1</span>; j &gt;= <span class="number">0</span> ; j--) &#123;</span><br><span class="line">      <span class="comment">// ä»åå¾€å‰ï¼Œæ‰¾åˆ°äº†æ¯”å®ƒåˆšå¥½å°çš„ï¼Œåˆ™æ”¾å…¥è¿™ä¸ªåé¢å³å¯</span></span><br><span class="line">      <span class="keyword">if</span> (result[j] &lt; nextValue) &#123;</span><br><span class="line">        <span class="comment">// æ’å…¥åˆ°ä¹‹åï¼Œåº”è¯¥æ˜¯index+1</span></span><br><span class="line">        result.splice(j+<span class="number">1</span>, <span class="number">0</span>, nextValue)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æ¯”è¾ƒä¹‹åï¼Œåˆ°äº†æœ€åçš„å…ƒç´ ,æ˜¯å½“å‰æœ€å°çš„å…ƒç´ </span></span><br><span class="line">      <span class="keyword">if</span> (j === <span class="number">0</span>) &#123;</span><br><span class="line">        result.unshift(nextValue)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¿«é€Ÿæ’åº"><a href="#å¿«é€Ÿæ’åº" class="headerlink" title="å¿«é€Ÿæ’åº"></a>å¿«é€Ÿæ’åº</h2><p>ç±»ä¼¼ä¸€ç§åˆ†æ²»çš„ç­–ç•¥ï¼Œå·¦è¾¹æ¯”è¾ƒä¸€ä¸‹ï¼Œå³è¾¹æ¯”è¾ƒä¸€ä¸‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">10,3,6,7,5,8,1</span><br><span class="line"></span><br><span class="line">1. æ‰¾åˆ°7</span><br><span class="line">å·¦ä¾§ï¼ˆå°ï¼‰ï¼š3,5,6,1</span><br><span class="line">  2.æ‰¾åˆ°5ï¼Œ</span><br><span class="line">    å·¦ä¾§(å°)ï¼š3,1</span><br><span class="line">      1,3</span><br><span class="line">    å³ä¾§(å¤§): 6</span><br><span class="line">å³ä¾§ï¼ˆå¤§ï¼‰ï¼š10,8</span><br><span class="line">  ....</span><br><span class="line"></span><br><span class="line">ç±»ä¼¼äºŒå‰æ ‘çš„ä¸­åºéå†</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">quick</span> (<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å¦‚æœæ•°ç»„åªæœ‰ä¸€é¡¹ä¸å¿…è¦ç»§ç»­ä¸‹å»,æœ‰å¯èƒ½ä¸€éƒ¨åˆ†æ˜¯ç©ºçš„ï¼Œä¸º0</span></span><br><span class="line">  <span class="keyword">if</span> (arr.length &lt;= <span class="number">1</span>)  &#123;</span><br><span class="line">    <span class="keyword">return</span> arr</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¯»æ‰¾ä¸­é—´é¡¹</span></span><br><span class="line">  <span class="keyword">const</span> middleIndex = <span class="built_in">Math</span>.floor(arr.length / <span class="number">2</span>)</span><br><span class="line">  <span class="comment">// å–å‡ºä¸­é—´é¡¹(å¹¶ä»åŸæ•°ç»„å‰”é™¤)</span></span><br><span class="line">  <span class="comment">// arr = [...arr.slice(0, middleIndex), ...arr.slice(middleIndex+1)]</span></span><br><span class="line">  <span class="keyword">const</span> middleValue = arr.splice(middleIndex, <span class="number">1</span>)[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å‡†å¤‡å·¦å³æ•°ç»„é€’å½’ä¸‹å»</span></span><br><span class="line">  <span class="keyword">const</span> leftArr = []</span><br><span class="line">  <span class="keyword">const</span> rightArr = []</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">    arr[i] &lt; middleValue ? leftArr.push(arr[i]) : rightArr.push(arr[i])</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">// å·¦å³æ•°ç»„åˆ†åˆ«è¿›è¡Œ,å¹¶è¿”å›</span></span><br><span class="line">  <span class="comment">// return [</span></span><br><span class="line">  <span class="comment">//   ...quick(leftArr),</span></span><br><span class="line">  <span class="comment">//   middleValue,</span></span><br><span class="line">  <span class="comment">//   ...quick(rightArr),</span></span><br><span class="line">  <span class="comment">// ]</span></span><br><span class="line">  <span class="keyword">return</span> quick(leftArr).concat(middleValue, quick(rightArr))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ•°ç»„äº¤é›†ï¼Œå¹¶é›†ï¼Œè¡¥é›†"><a href="#æ•°ç»„äº¤é›†ï¼Œå¹¶é›†ï¼Œè¡¥é›†" class="headerlink" title="æ•°ç»„äº¤é›†ï¼Œå¹¶é›†ï¼Œè¡¥é›†"></a>æ•°ç»„äº¤é›†ï¼Œå¹¶é›†ï¼Œè¡¥é›†</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">intersect</span> (<span class="params">arr1, arr2</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// arr1ä¸­å­˜åœ¨arr2</span></span><br><span class="line">  <span class="keyword">return</span> arr1.filter(<span class="function"><span class="params">v</span> =&gt;</span> arr2.includes(v) === <span class="literal">true</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">union</span> (<span class="params">arr1, arr2</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// arr1å…¨éƒ¨é“ºå…¥ï¼Œarr2é“ºå…¥ä¸åœ¨arr1å­˜åœ¨çš„å…ƒç´ </span></span><br><span class="line">  <span class="keyword">return</span> [...arr1, ...arr2.filter(<span class="function"><span class="params">v</span> =&gt;</span> arr1.includes(v) === <span class="literal">false</span> )]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ•°ç»„æ—‹è½¬"><a href="#æ•°ç»„æ—‹è½¬" class="headerlink" title="æ•°ç»„æ—‹è½¬"></a>æ•°ç»„æ—‹è½¬</h1><p>ç§»åŠ¨æ•°ç»„ï¼Œ[1,2,3,4] -&gt; 2 [3,4,1,2]</p><h2 id="çœŸå®ç§»åŠ¨"><a href="#çœŸå®ç§»åŠ¨" class="headerlink" title="çœŸå®ç§»åŠ¨"></a>çœŸå®ç§»åŠ¨</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">roate</span> (<span class="params">arr, offset</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// åç§»ä¸­é—´çš„ä½ç½®</span></span><br><span class="line">  <span class="keyword">const</span> middle = arr.length - offset</span><br><span class="line">  <span class="keyword">return</span> [...arr.slice(middle), ...arr.slice(<span class="number">0</span>, middle)]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ¨¡æ‹Ÿé˜Ÿåˆ—æ“ä½œ"><a href="#æ¨¡æ‹Ÿé˜Ÿåˆ—æ“ä½œ" class="headerlink" title="æ¨¡æ‹Ÿé˜Ÿåˆ—æ“ä½œ"></a>æ¨¡æ‹Ÿé˜Ÿåˆ—æ“ä½œ</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">roate</span> (<span class="params">arr, offset</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> result = [...arr]</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; offset; i++) &#123;</span><br><span class="line">    result.unshift(result.pop())</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å‡½æ•°æŸ¯é‡ŒåŒ–ï¼Œå®ç°ç´¯åŠ "><a href="#å‡½æ•°æŸ¯é‡ŒåŒ–ï¼Œå®ç°ç´¯åŠ " class="headerlink" title="å‡½æ•°æŸ¯é‡ŒåŒ–ï¼Œå®ç°ç´¯åŠ "></a>å‡½æ•°æŸ¯é‡ŒåŒ–ï¼Œå®ç°ç´¯åŠ </h1><h2 id="æŒ‡å®šç´¯åŠ æ¬¡æ•°ï¼Œä½¿ç”¨é€’å½’"><a href="#æŒ‡å®šç´¯åŠ æ¬¡æ•°ï¼Œä½¿ç”¨é€’å½’" class="headerlink" title="æŒ‡å®šç´¯åŠ æ¬¡æ•°ï¼Œä½¿ç”¨é€’å½’"></a>æŒ‡å®šç´¯åŠ æ¬¡æ•°ï¼Œä½¿ç”¨é€’å½’</h2><p>å…¶å®æ˜¯ä½¿ç”¨é€’å½’ç­‰å¾…å‡½æ•°ï¼Œç›´åˆ°å‡‘é½äº†æ‰€æœ‰çš„å‚æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">currying</span> (<span class="params">fn, argsLength</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">...args</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å‚æ•°æ•°é‡è¾¾åˆ°å³å¯æ‰§è¡Œ</span></span><br><span class="line">    <span class="keyword">if</span> (args.length &gt;= argsLength) &#123;</span><br><span class="line">      <span class="keyword">return</span> fn.call(<span class="literal">null</span>, ...args)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸ºè¾¾åˆ°å‚æ•°ï¼Œç»§ç»­æŸ¯é‡ŒåŒ–</span></span><br><span class="line">    <span class="keyword">return</span> currying(fn.bind(<span class="literal">null</span>, ...args), argsLength - args.length)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span> (<span class="params">...args</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> args.reduce(<span class="function">(<span class="params">sum, current</span>) =&gt;</span> sum + current, <span class="number">0</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> curryAdd = currying(add, <span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(curryAdd(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)) <span class="comment">// 10</span></span><br><span class="line"><span class="built_in">console</span>.log(curryAdd(<span class="number">1</span>)(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)) <span class="comment">// 10</span></span><br><span class="line"><span class="built_in">console</span>.log(curryAdd(<span class="number">1</span>)(<span class="number">2</span>, <span class="number">3</span>)(<span class="number">4</span>)) <span class="comment">// 10</span></span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨ç‰¹æ®Šæ–¹æ³•è§¦å‘ç´¯åŠ "><a href="#ä½¿ç”¨ç‰¹æ®Šæ–¹æ³•è§¦å‘ç´¯åŠ " class="headerlink" title="ä½¿ç”¨ç‰¹æ®Šæ–¹æ³•è§¦å‘ç´¯åŠ "></a>ä½¿ç”¨ç‰¹æ®Šæ–¹æ³•è§¦å‘ç´¯åŠ </h2><p><code>toString</code>,åœ¨æŸäº›ç‰¹å®šçš„çŠ¶æ€ä¸‹æ—¶ï¼Œä¼šè‡ªåŠ¨è§¦å‘ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span> (<span class="params">...initArgs</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> args = initArgs</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åç»­å‡½æ•°ä½œç”¨ä»…ä»…æ˜¯å¢åŠ args</span></span><br><span class="line">  <span class="keyword">const</span> adder = <span class="function">(<span class="params">...currentArgs</span>) =&gt;</span> &#123;</span><br><span class="line">    args.push(...currentArgs)</span><br><span class="line">    <span class="keyword">return</span> adder</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ‰‹åŠ¨è¦†ç›–toString</span></span><br><span class="line">  adder.toString = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> args.reduce(<span class="function">(<span class="params">sum, current</span>) =&gt;</span> sum + current, <span class="number">0</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> adder</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>).toString()) <span class="comment">// 10</span></span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">1</span>)(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>).toString()) <span class="comment">// 10</span></span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">1</span>)(<span class="number">2</span>, <span class="number">3</span>)(<span class="number">4</span>).toString()) <span class="comment">// 10</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> æ°é¥­ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æ€»ç»“é¢˜3</title>
      <link href="/2019/12/26/%E6%80%BB%E7%BB%93%E9%A2%983/"/>
      <url>/2019/12/26/%E6%80%BB%E7%BB%93%E9%A2%983/</url>
      
        <content type="html"><![CDATA[<h1 id="æ’åºé—®é¢˜ï¼Œè‡ªå·±æ·»åŠ æ’åºé¡¹ï¼Œåç»­å†åˆ é™¤"><a href="#æ’åºé—®é¢˜ï¼Œè‡ªå·±æ·»åŠ æ’åºé¡¹ï¼Œåç»­å†åˆ é™¤" class="headerlink" title="æ’åºé—®é¢˜ï¼Œè‡ªå·±æ·»åŠ æ’åºé¡¹ï¼Œåç»­å†åˆ é™¤"></a>æ’åºé—®é¢˜ï¼Œè‡ªå·±æ·»åŠ æ’åºé¡¹ï¼Œåç»­å†åˆ é™¤</h1><p><code>String.prototype.localeCompare()</code>,ç±»ä¼¼äºè°ƒç”¨å­—æ¯é¡ºåºæ¯”è¾ƒ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr1 = [ <span class="string">'A1'</span>,<span class="string">'A2'</span>, <span class="string">'B1'</span>, <span class="string">'B2'</span>, <span class="string">'C1'</span>, <span class="string">'C2'</span> ]</span><br><span class="line"><span class="keyword">let</span> arr2 = [<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>]</span><br><span class="line"><span class="comment">// arr = [ 'A1','A2', 'A', 'B1', 'B2', 'B', 'C1', 'C2', 'C']</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®€å•è°ƒç”¨sortæ–¹æ³•ï¼Œä½¿ç”¨localeCompare,è¿”å›ç»“æœæ˜¯å­—æ¯é¡ºå¯» [A, A1, A2, ....]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å…ˆå¯¹arr2å¤„ç†ä¸€ä¸‹</span></span><br><span class="line">arr2 = arr2.map(<span class="function"><span class="params">item</span> =&gt;</span> item + <span class="string">'å•¦å•¦'</span>)</span><br><span class="line"><span class="keyword">let</span> arr = arr1.concat(arr2)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ±‰å­—é¡ºåºè¦æ»åä¸å­—æ¯</span></span><br><span class="line">arr = arr</span><br><span class="line">  .sort(<span class="function">(<span class="params">prev, next</span>) =&gt;</span> prev.localeCompare(next))</span><br><span class="line">  .map(<span class="function"><span class="params">item</span> =&gt;</span> item.replace(<span class="string">'å•¦å•¦'</span>, <span class="string">''</span>))</span><br></pre></td></tr></table></figure><h1 id="å¼‚æ­¥ç¼–ç¨‹"><a href="#å¼‚æ­¥ç¼–ç¨‹" class="headerlink" title="å¼‚æ­¥ç¼–ç¨‹"></a>å¼‚æ­¥ç¼–ç¨‹</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i)</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ•´ä¸ªæ–¹æ³•é—­åŒ…</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">  (<span class="function"><span class="keyword">function</span>(<span class="params">i</span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(i)</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">  &#125;)(i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å›è°ƒå‡½æ•°é—­åŒ…</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">  setTimeout(<span class="function">(<span class="params">i =&gt; (</span>) =&gt;</span> <span class="built_in">console</span>.log(i))(i), <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨letå—çº§ä½œç”¨åŸŸ"><a href="#ä½¿ç”¨letå—çº§ä½œç”¨åŸŸ" class="headerlink" title="ä½¿ç”¨letå—çº§ä½œç”¨åŸŸ"></a>ä½¿ç”¨letå—çº§ä½œç”¨åŸŸ</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i)</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨bindé¢„å¤„ç†"><a href="#ä½¿ç”¨bindé¢„å¤„ç†" class="headerlink" title="ä½¿ç”¨bindé¢„å¤„ç†"></a>ä½¿ç”¨bindé¢„å¤„ç†</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fn = <span class="function"><span class="params">i</span> =&gt;</span> <span class="built_in">console</span>.log(i)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">  setTimeout(fn.bind(<span class="literal">null</span>, i), <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åŒ¿åå‡½æ•°åç§°é—®é¢˜"><a href="#åŒ¿åå‡½æ•°åç§°é—®é¢˜" class="headerlink" title="åŒ¿åå‡½æ•°åç§°é—®é¢˜"></a>åŒ¿åå‡½æ•°åç§°é—®é¢˜</h1><p>åŒ¿åå‡½æ•°ä¸èƒ½ä¸ºå…¶ç”³æ˜åç§°ï¼Œä½†æ˜¯å¦‚æœç”³è¯·åï¼Œæ˜¯ä¸è®¸ä¸åœ¨é‡æ–°èµ‹å€¼</p><blockquote><p><code>&#39;use strict&#39;</code>æ¨¡å¼ä¸‹ï¼Œä¼šç›´æ¥æŠ¥é”™ï¼Œéä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œä¸ä¼šæŠ¥é”™ã€‚</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">b</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// b = 20;  æ— æ•ˆ</span></span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure><p>ä½œä¸ºä¸€ä¸ªå—çº§å†…éƒ¨å˜é‡(å‚æ•°)å¯ä»¥åšä¿®æ”¹æ‰€ç”¨</p><p>åŒ¿åå‡½æ•°çš„å‘½åæœ¬æ¥å°±æ˜¯ä¸è¢«æ¨èçš„ï¼Œå¦‚æœæœ‰å½¢å‚é‡åï¼Œé‚£ä¹ˆä»¥å½¢å‚ä¸ºå‡†</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> b = <span class="number">20</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">b</span> (<span class="params">b</span>) </span>&#123;</span><br><span class="line">  b = <span class="number">10</span></span><br><span class="line">  consoel.log(b) <span class="comment">// 10</span></span><br><span class="line">&#125;)()</span><br><span class="line"><span class="built_in">console</span>.log(b) <span class="comment">// 20</span></span><br></pre></td></tr></table></figure><h1 id=""><a href="#" class="headerlink" title="==, ==="></a><code>==</code>, <code>===</code></h1><h2 id="å€¼å’Œç±»å‹å®Œå…¨ä¸€è‡´ï¼Œä¸¥æ ¼"><a href="#å€¼å’Œç±»å‹å®Œå…¨ä¸€è‡´ï¼Œä¸¥æ ¼" class="headerlink" title="=== å€¼å’Œç±»å‹å®Œå…¨ä¸€è‡´ï¼Œä¸¥æ ¼"></a><code>===</code> å€¼å’Œç±»å‹å®Œå…¨ä¸€è‡´ï¼Œä¸¥æ ¼</h2><h2 id="å€¼ç›¸ç­‰å³å¯ï¼Œå…¶åˆ¤åˆ«çš„ä¾æ®å¦‚ä¸‹"><a href="#å€¼ç›¸ç­‰å³å¯ï¼Œå…¶åˆ¤åˆ«çš„ä¾æ®å¦‚ä¸‹" class="headerlink" title="== å€¼ç›¸ç­‰å³å¯ï¼Œå…¶åˆ¤åˆ«çš„ä¾æ®å¦‚ä¸‹"></a><code>==</code> å€¼ç›¸ç­‰å³å¯ï¼Œå…¶åˆ¤åˆ«çš„ä¾æ®å¦‚ä¸‹</h2><p>ç±»å‹ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œä¼šç›´æ¥æ¯”è¾ƒ</p><p>ç±»å‹ä¸ç›¸åŒ,ä¼šè½¬æ¢ç±»å‹è¿›è¡Œæ¯”è¾ƒ</p><ol><li>{}=={}, ä¸¤ä¸ªå¯¹è±¡è¿›è¡Œæ¯”è¾ƒï¼Œæ˜¯æ¯”è¾ƒå †å†…å­˜çš„åœ°å€</li><li>null==undefined ç›¸ç­‰ï¼Œ / null !== undefined</li><li>NaN != NaN</li><li>[12] = â€˜12â€™, è°ƒç”¨toStringåï¼Œåœ¨è¿›è¡Œå­—ç¬¦ä¸²çš„æ¯”è¾ƒ</li><li>å…¶ä½™æƒ…å†µéƒ½æ˜¯è¿›è¡Œæ•°å­—çš„æ¯”è¾ƒ<ul><li>boolean true=1, false=0</li><li>number = number</li><li>string = Number(â€˜strâ€™), å¦‚æœæœ‰éæ•°å­—åˆ™ä¼šå˜ä¸ºNaN</li><li>undefined = NaN</li><li>Object(object - Number(obj.toString()), null - NaN)</li></ul></li></ol><h2 id="ä¿è¯æˆç«‹"><a href="#ä¿è¯æˆç«‹" class="headerlink" title="ä¿è¯æˆç«‹"></a>ä¿è¯æˆç«‹</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (obj == <span class="number">1</span> &amp;&amp; obj == <span class="number">2</span> &amp;&amp; obj == <span class="number">3</span>) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'OK'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è¦†ç›–toString"><a href="#è¦†ç›–toString" class="headerlink" title="è¦†ç›–toString"></a>è¦†ç›–<code>toString</code></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  n: <span class="number">0</span>,</span><br><span class="line">  toString() &#123;</span><br><span class="line">    <span class="keyword">return</span> ++<span class="keyword">this</span>.n</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  toString() &#123;</span><br><span class="line">    <span class="keyword">return</span> arr.shift()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è¦†ç›–defineProperty"><a href="#è¦†ç›–defineProperty" class="headerlink" title="è¦†ç›–defineProperty"></a>è¦†ç›–defineProperty</h2><p>å°†<code>a</code>,ä½œä¸º<code>window</code>çš„ä¸€ä¸ªå˜é‡å³å¯</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(<span class="built_in">window</span>, <span class="string">'obj'</span>, &#123;</span><br><span class="line">  get() &#123;</span><br><span class="line">    <span class="keyword">return</span> arr.shift()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="æ¨¡æ‹Ÿpush"><a href="#æ¨¡æ‹Ÿpush" class="headerlink" title="æ¨¡æ‹Ÿpush,"></a>æ¨¡æ‹Ÿpush,</h1><h2 id="pushçš„ç®€æ˜“å®ç°"><a href="#pushçš„ç®€æ˜“å®ç°" class="headerlink" title="pushçš„ç®€æ˜“å®ç°"></a>pushçš„ç®€æ˜“å®ç°</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.push = <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// é»˜è®¤æ’å…¥ï¼Œåˆ°å°¾éƒ¨</span></span><br><span class="line">  <span class="keyword">this</span>[<span class="keyword">this</span>.length] = value</span><br><span class="line"></span><br><span class="line">  <span class="comment">// lengthé•¿åº¦ä¸¥æ ¼æ„ä¹‰æ˜¯æµè§ˆå™¨å¯¹å…¶æ§åˆ¶å¢å‡æ“ä½œ </span></span><br><span class="line">  <span class="keyword">this</span>.length++</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.length</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  <span class="number">2</span>: <span class="number">3</span>, <span class="comment">// this[2] = 1 2: 1</span></span><br><span class="line">  <span class="number">3</span>: <span class="number">4</span>, <span class="comment">// this[3] = 2 3:2</span></span><br><span class="line">  length: <span class="number">2</span>, <span class="comment">// 2 -&gt; 3 -&gt; 4</span></span><br><span class="line">  push: <span class="built_in">Array</span>.prototype.push</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">obj.push(<span class="number">1</span>)</span><br><span class="line">obj.push(<span class="number">2</span>)</span><br><span class="line"><span class="built_in">console</span>.log(obj) <span class="comment">// &#123; 2:1, 3:2, length: 4 ...&#125;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> æ°é¥­ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æ€»ç»“é¢˜2</title>
      <link href="/2019/12/26/%E6%80%BB%E7%BB%93%E9%A2%982/"/>
      <url>/2019/12/26/%E6%80%BB%E7%BB%93%E9%A2%982/</url>
      
        <content type="html"><![CDATA[<h1 id="å›¾ç‰‡æ‡’åŠ è½½-delay-load"><a href="#å›¾ç‰‡æ‡’åŠ è½½-delay-load" class="headerlink" title="å›¾ç‰‡æ‡’åŠ è½½ delay load"></a>å›¾ç‰‡æ‡’åŠ è½½ <code>delay load</code></h1><p>ä¸»è¦æ ¸å¿ƒ</p><h2 id="æ‡’åŠ è½½ï¼Œä¸è¦ç»™ä»–imgçš„srcèµ‹å€¼"><a href="#æ‡’åŠ è½½ï¼Œä¸è¦ç»™ä»–imgçš„srcèµ‹å€¼" class="headerlink" title="æ‡’åŠ è½½ï¼Œä¸è¦ç»™ä»–imgçš„srcèµ‹å€¼"></a>æ‡’åŠ è½½ï¼Œä¸è¦ç»™ä»–imgçš„srcèµ‹å€¼</h2><p>é€‚å½“çš„æ—¶å€™ï¼Œå†å°†imgçš„åœ°å€èµ‹å€¼ç»™src,è¿™æ ·å¯ä»¥åšåˆ°æŒ‰éœ€åŠ è½½ï¼Œ<code>&lt;img src=&quot;&quot; data-src=&quot;xxx&quot;/&gt;</code>,ç­‰åˆ°åˆé€‚çš„æ—¶æœºè¿›è¡Œæ›¿æ¢å³å¯</p><h2 id="æ‡’åŠ è½½å¤„ç†æ—¶æœº"><a href="#æ‡’åŠ è½½å¤„ç†æ—¶æœº" class="headerlink" title="æ‡’åŠ è½½å¤„ç†æ—¶æœº"></a>æ‡’åŠ è½½å¤„ç†æ—¶æœº</h2><p>æ‡’åŠ è½½çš„å¯¹è±¡å·²ç»å®Œå…¨å‡ºç°åœ¨äº†è§†å£å†…ï¼Œå³å½“å‰è§†å£çš„<strong>åº•ç«¯è·ç¦»windowï¼ˆheight + scrollTopï¼‰</strong>,å¿…é¡»è¦&gt;= è¯¥<strong>å¯¹è±¡è·ç¦»é¡¶éƒ¨çš„è·ç¦»imgï¼ˆheight + offset.Topï¼‰</strong></p><h2 id="äº‹ä»¶ç›¸å…³"><a href="#äº‹ä»¶ç›¸å…³" class="headerlink" title="äº‹ä»¶ç›¸å…³"></a>äº‹ä»¶ç›¸å…³</h2><p>å§”æ‰˜ç»™windowäº‹ä»¶ï¼Œå›¾ç‰‡åŠ è½½å®Œæˆçš„äº‹ä»¶,<code>img.addEventListener(&#39;onLoad&#39;, handle)</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="undefined">      width: 410px;</span></span><br><span class="line"><span class="undefined">      margin: 0 auto;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.imgBox</span> &#123;</span></span><br><span class="line"><span class="undefined">      height: 180px;</span></span><br><span class="line"><span class="undefined">      margin-bottom: 20px;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">background-color</span>: <span class="selector-id">#BBB</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.imgBox</span> <span class="selector-tag">img</span> &#123;</span></span><br><span class="line"><span class="undefined">      display: none;</span></span><br><span class="line"><span class="undefined">      height: 100%;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../node_modules/jquery/dist/jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./delayLoad.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> $container = $(<span class="string">'.container'</span>);</span><br><span class="line"><span class="keyword">const</span> $<span class="built_in">window</span> = $(<span class="built_in">window</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŠ¨æ€åˆ›å»ºå›¾ç‰‡</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">''</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">20</span>).fill(<span class="literal">null</span>).forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">  str += <span class="string">`&lt;div class="imgBox"&gt;</span></span><br><span class="line"><span class="string">      &lt;img src="" data-img="https://i0.hdslb.com/bfs/archive/a84e5a2751c81ddf51ecb7267eb118284da6c4b7.jpg@1100w_484h_1c_100q.jpg"/&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;`</span></span><br><span class="line">&#125;)</span><br><span class="line">$container.html(str)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–æ¯ä¸€ä¸ªimgBox</span></span><br><span class="line">$imgBoxs = $container.children(<span class="string">'.imgBox'</span>)</span><br><span class="line"><span class="built_in">console</span>.log($imgBoxs);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ‡’åŠ è½½</span></span><br><span class="line"><span class="comment"> * è®¡ç®—è§†å£ï¼ˆå½“å‰æ˜¾ç¤ºçš„ä½ç½®ï¼‰åº•éƒ¨ &gt;= è¯¥å›¾ç‰‡åº•éƒ¨åˆ°é¡¶éƒ¨çš„è·ç¦»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> handleDeladyLoad = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// è·å–è§†å£åº•éƒ¨åˆ°é¡¶éƒ¨çš„è·ç¦»</span></span><br><span class="line">  <span class="keyword">let</span> viewPortTop = $<span class="built_in">window</span>.outerHeight() + $<span class="built_in">window</span>.scrollTop()</span><br><span class="line"></span><br><span class="line">  $imgBoxs.each(<span class="function">(<span class="params">index, item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> $item = $(item);</span><br><span class="line">    <span class="keyword">let</span> $img = $item.children(<span class="string">'img'</span>)</span><br><span class="line">    <span class="keyword">let</span> isLoad = $item.attr(<span class="string">'isLoad'</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è·å–å›¾ç‰‡åˆ°é¡¶éƒ¨çš„è·ç¦»</span></span><br><span class="line">    <span class="keyword">let</span> imgTop = $item.outerHeight() + $item.offset().top</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ˜¯å¦éœ€è¦åŠ è½½å‡ºå›¾ç‰‡</span></span><br><span class="line">    <span class="keyword">if</span> (imgTop &lt;= viewPortTop &amp;&amp; isLoad !== <span class="string">'true'</span>) &#123;</span><br><span class="line">      <span class="comment">// æ ‡è®°åŠ è½½å®Œæˆ</span></span><br><span class="line">      $item.attr(<span class="string">'isLoad'</span>, <span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// è®¾ç½®å›¾ç‰‡srcå­—æ®µï¼Œå¹¶åŠ è½½å›¾ç‰‡</span></span><br><span class="line">      $img.attr(<span class="string">'src'</span>, $img.attr(<span class="string">'data-img'</span>))</span><br><span class="line">      $img.on(<span class="string">'load'</span>, () =&gt; $img.fadeIn())</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŒ‚è½½åŠ è½½å®Œæˆï¼Œå’Œæ»šåŠ¨äº‹ä»¶</span></span><br><span class="line">$<span class="built_in">window</span>.on(<span class="string">'load scroll'</span>, handleDeladyLoad)</span><br></pre></td></tr></table></figure><h1 id="æ•°ç»„æ‰å¹³åŒ–"><a href="#æ•°ç»„æ‰å¹³åŒ–" class="headerlink" title="æ•°ç»„æ‰å¹³åŒ–"></a>æ•°ç»„æ‰å¹³åŒ–</h1><h2 id="ES6æ–¹æ³•flat"><a href="#ES6æ–¹æ³•flat" class="headerlink" title="ES6æ–¹æ³•flat"></a>ES6æ–¹æ³•flat</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr.flat(<span class="literal">Infinity</span>)</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨ES6çš„setè¿›è¡Œå­˜å‚¨"><a href="#ä½¿ç”¨ES6çš„setè¿›è¡Œå­˜å‚¨" class="headerlink" title="ä½¿ç”¨ES6çš„setè¿›è¡Œå­˜å‚¨"></a>ä½¿ç”¨ES6çš„setè¿›è¡Œå­˜å‚¨</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>(arr))</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨toStringï¼Œå†åˆ†å‰²"><a href="#ä½¿ç”¨toStringï¼Œå†åˆ†å‰²" class="headerlink" title="ä½¿ç”¨toStringï¼Œå†åˆ†å‰²"></a>ä½¿ç”¨toStringï¼Œå†åˆ†å‰²</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr.toString().split(<span class="string">','</span>).map(<span class="function"><span class="params">item</span> =&gt;</span> <span class="built_in">Number</span>(item))</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨stringifyå»é™¤"><a href="#ä½¿ç”¨stringifyå»é™¤" class="headerlink" title="ä½¿ç”¨stringifyå»é™¤[,]"></a>ä½¿ç”¨stringifyå»é™¤<code>[</code>,<code>]</code></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.stringify(arr).replace(<span class="regexp">/(\[|\])/g</span>, <span class="string">''</span>).split(<span class="string">','</span>).map(<span class="function"><span class="params">item</span> =&gt;</span> <span class="built_in">Number</span>(item))</span><br></pre></td></tr></table></figure><h2 id="æ‰‹åŠ¨æ‰å¹³åŒ–"><a href="#æ‰‹åŠ¨æ‰å¹³åŒ–" class="headerlink" title="æ‰‹åŠ¨æ‰å¹³åŒ–"></a>æ‰‹åŠ¨æ‰å¹³åŒ–</h2><p>æ£€æµ‹å…ƒç´ ä¸­æ˜¯å¦å«æœ‰æ•°ç»„ï¼Œæœ‰åˆ™ç»§ç»­å±•ä¸‹å»</p><h3 id="concatæ˜¯å°†ä¼ å…¥çš„å‚æ•°ï¼Œåˆå¹¶åˆ°æ•°ç»„ä¸­å»ï¼Œ"><a href="#concatæ˜¯å°†ä¼ å…¥çš„å‚æ•°ï¼Œåˆå¹¶åˆ°æ•°ç»„ä¸­å»ï¼Œ" class="headerlink" title="concatæ˜¯å°†ä¼ å…¥çš„å‚æ•°ï¼Œåˆå¹¶åˆ°æ•°ç»„ä¸­å»ï¼Œ"></a><code>concat</code>æ˜¯å°†ä¼ å…¥çš„å‚æ•°ï¼Œåˆå¹¶åˆ°æ•°ç»„ä¸­å»ï¼Œ</h3><p>æ¯”å¦‚concat(1, [2, 3], [4, [5], 6])</p><ul><li><code>1</code>, ç›´æ¥æ”¾å…¥ [x, 1]</li><li><code>[2,3]</code>ï¼Œ ç›´æ¥åˆå¹¶ [x, 2, 3]</li><li><code>[4, [5], 6]</code>, åˆå¹¶æ¯ä¸€é¡¹ [x, 4, [5], 6]</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(arr.some(<span class="function"><span class="params">item</span> =&gt;</span> <span class="built_in">Array</span>.isArray(item))) &#123;</span><br><span class="line">  <span class="comment">// å°†è¯¥æ•°ç»„æ¯ä¸€é¡¹æ‹†å¼€åˆå¹¶è¿›å»</span></span><br><span class="line">  arr = [].concat(...arr)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ‰‹åŠ¨é€’å½’"><a href="#æ‰‹åŠ¨é€’å½’" class="headerlink" title="æ‰‹åŠ¨é€’å½’"></a>æ‰‹åŠ¨é€’å½’</h2><h3 id="å®ç°æ–¹æ³•ä¸€"><a href="#å®ç°æ–¹æ³•ä¸€" class="headerlink" title="å®ç°æ–¹æ³•ä¸€"></a>å®ç°æ–¹æ³•ä¸€</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFlat</span> (<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> result = []</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¾ªç¯æ¯ä¸€é¡¹ï¼Œä¸æ˜¯æ•°ç»„çš„å­˜å‚¨èµ·æ¥</span></span><br><span class="line">  <span class="keyword">const</span> put = <span class="function"><span class="params">arr</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, item; item = arr[i++]; ) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(item)) &#123;</span><br><span class="line">        put(item)</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      result.push(item)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  put(arr)</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å®ç°æ–¹æ³•äºŒ"><a href="#å®ç°æ–¹æ³•äºŒ" class="headerlink" title="å®ç°æ–¹æ³•äºŒ"></a>å®ç°æ–¹æ³•äºŒ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFlat</span> (<span class="params">arr</span>)  </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> result = []</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, item; item = arr[i++];) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(item)) &#123;</span><br><span class="line">      <span class="comment">// å½“å‰æ¯ä¸€é¡¹æ˜¯å¦æ˜¯æ•°ç»„</span></span><br><span class="line">      <span class="comment">// result = [...result, ...myFlat(item)]</span></span><br><span class="line">      result = result.concat(myFlat(item))</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// å¦‚æœæ˜¯æ•°æ®ï¼Œç›´æ¥push</span></span><br><span class="line">      result.push(item)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="è‹±æ–‡å­—æ¯ç»„æˆå­—ç¬¦ä¸²å‰åæ·»åŠ ç©ºæ ¼"><a href="#è‹±æ–‡å­—æ¯ç»„æˆå­—ç¬¦ä¸²å‰åæ·»åŠ ç©ºæ ¼" class="headerlink" title="è‹±æ–‡å­—æ¯ç»„æˆå­—ç¬¦ä¸²å‰åæ·»åŠ ç©ºæ ¼"></a>è‹±æ–‡å­—æ¯ç»„æˆå­—ç¬¦ä¸²å‰åæ·»åŠ ç©ºæ ¼</h1><p>æ­£åˆ™åŒ¹é…ï¼Œ<code>\b</code>è¡¨ç¤ºå•è¯è¾¹ç•Œï¼Œä¸ä»…æ˜¯ä¸€ä¸ªç©ºæ ¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">'è¿™é‡Œæ˜¯HDUï¼Œä½ å¥½HDUeræœªæ¥ä¸€èµ·åŠªåŠ›'</span></span><br><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/\b[a-z]+\b/ig</span></span><br><span class="line">str = str.replace(reg, value =&gt; <span class="string">` <span class="subst">$&#123;value&#125;</span> `</span>).trim()</span><br></pre></td></tr></table></figure><h1 id="è‡ªå®šä¹‰çš„-attr-è¦æ±‚å¯ä»¥è¿›è¡Œè·å–æ ‡ç­¾ä¸­çš„ä»»ä½•å…ƒç´ ä»»æ„ä½ç½®"><a href="#è‡ªå®šä¹‰çš„-attr-è¦æ±‚å¯ä»¥è¿›è¡Œè·å–æ ‡ç­¾ä¸­çš„ä»»ä½•å…ƒç´ ä»»æ„ä½ç½®" class="headerlink" title="è‡ªå®šä¹‰çš„$attr,è¦æ±‚å¯ä»¥è¿›è¡Œè·å–æ ‡ç­¾ä¸­çš„ä»»ä½•å…ƒç´ ä»»æ„ä½ç½®"></a>è‡ªå®šä¹‰çš„$attr,è¦æ±‚å¯ä»¥è¿›è¡Œè·å–æ ‡ç­¾ä¸­çš„ä»»ä½•å…ƒç´ ä»»æ„ä½ç½®</h1><p>è·å–æ‰€æœ‰çš„æ ‡ç­¾ï¼Œ<code>document.getElementByTagName(&#39;*&#39;)</code></p><h1 id="æ­£åˆ™ä¸­ï¼Œæ— è®ºæ˜¯å­—ç¬¦ä¸²è¿˜æ˜¯æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œ-éƒ½è¦æ³¨æ„è½¬ä¹‰ç¬¦çš„å­˜åœ¨ï¼Œæ¯”å¦‚-b-regExpæ­£åˆ™ä¸­new-RegExp-b"><a href="#æ­£åˆ™ä¸­ï¼Œæ— è®ºæ˜¯å­—ç¬¦ä¸²è¿˜æ˜¯æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œ-éƒ½è¦æ³¨æ„è½¬ä¹‰ç¬¦çš„å­˜åœ¨ï¼Œæ¯”å¦‚-b-regExpæ­£åˆ™ä¸­new-RegExp-b" class="headerlink" title="æ­£åˆ™ä¸­ï¼Œæ— è®ºæ˜¯å­—ç¬¦ä¸²è¿˜æ˜¯æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œ\éƒ½è¦æ³¨æ„è½¬ä¹‰ç¬¦çš„å­˜åœ¨ï¼Œæ¯”å¦‚/\b/, regExpæ­£åˆ™ä¸­new RegExp(\b)"></a>æ­£åˆ™ä¸­ï¼Œæ— è®ºæ˜¯å­—ç¬¦ä¸²è¿˜æ˜¯æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œ<code>\</code>éƒ½è¦æ³¨æ„è½¬ä¹‰ç¬¦çš„å­˜åœ¨ï¼Œæ¯”å¦‚<code>/\b/</code>, regExpæ­£åˆ™ä¸­<code>new RegExp(</code>\b<code>)</code></h1><h2 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">'box aa'</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">data-count</span>=<span class="string">'666'</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">'box clearfix'</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">data-count</span>=<span class="string">'123'</span> <span class="attr">data-type</span>=<span class="string">'QQ'</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">data-type</span>=<span class="string">'QQ'</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">'clearfix'</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">$attr('data-count', '123') -&gt; [<span class="tag">&lt;<span class="name">div</span> <span class="attr">data-count</span>=<span class="string">'123'</span> <span class="attr">data-type</span>=<span class="string">'QQ'</span> /&gt;</span>]</span><br><span class="line">$attr('class', 'box') -&gt; [<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">'box aa'</span> /&gt;</span>, <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">'box clearfix'</span> /&gt;</span>]</span><br></pre></td></tr></table></figure><h2 id="å®ç°ï¼Œä¸»è¦æ˜¯è¦æ³¨æ„å…¶ç‰¹æ®Šæ€§ï¼Œclasså±æ€§å¯å¤šé€‰"><a href="#å®ç°ï¼Œä¸»è¦æ˜¯è¦æ³¨æ„å…¶ç‰¹æ®Šæ€§ï¼Œclasså±æ€§å¯å¤šé€‰" class="headerlink" title="å®ç°ï¼Œä¸»è¦æ˜¯è¦æ³¨æ„å…¶ç‰¹æ®Šæ€§ï¼Œclasså±æ€§å¯å¤šé€‰"></a>å®ç°ï¼Œä¸»è¦æ˜¯è¦æ³¨æ„å…¶ç‰¹æ®Šæ€§ï¼Œclasså±æ€§å¯å¤šé€‰</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">$attr</span> (<span class="params">property, value</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// è·å–é¡µé¢æ‰€æœ‰çš„å…ƒç´ </span></span><br><span class="line">  <span class="keyword">let</span> elements = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'*'</span>)</span><br><span class="line">  <span class="keyword">const</span> arr = []</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è½¬æ¢ä¸ºæ•°ç»„å½¢å¼</span></span><br><span class="line">  elements = <span class="built_in">Array</span>.from(elements)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¾æ­¤å¯»æ‰¾</span></span><br><span class="line">  elements.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> itemPropertyValue = item.getAttribute(property)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç‰¹æ®Šå¤„ç†class, æ­£åˆ™åŒ¹é…å†…éƒ¨å…ƒç´ </span></span><br><span class="line">    <span class="keyword">if</span> (property === <span class="string">'class'</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">`\\b<span class="subst">$&#123;value&#125;</span>\\b`</span>)</span><br><span class="line">      <span class="keyword">if</span> (reg.test(itemPropertyValue)) &#123; arr.push(item) &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¤„ç†å…¶ä»–å€¼ï¼Œç›´æ¥åˆ¤æ–­æ˜¯å¦ç›¸åŒ</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (itemPropertyValue === value) &#123; arr.push(item) &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å®ç°ä¸€ä¸ªå†…ç½®çš„newæ–¹æ³•"><a href="#å®ç°ä¸€ä¸ªå†…ç½®çš„newæ–¹æ³•" class="headerlink" title="å®ç°ä¸€ä¸ªå†…ç½®çš„newæ–¹æ³•"></a>å®ç°ä¸€ä¸ªå†…ç½®çš„newæ–¹æ³•</h1><ol><li>åˆ›å»ºåŸå‹å¯¹è±¡</li><li>è°ƒç”¨æ„é€ å‡½æ•°</li><li>è¿”å›æ„é€ å‡½æ•°</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myNew</span> (<span class="params">Fn, ...args</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// æ‰‹åŠ¨åˆ›å»ºå­—é¢é‡å¯¹è±¡ï¼Œ å¹¶è¿›è¡ŒæŒ‚è½½</span></span><br><span class="line">  <span class="comment">// const obj = &#123;&#125;</span></span><br><span class="line">  <span class="comment">// Object.setPrototypeOf(Fn.prototype)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Object.createä»¥æŸä¸ªåŸå‹æŒ‚è½½ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">  <span class="keyword">const</span> obj = <span class="built_in">Object</span>.create(Fn.prototype)</span><br><span class="line">  Fn.call(obj, ...args)</span><br><span class="line">  <span class="keyword">return</span> obj</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> æ°é¥­ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æ€»ç»“é¢˜1</title>
      <link href="/2019/12/26/%E6%80%BB%E7%BB%93%E9%A2%981/"/>
      <url>/2019/12/26/%E6%80%BB%E7%BB%93%E9%A2%981/</url>
      
        <content type="html"><![CDATA[<h1 id="call-ä¸-apply-çš„åŒºåˆ«-æ€§èƒ½ç›¸å…³"><a href="#call-ä¸-apply-çš„åŒºåˆ«-æ€§èƒ½ç›¸å…³" class="headerlink" title="call ä¸ apply çš„åŒºåˆ«, æ€§èƒ½ç›¸å…³"></a>call ä¸ apply çš„åŒºåˆ«, æ€§èƒ½ç›¸å…³</h1><p>call, applyå‡ä¸ºfunctionåŸå‹ä¸Šçš„æ–¹æ³•ï¼Œä»–ä»¬çš„ä½œç”¨éƒ½æ˜¯æ”¹å˜thisæŒ‡å‘ï¼Œå”¯ä¸€ä¸åŒçš„å°±æ˜¯ä¼ é€’å‚æ•°çš„æ–¹å¼</p><p>fn.call(obj, 10, 20, 30)<br>fn.apply(obj, [10, 20, 30])</p><p>callçš„æ€§èƒ½è¦æ¯”applyå¥½ä¸€äº›(å°¤å…¶æ˜¯ä¼ é€’ç»™å‡½æ•°çš„å‚æ•°è¶…è¿‡3ä¸ªçš„æ—¶å€™)ï¼Œæ¨ècall</p><p>åŸºäºes6å¯¹è±¡å±•å¼€ç¬¦ï¼Œå¯ä»¥ä½¿ç”¨callä»£æ›¿apply</p><p>fn.apply(obj, arr)<br>fn.call(obj, â€¦arr)</p><p>æ€§èƒ½ï¼šæµ‹è¯•ç½‘ç«™ï¼Œä¸€å®šè¦æ³¨æ˜ç¯å¢ƒï¼Œä¸ªäººæµ‹è¯•åªèƒ½ä½œä¸ºå‚è€ƒ</p><h2 id="æ€§èƒ½æµ‹è¯•"><a href="#æ€§èƒ½æµ‹è¯•" class="headerlink" title="æ€§èƒ½æµ‹è¯•"></a>æ€§èƒ½æµ‹è¯•</h2><p>console.time(â€˜Aâ€™)<br>// â€¦code<br>console.timeEnd(â€˜Aâ€™)</p><h1 id="å®ä¾‹è°ƒå–æ–¹æ³•ï¼Œé“¾å¼è°ƒç”¨ï¼Œ-5-add-3-minus-2"><a href="#å®ä¾‹è°ƒå–æ–¹æ³•ï¼Œé“¾å¼è°ƒç”¨ï¼Œ-5-add-3-minus-2" class="headerlink" title="å®ä¾‹è°ƒå–æ–¹æ³•ï¼Œé“¾å¼è°ƒç”¨ï¼Œ(5).add(3).minus(2)"></a>å®ä¾‹è°ƒå–æ–¹æ³•ï¼Œé“¾å¼è°ƒç”¨ï¼Œ(5).add(3).minus(2)</h1><p>åŸå‹ä¸Šçš„å†™æ³•ï¼ŒåŸå‹é“¾æ‹“å±•<br>æ•°å­—è¦åŠ æ‹¬å·æ‰å¯ä»¥è¿›è¡Œæ‹“å±•</p><h1 id="ç®­å¤´å‡½æ•°"><a href="#ç®­å¤´å‡½æ•°" class="headerlink" title="ç®­å¤´å‡½æ•°"></a>ç®­å¤´å‡½æ•°</h1><ol><li>ç®­å¤´å‡½æ•°å¾ˆç®€æ´</li><li>ç®­å¤´å‡½æ•°ï¼Œæ²¡æœ‰thisæŒ‡å‘ï¼Œä½¿ç”¨callç­‰ä¹Ÿæ— æ³•æ”¹å˜å…¶thisçš„æŒ‡å‘</li><li>ç®­å¤´å‡½æ•°æ²¡æœ‰<code>arguments</code>ï¼Œå¯ä»¥ä½¿ç”¨ç”³æ˜å¼args <code>let fn = (...args) =&gt; {}</code></li></ol><h2 id="newçš„è¿‡ç¨‹"><a href="#newçš„è¿‡ç¨‹" class="headerlink" title="newçš„è¿‡ç¨‹"></a>newçš„è¿‡ç¨‹</h2><p>åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼ŒæŠŠåŸå‹æŒ‚ä¸Šæ¥ï¼Œ(æ„é€ å™¨å†…)ä¹‹åè¿›è¡Œç›¸å…³thisèµ‹å€¼ï¼Œè¿”å›è¯¥this</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Obj1</span> (<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="number">123</span> &#125;</span><br><span class="line"><span class="comment">// new Obj1 =&gt; obj1å®ä¾‹</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Obj3</span> (<span class="params"></span>) </span>&#123; &#125;</span><br><span class="line"><span class="comment">// new Obj3 =&gt; obj3å®ä¾‹</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Obj2</span> (<span class="params"></span>) </span>&#123; <span class="keyword">return</span> &#123;<span class="attr">name</span>: <span class="string">'z'</span>&#125; &#125;</span><br><span class="line"><span class="comment">// new Obj2 =&gt;  &#123; name: 'z' &#125;</span></span><br></pre></td></tr></table></figure><h2 id="ä¸é€‚åˆç®­å¤´å‡½æ•°"><a href="#ä¸é€‚åˆç®­å¤´å‡½æ•°" class="headerlink" title="ä¸é€‚åˆç®­å¤´å‡½æ•°"></a>ä¸é€‚åˆç®­å¤´å‡½æ•°</h2><p>æ²¡æœ‰thisæŒ‡å‘,ä½†æ˜¯æƒ…å¢ƒä¸‹åˆéœ€è¦æœ‰thisæŒ‡å‘çš„åŠŸèƒ½,<strong>éœ€è¦ä½¿ç”¨åˆ°thisæ—¶æ‰æœ‰é—®é¢˜</strong></p><ol><li>å­—é¢é‡å¯¹è±¡å†…éƒ¨</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  sum1: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;, <span class="comment">// OK</span></span><br><span class="line">  sum2 () &#123;&#125;, <span class="comment">// OK</span></span><br><span class="line">  sum3: <span class="function"><span class="params">()</span> =&gt;</span> &#123; &#125;, <span class="comment">// ERROR</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li><p>åŸå‹ä¸Šçš„æ–¹æ³•</p></li><li><p>å›è°ƒå‡½æ•°ï¼Œä½¿ç”¨åˆ°thisçš„</p></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">button.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="keyword">this</span>.focus() &#125; )</span><br></pre></td></tr></table></figure><ol start="4"><li>æ„é€ å‡½æ•°</li></ol><h2 id="é‡æ–°replace-REG-CALLBACK"><a href="#é‡æ–°replace-REG-CALLBACK" class="headerlink" title="é‡æ–°replace([REG], [CALLBACK])"></a>é‡æ–°replace([REG], [CALLBACK])</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>.prototype.myReplace = <span class="function"><span class="keyword">function</span> (<span class="params">reg, callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> destStr = <span class="keyword">this</span></span><br><span class="line">  <span class="comment">// é¦–æ¬¡æ£€éªŒæ˜¯å¦åŒ¹é…</span></span><br><span class="line">  <span class="keyword">let</span> regResult = reg.exec(<span class="keyword">this</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span>(regResult) &#123;</span><br><span class="line">    <span class="comment">// å¾—åˆ°åŒ¹é…ç»“æœï¼Œå¹¶è¿›è¡Œå›è°ƒï¼Œå¹¶ç”¨è¿”å›å€¼ä¿®æ”¹åŸstr</span></span><br><span class="line">    <span class="keyword">let</span> replaceStr = callback.call(destStr, regResult)</span><br><span class="line">    destStr = destStr.replace(regResult[<span class="number">0</span>], replaceStr)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿›è¡Œä¸‹ä¸€æ¬¡åŒ¹é…</span></span><br><span class="line">    regResult = reg.exec(destStr)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> destStr</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å†…éƒ¨è¿­ä»£"><a href="#å†…éƒ¨è¿­ä»£" class="headerlink" title="å†…éƒ¨è¿­ä»£"></a>å†…éƒ¨è¿­ä»£</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> each = <span class="function">(<span class="params">arr, callback</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, item; item = arr[i++]; ) &#123;</span><br><span class="line">    <span class="keyword">let</span> flag = callback.call(arr, item, i, arr)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (flag === <span class="literal">false</span>) &#123; <span class="keyword">break</span>; &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="indexOf-æ­£åˆ™åŒ¹é…å»è¿›è¡ŒæŸ¥æ‰¾å­—ç¬¦ä¸²"><a href="#indexOf-æ­£åˆ™åŒ¹é…å»è¿›è¡ŒæŸ¥æ‰¾å­—ç¬¦ä¸²" class="headerlink" title="indexOf,æ­£åˆ™åŒ¹é…å»è¿›è¡ŒæŸ¥æ‰¾å­—ç¬¦ä¸²"></a>indexOf,æ­£åˆ™åŒ¹é…å»è¿›è¡ŒæŸ¥æ‰¾å­—ç¬¦ä¸²</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>.prototype.myIndexOf = <span class="function"><span class="keyword">function</span> (<span class="params">reg</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(reg)</span><br><span class="line">  <span class="keyword">const</span> res = reg.exec(<span class="keyword">this</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¦‚æœæ²¡æœ‰åŒ¹é…åˆ°åˆ™è¿”å›-1 å¦åˆ™ç›´æ¥è°ƒç”¨æ­£åˆ™åŒ¹é…ç»“æœçš„res.index,å³é¦–æ¬¡å‡ºç°çš„ä½ç½® </span></span><br><span class="line">  <span class="keyword">return</span> res === <span class="literal">null</span> ? <span class="number">-1</span> : res.index</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å…³äºå¯¹è±¡ä¸­keyï¼Œé”®çš„ç›¸å…³"><a href="#å…³äºå¯¹è±¡ä¸­keyï¼Œé”®çš„ç›¸å…³" class="headerlink" title="å…³äºå¯¹è±¡ä¸­keyï¼Œé”®çš„ç›¸å…³"></a>å…³äºå¯¹è±¡ä¸­keyï¼Œé”®çš„ç›¸å…³</h1><h2 id="å¯¹è±¡çš„é”®é»˜è®¤éƒ½æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²"><a href="#å¯¹è±¡çš„é”®é»˜è®¤éƒ½æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²" class="headerlink" title="å¯¹è±¡çš„é”®é»˜è®¤éƒ½æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²"></a>å¯¹è±¡çš„é”®é»˜è®¤éƒ½æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;&#125;, a = <span class="string">'123'</span>, b = <span class="number">123</span></span><br><span class="line"></span><br><span class="line">obj[a] = <span class="string">'a'</span>; obj[b] = <span class="string">'b'</span>; </span><br><span class="line"></span><br><span class="line"><span class="comment">// æœ€ç»ˆobj[a] = 'b' å› ä¸ºobj[123] = obj['123']</span></span><br></pre></td></tr></table></figure><h2 id="å¯¹è±¡ä¸­keyä½¿ç”¨ä¸€ä¸ªsymbolæ¥åˆ›å»º"><a href="#å¯¹è±¡ä¸­keyä½¿ç”¨ä¸€ä¸ªsymbolæ¥åˆ›å»º" class="headerlink" title="å¯¹è±¡ä¸­keyä½¿ç”¨ä¸€ä¸ªsymbolæ¥åˆ›å»º"></a>å¯¹è±¡ä¸­keyä½¿ç”¨ä¸€ä¸ªsymbolæ¥åˆ›å»º</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;&#125;, a = <span class="built_in">Symbol</span>(<span class="number">123</span>), b = <span class="built_in">Symbol</span>(<span class="number">123</span>);</span><br><span class="line"></span><br><span class="line">obj[a] = <span class="string">'a'</span>; obj[b] = <span class="string">'b'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æœ€ç»ˆobj[a] = 'a' å› ä¸ºSmbol(123) !== Smbol(123)</span></span><br></pre></td></tr></table></figure><p><code>Symbol.for()</code> ä¼šåœ¨Symbolæ± ä¸­å¯»æ‰¾æˆ–åˆ›å»ºæ”¾å…¥symbolæ± </p><ul><li><code>Symbol(123) !== Symbol(123)</code></li><li><code>Symbol.for(123) === Symbol.for(123)</code></li></ul><h2 id="å¯¹è±¡ä¸­keyä½¿ç”¨ä¸€ä¸ªåº”ç”¨å€¼æ¥åˆ›å»º"><a href="#å¯¹è±¡ä¸­keyä½¿ç”¨ä¸€ä¸ªåº”ç”¨å€¼æ¥åˆ›å»º" class="headerlink" title="å¯¹è±¡ä¸­keyä½¿ç”¨ä¸€ä¸ªåº”ç”¨å€¼æ¥åˆ›å»º"></a>å¯¹è±¡ä¸­keyä½¿ç”¨ä¸€ä¸ªåº”ç”¨å€¼æ¥åˆ›å»º</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;&#125;</span><br><span class="line">arr = [<span class="number">12</span>,<span class="number">34</span>]; obj[arr] = <span class="string">'arr'</span>;</span><br><span class="line"><span class="comment">// &#123;12,34: 'arr' &#125;</span></span><br><span class="line"></span><br><span class="line">o1 = &#123; <span class="attr">name</span>: <span class="string">'z'</span> &#125;; obj[o1] = <span class="string">'o1'</span>;</span><br><span class="line"><span class="comment">// &#123;[object Object]: 'o1' &#125;</span></span><br></pre></td></tr></table></figure><p>ä¼šè°ƒç”¨å¯¹è±¡çš„<code>toString</code>æ–¹æ³•æ¥å½“æˆkeyå€¼ä¼ é€’è¿›å»ã€‚</p><h2 id="åˆ¤æ–­å¯¹è±¡æ„é€ å™¨çš„æ–¹å¼"><a href="#åˆ¤æ–­å¯¹è±¡æ„é€ å™¨çš„æ–¹å¼" class="headerlink" title="åˆ¤æ–­å¯¹è±¡æ„é€ å™¨çš„æ–¹å¼"></a>åˆ¤æ–­å¯¹è±¡æ„é€ å™¨çš„æ–¹å¼</h2><ul><li>typeofï¼Œ <code>typeof &#39;str&#39;</code></li></ul><p>åªèƒ½åˆ¤æ–­ï¼Œboolean, number, string, undefined, function, object(null + object + array)</p><ul><li><code>Object.prototype.toString.call(obj)</code></li></ul><p>èƒ½å¤Ÿé’ˆå¯¹ä¸objectå¯¹è±¡è¿›è¡Œæ›´ç»†è‡´ä¸€å±‚çš„åˆ¤</p><ol><li>[object Undefined]</li><li>[object Number]</li><li>[object Date]</li><li>[object Array]</li><li>[object String]<br>â€¦ [object Xxx]</li></ol><ul><li>åªèƒ½è¿›è¡ŒåŸå‹åˆ¤æ–­äº†ï¼Œ <code>Object.getPrototypeOf(obj) === Person.prototype</code></li></ul><p>ç›´æ¥æ¯”è¾ƒæ˜¯å¦æ—¶åŸå‹å¯¹è±¡ï¼ˆæ³¨æ„<code>__proto__</code>éæ ‡å‡†ï¼Œesæ¨èä½¿ç”¨<code>Object.getPrototypeOf(obj)</code>æ¥è·å–ï¼‰</p><h1 id="æ­£åˆ™åŒ¹é…ç½‘å€"><a href="#æ­£åˆ™åŒ¹é…ç½‘å€" class="headerlink" title="æ­£åˆ™åŒ¹é…ç½‘å€"></a>æ­£åˆ™åŒ¹é…ç½‘å€</h1><ul><li><code>?:</code> ä¸è¿›è¡Œåˆ†ç»„</li><li><code>?</code> å¯æœ‰å¯æ— ï¼Œæ‰€ä»¥å†…éƒ¨éœ€è¦çš„åªéœ€è¦+å³å¯</li><li><code>\w</code> æ•°å­—ï¼Œå­—æ¯ï¼Œä¸‹åˆ’çº¿</li><li>å¼€å¤´ç»“å°¾</li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/^(?:(http|https|ftp):\/\/)?((?:[\w-]+\.)+[a-z0-9]+)((?:\/[^\/#?]*)+)?(\?[^#]+)?(#.+)?$/i</span><br></pre></td></tr></table></figure><h3 id="åŒ¹é…åè®®"><a href="#åŒ¹é…åè®®" class="headerlink" title="åŒ¹é…åè®®"></a>åŒ¹é…åè®®</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/(?:(http|https|ftp):\/\/)?<span class="regexp">/i</span></span><br></pre></td></tr></table></figure><h3 id="åŒ¹é…åŸŸå"><a href="#åŒ¹é…åŸŸå" class="headerlink" title="åŒ¹é…åŸŸå"></a>åŒ¹é…åŸŸå</h3><p>åŒ¹é…<code>www.</code> <code>baidu.</code> <code>12306.</code><br>ååŒ¹é… <code>xxx</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/((?:[\w-]+\.)+[a-z0<span class="number">-9</span>]+)/i</span><br></pre></td></tr></table></figure><h3 id="åŒ¹é…åœ°å€"><a href="#åŒ¹é…åœ°å€" class="headerlink" title="åŒ¹é…åœ°å€"></a>åŒ¹é…åœ°å€</h3><p><code>/xxx.html</code>  <code>/xxx</code></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/((?:\/[^\/#?]*)+)?/i</span><br></pre></td></tr></table></figure><h3 id="åŒ¹é…æŸ¥è¯¢å‚æ•°"><a href="#åŒ¹é…æŸ¥è¯¢å‚æ•°" class="headerlink" title="åŒ¹é…æŸ¥è¯¢å‚æ•°"></a>åŒ¹é…æŸ¥è¯¢å‚æ•°</h3><p><code>?a=b</code></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/(\?[^#]+)?/i</span><br></pre></td></tr></table></figure><h3 id="åŒ¹é…hash"><a href="#åŒ¹é…hash" class="headerlink" title="åŒ¹é…hash"></a>åŒ¹é…hash</h3><p><code>#sdaä»»æ„</code></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/(#.+)?/i</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> æ°é¥­ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>åœ¨typescriptä¸­ä½¿ç”¨eslint</title>
      <link href="/2019/12/18/%E5%9C%A8typescript%E4%B8%AD%E4%BD%BF%E7%94%A8eslint/"/>
      <url>/2019/12/18/%E5%9C%A8typescript%E4%B8%AD%E4%BD%BF%E7%94%A8eslint/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åŸºäºvscodeè¿›è¡Œé…ç½®å¼€å‘</p></blockquote><h1 id="æ”¹å˜tslint"><a href="#æ”¹å˜tslint" class="headerlink" title="æ”¹å˜tslint"></a>æ”¹å˜tslint</h1><p>ä¹‹å‰æœ‰ä½¿ç”¨tslintæ¥å¯¹ä»£ç è´¨é‡è¿›è¡Œä¿éšœï¼Œç”±äºtslintæ˜¯eslintçš„ä¸€ä¸ªå­é›†,å¹¶ä¸”é‰´äºeslintçš„å‘è¾¾ç”Ÿæ€ï¼Œæ‰€ä»¥ä½¿ç”¨eslintæ¥ä»£æ›¿tslintæ˜¯æ¯”è¾ƒå¥½çš„ä¸€ä¸ªé€‰æ‹©ï¼Œå¹¶ä¸”tslintå›¢é˜Ÿä¹Ÿå»ºè®®è½¬ç§»ä½¿ç”¨eslintã€‚</p><h1 id="é¡¹ç›®ä¸­ä½¿ç”¨eslint"><a href="#é¡¹ç›®ä¸­ä½¿ç”¨eslint" class="headerlink" title="é¡¹ç›®ä¸­ä½¿ç”¨eslint"></a>é¡¹ç›®ä¸­ä½¿ç”¨eslint</h1><p>è¿™é‡Œç›´æ¥ä½¿ç”¨umiå‡ºå“çš„fabricæ¥è¿›è¡Œæ ¡éªŒå³å¯ï¼Œå¹¶ä¸”å…¶ä¸­ä¹ŸåŒ…å«äº†å…¶ä»–é…ç½®ï¼Œå¯æ ¹æ®è‡ªå·±çš„éœ€è¦æ¥è¿›è¡Œä½¿ç”¨ï¼Œä¸»è¦å°±æ˜¯ä¸€äº›è§„åˆ™çš„ä¼˜åŒ–ã€‚</p><h2 id="åˆ é™¤é¡¹ç›®ä¸­çš„eslintç›¸å…³ï¼Œä¸tslintç›¸å…³"><a href="#åˆ é™¤é¡¹ç›®ä¸­çš„eslintç›¸å…³ï¼Œä¸tslintç›¸å…³" class="headerlink" title="åˆ é™¤é¡¹ç›®ä¸­çš„eslintç›¸å…³ï¼Œä¸tslintç›¸å…³"></a>åˆ é™¤é¡¹ç›®ä¸­çš„eslintç›¸å…³ï¼Œä¸tslintç›¸å…³</h2><h2 id="ä½¿ç”¨fabricä¸­çš„eslint"><a href="#ä½¿ç”¨fabricä¸­çš„eslint" class="headerlink" title="ä½¿ç”¨fabricä¸­çš„eslint"></a>ä½¿ç”¨fabricä¸­çš„eslint</h2><p>é¡¹ç›®æ ¹ç›®å½•ä¸­çš„<code>.eslintrc.js</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const fabric = require(&apos;@umijs/fabric&apos;);</span><br><span class="line">module.exports = fabric.eslint;</span><br></pre></td></tr></table></figure></p><h2 id="è‡ªå·±å®šä¹‰è§„åˆ™"><a href="#è‡ªå·±å®šä¹‰è§„åˆ™" class="headerlink" title="è‡ªå·±å®šä¹‰è§„åˆ™"></a>è‡ªå·±å®šä¹‰è§„åˆ™</h2><p>ç”±äºfabricä¸­ä¹Ÿæ˜¯eslinté…ç½®çš„è§„åˆ™ï¼Œåˆ™å¯ä»¥åº”ç”¨è§£æ„èµ‹å€¼çš„æ–¹å¼è¿›è¡Œè§„åˆ™çš„æ‹“å±•</p><p>é¡¹ç›®æ ¹ç›®å½•ä¸­çš„<code>.eslintrc.js</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  extends: [<span class="built_in">require</span>.resolve(<span class="string">'@umijs/fabric/dist/eslint'</span>)],</span><br><span class="line"></span><br><span class="line">  rules: &#123;</span><br><span class="line">    <span class="comment">// your rules</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="åœ¨vscodeä¸­é…ç½®eslintç¯å¢ƒ"><a href="#åœ¨vscodeä¸­é…ç½®eslintç¯å¢ƒ" class="headerlink" title="åœ¨vscodeä¸­é…ç½®eslintç¯å¢ƒ"></a>åœ¨vscodeä¸­é…ç½®eslintç¯å¢ƒ</h1><ol><li><p>å®‰è£…æ’ä»¶eslint</p></li><li><p>åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ å¯¹tsçš„ç›¸å…³æ”¯æŒï¼Œä½¿å¾—å¯ä»¥è‡ªè¡Œè¿›è¡Œä¾èµ–é…ç½®ã€‚</p></li></ol><p>vscodeå¹¶ä¸ä¼šè‡ªåŠ¨lint tsçš„ç›¸å…³æ–‡ä»¶ï¼Œåœ¨<code>settings.json</code>ä¸­æ·»åŠ <br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&quot;eslint.validate&quot;: [</span><br><span class="line">    &quot;javascript&quot;,</span><br><span class="line">    &quot;javascriptreact&quot;,</span><br><span class="line">    &quot;typescript&quot;,</span><br><span class="line">    &quot;typescriptreact&quot;</span><br><span class="line">  ],</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>dockeræ„å»ºgitlab</title>
      <link href="/2019/11/24/%E4%BD%BF%E7%94%A8docker%E9%83%A8%E7%BD%B2gitlab/"/>
      <url>/2019/11/24/%E4%BD%BF%E7%94%A8docker%E9%83%A8%E7%BD%B2gitlab/</url>
      
        <content type="html"><![CDATA[<blockquote><p>gitlabåŠŸèƒ½æ¯”è¾ƒåºå¤§ï¼Œæ‰€å ç”¨èµ„æºä¹Ÿå¾ˆå¤šï¼Œå»ºè®®æ”¾åœ¨èµ„æºå¥½ä¸€ç‚¹çš„æœåŠ¡å™¨ï¼Œè™šæ‹Ÿæœºè¿è¡Œ4GB+,é‡åˆ°é—®é¢˜å¯ç›´æ¥çœ‹æœ€åé¢ï¼Œå¯èƒ½ä¼šæœ‰æ‰€å¸®åŠ©</p></blockquote><h2 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h2><ul><li>ä½¿ç”¨docker-composeæ„å»º</li><li>ä½¿ç”¨dockerçš„æ–¹å¼è¿›è¡Œæ„å»ºï¼ŒåŸºäºgitlab-ceç¤¾åŒºç‰ˆæ­å»ºï¼ˆå¯æ ¹æ®éœ€è¦è·å–eeç‰ˆï¼‰</li><li>ä½¿ç”¨nginxåšä¸€å±‚åå‘ä»£ç†ï¼Œæœ€ç»ˆé€šè¿‡ä¸€ä¸ªäºŒçº§åŸŸåçš„æ–¹å¼å¯ç›´è¾¾gitlab</li></ul><p>æœ€ç»ˆçš„ç›®çš„æ˜¯ä½¿ç”¨äºŒçº§åŸŸåï¼Œç›´æ¥æ˜ å°„è¿‡å»</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># æœ¬åœ°èµ„æº</span><br><span class="line">192.168.204.138 -&gt; æœåŠ¡å™¨</span><br><span class="line">äºŒçº§åŸŸå gitlab.vm.com -&gt; 192.168.204.138 (æ­¤å¤„æ˜¯æœ¬æœºåšäº†ä¸ªhosts)</span><br><span class="line"></span><br><span class="line"># æ˜ å°„å…³ç³»</span><br><span class="line">æœåŠ¡å™¨ä¸­:7080 -&gt; gitlab-docker:80</span><br><span class="line">æœåŠ¡å™¨ä¸­:7443 -&gt; gitlab-docker:443 (åé¢æ²¡æœ‰ä½¿ç”¨)</span><br><span class="line">æœåŠ¡å™¨ä¸­:7022 -&gt; gitlab-docker:22 (ç”¨äºsshè¿æ–¹å¼)</span><br><span class="line"></span><br><span class="line"># è®¿é—®å…³ç³»</span><br><span class="line">192.168.204.138:7080 -&gt; gitlab-docker</span><br><span class="line">gitlab.vm.com:7080 -&gt; gitlab-docker</span><br><span class="line"></span><br><span class="line"># æœ€ç»ˆä½¿ç”¨nginxåšä¸€å±‚åå‘ä»£ç†</span><br><span class="line">gitlab.vm.com -&gt; gitlab-docker</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…docker"><a href="#å®‰è£…docker" class="headerlink" title="å®‰è£…docker"></a>å®‰è£…docker</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">curl https://get.docker.com/ &gt; install-docker.sh <span class="comment"># ä¸‹è½½å®‰è£…è„šæœ¬</span></span><br><span class="line"></span><br><span class="line">sh install-docker.sh <span class="comment"># æ‰§è¡Œå®‰è£…è„šæœ¬</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹dockeré˜¿é‡Œyumæº</span></span><br><span class="line">vim /etc/docker/daemon.json</span><br><span class="line"></span><br><span class="line"><span class="comment"># daemon.json</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"registry-mirrors"</span>: [<span class="string">"https://brnzp166.mirror.aliyuncs.com"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è®¾ç½®å¼€æœºè‡ªå¯åŠ¨<code>systemctl enable docker</code></p><h2 id="å®‰è£…docker-compose-åŸºäºå›½å†…é•œåƒ"><a href="#å®‰è£…docker-compose-åŸºäºå›½å†…é•œåƒ" class="headerlink" title="å®‰è£…docker-compose(åŸºäºå›½å†…é•œåƒ)"></a>å®‰è£…docker-compose(åŸºäºå›½å†…é•œåƒ)</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸‹è½½docker-compose</span></span><br><span class="line">curl -L https://get.daocloud.io/docker/compose/releases/download/1.25.0/docker-compose-`uname -s`-`uname -m` &gt; /usr/<span class="built_in">local</span>/bin/docker-compose</span><br><span class="line"></span><br><span class="line"><span class="comment"># èµ‹äºˆæƒé™</span></span><br><span class="line">chmod +x /usr/<span class="built_in">local</span>/bin/docker-compose</span><br></pre></td></tr></table></figure><h2 id="è®¾ç½®å¤–éƒ¨ç›®å½•"><a href="#è®¾ç½®å¤–éƒ¨ç›®å½•" class="headerlink" title="è®¾ç½®å¤–éƒ¨ç›®å½•"></a>è®¾ç½®å¤–éƒ¨ç›®å½•</h2><p>ç”±äºæ˜¯dockeré•œåƒè¿è¡Œ, æ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠgitlabçš„é…ç½®, æ•°æ®, æ—¥å¿—å­˜åˆ°å®¹å™¨å¤–é¢, å³å°†å…¶æŒ‚è½½åˆ°å®¿ä¸»æœºã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /home/software/gitlab/etc</span><br><span class="line">mkdir -p /home/software/gitlab/logs</span><br><span class="line">mkdir -p /home/software/gitlab/data</span><br></pre></td></tr></table></figure><h2 id="åˆ¶ä½œdocker-compose-ymlæ–‡ä»¶"><a href="#åˆ¶ä½œdocker-compose-ymlæ–‡ä»¶" class="headerlink" title="åˆ¶ä½œdocker-compose.ymlæ–‡ä»¶"></a>åˆ¶ä½œdocker-compose.ymlæ–‡ä»¶</h2><p>ç”±äºä½¿ç”¨äº†docker-composeå¸®åŠ©æˆ‘ä»¬éƒ¨ç½²ï¼Œæ‰€ä»¥ä¸éœ€è¦è¿›è¡Œæ‹‰å–é•œåƒç­‰ï¼Œä»–ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬æ‰§è¡Œ</p><p>æ‰¾ä¸€ä¸ªç›®å½•å­˜æ”¾<code>docker-compose.yml</code>æ–‡ä»¶ï¼Œè¿™é‡Œä½¿ç”¨<code>/home/software/gitlab</code>ç›®å½•</p><ol><li>æ–°å»ºæ–‡ä»¶</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home/software/gitlab</span><br><span class="line"></span><br><span class="line">vim docker-compose.yml</span><br></pre></td></tr></table></figure><ol start="2"><li>ç¼–è¾‘docker-compose.ymlæ–‡ä»¶å†…å®¹,å¦‚æœ‰è¦æ±‚å¯è‡ªè¡Œä¿®æ”¹å¯¹åº”ç›®å½•</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker-compose.yml</span></span><br><span class="line"></span><br><span class="line">gitlab:</span><br><span class="line">  image: <span class="string">'gitlab/gitlab-ce:latest'</span></span><br><span class="line">  restart: unless-stopped</span><br><span class="line">  hostname: <span class="string">'gitlab.vm.com'</span> <span class="comment"># æœ€ç»ˆæš´éœ²å‡ºå»çš„host</span></span><br><span class="line">  environment:</span><br><span class="line">    GITLAB_OMNIBUS_CONFIG: |</span><br><span class="line"></span><br><span class="line">      <span class="comment"># å¤–éƒ¨å¯ä»¥è®¿é—®åˆ°gitlabçš„url</span></span><br><span class="line">      external_url <span class="string">'http://gitlab.vm.com'</span> </span><br><span class="line">      </span><br><span class="line">      <span class="comment"># sshç›¸å…³ï¼ˆæ³¨æ„å¯èƒ½ä¼šå’Œsshè¿æ¥å·¥å…·ç«¯å£å†²çªï¼‰</span></span><br><span class="line">      gitlab_rails[<span class="string">'gitlab_ssh_host'</span>] = <span class="string">'gitlab.vm.com'</span></span><br><span class="line">      gitlab_rails[<span class="string">'gitlab_shell_ssh_port'</span>] = 7022</span><br><span class="line"></span><br><span class="line">      <span class="comment"># emailç›¸å…³</span></span><br><span class="line">      gitlab_rails[<span class="string">'smtp_enable'</span>] = <span class="literal">true</span></span><br><span class="line">      gitlab_rails[<span class="string">'smtp_address'</span>] = <span class="string">"smtp.163.com"</span> <span class="comment"># smtpæœåŠ¡å™¨åœ°å€</span></span><br><span class="line">      gitlab_rails[<span class="string">'smtp_port'</span>] = 465</span><br><span class="line">      gitlab_rails[<span class="string">'smtp_user_name'</span>] = <span class="string">"123456@163.com"</span> <span class="comment"># å‘é€é‚®ä»¶çš„é‚®ç®±</span></span><br><span class="line">      gitlab_rails[<span class="string">'smtp_password'</span>] = <span class="string">"æˆæƒç "</span>     <span class="comment"># é‚®ç®±çš„æˆæƒç </span></span><br><span class="line">      gitlab_rails[<span class="string">'smtp_domain'</span>] = <span class="string">"smtp.163.com"</span></span><br><span class="line">      gitlab_rails[<span class="string">'smtp_authentication'</span>] = <span class="string">"login"</span></span><br><span class="line">      gitlab_rails[<span class="string">'smtp_enable_starttls_auto'</span>] = <span class="literal">true</span></span><br><span class="line">      gitlab_rails[<span class="string">'smtp_tls'</span>] = <span class="literal">true</span> </span><br><span class="line">      gitlab_rails[<span class="string">'gitlab_email_from'</span>] = <span class="string">'123456@163.com'</span> <span class="comment"># å‘é€é‚®ä»¶çš„é‚®ç®±</span></span><br><span class="line">  ports:</span><br><span class="line">    - <span class="string">'7080:80'</span></span><br><span class="line">    - <span class="string">'7443:443'</span></span><br><span class="line">    - <span class="string">'7022:22'</span></span><br><span class="line">  volumes:</span><br><span class="line">    - <span class="string">'/home/software/gitlab/etc:/etc/gitlab'</span></span><br><span class="line">    - <span class="string">'/home/software/gitlab/logs:/var/log/gitlab'</span></span><br><span class="line">    - <span class="string">'/home/software/gitlab/data:/var/opt/gitlab'</span></span><br></pre></td></tr></table></figure><h2 id="æ£€æµ‹é…ç½®æˆåŠŸ"><a href="#æ£€æµ‹é…ç½®æˆåŠŸ" class="headerlink" title="æ£€æµ‹é…ç½®æˆåŠŸ"></a>æ£€æµ‹é…ç½®æˆåŠŸ</h2><h3 id="è¿è¡Œdocekr"><a href="#è¿è¡Œdocekr" class="headerlink" title="è¿è¡Œdocekr"></a>è¿è¡Œdocekr</h3><p>åˆ‡æ¢åˆ°åˆšåˆšçš„<code>docker-compose.yml</code>æ–‡ä»¶å­˜åœ¨çš„åœ°å€ï¼ˆæ­¤æ—¶æ˜¯åœ¨/home/software/gitlabï¼‰</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home/software/gitlab</span><br><span class="line"></span><br><span class="line"><span class="comment"># åå°è¿è¡Œdocker</span></span><br><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>docker ps</code>æŸ¥çœ‹å½“å‰dockerçš„è¿è¡ŒçŠ¶å†µï¼Œç­‰å¾…gitlabçš„çŠ¶æ€ä¸ºï¼ˆhealthy/unhealthyï¼Œçº¦5åˆ†é’Ÿå·¦å³ï¼‰,ä¹Ÿå³æ‰“åŒ…å®Œæ¯•åï¼Œè®¿é—®<code>192.168.204.138:7080</code>ï¼Œå¦‚æœå¯ä»¥çœ‹åˆ°æ¬¢è¿ç•Œé¢ï¼Œæ­å–œä½ ï¼Œæ­å»ºå°±æˆåŠŸäº†</p><p>ä»¥åç›´æ¥åˆ‡æ¢å»<code>docker-compose.yml</code>æ–‡ä»¶å­˜åœ¨çš„åœ°å€,ä½¿ç”¨<code>docker-compose up -d</code>å³å¯é‡å¯ï¼Œå¹¶ä¸”ä¸Šæ–‡è®¾ç½®äº†dockerå¼€æœºè‡ªå¯ã€‚</p><p>æ­¤æ—¶è®¾ç½®çš„å¯†ç ä¸ºrootè´¦æˆ·ï¼Œå³ä»¥åç”¨æˆ·åä¸º<em>root</em>çš„è´¦æˆ·ï¼Œè¶…çº§ç®¡ç†å‘˜</p><p><em>å¯ç‚¹å‡»å¤´åƒæ¡† <code>settings -&gt; preferences -&gt; language</code></em>  åˆ‡æ¢ä¸ºä¸­æ–‡</p><h3 id="æµ‹è¯•é‚®ç®±æœåŠ¡"><a href="#æµ‹è¯•é‚®ç®±æœåŠ¡" class="headerlink" title="æµ‹è¯•é‚®ç®±æœåŠ¡"></a>æµ‹è¯•é‚®ç®±æœåŠ¡</h3><p>ä¿®æ”¹å®Œæˆåï¼Œè¿›å…¥åˆ°å¦ä¸€ä¸ªç»ˆç«¯ä¸­ï¼Œè¿›å…¥gitlab-dockerå†…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it gitlab /bin/bash</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿›å…¥åˆ°è¯¥containerä¸­ï¼Œæ‰§è¡Œé‡æ–°é…ç½®ï¼Œç­‰å¾…å®Œæˆ</span></span><br><span class="line">gitlab-ctl reconfigure</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯•é‚®ç®±æ˜¯å¦å®Œæˆ</span></span><br><span class="line">gitlab-rails console     <span class="comment"># è¿›å…¥é‚®ä»¶æ§åˆ¶å°, ç¨ç­‰ä¸€ä¼šæ‰èƒ½è¿›å…¥</span></span><br><span class="line">Notify.test_email(<span class="string">'test_another@qq.com'</span>, <span class="string">'Message Subject'</span>, <span class="string">'Message Body'</span>).deliver_now</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨nginxåå‘ä»£ç†"><a href="#ä½¿ç”¨nginxåå‘ä»£ç†" class="headerlink" title="ä½¿ç”¨nginxåå‘ä»£ç†"></a>ä½¿ç”¨nginxåå‘ä»£ç†</h2><blockquote><p>åå‘ä»£ç†è¯´é€šä¿—å°±æ˜¯ï¼Œä½ å»è®¿é—®192.168.204.138çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨è¶ä½ ä¸çŸ¥é“å®‰æ’äº†192.168.204.138ï¼š7080ç»™ä½ æœåŠ¡ï¼Œæ­¤æ—¶æ˜¯åå°æœåŠ¡å™¨ï¼Œé€šè¿‡ä¸€ä¸ªä¸­é—´å•†ï¼Œç»™ä½ æœåŠ¡ã€‚</p></blockquote><h3 id="ä½¿ç”¨yumå®‰è£…nginx"><a href="#ä½¿ç”¨yumå®‰è£…nginx" class="headerlink" title="ä½¿ç”¨yumå®‰è£…nginx"></a>ä½¿ç”¨yumå®‰è£…nginx</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸‹è½½å¯¹åº”å½“å‰ç³»ç»Ÿç‰ˆæœ¬çš„nginxåŒ…(package)</span></span><br><span class="line">wget  http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm  </span><br><span class="line"></span><br><span class="line"><span class="comment"># å»ºç«‹nginxçš„yumä»“åº“</span></span><br><span class="line">rpm -ivh nginx-release-centos-7-0.el7.ngx.noarch.rpm  </span><br><span class="line"></span><br><span class="line"><span class="comment"># æ ¹æ®/etc/yum.repos.d/nginx.repoä¸­çš„ä¿¡æ¯ä¸‹è½½å®‰è£…nginx</span></span><br><span class="line">yum install nginx   </span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨nginxæœåŠ¡</span></span><br><span class="line">systemctl start nginx </span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€æœºè‡ªå¯nginxæœåŠ¡</span></span><br><span class="line">systemctl <span class="built_in">enable</span> nginx</span><br></pre></td></tr></table></figure><h3 id="é…ç½®åå‘ä»£ç†"><a href="#é…ç½®åå‘ä»£ç†" class="headerlink" title="é…ç½®åå‘ä»£ç†"></a>é…ç½®åå‘ä»£ç†</h3><p>ä½¿ç”¨æ­¤ç§æ–¹å¼å®‰è£…çš„nginxï¼Œé…ç½®æ–‡ä»¶æ˜¯è¾ƒä¸ºåˆ†æ•£çš„ï¼Œå¯ä»¥ä½¿ç”¨<code>whereis nginx</code>æŸ¥çœ‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿›å…¥åˆ°nginxé…ç½®ç›®å½•</span></span><br><span class="line"><span class="built_in">cd</span> /etc/nginx/conf.d</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¢åŠ ä¸€ä¸ªé’ˆå¯¹gitlabçš„proxy, ä¸€å®šè¦ä¸º*.confï¼Œ æŸ¥çœ‹ /etc/nginx/nginx.conf å°±æ‡‚äº†</span></span><br><span class="line">vim proxy_gitlab.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ‘çš„åå‘ä»£ç†ï¼Œgitlab.vm.com:80 -&gt; http:127.0.0.1:7080</span></span><br><span class="line"><span class="comment"># å³dockeræ˜ å°„å‡ºçš„gitlab ç›®å½•</span></span><br><span class="line">server &#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  server_name gitlab.vm.com;</span><br><span class="line"></span><br><span class="line">  location / &#123;</span><br><span class="line">    proxy_pass http://127.0.0.1:7080;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‡å¯nginxæœåŠ¡<code>systemctl restart nginx</code></p><p>è®¿é—®å³å¯<a href="http://gitlab.vm.com" target="_blank" rel="noopener">http://gitlab.vm.com</a></p><h2 id="å¯èƒ½å‡ºç°çš„é—®é¢˜"><a href="#å¯èƒ½å‡ºç°çš„é—®é¢˜" class="headerlink" title="å¯èƒ½å‡ºç°çš„é—®é¢˜"></a>å¯èƒ½å‡ºç°çš„é—®é¢˜</h2><h3 id="SELINUX-é’ˆå¯¹åå‘ä»£ç†"><a href="#SELINUX-é’ˆå¯¹åå‘ä»£ç†" class="headerlink" title="SELINUX(é’ˆå¯¹åå‘ä»£ç†)"></a>SELINUX(é’ˆå¯¹åå‘ä»£ç†)</h3><p>linuxå®‰å…¨æ¨¡å—ï¼Œæ­¤å¤„ç›´æ¥å…³é—­ï¼ˆä¸æ¨èè¿™ç§åšæ³•ï¼Œå¯ä»¥å»æ‰¾selinuxè¾ƒå¥½çš„è§£å†³æ–¹æ¡ˆï¼‰</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/sysconfig/selinux</span><br><span class="line"></span><br><span class="line">SELINUX=disabled</span><br></pre></td></tr></table></figure><h3 id="firewalld"><a href="#firewalld" class="headerlink" title="firewalld"></a>firewalld</h3><p>ç”±äºé˜²ç«å¢™çš„å­˜åœ¨ï¼Œå¯èƒ½é€ æˆæµè§ˆå™¨ä¸€ç›´è½¬åœˆçš„çŠ¶å†µ</p><p>æœ¬åœ°è™šæ‹Ÿæœºï¼Œç›´æ¥å…³é—­ï¼ˆä¸æ¨èï¼Œå¯ä»¥å»æ‰¾firewalldè¾ƒå¥½çš„è§£å†³æ–¹æ¡ˆï¼‰</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld   <span class="comment"># å…³é—­é˜²ç«å¢™</span></span><br><span class="line"></span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld   <span class="comment"># æ°¸ä¹…å…³é—­ï¼ˆå½“ç„¶ä¹Ÿä¸æ¨èå•¦ï¼‰</span></span><br></pre></td></tr></table></figure><h3 id="gitlab-dockeræ— é™é‡å¯"><a href="#gitlab-dockeræ— é™é‡å¯" class="headerlink" title="gitlab-dockeræ— é™é‡å¯"></a>gitlab-dockeræ— é™é‡å¯</h3><p>å¯èƒ½æ˜¯é…ç½®å‡ºäº†é—®é¢˜ï¼Œä¹‹å‰é…ç½®extends_urlå‡ºç°è¿™ç§çŠ¶å†µï¼Œæ‰€ä»¥æ­¤æ—¶å¹¶æœªåœ¨è¿›è¡Œè¿‡é…ç½®</p><p>å¯ä»¥åˆ‡æ¢è¿›å»(æ­¤å¤„gitlab-dockerçš„nameå°±å«gitlab,ä¹Ÿå¯ä»¥æ›¿æ¢ä¸º<code>&lt;containerID&gt;</code>ï¼Œ<code>docker ps -a</code>å³å¯æŸ¥çœ‹)ï¼ŒæŸ¥çœ‹å“ªé‡Œå‡ºäº†é—®é¢˜</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker container logs gitlab</span><br></pre></td></tr></table></figure><h3 id="nginxæœåŠ¡å™¨å¯åŠ¨å¼‚å¸¸"><a href="#nginxæœåŠ¡å™¨å¯åŠ¨å¼‚å¸¸" class="headerlink" title="nginxæœåŠ¡å™¨å¯åŠ¨å¼‚å¸¸"></a>nginxæœåŠ¡å™¨å¯åŠ¨å¼‚å¸¸</h3><p>nginxæœåŠ¡å¯åŠ¨è¯´æƒé™çš„é—®é¢˜ï¼Œæ­¤å¤„å¯èƒ½æ˜¯ä¿®æ”¹äº†SELINUXå¯¼è‡´çš„é—®é¢˜ï¼Œå¯ä»¥å…ˆå°†selinuxåˆ‡æ¢å›ä¹‹å‰çš„æ¨¡å¼ï¼Œé‡å¯åï¼Œå¾…nginxå¯æ­£å¸¸å¯åŠ¨åï¼Œé‡å¯åœ¨ä¿®æ”¹SELINUXå³å¯</p><h3 id="çˆ†å†…å­˜"><a href="#çˆ†å†…å­˜" class="headerlink" title="çˆ†å†…å­˜"></a>çˆ†å†…å­˜</h3><p>å› ä¸ºgitlabå¯¹è®¾å¤‡çš„è¿˜æ˜¯æœ‰ä¸€å®šè¦æ±‚çš„<a href="https://docs.gitlab.com/ee/install/requirements.html#hardware-requirements" target="_blank" rel="noopener">gitlabç¡¬ä»¶è¦æ±‚</a></p><p>å¦‚æœå¡æ…¢çš„è¯ï¼Œå¯ä»¥è¯•ä¸€è¯•å¢åŠ è™šæ‹Ÿå†…å­˜</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 4GBè™šæ‹Ÿå†…å­˜</span></span><br><span class="line">dd <span class="keyword">if</span>=/dev/zero of=/home/swap bs=1024 count=4194304</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ ¼å¼åŒ–åˆ†åŒº</span></span><br><span class="line">mkswap /home/swap</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€å¯swapåˆ†åŒº(å…³é—­swapåˆ†åŒº swapoff /home/swap)</span></span><br><span class="line">swapon /home/swap</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‚è½½åˆ†åŒº</span></span><br><span class="line">vim /etc/fstab</span><br><span class="line"></span><br><span class="line">/home/swap swap swap default 0 0</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://docs.gitlab.com/omnibus/docker/" target="_blank" rel="noopener">dockeræ–¹å¼æ„å»ºgitlab(å®˜æ–¹æ–‡æ¡£)</a></p><p><a href="https://blog.csdn.net/weixin_42032542/article/details/80345691" target="_blank" rel="noopener">äº‘æœåŠ¡å™¨å¢åŠ swapåˆ†åŒº</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> è¿ç»´ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>jsç®€æ˜“å®ç°Graph</title>
      <link href="/2019/11/12/js%E7%AE%80%E6%98%93%E5%AE%9E%E7%8E%B0Graph/"/>
      <url>/2019/11/12/js%E7%AE%80%E6%98%93%E5%AE%9E%E7%8E%B0Graph/</url>
      
        <content type="html"><![CDATA[<p>å›¾ç»“æ„æ›´åŠ è´´è¿‘ç”Ÿæ´»ï¼Œèƒ½æ›´å¤šçš„æ¨¡æ‹Ÿç”Ÿæ´»ä¸­çš„ä¸€äº›ç»“æ„,è¡¨ç¤ºä¸€ç§ç½‘çŠ¶ï¼Œèƒ½æ›´å¥½çš„è¡¨ç¤ºèŠ‚ç‚¹ä¹‹é—´çš„è”ç³»ä¸å…³ç³»ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">I - E -|   </span><br><span class="line">       B - A - C - | </span><br><span class="line">    F -|   |   |   |</span><br><span class="line">           | - D - G</span><br><span class="line">               | - - â€” H</span><br></pre></td></tr></table></figure><p><img src="/img/2019/11/12/graph.png" alt="graph"></p><h2 id="å›¾çš„ç§ç±»"><a href="#å›¾çš„ç§ç±»" class="headerlink" title="å›¾çš„ç§ç±»"></a>å›¾çš„ç§ç±»</h2><h3 id="æœ‰å‘å›¾"><a href="#æœ‰å‘å›¾" class="headerlink" title="æœ‰å‘å›¾"></a>æœ‰å‘å›¾</h3><p>æœ‰æ–¹å‘çš„å›¾ï¼ŒB-&gt;A, A-&gt;B,å¯ä»¥ä½¿ç”¨é‚»æ¥çŸ©é˜µæ¥è¡¨ç¤ºï¼Œä½†æ˜¯ä½¿ç”¨é‚»æ¥è¡¨çš„æ—¶å€™ï¼Œåˆ†ä¸ºé‚»æ¥è¡¨ï¼Œé€†é‚»æ¥è¡¨ï¼ˆæ ¹æ®å…¥åº¦å‡ºåº¦ï¼‰ã€‚ </p><h3 id="æ— å‘å›¾"><a href="#æ— å‘å›¾" class="headerlink" title="æ— å‘å›¾"></a>æ— å‘å›¾</h3><p>æ²¡æœ‰æ–¹å‘çš„å›¾ï¼ŒA-Bï¼Œè¡¨ç¤ºäº†Aä¸Bï¼Œå’ŒBä¸Açš„è”ç³»ï¼Œå¯ä»¥ä½¿ç”¨é‚»æ¥çŸ©é˜µæ¥è¡¨ç¤ºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é‚»æ¥è¡¨æ¥è¡¨ç¤º</p><h2 id="å­˜å‚¨å½¢å¼"><a href="#å­˜å‚¨å½¢å¼" class="headerlink" title="å­˜å‚¨å½¢å¼"></a>å­˜å‚¨å½¢å¼</h2><h3 id="é‚»æ¥çŸ©é˜µ"><a href="#é‚»æ¥çŸ©é˜µ" class="headerlink" title="é‚»æ¥çŸ©é˜µ"></a>é‚»æ¥çŸ©é˜µ</h3><p>ä½¿ç”¨ä¸€ä¸ªäºŒç»´æ•°ç»„çš„å½¢å¼æ¥è¡¨ç¤ºï¼Œå¾ˆæƒ³åæ ‡ç³»ï¼Œä½¿ç”¨ä¸¤ä¸ªè½´æ‰€å¯¹åº”çš„åæ ‡å¯»æ‰¾ä¸¤ä¸ªç‚¹ä¹‹é—´çš„å…³ç³»ï¼Œå½“è¾¹ä¸ä¸€æ ·æ—¶ï¼Œå³å­˜åœ¨äº†æƒæ—¶ï¼Œé‡‡ç”¨é‚»æ¥çŸ©é˜µçš„æ–¹å¼ä¹Ÿæ¯”è¾ƒå¥½è¡¨ç¤ºï¼Œç›´æ¥åœ¨ç›¸åº”çš„ä½ç½®ä¸Šå³ä¸ºä»–ä»¬çš„åº¦å³å¯ã€‚</p><p>å½“ä¸€ä¸ªå›¾è¾ƒä¸ºç¨€ç–æ—¶ï¼Œå¯èƒ½ä¼šå­˜åœ¨å¤§é‡ä¸å¿…è¦å­˜å‚¨çš„0ï¼Œé€ æˆäº†ç©ºé—´çš„æµªè´¹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¯”å¦‚å­˜åœ¨ä¸€ä¸ªå›¾</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  A - B - c</span></span><br><span class="line"><span class="comment"> *       \D/</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *   A B C D</span></span><br><span class="line"><span class="comment"> * A 0 1 0 0</span></span><br><span class="line"><span class="comment"> * B 1 0 1 1</span></span><br><span class="line"><span class="comment"> * C 0 1 0 1</span></span><br><span class="line"><span class="comment"> * D 0 1 1 0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">[</span><br><span class="line">  [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">  [<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>],</span><br><span class="line">  [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">  [<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>],</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="é‚»æ¥è¡¨"><a href="#é‚»æ¥è¡¨" class="headerlink" title="é‚»æ¥è¡¨"></a>é‚»æ¥è¡¨</h3><p>å°†é¡¶ç‚¹(vertex),ä¸è¾¹(Edge)åˆ†åˆ«è¿›è¡Œè®°å½•çš„ä¸€ç§æ–¹å¼ï¼Œæ¯ä¸ªå®šç‚¹çš„<strong>å…¥åº¦</strong>ï¼Œ<strong>å‡ºåº¦</strong>åˆ†åˆ«å¯ä»¥ç»„æˆ<strong>é€†é‚»æ¥è¡¨</strong>ï¼Œ<strong>é‚»æ¥è¡¨</strong></p><p>åœ¨ä½¿ç”¨é‚»æ¥è¡¨æ—¶ï¼Œåˆ†åˆ«è®°å½•ï¼Œå¯ä»¥ä½¿ç”¨<code>[&#39;A&#39;, &#39;B&#39;]</code>æ¥è®°å½•å®šç‚¹ä¿¡æ¯ï¼Œä½¿ç”¨<code>{ vertex: [ vertex1, vertex2 ] }</code>æ¥è®°å½•è¾¹çš„ä¿¡æ¯</p><h2 id="éå†æ–¹å¼"><a href="#éå†æ–¹å¼" class="headerlink" title="éå†æ–¹å¼"></a>éå†æ–¹å¼</h2><p>ä½¿ç”¨ä¸€ç§æ–¹å¼ï¼Œå°†å›¾å†…çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½è®¿é—®ä¸€éçš„æ–¹å¼ï¼Œæ³¨æ„ä»¥ä¸‹ä¸¤ç‚¹</p><ol><li>éå†çš„æ—¶å€™ï¼Œå¿…é¡»ç»™å›¾ä¸€ä¸ªåˆå§‹çš„é¡¶ç‚¹</li><li>æ¯ä¸ªé¡¶ç‚¹åˆ†ä¸º3ç§çŠ¶æ€ï¼Œ<em>white(æœªè®¿é—®)</em>,<em>gray(æ­£åœ¨è®¿é—®çŠ¶æ€ä¸­)</em>,<em>black(è®¿é—®ç»“æŸ)</em>,åˆå§‹åŒ–æ—¶ï¼Œæ‰€æœ‰çš„ç‚¹éƒ½åº”è¯¥æ—¶whiteçš„,åªå°†whiteæ”¾åˆ°å³å°†è¦è®¿é—®ä¸­ï¼Œgrayè¡¨ç¤ºæ­£åœ¨è®¿é—®ï¼Œä¼šé€ æˆå¾ªç¯ï¼Œblackå·²ç»è®¿é—®è¿‡äº†ï¼Œä¼šé€ æˆé‡å¤</li></ol><h3 id="bfs-breadth-first-search-å¹¿åº¦ä¼˜å…ˆ"><a href="#bfs-breadth-first-search-å¹¿åº¦ä¼˜å…ˆ" class="headerlink" title="bfs,breadth first search, å¹¿åº¦ä¼˜å…ˆ"></a>bfs,<em>breadth first search</em>, å¹¿åº¦ä¼˜å…ˆ</h3><p><img src="/img/2019/11/12/bfs.png" alt="bfs"></p><p>æ¯ä¸€ä¸ªå…ƒç´ æ‰€æœ‰çš„èŠ‚ç‚¹éƒ½è¦è®¿é—®å®Œå†å»ä»–ä»¬çš„å­å…ƒç´ è¿™æ ·è®¿é—®ï¼Œé‡‡ç”¨ä¸€å±‚ä¸€å±‚çš„æ–¹å¼ï¼Œå¯ä»¥ä½¿ç”¨<strong>é˜Ÿåˆ—</strong>çš„æ–¹å¼å®ç°ï¼Œå°†ä¸€å±‚å¡å…¥é˜Ÿåˆ—ä¸­ï¼Œè¿™ä¸€å±‚çš„å­å…ƒç´ ï¼Œå†æ¬¡å¡å…¥é˜Ÿåˆ—ï¼Œå°±ä¿è¯äº†å¯¹å¤´æ˜¯åŒå±‚çš„</p><h3 id="dfs-depth-first-search-æ·±åº¦ä¼˜å…ˆ"><a href="#dfs-depth-first-search-æ·±åº¦ä¼˜å…ˆ" class="headerlink" title="dfs,depth first search, æ·±åº¦ä¼˜å…ˆ"></a>dfs,<em>depth first search</em>, æ·±åº¦ä¼˜å…ˆ</h3><p><img src="/img/2019/11/12/dfs.png" alt="dfs"></p><p>æ¯ä¸€ä¸ªå…ƒç´ ä¸€æ—¦è®¿é—®åå°±è¦èµ°åˆ°å¤´ï¼Œé‡‡ç”¨<strong>é€’å½’å‡½æ•°</strong>çš„æ–¹å¼å®ç°ï¼Œæ¯ä¸€ä¸ªç‚¹éƒ½æ˜¯é€’å½’çš„è®¿é—®ï¼Œæ‰€ä»¥ç›´åˆ°æ‰€æœ‰ç‚¹éƒ½æ˜¯è®¿é—®è¿‡çš„ï¼Œæ‰ä¼šä¸€å±‚ä¸€å±‚é€’å½’å›æ¥ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸€ä¸ªç‚¹èµ°å®Œäº†</p><h3 id="ä¸¤ç§æ–¹å¼æ³¨æ„äº‹é¡¹"><a href="#ä¸¤ç§æ–¹å¼æ³¨æ„äº‹é¡¹" class="headerlink" title="ä¸¤ç§æ–¹å¼æ³¨æ„äº‹é¡¹"></a>ä¸¤ç§æ–¹å¼æ³¨æ„äº‹é¡¹</h3><ol><li>å¤„ç†<strong>whiteå‹</strong>èŠ‚ç‚¹ï¼Œä¿è¯ä¸å¾ªç¯åº”ç”¨ï¼Œä¸é‡å¤åº”ç”¨ç­‰</li><li>åœ¨æ”¹å˜ä¸ºgrayæ—¶å°±è¦handleræ‰ä»–ï¼Œç­‰ä»–çš„å­èŠ‚ç‚¹ä¹Ÿéƒ½éå†å®Œäº†ä¹‹åï¼Œå°±å¯ä»¥blackæ‰äº†ã€‚</li></ol><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å›¾ç»“æ„</span></span><br><span class="line"><span class="comment"> * é‡‡ç”¨é‚»æ¥è¡¨çš„å½¢å¼ï¼Œæ— å‘å›¾</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Graph</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// è¡¨ç¤ºå­˜å‚¨çš„ç‚¹</span></span><br><span class="line">  <span class="keyword">this</span>.vertexes = []</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¡¨ç¤ºå­˜å‚¨çš„è¾¹</span></span><br><span class="line">  <span class="keyword">this</span>.edge = &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ·»åŠ ä¸€ä¸ªç‚¹,ç‚¹å­˜åœ¨å°±ä¸å†æ·»åŠ äº†</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">Graph.prototype.addVertex = <span class="function"><span class="keyword">function</span> (<span class="params">v</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.edge.hasOwnProperty(v) === <span class="literal">true</span> ) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ·»åŠ èŠ‚ç‚¹ï¼Œåˆå§‹åŒ–è¾¹</span></span><br><span class="line">  <span class="keyword">this</span>.vertexes.push(v)</span><br><span class="line">  <span class="keyword">this</span>.edge[v] = []</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ·»åŠ ä¸€æ¡è¾¹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">Graph.prototype.addEdge = <span class="function"><span class="keyword">function</span> (<span class="params">v1,  v2</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å½“å‰æ˜¯å¦å­˜åœ¨è¯¥ç‚¹</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.edge.hasOwnProperty(v1) === <span class="literal">false</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.addVertex(v1)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.edge.hasOwnProperty(v2) === <span class="literal">false</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.addVertex(v2)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¢åŠ ä¸¤æ¡è¾¹çš„å…³ç³»</span></span><br><span class="line">  <span class="keyword">this</span>.edge[v1].push(v2)</span><br><span class="line">  <span class="keyword">this</span>.edge[v2].push(v1)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¾“å‡ºé‚»æ¥è¡¨çš„å­˜åœ¨å½¢å¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">Graph.prototype.toString = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> str = <span class="string">''</span></span><br><span class="line">  <span class="keyword">this</span>.vertexes.forEach(<span class="function"><span class="params">vertex</span> =&gt;</span> &#123;</span><br><span class="line">    str += <span class="string">`<span class="subst">$&#123;vertex&#125;</span> -&gt;`</span></span><br><span class="line">    <span class="keyword">this</span>.edge[vertex].forEach(<span class="function"><span class="params">otherVertex</span> =&gt;</span> str += <span class="string">` <span class="subst">$&#123;otherVertex&#125;</span>`</span>)</span><br><span class="line">    str += <span class="string">'\n'</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> str</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆå§‹åŒ–æ‰€æœ‰é¢œè‰²çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment"> * W-white, G-gray, B-black </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">Graph.prototype.initializeColor = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// åˆå§‹åŒ–æ‰€æœ‰ç‚¹é¡ºåºçš„ä¸€ä¸ªcolor</span></span><br><span class="line">  <span class="keyword">const</span> colors = &#123;&#125;</span><br><span class="line">  <span class="keyword">this</span>.vertexes.forEach(<span class="function">(<span class="params">v</span>) =&gt;</span> colors[v] = <span class="string">'W'</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> colors</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * DFS-&gt;å¹¿åº¦ä¼˜å…ˆ</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨é˜Ÿåˆ—å…¥é˜Ÿï¼Œå‡ºé˜Ÿå®ç°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">Graph.prototype.bfs = <span class="function"><span class="keyword">function</span> (<span class="params">initV, handler</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// è·å–æ‰€æœ‰ç‚¹çš„é¢œè‰²è¡¨</span></span><br><span class="line">  <span class="keyword">const</span> colors = <span class="keyword">this</span>.initializeColor()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å‡†å¤‡é˜Ÿåˆ—ï¼Œå¹¶æ”¾å…¥åˆå§‹åŒ–ç‚¹è¿›è¡Œéå†</span></span><br><span class="line">  <span class="keyword">const</span> queue = <span class="keyword">new</span> Queue()</span><br><span class="line">  queue.enqueue(initV)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (queue.isEmpty() === <span class="literal">false</span>) &#123;</span><br><span class="line">    <span class="comment">// å–å‡ºè¦éå†çš„èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">const</span> currentVertex = queue.dequeue()</span><br><span class="line">    <span class="keyword">const</span> currentEdges = <span class="keyword">this</span>.edge[currentVertex]</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¤„äºéå†çŠ¶æ€</span></span><br><span class="line">    colors[currentVertex] = <span class="string">'G'</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¾æ¬¡æ”¾å…¥æ¯ä¸€ä¸ªé‚»æ¥è¡¨ä¸­çš„ç‚¹</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, v; v = currentEdges[i++]; ) &#123;</span><br><span class="line">      <span class="comment">// å·²ç»éå†æˆ–æ˜¯è®¿é—®äº†ï¼Œå°±ä¸åœ¨å¤„ç†äº†</span></span><br><span class="line">      <span class="keyword">if</span> (colors[v] !== <span class="string">'W'</span>) &#123;</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æ”¾å…¥è¯¥ç‚¹ï¼Œå¹¶ä¸”æ”¹å˜è¯¥ç‚¹çš„é¢œè‰²</span></span><br><span class="line">      queue.enqueue(v)</span><br><span class="line">      colors[v] = <span class="string">'B'</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¤„ç†è¯¥ç‚¹</span></span><br><span class="line">    handler(currentVertex)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * dfs-&gt;æ·±åº¦ä¼˜å…ˆ</span></span><br><span class="line"><span class="comment"> * é‡‡ç”¨é€’å½’çš„å½¢å¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">Graph.prototype.dfs = <span class="function"><span class="keyword">function</span> (<span class="params">initV, handler</span>) </span>&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * é€’å½’æ–¹æ³•ï¼Œç½®æˆç°è‰²ï¼Œç„¶åéå†ï¼Œå¤„ç†ï¼Œç½®æˆé»‘è‰²</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> dfsVisit = <span class="function">(<span class="params">currentVertex, colors, handler</span>) =&gt;</span> &#123;</span><br><span class="line">    colors[currentVertex] = <span class="string">'G'</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¤„ç†è¯¥ç‚¹</span></span><br><span class="line">    handler(currentVertex)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> currentEdges = <span class="keyword">this</span>.edge[currentVertex]</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, v; v = currentEdges[i++]; ) &#123;</span><br><span class="line">      <span class="keyword">if</span> (colors[v] !== <span class="string">'W'</span>) &#123;</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      dfsVisit(v, colors, handler)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    colors[currentVertex] = <span class="string">'B'</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è·å–é¢œè‰²</span></span><br><span class="line">  <span class="keyword">const</span> colors = <span class="keyword">this</span>.initializeColor()</span><br><span class="line">  <span class="comment">// å¼€å¯éå†</span></span><br><span class="line">  dfsVisit(initV, colors, handler)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> graph = <span class="keyword">new</span> Graph()</span><br><span class="line"></span><br><span class="line">graph.addVertex(<span class="string">'A'</span>)</span><br><span class="line">graph.addVertex(<span class="string">'B'</span>)</span><br><span class="line">graph.addVertex(<span class="string">'C'</span>)</span><br><span class="line">graph.addVertex(<span class="string">'D'</span>)</span><br><span class="line">graph.addVertex(<span class="string">'E'</span>)</span><br><span class="line">graph.addVertex(<span class="string">'F'</span>)</span><br><span class="line">graph.addVertex(<span class="string">'G'</span>)</span><br><span class="line">graph.addVertex(<span class="string">'H'</span>)</span><br><span class="line">graph.addVertex(<span class="string">'I'</span>)</span><br><span class="line"></span><br><span class="line">graph.addEdge(<span class="string">'A'</span>, <span class="string">'B'</span>)</span><br><span class="line">graph.addEdge(<span class="string">'A'</span>, <span class="string">'C'</span>)</span><br><span class="line">graph.addEdge(<span class="string">'A'</span>, <span class="string">'D'</span>)</span><br><span class="line">graph.addEdge(<span class="string">'C'</span>, <span class="string">'D'</span>)</span><br><span class="line">graph.addEdge(<span class="string">'C'</span>, <span class="string">'G'</span>)</span><br><span class="line">graph.addEdge(<span class="string">'D'</span>, <span class="string">'G'</span>)</span><br><span class="line">graph.addEdge(<span class="string">'D'</span>, <span class="string">'H'</span>)</span><br><span class="line">graph.addEdge(<span class="string">'B'</span>, <span class="string">'E'</span>)</span><br><span class="line">graph.addEdge(<span class="string">'B'</span>, <span class="string">'F'</span>)</span><br><span class="line">graph.addEdge(<span class="string">'E'</span>, <span class="string">'I'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(graph.toString())</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> bfsList = []</span><br><span class="line">graph.bfs(<span class="string">'A'</span>, v =&gt; bfsList.push(v))</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'bfsList'</span>, bfsList)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dfsList = []</span><br><span class="line">graph.dfs(<span class="string">'A'</span>, v =&gt; dfsList.push(v))</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'dfsList'</span>, dfsList)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>jså®ç°ç®€æ˜“BinarySearchTree</title>
      <link href="/2019/11/11/js%E5%AE%9E%E7%8E%B0%E7%AE%80%E6%98%93BinarySearchTree/"/>
      <url>/2019/11/11/js%E5%AE%9E%E7%8E%B0%E7%AE%80%E6%98%93BinarySearchTree/</url>
      
        <content type="html"><![CDATA[<p>äºŒå‰æœç´¢æ ‘,<em>äºŒåˆ†æŸ¥æ‰¾æ³•</em>ï¼Œä»–å°†æ•°ç»„çš„è¿™ç§ç‰¹æ€§ï¼Œåº”ç”¨åˆ°äº†æ•°ç»„ä¸Šï¼Œä¸»è¦æ˜¯æ•°ç»„åœ¨é¢‘ç¹å¢åˆ å…ƒç´ æ—¶ï¼Œå°¤å…¶æ˜¯å¯¹äºæœ‰é¡ºåºçš„å…ƒç´ ï¼Œä»–ä¼šç§»åŠ¨å¤§é‡çš„å…ƒç´ ï¼Œä»è€Œé€ æˆæ€§èƒ½çš„ä¸‹é™ï¼Œç”±æ­¤å°±æœ‰äº†åˆ©ç”¨é“¾è¡¨çš„æƒ³æ³•ï¼Œä½†æ˜¯åˆä¸ºäº†èƒ½æœ‰äºŒåˆ†æœç´¢æ³•çš„ç‰¹æ€§ï¼Œæ‰€ä»¥å°±ä»¥äºŒåˆ†æœç´¢æ³•ç±»ä¼¼çš„é¡ºåºæ’åˆ—ä¸‹æ¥</p><p>å·¦ä¾§æ˜¯å°äºçˆ¶èŠ‚ç‚¹çš„æ•°æ®ï¼Œå³ä¾§æ˜¯å¤§äºçˆ¶èŠ‚ç‚¹çš„æ•°æ®ï¼Œä¹Ÿå³äºŒåˆ†çš„ç‰¹æ€§</p><h2 id="æ³¨æ„ç‚¹"><a href="#æ³¨æ„ç‚¹" class="headerlink" title="æ³¨æ„ç‚¹"></a>æ³¨æ„ç‚¹</h2><h3 id="æ’å…¥"><a href="#æ’å…¥" class="headerlink" title="æ’å…¥"></a>æ’å…¥</h3><p>è¦æŒ‰ç…§ç‰¹æ€§æŸ¥æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„ä½ç½®ï¼Œè¿›è¡Œæ’å…¥</p><h3 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h3><p>æ¶‰åŠåˆ°æ›¿è¡¥çš„å…ƒç´ ï¼Œå¯ä½¿ç”¨<strong>å‰é©±</strong>ï¼Œæˆ–è€…æ˜¯<strong>åç»§</strong>æ¥è¿›è¡Œæ›¿æ¢ï¼Œä½†æ˜¯è¿™é‡Œè¦æ³¨æ„æ‰¾åˆ°å‰é©±/åç»§å…ƒç´ çš„æ—¶å€™ï¼Œå¯¹å…¶ä»–çš„å…ƒç´ æ›´æ”¹å…¶æŒ‚è½½çš„çˆ¶èŠ‚ç‚¹çš„ä½ç½®ï¼Œä¹Ÿå°±æ˜¯è‡ªåŠ¨å˜æ¢ä½ç½®ã€‚</p><h3 id="å¤±è¡¡"><a href="#å¤±è¡¡" class="headerlink" title="å¤±è¡¡"></a>å¤±è¡¡</h3><p>å½“æ’å…¥æ•°æ®æ—¶ï¼Œä¼šäº§ç”Ÿå¤±è¡¡ç°è±¡ï¼Œå³ä¸€ä¾§æ ‘ç‰¹åˆ«é•¿ï¼Œå¦ä¸€ä¾§å¾ˆçŸ­ï¼Œæ­¤æ—¶æ€§èƒ½ä¼šæ€¥å‰§ä¸‹é™ï¼ŒBSTä¹Ÿå°±å˜æˆäº†ä¸€ä¸ªé“¾è¡¨ï¼Œè§£å†³æ–¹æ³•æœ‰ä¸¤ç§</p><ul><li>AVLæ ‘ï¼ˆç”¨çš„ä¸å¤šï¼‰</li><li>çº¢é»‘æ ‘ï¼ˆæ¯”è¾ƒæ™®éï¼‰</li></ul><h3 id="çº¢é»‘æ ‘ï¼ˆè§£å†³å¤±è¡¡çš„æ–¹å¼ï¼‰"><a href="#çº¢é»‘æ ‘ï¼ˆè§£å†³å¤±è¡¡çš„æ–¹å¼ï¼‰" class="headerlink" title="çº¢é»‘æ ‘ï¼ˆè§£å†³å¤±è¡¡çš„æ–¹å¼ï¼‰"></a>çº¢é»‘æ ‘ï¼ˆè§£å†³å¤±è¡¡çš„æ–¹å¼ï¼‰</h3><p>çº¢é»‘æ ‘çš„åŸç†å°±æ˜¯è®²æ¯ä¸€ä¸ªèŠ‚ç‚¹åˆ†ä¸ºçº¢/é»‘è¿™ä¸¤ç§å½¢æ€çš„èŠ‚ç‚¹ï¼Œæ›´å…·ä¸€å®šçš„è§„å¾‹ä¸‹ï¼Œå°±å°½å¯èƒ½çš„ä¿è¯äº†æ­¤æ ‘æ˜¯ä¸€é¢—å°½å¯èƒ½å¹³è¡¡çš„æ•°ï¼ˆå¯èƒ½ä¼šæœ‰çœ‹èµ·æ¥æœ‰ç‚¹å¤±è¡¡ï¼Œä½†å¹¶ä¸è¿èƒŒè§„åˆ™ï¼Œå½“åœ¨æ’å…¥æŸä¸€ç§å¶å­æ—¶ï¼Œç«‹é©¬å›è°ƒæ•´å›æ¥ï¼‰</p><ul><li>å·¦æ—‹è½¬</li><li>å³æ—‹è½¬</li></ul><p>å…¶ä¸­ï¼Œçº¢é»‘æ ‘ä¿è¯ä»¥ä¸‹è¿™äº”æ¡åŸåˆ™ï¼Œå³å¯æœ€å¤§é™åº¦ä¿è¯å¹³è¡¡</p><ol><li>æ¯ä¸ªèŠ‚ç‚¹ä¸æ˜¯çº¢è‰²å°±æ˜¯é»‘è‰²</li><li>æ ¹èŠ‚ç‚¹æ€»æ˜¯é»‘è‰²çš„</li><li>èŠ‚ç‚¹æ˜¯çº¢è‰²çš„ï¼Œé‚£ä¹ˆä»–æ‰“çš„å­èŠ‚ç‚¹ä¸€å®šæ˜¯é»‘è‰²çš„</li><li>æ¯ä¸ªå¶å­èŠ‚ç‚¹ï¼ˆNILï¼‰å¿…é¡»æ˜¯é»‘è‰²ï¼ˆæ­¤å¤„æŒ‡null,â€˜ä¸å­˜åœ¨â€™çš„èŠ‚ç‚¹ï¼Œåªè¦æœ‰å€¼ï¼Œå°±ä¸èƒ½ç®—å¶å­èŠ‚ç‚¹ï¼‰ï¼Œå¹¶ä¸”ä¸èƒ½æœ‰ä¸¤ä¸ªè¿ç»­çš„çº¢è‰²</li><li>ä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹æˆ–è€…ç©ºèŠ‚ç‚¹çš„è·ç¦»ï¼ŒåŒ…å«ç›¸åŒæ•°ç›®çš„é»‘è‰²èŠ‚ç‚¹</li></ol><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Node</span> (<span class="params">key</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.key = key</span><br><span class="line">  <span class="keyword">this</span>.left = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">this</span>.right = <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">BinarySearchTree</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.root = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ’å…¥å…ƒç´ </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">BinarySearchTree.prototype.insert = <span class="function"><span class="keyword">function</span> (<span class="params">key</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> newNode = <span class="keyword">new</span> Node(key)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¦‚æœå½“å‰æ ‘ç©º</span></span><br><span class="line">  <span class="keyword">if</span> (!<span class="keyword">this</span>.root) &#123;</span><br><span class="line">    <span class="keyword">this</span>.root = newNode</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¯»æ‰¾é€‚åˆçš„ä½ç½®æ’å…¥</span></span><br><span class="line">  <span class="keyword">this</span>.insertNode(<span class="keyword">this</span>.root, newNode)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å†…éƒ¨æ’å…¥ç»“ç‚¹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">BinarySearchTree.prototype.insertNode = <span class="function"><span class="keyword">function</span> (<span class="params">root, newNode</span>) </span>&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * åˆ¤æ–­å½“å‰çš„rootæ‰€ä»£è¡¨çš„å€¼ï¼Œå’Œå½“å‰å…ƒç´ çš„keyçš„æƒ…å†µ</span></span><br><span class="line"><span class="comment">   * å°äºkey,æ’å…¥å·¦ä¾§ï¼š1.æ— å·¦ç»“ç‚¹ï¼Œç›´æ¥æ›¿æ¢ï¼Œå¦åˆ™ç»§ç»­é€’å½’æ’å…¥</span></span><br><span class="line"><span class="comment">   * å¤§äºkey,æ’å…¥å³ä¾§ï¼š1.æ— å³ç»“ç‚¹ï¼Œç›´æ¥æ›¿æ¢ï¼Œå¦åˆ™ç»§ç»­é€’å½’æ’å…¥</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">if</span> (newNode.key &lt; root.key) &#123;</span><br><span class="line">    <span class="keyword">if</span> (root.left === <span class="literal">null</span>) &#123;</span><br><span class="line">      root.left = newNode</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.insertNode(root.left, newNode)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (newNode.key &gt; root.key) &#123;</span><br><span class="line">    <span class="keyword">if</span> (root.right === <span class="literal">null</span>) &#123;</span><br><span class="line">      root.right = newNode</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.insertNode(root.right, newNode)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (newNode.key === root.key) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å…ˆåºéå†</span></span><br><span class="line"><span class="comment"> * preOrderTraversal</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">BinarySearchTree.prototype.preOrderTraversal = <span class="function"><span class="keyword">function</span> (<span class="params">handle</span>) </span>&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * å…ˆåºéå†èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> preOrderTraversalNode = <span class="function"><span class="keyword">function</span> (<span class="params">root, handle</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (root !== <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="comment">// å…ˆåºå¤„ç†</span></span><br><span class="line">      handle(root.key)</span><br><span class="line"></span><br><span class="line">      preOrderTraversalNode(root.left, handle)</span><br><span class="line"></span><br><span class="line">      preOrderTraversalNode(root.right, handle)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ä»æ ¹èŠ‚ç‚¹å¼€å§‹éå†</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  preOrderTraversalNode(<span class="keyword">this</span>.root, handle)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¸­åºéå†</span></span><br><span class="line"><span class="comment"> * midOrderTraversal</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">BinarySearchTree.prototype.midOrderTraversal = <span class="function"><span class="keyword">function</span> (<span class="params">handle</span>) </span>&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ä¸­åºéå†èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> midOrderTraversalNode = <span class="function"><span class="keyword">function</span> (<span class="params">root, handle</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (root !== <span class="literal">null</span>) &#123;</span><br><span class="line">      midOrderTraversalNode(root.left, handle)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// ä¸­åºå¤„ç†</span></span><br><span class="line">      handle(root.key)</span><br><span class="line"></span><br><span class="line">      midOrderTraversalNode(root.right, handle)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  midOrderTraversalNode(<span class="keyword">this</span>.root, handle)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ååºéå†</span></span><br><span class="line"><span class="comment"> * postOrderTraversal</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">BinarySearchTree.prototype.postOrderTraversal = <span class="function"><span class="keyword">function</span> (<span class="params">handle</span>) </span>&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ååºéå†èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> postOrderTraversalNode = <span class="function"><span class="keyword">function</span> (<span class="params">root, handle</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (root !== <span class="literal">null</span>) &#123;</span><br><span class="line">      postOrderTraversalNode(root.left, handle)</span><br><span class="line"></span><br><span class="line">      postOrderTraversalNode(root.right, handle)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// ååºå¤„ç†</span></span><br><span class="line">      handle(root.key)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  postOrderTraversalNode(<span class="keyword">this</span>.root, handle)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯»æ‰¾æœ€å¤§å€¼</span></span><br><span class="line"><span class="comment"> * éå†åˆ°æœ€å³ä¾§</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">BinarySearchTree.prototype.max = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> node = <span class="keyword">this</span>.root</span><br><span class="line">  <span class="keyword">let</span> key = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (node !== <span class="literal">null</span>) &#123;</span><br><span class="line">    key = node.key</span><br><span class="line">    node = node.right</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> key</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯»æ‰¾æœ€å°å€¼</span></span><br><span class="line"><span class="comment"> * éå†åˆ°æœ€å·¦ä¾§</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">BinarySearchTree.prototype.min = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> node = <span class="keyword">this</span>.root</span><br><span class="line">  <span class="keyword">let</span> key = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (node !== <span class="literal">null</span>) &#123;</span><br><span class="line">    key = node.key</span><br><span class="line">    node = node.left</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> key</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯»æ‰¾åˆ°ç‰¹å®šçš„å€¼</span></span><br><span class="line"><span class="comment"> * ç”±äºè¿™é‡Œçœç•¥äº†dataæ•°æ®ï¼ŒçœŸå®æƒ…å†µè¿”å›éœ€è¦æ•°æ®å³å¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">BinarySearchTree.prototype.search = <span class="function"><span class="keyword">function</span> (<span class="params">key</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.root === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> node = <span class="keyword">this</span>.root</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (node !== <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (key &lt; node.key) &#123; <span class="comment">// å°äºæ ¹ï¼Œåœ¨å·¦ä¾§æ ‘å†…</span></span><br><span class="line">      node = node.left</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (key &gt; node.key) &#123; <span class="comment">// å¤§äºæ ¹ï¼Œåœ¨å³ä¾§æ ‘å†…</span></span><br><span class="line">      node = node.right</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123; <span class="comment">// ç­‰äºæ ¹ï¼Œå¯»æ‰¾åˆ°è¯¥å…ƒç´ </span></span><br><span class="line">      <span class="keyword">return</span> node.key</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * æ‰¾åˆ°å¶å­èŠ‚ç‚¹å¹¶æœªæ‰¾åˆ°ï¼Œè¯´æ˜ä¸å­˜åœ¨</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">BinarySearchTree.prototype.delete = <span class="function"><span class="keyword">function</span> (<span class="params">key</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ä¿å­˜åˆ é™¤èŠ‚ç‚¹çš„æ¡ä»¶</span></span><br><span class="line">  <span class="keyword">let</span> current = <span class="keyword">this</span>.root</span><br><span class="line">  <span class="keyword">let</span> parent = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">let</span> childrenDirection = <span class="string">'left'</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * å¾ªç¯ï¼Œæ‰¾åˆ°è¦åˆ é™¤çš„å…ƒç´ </span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">while</span> (current.key !== key) &#123;</span><br><span class="line">    parent = current</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (key &lt; current.key) &#123;</span><br><span class="line">      childrenDirection = <span class="string">'left'</span></span><br><span class="line">      current = current.left</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      childrenDirection = <span class="string">'right'</span></span><br><span class="line">      current = current.right</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœæ‰¾åˆ°å¶å­èŠ‚ç‚¹è¿˜æ²¡æœ‰ï¼Œåˆ™é€€å‡º</span></span><br><span class="line">    <span class="keyword">if</span> (current === <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ­¤æ—¶currentä¸ºè¦åˆ é™¤çš„å…ƒç´ </span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * currentä¸ºä¸€ä¸ªå¶å­èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">if</span> (current.left === <span class="literal">null</span> &amp;&amp; current.right === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="comment">// å½“å‰åˆ é™¤çš„æ˜¯æ ¹èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span> (current === <span class="keyword">this</span>.root) &#123;</span><br><span class="line">      <span class="keyword">this</span>.root = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ é™¤æ­¤å¶å­èŠ‚ç‚¹</span></span><br><span class="line">    parent[childrenDirection] = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * currentä¸ºä¸€ä¸ªå•å­©å­èŠ‚ç‚¹,åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹å­˜åœ¨</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">if</span> (current.left === <span class="literal">null</span> || current.right === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="comment">// å½“å‰åˆ é™¤çš„æ˜¯æ ¹èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span> (current === <span class="keyword">this</span>.root) &#123;</span><br><span class="line">      <span class="keyword">this</span>.root = current.left ? current.left : current.right</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ é™¤å•å­©å­çš„çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">    parent[childrenDirection] = current.left ? current.left : current.right</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * è·å–ä¸€ä¸ªèŠ‚ç‚¹çš„åç»§èŠ‚ç‚¹ï¼Œå¹¶æŒ‚è½½ç›¸å…³èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> getSucceedNode = <span class="function"><span class="keyword">function</span> (<span class="params">deleteNode</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> parent = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">let</span> current = deleteNode.right</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (current.left !== <span class="literal">null</span>) &#123;</span><br><span class="line">      parent = current</span><br><span class="line">      current = current.left</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ­¤æ—¶currentæ˜¯è¦åˆ é™¤çš„åç»§</span></span><br><span class="line"><span class="comment">     * 1.æ²¡æœ‰parent,ä¸éœ€è¦å¤„ç†å…¶ä»–èŠ‚ç‚¹ï¼ŒdeleteNode.right</span></span><br><span class="line"><span class="comment">     * 2.æœ‰parent,éœ€è¦å¤„ç†å…¶ä»–èŠ‚ç‚¹ï¼ŒdeleteNode.right.left.left.left</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">if</span> (parent !== <span class="literal">null</span>) &#123;</span><br><span class="line">      parent.left = current.right</span><br><span class="line">      current.right = parent</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    current.left = deleteNode.left</span><br><span class="line">    <span class="keyword">return</span> current</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * currentåšä¸€ä¸ªåŒå­©å­èŠ‚ç‚¹ï¼Œæ­¤å¤„ç»Ÿä¸€ä½¿ç”¨åç»§å»ä»£ç†</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">let</span> succeedNode = getSucceedNode(current)</span><br><span class="line">  <span class="keyword">if</span> (current === <span class="keyword">this</span>.root) &#123;</span><br><span class="line">    <span class="keyword">this</span>.root = succeedNode</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  parent[childrenDirection] = succeedNode</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> bst = <span class="keyword">new</span> BinarySearchTree()</span><br><span class="line">bst.insert(<span class="number">10</span>)</span><br><span class="line">bst.insert(<span class="number">5</span>)</span><br><span class="line">bst.insert(<span class="number">15</span>)</span><br><span class="line">bst.insert(<span class="number">3</span>)</span><br><span class="line">bst.insert(<span class="number">7</span>)</span><br><span class="line">bst.insert(<span class="number">12</span>)</span><br><span class="line"><span class="built_in">console</span>.log(bst)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> preOrderTraversalList = []</span><br><span class="line">bst.preOrderTraversal(<span class="function"><span class="params">key</span> =&gt;</span> preOrderTraversalList.push(key))</span><br><span class="line"><span class="built_in">console</span>.log(preOrderTraversalList)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> midOrderTraversalList = []</span><br><span class="line">bst.midOrderTraversal(<span class="function"><span class="params">key</span> =&gt;</span> midOrderTraversalList.push(key))</span><br><span class="line"><span class="built_in">console</span>.log(midOrderTraversalList)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> postOrderTraversalList = []</span><br><span class="line">bst.postOrderTraversal(<span class="function"><span class="params">key</span> =&gt;</span> postOrderTraversalList.push(key))</span><br><span class="line"><span class="built_in">console</span>.log(postOrderTraversalList)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'max'</span>, bst.max())</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'min'</span>, bst.min())</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(bst.search(<span class="number">10</span>))</span><br><span class="line"><span class="built_in">console</span>.log(bst.search(<span class="number">12</span>))</span><br><span class="line"><span class="built_in">console</span>.log(bst.search(<span class="number">11</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">bst.delete(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result = []</span><br><span class="line">bst.preOrderTraversal(<span class="function"><span class="params">key</span> =&gt;</span> result.push(key))</span><br><span class="line"><span class="built_in">console</span>.log(result)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>jså®ç°ç®€æ˜“HashTable</title>
      <link href="/2019/11/07/js%E5%AE%9E%E7%8E%B0%E7%AE%80%E6%98%93HashTable/"/>
      <url>/2019/11/07/js%E5%AE%9E%E7%8E%B0%E7%AE%80%E6%98%93HashTable/</url>
      
        <content type="html"><![CDATA[<p>å“ˆå¸Œè¡¨ï¼Œæ—¢æƒ³åº”ç”¨æ•°ç»„å–æ•°æ®çš„æ–¹ä¾¿ï¼Œä½†æ˜¯æœ‰æƒ³é¿å…åœ¨æ“ä½œæ•°ç»„çš„æ—¶å€™ï¼Œç”±äºæŒ‰ç…§é¡ºåºï¼Œæ‰€ä»¥å¯¼è‡´æ•°ç»„å†…ä¼šé¢‘ç¹çš„å¢åŠ ï¼Œåˆ é™¤å…ƒç´ ï¼Œæ‰€ä»¥æ•°ç»„å†…çš„æ•°æ®ä¼šé¢‘ç¹çš„å˜æ¢åŸæœ‰çš„ä½ç½®ï¼Œè¯¸å¤šçš„ä¸åŒï¼Œæ‰€ä»¥è¯ç”Ÿå‡ºäº†hashTableè¿™ç§æ•°æ®ç»“æ„</p><p>å…¶æœ¬èº«å°±æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œåªä¸è¿‡è¿™ä¸ªæ•°ç»„ä¸åœ¨ä½¿ç”¨åŸæœ‰çš„ä¸‹æ ‡å€¼æ¥æ ‡è¯†å…ƒç´ ï¼Œè€Œæ˜¯é‡‡ç”¨æ¯ä¸€ä¸ªæ•°æ®çš„key,é€šè¿‡ä¸€ä¸ªhashå‡½æ•°æ¥è½¬æ¢ä¸ºä¸‹æ ‡å€¼ï¼Œå¯¹å¤–ç•Œæ¥è¯´ï¼Œå°±æ˜¯ä½¿ç”¨keyæ¥å°†æ•°æ®å­˜å‚¨åœ¨æ•°ç»„ä¸­</p><h2 id="Hashå‡½æ•°-ç”Ÿæˆç¼–ç -å‹ç¼©-å“ˆå¸ŒåŒ–"><a href="#Hashå‡½æ•°-ç”Ÿæˆç¼–ç -å‹ç¼©-å“ˆå¸ŒåŒ–" class="headerlink" title="Hashå‡½æ•°(ç”Ÿæˆç¼–ç  + å‹ç¼©,å“ˆå¸ŒåŒ–)"></a>Hashå‡½æ•°(ç”Ÿæˆç¼–ç  + å‹ç¼©,å“ˆå¸ŒåŒ–)</h2><p>hashå‡½æ•°å°±æ˜¯å°†æ‰€å¯¹åº”çš„key,è½¬æ¢ä¸ºæ‰€å¯¹åº”çš„ç›¸å¯¹å”¯ä¸€çš„ä¸€ä¸ªå‡½æ•°å€¼ï¼Œå…¶é€šå¸¸é‡‡ç”¨çš„æ˜¯å¦‚ä¸‹çš„æ–¹å¼è¿›è¡Œè½¬æ¢</p><h3 id="é‡‡ç”¨è´¨æ•°"><a href="#é‡‡ç”¨è´¨æ•°" class="headerlink" title="é‡‡ç”¨è´¨æ•°"></a>é‡‡ç”¨è´¨æ•°</h3><p>åœ¨æ•°è®ºä¸­çš„ç ”ç©¶å‘ç°ï¼Œä½¿ç”¨è´¨æ•°ä¼šæœ‰å¾ˆå¥½çš„å”¯ä¸€æ€§ï¼Œç­‰å…¶ä»–çš„ç‰¹æ€§</p><h3 id="éœçº³æ³•åˆ™ï¼ˆç§¦ä¹éŸ¶ç®—æ³•ï¼‰"><a href="#éœçº³æ³•åˆ™ï¼ˆç§¦ä¹éŸ¶ç®—æ³•ï¼‰" class="headerlink" title="éœçº³æ³•åˆ™ï¼ˆç§¦ä¹éŸ¶ç®—æ³•ï¼‰"></a>éœçº³æ³•åˆ™ï¼ˆç§¦ä¹éŸ¶ç®—æ³•ï¼‰</h3><blockquote><p>ä¸æˆ‘å›½å¤ä»£ï¼Œå°±æœ‰äº†ç§¦ä¹éŸ¶ç®—æ³•ï¼ŒåŸºæœ¬æ€è·¯ä¸éœçº³æ³•åˆ™ä¸€è‡´</p></blockquote><p>ä¹Ÿå°±æ˜¯å¤šé¡¹å¼çš„åˆ†è§£ã€‚æ™®é€šå¤šé¡¹å¼ï¼ŒO(n^2)ä¹˜æ³•ï¼ŒO(n)åŠ æ³•ï¼Œæ”¹è¿›åO(n)ä¹˜æ³•ï¼ŒO(n)åŠ æ³•ã€‚</p><h3 id="ä½¿ç”¨åŒä¸€ç¼–ç æ ¼å¼"><a href="#ä½¿ç”¨åŒä¸€ç¼–ç æ ¼å¼" class="headerlink" title="ä½¿ç”¨åŒä¸€ç¼–ç æ ¼å¼"></a>ä½¿ç”¨åŒä¸€ç¼–ç æ ¼å¼</h3><p>åœ¨javascriptä¸­ï¼Œä½¿ç”¨unicode,å³<code>charCodeAt()</code></p><h3 id="å‹ç¼©ï¼Œå“ˆå¸ŒåŒ–"><a href="#å‹ç¼©ï¼Œå“ˆå¸ŒåŒ–" class="headerlink" title="å‹ç¼©ï¼Œå“ˆå¸ŒåŒ–"></a>å‹ç¼©ï¼Œå“ˆå¸ŒåŒ–</h3><p>é€šå¸¸ç”Ÿæˆçš„æ•°ç»„ä¸‹æ ‡ï¼Œå¯èƒ½å‡ åä¸‡ï¼Œä¸Šç™¾ä¸‡ï¼Œä½†æ˜¯æ•°ç»„å¹¶æœªæœ‰é‚£ä¹ˆå¤šå…ƒç´ ï¼Œæ‰€ä»¥é€‚å½“å‹ç¼©å³å¯ã€‚ï¼ˆè™½ç„¶è¿˜æ˜¯æœ‰å¯èƒ½å‹ç¼©ï¼Œä½†æ˜¯ç›¸åŒçš„æ¦‚ç‡å¤§å¤§å˜å°ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¤§éƒ¨åˆ†é‡‡ç”¨37è¿™ä¸ªè´¨æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str e.g</span></span><br><span class="line"><span class="comment"> * s -&gt; 115</span></span><br><span class="line"><span class="comment"> * t -&gt; 116</span></span><br><span class="line"><span class="comment"> * r -&gt; 114</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> code = <span class="number">114</span> * <span class="number">37</span>^<span class="number">2</span> + <span class="number">116</span> * <span class="number">37</span>^<span class="number">1</span> + <span class="number">114</span> * <span class="number">37</span>^<span class="number">0</span></span><br><span class="line">      code = ((<span class="number">114</span> * <span class="number">37</span>) + <span class="number">116</span>) * <span class="number">37</span> + <span class="number">114</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é‡‡ç”¨å‹ç¼©åŒ–</span></span><br><span class="line"><span class="comment">// ä½¿ç”¨å®¹é‡å–æ¨¡æ“ä½œå³å¯</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> hashIndex = code &amp; size</span><br></pre></td></tr></table></figure><h2 id="è§£å†³å†²çª"><a href="#è§£å†³å†²çª" class="headerlink" title="è§£å†³å†²çª"></a>è§£å†³å†²çª</h2><p>åœ¨è¿›è¡Œhashå‡½æ•°çš„æ—¶å€™ï¼Œå°½å¯èƒ½çš„ä¿è¯æ¯ä¸€ä¸ªkeyæ‰€å¯¹åº”çš„hashå€¼æ˜¯å”¯ä¸€çš„ï¼Œä½†æ˜¯è¿˜æ˜¯ä¼šæœ‰å†²çªçš„æƒ…å†µï¼Œè¿™é‡Œä¸»è¦æœ‰ä¸¤ç§è§£å†³æ–¹å¼</p><h3 id="é“¾åœ°å€æ³•"><a href="#é“¾åœ°å€æ³•" class="headerlink" title="é“¾åœ°å€æ³•"></a>é“¾åœ°å€æ³•</h3><p>hashTableä¸­æ¯ä¸€ä¸ªä½ç½®ä¸å­˜å‚¨å…·ä½“çš„æ•°å€¼ï¼Œè€Œæ˜¯é‡‡ç”¨ä¸€ä¸ªæ•°ç»„/é“¾è¡¨ï¼Œä¾æ¬¡æ”¾å…¥æ•°æ®ï¼Œå½“æœ‰å†²çªå‘ç”Ÿæ—¶ç´§è·Ÿåœ¨åé¢å³å¯ï¼Œè¿™æ ·çš„æ–¹å¼å¯¹äºè§£å†³å†²çªæ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œå¯¹äºå‘ç”Ÿå†²çªæ—¶ï¼Œæ•°æ®å‹å…¥ä½ç½®ä¹Ÿæ˜¯æœ‰è®²ç©¶çš„</p><p>å‹å…¥å¤´éƒ¨ï¼Œå»ºè®®é‡‡ç”¨é“¾è¡¨ï¼Œæ¯”å¦‚æœ€æ–°å‹å…¥çš„æ•°æ®æ˜¯å˜åŒ–æœ€é¢‘ç¹çš„ï¼Œ</p><p>å‹å…¥å°¾éƒ¨ï¼Œå»ºè®®é‡‡ç”¨æ•°ç»„/é“¾è¡¨,æ¯”å¦‚å¾®ä¿¡æ–°å¢çš„å¥½å‹è”ç³»æ˜¯æ¯”è¾ƒå°‘çš„ï¼Œç›¸å¯¹äºè€æœ‹å‹ã€‚</p><h3 id="å¼€æ”¾åœ°å€æ³•"><a href="#å¼€æ”¾åœ°å€æ³•" class="headerlink" title="å¼€æ”¾åœ°å€æ³•"></a>å¼€æ”¾åœ°å€æ³•</h3><ul><li>çº¿æ€§æ¢æµ‹</li><li>äºŒæ¬¡æ¢æµ‹</li><li>å†å“ˆå¸Œæ³•</li></ul><p>ä¹Ÿå³å‘ç”Ÿå†²çªçš„æ—¶å€™ï¼Œé‡‡ç”¨é€‚å½“çš„åŸåˆ™å¯»æ‰¾ä¸‹ä¸€ä¸ªä½ç½®ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼å¯èƒ½ä¼šé€ æˆèšé›†çš„ç°è±¡ï¼Œæ¯”å¦‚çº¿æ€§æ¢æµ‹æ³•ï¼Œå¯¹äºä¸€ç»„è¿ç»­çš„æ•°æ®ï¼Œå†²çªæ”¾ä¸‹ä¸€ä½ç­‰ï¼Œè¿™æ ·ä¸€æ¥å°±å¯èƒ½ä¼šæœ‰ä¸€æ®µç©ºé—´æ˜¯é›†ä¸­å­˜åœ¨æ•°æ®çš„ï¼Œè¿™å¯¹å“ˆå¸Œè¡¨æ€§èƒ½æ˜¯ä¼šæœ‰ä¸€å®šç¨‹åº¦çš„å½±å“ã€‚</p><p>åœ¨æŸ¥æ‰¾æ•°æ®çš„æ—¶å€™ï¼Œè¦æŒ‰ç…§æ”¾æ•°æ®çš„æ–¹å¼ï¼Œå†æ¬¡æŸ¥æ‰¾ç›´åˆ°æ‰¾åˆ°nullä¸ºæ­¢ï¼Œå¹¶ä¸”å½“æœ‰æ•°æ®åˆ é™¤çš„æ—¶å€™ï¼Œä¸èƒ½ç½®ä¸ºnull,è¿™ä¼šå¯¹åé¢çš„æ•°æ®äº§ç”Ÿå½±å“ï¼Œåº”è¯¥ç”¨å…¶ä»–æ ‡å¿—æ¥è¡¨ç¤ºã€‚</p><h3 id="æ‰¿è½½å› å­ï¼ˆloaderFactorï¼‰"><a href="#æ‰¿è½½å› å­ï¼ˆloaderFactorï¼‰" class="headerlink" title="æ‰¿è½½å› å­ï¼ˆloaderFactorï¼‰"></a>æ‰¿è½½å› å­ï¼ˆloaderFactorï¼‰</h3><p>è¡¨ç¤ºå½“å‰çš„å…ƒç´ æ‰€å çš„ä½ç½®ï¼Œ<code>count / limit</code>ï¼Œé“¾åœ°å€æ³•å¯è¶…è¿‡1ï¼Œå› ä¸ºå®é™…çš„é™åˆ¶å¹¶æ²¡æœ‰ç››æ”¾å…ƒç´ ã€‚å¯¹äºå¼€æ”¾åœ°å€æ³•ï¼Œ<code>0 &gt; loadeFactor &gt; 1</code>,å› ä¸ºä»–å®é™…æ‰¿è½½çš„å…ƒç´ éƒ½æ˜¯æ”¾åœ¨å®¹å™¨ä¸­çš„</p><p><code>loaderFactory &lt; 0.25</code>ï¼Œè¦è¿›è¡Œ<strong>ç¼©å®¹</strong>æ“ä½œï¼Œæ­¤æ—¶å…ƒç´ è¿‡å°‘ï¼Œä¹Ÿä¼šå½±å“æ€§èƒ½ã€‚</p><p><code>0.75 &lt; loaderFactory</code>ï¼Œè¦è¿›è¡Œ<strong>æ‰©å®¹</strong>æ“ä½œï¼Œæ­¤æ—¶å…ƒç´ è¿‡å¤šï¼Œä¹Ÿä¼šå½±å“æ€§èƒ½ã€‚</p><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * hashè¡¨ç»“æ„</span></span><br><span class="line"><span class="comment"> * æ­¤å¤„é‡‡ç”¨é“¾åœ°å€æ³•æ¥è¿›è¡ŒæŸ¥æ‰¾</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">HashTable</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.storage = []</span><br><span class="line">  <span class="keyword">this</span>.count = <span class="number">0</span></span><br><span class="line">  <span class="keyword">this</span>.limit = <span class="number">7</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–è¯¥keyåœ¨hashTableä¸­çš„æ•°ç»„ä¸‹æ ‡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">HashTable.prototype.hashIndex = <span class="function"><span class="keyword">function</span> (<span class="params">key</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> hashCode = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; key.length; i += <span class="number">1</span>) &#123;</span><br><span class="line">    hashCode += <span class="number">37</span> * hashCode + key.charCodeAt(i)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> hashIndex = hashCode % <span class="keyword">this</span>.limit</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> hashIndex</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€šè¿‡keyï¼Œå°†dataæ•°æ®æ”¾å…¥hashTableä¸­</span></span><br><span class="line"><span class="comment"> * å¦‚æœkeyç›¸åŒï¼Œåˆ™ä¼šè¦†ç›–æ•°æ®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">HashTable.prototype.put = <span class="function"><span class="keyword">function</span> (<span class="params">key, data</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 1.è·å–åœ¨hashTableä¸­çš„æ•°ç»„ä¸‹æ ‡</span></span><br><span class="line">  <span class="keyword">const</span> hashIndex = <span class="keyword">this</span>.hashIndex(key)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2.è·å–bucketï¼Œè·å–é“¾</span></span><br><span class="line">  <span class="keyword">let</span> bucket = <span class="keyword">this</span>.storage[hashIndex]</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3.åˆå§‹åŒ–æ“ä½œ</span></span><br><span class="line">  <span class="keyword">if</span> (!bucket) &#123;</span><br><span class="line">    bucket = []</span><br><span class="line">    <span class="keyword">this</span>.storage[hashIndex] = bucket</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> isUpdate = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 4.åˆ¤æ–­æ˜¯å¦æ˜¯ä¿®æ”¹æ“ä½œ</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; bucket.length; i += <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> tuple = bucket[i]</span><br><span class="line">    <span class="keyword">if</span> (tuple[<span class="number">0</span>] === key) &#123;</span><br><span class="line">      tuple[<span class="number">1</span>] = data</span><br><span class="line">      isUpdate = <span class="literal">true</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ­¤æ—¶æ˜¯æ–°å¢æ“ä½œ</span></span><br><span class="line">  <span class="keyword">if</span> (isUpdate === <span class="literal">false</span>) &#123;</span><br><span class="line">    bucket.push([key, data])</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>.count += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ‰©å®¹</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.count &gt; <span class="keyword">this</span>.limit * <span class="number">0.75</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰¾åˆ°æ‰©å¤§2å€åï¼Œæœ€è¿‘çš„ä¸€ä¸ªè´¨æ•°</span></span><br><span class="line">    <span class="keyword">const</span> nextLimit = <span class="keyword">this</span>.nextPrime(<span class="keyword">this</span>.limit * <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">this</span>.resize(nextLimit)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å¾—æŸä¸ªæ•°æ®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">HashTable.prototype.get = <span class="function"><span class="keyword">function</span> (<span class="params">key</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 1.è·å–åœ¨hashTableä¸­çš„æ•°ç»„ä¸‹æ ‡</span></span><br><span class="line">  <span class="keyword">const</span> hashIndex = <span class="keyword">this</span>.hashIndex(key)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2.è·å–bucketï¼Œè·å–é“¾</span></span><br><span class="line">  <span class="keyword">let</span> bucket = <span class="keyword">this</span>.storage[hashIndex]</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!bucket) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿”å›è¯¥æ•°æ®</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; bucket.length; i += <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> tuple = bucket[i]</span><br><span class="line">    <span class="keyword">if</span> (tuple[<span class="number">0</span>] === key) &#123;</span><br><span class="line">      <span class="keyword">return</span> tuple[<span class="number">1</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æœªæ‰¾åˆ°æ•°æ®</span></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ é™¤æŸä¸ªå…ƒç´ </span></span><br><span class="line"><span class="comment"> * è¿”å›åˆ é™¤çš„å…ƒç´ </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">HashTable.prototype.delete = <span class="function"><span class="keyword">function</span> (<span class="params">key</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 1.è·å–åœ¨hashTableä¸­çš„æ•°ç»„ä¸‹æ ‡</span></span><br><span class="line">  <span class="keyword">const</span> hashIndex = <span class="keyword">this</span>.hashIndex(key)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2.è·å–bucketï¼Œè·å–é“¾</span></span><br><span class="line">  <span class="keyword">let</span> bucket = <span class="keyword">this</span>.storage[hashIndex]</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!bucket) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> deleteElement = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; bucket.length; i += <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> tuple = bucket[i]</span><br><span class="line">    <span class="keyword">if</span> (tuple[<span class="number">0</span>] === key) &#123;</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// åˆ é™¤å…ƒç´ </span></span><br><span class="line">      bucket.splice(i, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">      deleteElement = tuple[<span class="number">1</span>]</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!deleteElement) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>.count -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç¼©å®¹,æœ€å°‘å®¹é‡ä¸º7</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.count &lt; <span class="keyword">this</span>.limit * <span class="number">0.25</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰¾åˆ°ç¼©å°2å€åï¼Œæœ€è¿‘çš„ä¸€ä¸ªè´¨æ•°,å¹¶ä¸”ä¸èƒ½å°äº7çš„å®¹é‡</span></span><br><span class="line">    <span class="keyword">let</span> nextLimit = <span class="keyword">this</span>.nextPrime(<span class="built_in">Math</span>.floor( <span class="keyword">this</span>.limit / <span class="number">2</span>))</span><br><span class="line">    nextLimit = nextLimit &lt;= <span class="number">7</span> ? <span class="number">7</span> : nextLimit</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.resize(nextLimit)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> deleteElement</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ”¹å˜å®¹é‡æ“ä½œ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">HashTable.prototype.resize = <span class="function"><span class="keyword">function</span> (<span class="params">size</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> oldStorage = <span class="keyword">this</span>.storage</span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>.storage = []</span><br><span class="line">  <span class="keyword">this</span>.count = <span class="number">0</span></span><br><span class="line">  <span class="keyword">this</span>.limit = size</span><br><span class="line"></span><br><span class="line">  <span class="comment">// éå†oldStorageä¸­æ¯ä¸€bucket,å¹¶ä¾æ¬¡æ·»åŠ è¿‡å»</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; oldStorage.length; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> bucket = oldStorage[i]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!bucket) &#123;</span><br><span class="line">      <span class="keyword">continue</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¾æ¬¡å­˜å…¥</span></span><br><span class="line">    bucket.forEach(<span class="function">(<span class="params">[key, data]</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.put(key, data)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å·¥å…·æ–¹æ³•ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºä¸€ä¸ªè´¨æ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">HashTable.prototype.isPrime = <span class="function"><span class="keyword">function</span> (<span class="params">num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> sqrtNum = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.sqrt(num))</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">2</span>; i &lt;= sqrtNum; i += <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (num % i === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å¾—æœ€ä¸ºç›¸è¿‘çš„è´¨æ•°ï¼Œä¸ºå‘åæŸ¥æ‰¾</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">HashTable.prototype.nextPrime = <span class="function"><span class="keyword">function</span> (<span class="params">num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">while</span> (!<span class="keyword">this</span>.isPrime(num)) &#123;</span><br><span class="line">    num += <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> num</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> hashTable = <span class="keyword">new</span> HashTable()</span><br><span class="line"></span><br><span class="line">hashTable.put(<span class="string">'key1'</span>, <span class="string">'value1'</span>)</span><br><span class="line">hashTable.put(<span class="string">'key2'</span>, <span class="string">'value2'</span>)</span><br><span class="line">hashTable.put(<span class="string">'key1'</span>, <span class="string">'value11'</span>)</span><br><span class="line">hashTable.put(<span class="string">'key3'</span>, <span class="string">'value3'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(hashTable.get(<span class="string">'key1'</span>))</span><br><span class="line"><span class="built_in">console</span>.log(hashTable.get(<span class="string">'key2'</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(hashTable.get(<span class="string">'key3'</span>))</span><br><span class="line">hashTable.delete(<span class="string">'key3'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(hashTable.get(<span class="string">'key3'</span>))</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Promiseç®€å•å®ç°</title>
      <link href="/2019/11/04/Promise%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0/"/>
      <url>/2019/11/04/Promise%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Promise/A+è§„èŒƒæ˜¯Promiseå®ç°çš„å‡†åˆ™ï¼Œè¿™é‡Œåªæ˜¯å‡†å¤‡äº†æœ€åŸºæœ¬çš„ç›¸å…³åŠŸèƒ½</p></blockquote><h1 id="ç®€æ˜“ç‰ˆå¼‚æ­¥å®ç°"><a href="#ç®€æ˜“ç‰ˆå¼‚æ­¥å®ç°" class="headerlink" title="ç®€æ˜“ç‰ˆå¼‚æ­¥å®ç°"></a>ç®€æ˜“ç‰ˆå¼‚æ­¥å®ç°</h1><p>æˆ‘ä»¬éœ€è¦åœ¨Promiseå†…éƒ¨å®šä¹‰æˆ‘ä»¬è¦æ“çºµçš„å¼‚æ­¥æ–¹æ³•ï¼Œå¹¶ä¸”åœ¨thenä¸­ç»™ä»–æ³¨å†Œå›è°ƒï¼Œä¹Ÿå°±æ˜¯å½“æˆ‘ä»¬ä½¿ç”¨resolveçš„æ—¶å€™ï¼Œä»–æ‰ä¼šæ‰§è¡Œå›è°ƒ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyPromise</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.value = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">this</span>.error = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">this</span>.onFulfilled = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">this</span>.onRejected = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">resolve</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.value = value</span><br><span class="line">    <span class="keyword">this</span>.onFulfilled(<span class="keyword">this</span>.value)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">reject</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.error = error</span><br><span class="line">    <span class="keyword">this</span>.onRejected(<span class="keyword">this</span>.error)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  fn(resolve, reject)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyPromise.prototype.then = <span class="function">(<span class="params">onFulfilled, onRejected</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">this</span>.onFulfilled = onFulfilled</span><br><span class="line">  <span class="keyword">this</span>.onRejected = onRejected</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> MyPromise(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// fetch</span></span><br><span class="line">  resolve(data)</span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å½“thenæ³¨å†Œå®Œå›è°ƒä¹‹åï¼Œç­‰å¾…resolveå‡½æ•°æ‰§è¡Œåï¼Œä¼šè‡ªåŠ¨è§¦å‘å›è°ƒ</p><h2 id="å­˜åœ¨çš„é—®é¢˜"><a href="#å­˜åœ¨çš„é—®é¢˜" class="headerlink" title="å­˜åœ¨çš„é—®é¢˜"></a>å­˜åœ¨çš„é—®é¢˜</h2><ol><li>å½“æ‰§è¡ŒåŒæ­¥ä»»åŠ¡çš„æ—¶å€™ï¼Œç”±äºå¼‚æ­¥ä»»åŠ¡è¿˜æ²¡æœ‰è¢«æ³¨å†Œï¼Œä»è€Œå¯¼è‡´äº†å¼‚æ­¥å›è°ƒå°šæœªæ³¨å†Œï¼Œå°±æ‰§è¡Œäº†ï¼ˆé¢ä¸´æŠ¥é”™ç­‰ï¼‰</li><li>å½“å¤šä¸ªPromiseé“¾å¼è°ƒç”¨çš„æ—¶å€™,thené‡Œæ³¨å†Œçš„éƒ½æ˜¯ç¬¬ä¸€ä¸ªPromise,ä½†æ˜¯æˆ‘ä»¬å®é™…æƒ³è¦çš„åšæ³•å´æ˜¯ï¼Œæ¯ä¸€ä¸ªPromiseæ³¨å†Œä¸€ä¸ªthen<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">p1      p2       p3       </span><br><span class="line">p1.then(f1).then(f2).then(f3)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æœ¬æ„ï¼Œf1åšp1çš„å›è°ƒæ³¨å†Œï¼Œf2åšp2çš„å›è°ƒæ³¨å†Œï¼Œf3åšp3çš„å›è°ƒæ³¨å†Œ</span></span><br><span class="line"><span class="comment">// ä½†æ˜¯ç”±äºé“¾å¼è°ƒç”¨è¿”å›çš„æ˜¯è‡ªèº«ï¼Œæ‰€ä»¥æ— æ³•è¿›è¡Œé“¾å¼è°ƒç”¨</span></span><br></pre></td></tr></table></figure></li></ol><blockquote><p>jQueryä¸­ï¼Œé“¾å¼è°ƒç”¨å€¼å¾—æ˜¯è¿”å›ä»–è‡ªèº«ï¼Œå› ä¸ºjQueryä½œä¸ºä¸€ä¸ªå·¥å…·ï¼Œè¿”å›è‡ªèº«å¹¶æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯Promiseå¯¹è±¡ï¼Œæ¯ä¸€ä¸ªçŠ¶æ€éƒ½åº”è¯¥æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ï¼Œæ‰€ä»¥é“¾å¼è°ƒç”¨æ—¶ï¼Œä¸èƒ½è¿”å›è‡ªèº«ï¼Œåº”è¯¥è¿”å›å¯¹åº”çš„äº§ç”Ÿæ–°çš„Promise</p></blockquote><ol start="3"><li>å›ºåŒ–å®ä¾‹ï¼ŒPromiseçš„çŠ¶æ€ä¸€æ—¦æ”¹å˜ï¼Œå¹¶ä¸èƒ½å†æ¬¡å‘ç”Ÿæ”¹å˜<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myPromise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// fetch</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * åªæœ‰resolveä¼šæ‰§è¡Œï¼Œå› ä¸ºçŠ¶æ€è¢«å›ºåŒ–äº†</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  resolve()</span><br><span class="line">  reject()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ol><h1 id="åŸºæœ¬ç‰ˆçš„å®ç°"><a href="#åŸºæœ¬ç‰ˆçš„å®ç°" class="headerlink" title="åŸºæœ¬ç‰ˆçš„å®ç°"></a>åŸºæœ¬ç‰ˆçš„å®ç°</h1><blockquote><p>è¿™é‡Œå°†æ‰€æœ‰çš„ä»£ç å†™åœ¨æ­¤å¤„,å¤„äºç®€æ´çš„ç›®çš„,å¹¶ä¸æ˜¯å¾ˆå¥å£®,åªæ˜¯å°†æœ€åŸºæœ¬çš„é€»è¾‘åˆ—äº†å‡ºæ¥</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å›ºåŒ–çŠ¶æ€</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> PENDING = <span class="string">'pending'</span></span><br><span class="line"><span class="keyword">const</span> FULFILLED = <span class="string">'fulfilled'</span></span><br><span class="line"><span class="keyword">const</span> REJECTED = <span class="string">'rejected'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”¨æ¥ä¼ é€’è§£æPromiseçš„æ–¹æ³•</span></span><br><span class="line"><span class="comment"> * ï¼ˆæ­¤æ–¹æ³•è¦æœ€åå†çœ‹ï¼‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> resolvePromise = <span class="function">(<span class="params">proxyPromise, x, resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (x <span class="keyword">instanceof</span> MyPromise) &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¦‚æœå½“å‰xæ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œåˆ™ç›´æ¥ç»‘å®šå›è°ƒï¼Œå¾…è¿™ä¸ªPromiseæ‰§è¡Œå®Œæ¯•åï¼Œ</span></span><br><span class="line"><span class="comment">     * è‡ªå·±resoleæ‰ï¼Œè¿™é‡Œçš„resolve,å°±æ˜¯proxyPromiseçš„resolve</span></span><br><span class="line"><span class="comment">     * å†è°ƒç”¨proxyPromiseï¼Œä¹Ÿå°±æ˜¯è®©æ–°ç”Ÿæˆçš„Promiseç»§ç»­èµ°ä¸‹å»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    x.then(resolve, reject)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¦‚æœå½“å‰xæ˜¯ä¸€ä¸ªæ™®é€šçš„å€¼ï¼Œå°±è¯´æ˜ä¸Šä¸€ä¸ªPromiseåªæ˜¯è¿”å›ä¸€ä¸ªåŒæ­¥ç»“æœ</span></span><br><span class="line"><span class="comment">     * é‚£ä¹ˆæˆ‘ä»¬åˆšåˆšåŒ…è£¹çš„é‚£å±‚Promiseå…¶å®å°±æ˜¯å¤šä½™çš„ï¼ˆåªæ˜¯é€šç”¨æ€§ï¼Œæˆ‘ä»¬éƒ½åŒ…è£¹æ–¹ä¾¿ï¼‰</span></span><br><span class="line"><span class="comment">     * ç«‹é©¬æ”¾è¡Œå³å¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    resovle(x)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyPromise</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> self = <span class="keyword">this</span></span><br><span class="line">  self.value = <span class="literal">null</span></span><br><span class="line">  self.error = <span class="literal">null</span></span><br><span class="line">  self.status = PENDING</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç”±äºæˆ‘ä»¬åªä¼šä½¿ç”¨ä¸Šä¸€ä¸ªçš„Promiseçš„çŠ¶æ€ï¼Œä½†æ˜¯å…¶å›è°ƒå‡½æ•°åˆæ˜¯å†thenä¸­åˆ›å»ºçš„é‚£ä¸ªPromiseè°ƒç”¨çš„ï¼Œ</span></span><br><span class="line"><span class="comment">   * æ‰€ä»¥æ­¤å¤„ä»…ä»…ä»€ä¹ˆä¹Ÿæ²¡æœ‰ï¼Œåæ–‡ä½¿ç”¨ä¹‹å¤„ä¹Ÿä»…ä»…éƒ½æ˜¯ç”¨åˆ°self.value, self.errorè€Œå·²ï¼Œè‡³äºå›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="comment">   * éƒ½ä¼šç»‘å®šåˆ°ä¸‹ä¸€ä¸ªPromiseä¸Š</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  self.onFulfilled = <span class="function"><span class="params">value</span> =&gt;</span> value</span><br><span class="line">  self.onRejected = <span class="function"><span class="params">error</span> =&gt;</span> &#123; <span class="keyword">throw</span> error &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">resolve</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å›ºåŒ–æ€§ï¼Œåªæœ‰PENDINGçŠ¶æ€æ‰èƒ½æ‰§è¡Œ</span></span><br><span class="line">    <span class="keyword">if</span> (self.status === PENDING) &#123;</span><br><span class="line">      self.value = value</span><br><span class="line">      self.status = FULFILLED</span><br><span class="line">      self.onFulfilled(self.value)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">reject</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å›ºåŒ–æ€§ï¼Œåªæœ‰PENDINGçŠ¶æ€æ‰èƒ½æ‰§è¡Œ</span></span><br><span class="line">    <span class="keyword">if</span> (self.status === PENDING) &#123;</span><br><span class="line">      self.error = error</span><br><span class="line">      self.status = REJECTED</span><br><span class="line">      self.onRejected(self.error)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ‰§è¡ŒPromiseå‡½æ•°ä½“</span></span><br><span class="line">  fn(resolve, reject)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyPromise.prototype.then = <span class="function"><span class="keyword">function</span> (<span class="params">onFulfilled, onRejected</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> self = <span class="keyword">this</span></span><br><span class="line">  <span class="keyword">let</span> proxyPromise</span><br><span class="line"></span><br><span class="line">  onFulfilled = <span class="keyword">typeof</span> onFulfilled === <span class="string">'function'</span> ? onFulfilled : <span class="function"><span class="params">value</span> =&gt;</span> value</span><br><span class="line">  onRejected = <span class="keyword">typeof</span> onRejected === <span class="string">'function'</span> ? onRejected : <span class="function"><span class="params">error</span> =&gt;</span> &#123; <span class="keyword">throw</span> error &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åªæœ‰å†PENDINGçŠ¶æ€ä¸‹æ‰èƒ½ç»‘å®šå›è°ƒ</span></span><br><span class="line">  <span class="keyword">if</span> (self.status === PENDING) &#123;</span><br><span class="line">    proxyPromise = <span class="keyword">new</span> MyPromise(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      self.onFulfilled = <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="comment">/**</span></span><br><span class="line"><span class="comment">           * ç»‘å®šä¸Šä¸€ä¸ªonFulfilledå›è°ƒå‡½æ•°ä¸ºthenä¸­ä¼ é€’çš„å›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="comment">           */</span></span><br><span class="line">          <span class="keyword">let</span> x = onFulfilled(value)</span><br><span class="line">          <span class="comment">/**</span></span><br><span class="line"><span class="comment">           * å°†å½“å‰çš„è¿”å›å€¼å’Œæ­¤å¤„thenä¸­ç”Ÿæˆçš„proxyPromiseåšè”ç³»</span></span><br><span class="line"><span class="comment">           * ä¹Ÿå³ç¡®å®šä»€ä¹ˆæ—¶å€™å¯ä»¥è®©è¿™ä¸ªproxyPromiseç»§ç»­ä¸‹å»</span></span><br><span class="line"><span class="comment">           */</span></span><br><span class="line">          resolvePromise(proxyPromise, x, resolve, reject)</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">          reject(error)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      self.onRejected = <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="keyword">let</span> x = onRejected(error)</span><br><span class="line">          resolvePromise(proxyPromise, x, resovle, reject)</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">          reject(error)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (self.status === FULFILLED) &#123;</span><br><span class="line">    <span class="comment">// æ­¤æ—¶çŠ¶æ€å·²ç»å˜ä¸ºæ‰§è¡Œå®Œæ¯•äº†ï¼Œç›´æ¥æ‰§è¡Œè¿™é‡Œçš„thenï¼Œåªä¸è¿‡éœ€è¦ä½¿ç”¨åŸæœ¬å­˜åœ¨çš„valueå€¼</span></span><br><span class="line">    proxyPromise = <span class="keyword">new</span> MyPromise(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> x = onFulfilled(self.value)</span><br><span class="line">        resolvePromise(proxyPromise, x, resolve, reject)</span><br><span class="line">      &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        reject(error)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (self.status === REJECTED) &#123;</span><br><span class="line">    <span class="comment">// æ­¤æ—¶çŠ¶æ€å·²ç»å˜ä¸ºè¢«æ‹’ç»äº†ï¼Œç›´æ¥æ‰§è¡Œè¿™é‡Œçš„thenï¼Œåªä¸è¿‡éœ€è¦ä½¿ç”¨åŸæœ¬å­˜åœ¨çš„errorå€¼</span></span><br><span class="line">    proxyPromise = <span class="keyword">new</span> MyPromise(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> x = onRejected(self.error)</span><br><span class="line">        resolvePromise(proxyPromise, x, resolve, reject)</span><br><span class="line">      &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        rejected(error)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * æ¯æ¬¡thenç»“æŸï¼Œéƒ½ä¼šè¿”å›ä¹Ÿç»™å…¨æ–°çš„Promise,å¹¶ä¸”ç»™ä¸‹ä¸€ä¸ªthenåšä¸ºå›è°ƒå‡½æ•°æ³¨å†Œçš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">   * </span></span><br><span class="line"><span class="comment">   * p1           p2       p3</span></span><br><span class="line"><span class="comment">   * promise.then(f1).then(f2)</span></span><br><span class="line"><span class="comment">   * è¿™é‡Œç”Ÿæˆçš„p2å…¶å®æ˜¯è‡ªåŠ¨ä¸ºp3åšæœåŠ¡ï¼Œä¹Ÿå°±æ˜¯è¾¾åˆ°äº†ä¸€ç§è™šå‡çš„é“¾å¼è°ƒç”¨æ•ˆæœï¼Œæˆ‘åé¢ä¸€ä¸ªthenè°ƒç”¨å‰ä¸€ä¸ªçš„ç»“æœ</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">   <span class="keyword">return</span> proxyPromise</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * catchæ–¹æ³•å…¶å®æ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œä¹‹å‰onRejectedæ–¹æ³•é»˜è®¤éƒ½å†™ä¸ºäº† error =&gt; &#123; throw error &#125;</span></span><br><span class="line"><span class="comment"> * æœ‰å› ä¸ºthenä¸­ç”Ÿæˆçš„ä»£ç†proxyPromiseçš„rejectæ–¹æ³•éƒ½æ˜¯å†try-catchä¸­æ‰§è¡Œçš„ï¼Œç”Ÿæˆçš„é”™ä¼šè¢«å±‚å±‚æŠ›å‡ºï¼Œ</span></span><br><span class="line"><span class="comment"> * ç›´åˆ°æœ€åä¸€å±‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">MyPromise.prototype.catch = <span class="function"><span class="keyword">function</span> (<span class="params">onRejected</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.then(<span class="literal">null</span>, onRejected)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨-1"><a href="#ä½¿ç”¨-1" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> MyPromise(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// fetch </span></span><br><span class="line">  <span class="keyword">const</span> data1 = fetchData1()</span><br><span class="line"></span><br><span class="line">  resolve(data1)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> f1 = <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// å¤„ç†data</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> MyPromise(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// fetch </span></span><br><span class="line">    <span class="keyword">const</span> data2 = fetchData2()</span><br><span class="line"></span><br><span class="line">    resolve(data2)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> f3 = <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// å¤„ç†data</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> MyPromise(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// fetch </span></span><br><span class="line">    <span class="keyword">const</span> data3 = fetchData3()</span><br><span class="line"></span><br><span class="line">    resolve(data3)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åªè¦æœ‰ä¸€ä¸ªé”™è¯¯å°±ä¼šè¢«æŠ›åˆ°æœ€å</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> handleError = <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(error)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">p.then(f1).then(f2).then(f3).catch(handleError)</span><br></pre></td></tr></table></figure><h2 id="æ³¨æ„ç‚¹"><a href="#æ³¨æ„ç‚¹" class="headerlink" title="æ³¨æ„ç‚¹"></a>æ³¨æ„ç‚¹</h2><ol><li>è¦è¾¾åˆ°ä½¿ç”¨çš„é“¾å¼è°ƒç”¨æ•ˆæœï¼Œå°±è¦æ¯ä¸€æ¬¡thenä¸­éƒ½åº”è¯¥è¿”å›ä¸€ä¸ªæ–°çš„Promise.è¿™æ ·ä¸‹ä¸€ä¸ªthenæ‰ä¼šæ³¨å†Œåˆ°ä»–</li><li>ä¸ºäº†ä¿è¯æ‰€æœ‰å¼‚æ­¥ï¼ŒåŒæ­¥æ–¹æ³•éƒ½èƒ½æ‰§è¡Œä¸‹å»ï¼Œç»Ÿä¸€è¿›è¡Œå¤„ç†ï¼Œå¦‚æœå€¼ä¸ºpromiseï¼Œåˆ™ç»™ä»–æ³¨å†Œthen,ä¹Ÿå°±æ˜¯ç­‰ä»–è¿™ä¸ªè¿”å›çš„promiseæ‰§è¡Œå®Œæ¯•åï¼Œèƒ½å¤Ÿè‡ªåŠ¨è§¦å‘æ­¤å¤„çš„proxyPromiseæ‰§è¡Œä¸‹å»ï¼Œå¦‚æœå‘ç°æ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œç›´æ¥resolveæ‰å³å¯ã€‚</li></ol><h2 id="å…³äºå¥å£®æ€§"><a href="#å…³äºå¥å£®æ€§" class="headerlink" title="å…³äºå¥å£®æ€§"></a>å…³äºå¥å£®æ€§</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¿”å›ä¸€ä¸ªæ–°çš„promise,æ•°ç»„éå†ï¼Œè®°å½•æ‰§è¡Œå®Œçš„æ•°é‡ï¼Œç­‰åˆ°æ‰€æœ‰éƒ½æ‰§è¡Œå®Œæ¯•åï¼Œæ‰èƒ½resolveå¤§çš„</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">MyPromise.prototype.all = <span class="function"><span class="keyword">function</span> (<span class="params">promises</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> MyPromise(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> count = <span class="number">0</span></span><br><span class="line">    <span class="keyword">const</span> result = []</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; promises.length; i += <span class="number">1</span>) &#123;</span><br><span class="line">      promises[i].then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">        result[i] = data</span><br><span class="line">        <span class="keyword">if</span> (++count === promises.length) &#123;</span><br><span class="line">          resolve(result)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;, (error) =&gt; &#123;</span><br><span class="line">        reject(error)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¿”å›ä¸€ä¸ªæ–°çš„promise,æ•°ç»„éå†ï¼Œåªæœ‰ä»»æ„ä¸€ä¸ªpromiseæ‰§è¡Œå®Œæ¯•å°±å¯ä»¥resovle</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">MyPromise.prototype.race = <span class="function"><span class="keyword">function</span> (<span class="params">promises</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> MyPromise(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; promises.length; i += <span class="number">1</span>) &#123;</span><br><span class="line">      promises[i].then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">        resolve(data)</span><br><span class="line">      &#125;, (error) =&gt; &#123;</span><br><span class="line">        rejected(error)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¿”å›ä¸€ä¸ªç«‹å³resovle</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">MyPromise.prototype.resolve = <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> MyPromise(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    resovle(value)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¿”å›ä¸€ä¸ªç«‹å³reject</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">MyPromise.prototype.reject = <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> MyPromise(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    reject(error)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Reacté”™è¯¯è¾¹ç•Œ</title>
      <link href="/2019/11/01/React%E9%94%99%E8%AF%AF%E8%BE%B9%E7%95%8C/"/>
      <url>/2019/11/01/React%E9%94%99%E8%AF%AF%E8%BE%B9%E7%95%8C/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åœ¨developmentç¯å¢ƒä¸‹ï¼Œä¼šè¿½è¸ªä¸Šä¸‹æ–‡é”™è¯¯æ‰§è¡Œæ ˆï¼Œä¹Ÿå³åœ¨producetionä¸­ï¼Œå¯ä»¥çœ‹åˆ°æ•ˆæœ</p></blockquote><h2 id="getDerivedStateFromError"><a href="#getDerivedStateFromError" class="headerlink" title="getDerivedStateFromError"></a>getDerivedStateFromError</h2><p>å°†å½“å‰æ¸²æŸ“ç»„ä»¶æ•è·erroræ—¶ï¼Œæ‰§è¡Œæ­¤æ–¹æ³•ï¼Œå¹¶ä¸”è¿”å›ç»“æœå¯¼å…¥åˆ°state</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">state = &#123; <span class="attr">hasError</span>: <span class="literal">false</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> getDerivedStateFromError (error) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123; <span class="attr">hasError</span>: <span class="literal">true</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">render () &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.state.hasError) <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Some Thing wrong<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.props.children</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶å®å°±æ˜¯åœ¨renderä¸­ä½¿ç”¨äº†ä¸€ä¸ªåˆ¤æ–­ï¼Œè€Œè¿™ä¸ªåˆ¤æ–­çš„æ”¹å˜æ˜¯åœ¨è·å–åˆ°é”™è¯¯æ—¶è§¦å‘</p><h2 id="componentDidCatch"><a href="#componentDidCatch" class="headerlink" title="componentDidCatch"></a>componentDidCatch</h2><p>å½“å‰çš„ç»„ä»¶æ•è·åˆ°é”™è¯¯çš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œæ­¤ç”Ÿå‘½å‘¨æœŸå‡½æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">componentDidCatch (error, info) &#123;</span><br><span class="line">  <span class="comment">// ä¸ŠæŠ¥é”™è¯¯ä¿¡æ¯</span></span><br><span class="line">  logErrorToService(error)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨try-catch"><a href="#ä½¿ç”¨try-catch" class="headerlink" title="ä½¿ç”¨try-catch"></a>ä½¿ç”¨<code>try-catch</code></h2><p>è¯¥é”™è¯¯è¾¹é™…ä»…ä»…å¤„ç†ç”±æ¸²æŸ“å¼•å‘çš„é—®é¢˜ï¼Œä¹Ÿå³è¢«<code>ErrorBoundary</code>åŒ…è£¹çš„éƒ¨åˆ†ï¼Œäº‹ä»¶å¤„ç†å™¨ä¸­è¿˜æ˜¯è¦ä½¿ç”¨tryCatch</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™ç§æƒ…å†µå‘ç”Ÿçš„é”™è¯¯æ˜¯æ— æ³•è¢«é”™è¯¯è¾¹é™…æ•è·çš„</span></span><br><span class="line">handleToggleError = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'error'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// äº‹ä»¶å¤„ç†ä¸­è¿˜æ˜¯è¦ä½¿ç”¨try-catchè‡ªè¡Œå¤„ç†</span></span><br><span class="line">handelToggleError = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'error'</span>)</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;button onClick=&#123;handleToggleError&#125;&gt; toggle error &lt;<span class="regexp">/button&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Reactçš„Render-PropæŠ€æœ¯</title>
      <link href="/2019/11/01/React%E7%9A%84Render-Prop%E6%8A%80%E6%9C%AF/"/>
      <url>/2019/11/01/React%E7%9A%84Render-Prop%E6%8A%80%E6%9C%AF/</url>
      
        <content type="html"><![CDATA[<p>Render Propæ˜¯ä¸€ç§ç»„ä»¶ä½¿ç”¨porpsæä¾›çš„æ–¹æ³•å»æ¸²æŸ“children,å¤–éƒ¨æ–¹ä¾¿å…±äº«å†…éƒ¨æ•°æ®</p><h2 id="ä¼ ç»Ÿæ–¹å¼"><a href="#ä¼ ç»Ÿæ–¹å¼" class="headerlink" title="ä¼ ç»Ÿæ–¹å¼"></a>ä¼ ç»Ÿæ–¹å¼</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç®€å•æ¸²æŸ“å­ç»„ä»¶</span></span><br><span class="line"><span class="keyword">const</span> LinkerWrapper = <span class="function">(<span class="params">Component</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> currentLink = <span class="string">'www.fe.com'</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="built_in">Proxy</span> = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;Component link=&#123;currentLink&#125; &#123;...props&#125; /&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Outer = LinkerWrapper(Nav)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¤æ—¶Outerä¸­å°±æ˜¯æœ‰linkå±æ€§çš„äº†</span></span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹æ³•åœ¨å£°æ˜çš„æ—¶å€™ï¼Œå°±å·²ç»ç¡®å®šäº†é«˜é˜¶ç»„ä»¶è¦æ‹“å±•ä»€ä¹ˆå±æ€§</p><h2 id="ä½¿ç”¨Render-Prop"><a href="#ä½¿ç”¨Render-Prop" class="headerlink" title="ä½¿ç”¨Render Prop"></a>ä½¿ç”¨Render Prop</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Linker = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> currentLink = <span class="string">'www.fe.com'</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> props.render(currentLink)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸ºlinkå±æ€§å¢åŠ å€¼</span></span><br><span class="line"><span class="keyword">const</span> Outer = (</span><br><span class="line">  &lt;Linker</span><br><span class="line">    render=&#123;(link) =&gt; (<span class="xml"><span class="tag">&lt;<span class="name">Nav</span> <span class="attr">link</span>=<span class="string">&#123;link&#125;/</span>&gt;</span>) &#125;</span></span><br><span class="line"><span class="xml">  /&gt;</span></span><br><span class="line"><span class="xml">)</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">// ä¸ºhrefå±æ€§å¢åŠ å€¼</span></span><br><span class="line"><span class="xml">const Outer = (</span></span><br><span class="line">  &lt;Linker</span><br><span class="line">    render=&#123;(link) =&gt; (&lt;Nav href=&#123;link&#125;/&gt;) &#125;</span><br><span class="line">  /&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼çš„å¥½å¤„æ˜¯æ¯”è¾ƒç®€å•ï¼Œæ‰€æœ‰çš„ç»„è£…éƒ½æ˜¯ç”¨çš„æ—¶å€™æ‰æ ¹æ®éœ€è¦è¿›è¡Œç»„è£…ï¼Œå¹¶æ²¡æœ‰ç”¨åˆ°å…¶ä»–çš„ç‰¹æ€§ï¼Œå°±æ˜¯å°†ä¸€ä¸ªporpsçš„æ–¹æ³•æŒ‡å®šä¸ºä»–çš„å­ç»„ä»¶æ¸²æŸ“çš„æ–¹æ³•</p><h3 id="ä¸ä¸€å®šæ˜¯Render"><a href="#ä¸ä¸€å®šæ˜¯Render" class="headerlink" title="ä¸ä¸€å®šæ˜¯Render"></a>ä¸ä¸€å®šæ˜¯Render</h3><p>è¿™é‡Œä»…ä»…æ˜¯ç›´è§‚ï¼Œè®©äººå¯ä»¥ä¸€æ¬¡äº†è§£åˆ°ï¼Œè¿™ä¸ªå±æ€§å°±æ˜¯å°†æ¥è¦æ¸²æŸ“çš„æ—¶å€™ï¼Œä½¿ç”¨çš„porpæ–¹å¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–çš„å±æ€§å,ä»…ä»…æ˜¯ä¼ é€’ä¸€ä¸ªæ–¹æ³•åšchildrençš„ç”Ÿæˆå‡½æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Linker = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> currentLink = <span class="string">'www.fe.com'</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> props.componentRender(currentLink)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Outer = (</span><br><span class="line">  &lt;Linker</span><br><span class="line">    componentRender=&#123;(currentLink) =&gt; (<span class="xml"><span class="tag">&lt;<span class="name">Nav</span> <span class="attr">href</span>=<span class="string">&#123;link&#125;/</span>&gt;</span>) &#125;</span></span><br><span class="line"><span class="xml">  /&gt;</span></span><br><span class="line"><span class="xml">)</span></span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨childrenå±æ€§"><a href="#ä½¿ç”¨childrenå±æ€§" class="headerlink" title="ä½¿ç”¨childrenå±æ€§"></a>ä½¿ç”¨childrenå±æ€§</h2><p>childrenå±æ€§æ¯”è¾ƒç‰¹æ®Šäº†ï¼Œå®ƒæ—¢å¯ä»¥ä½œä¸ºporpsä¼ é€’ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½œå­å…ƒç´ ä¼ é€’</p><ul><li>porpsä¼ é€’ <code>&lt;Button childre={&#39;click me&#39;} /&gt;</code></li><li>å­å…ƒç´ ä¼ é€’ <code>&lt;Button&gt;click me&lt;/Button&gt;</code></li></ul><p>æ‰€ä»¥å¯ä»¥ä½¿ç”¨childrenä½œä¸ºRender Propçš„ä¸€ç§å½¢å¼ï¼Œæ›´åŠ ç›´è§‚ï¼Œ<em>å…¶å®ä¼šè‡ªåŠ¨å°†å­å…ƒç´ æœ€ä¸ºchildrenå±æ€§ä¼ é€’ä¸‹å»</em></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Linker = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> currentLink = <span class="string">'www.fe.com'</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> props.children(currentLink)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­£å¸¸ä½œä¸ºpropså±æ€§</span></span><br><span class="line"><span class="keyword">const</span> Outer = (</span><br><span class="line">  &lt;Linker</span><br><span class="line">    children=&#123;(currentLink) =&gt; (<span class="xml"><span class="tag">&lt;<span class="name">Nav</span> <span class="attr">href</span>=<span class="string">&#123;link&#125;/</span>&gt;</span>) &#125;</span></span><br><span class="line"><span class="xml">  /&gt;</span></span><br><span class="line"><span class="xml">)</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">// ä½œä¸ºç‰¹æ®Šçš„propså±æ€§</span></span><br><span class="line"><span class="xml">const Outer = (</span></span><br><span class="line">  &lt;Linker&gt;</span><br><span class="line">    &#123;link =&gt; (&lt;Nav href=&#123;link&#125;/&gt;) &#125;</span><br><span class="line">  &lt;/Linker&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h3 id="æœ€å¥½ä½¿ç”¨PropTypeså£°æ˜å‡ºæ¥"><a href="#æœ€å¥½ä½¿ç”¨PropTypeså£°æ˜å‡ºæ¥" class="headerlink" title="æœ€å¥½ä½¿ç”¨PropTypeså£°æ˜å‡ºæ¥"></a>æœ€å¥½ä½¿ç”¨PropTypeså£°æ˜å‡ºæ¥</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Linker.propTypes = &#123;</span><br><span class="line">  childre: PropTypes.func.isRequire</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç›¸åŒchildrençš„é¡ºåºé—®é¢˜"><a href="#ç›¸åŒchildrençš„é¡ºåºé—®é¢˜" class="headerlink" title="ç›¸åŒchildrençš„é¡ºåºé—®é¢˜"></a>ç›¸åŒchildrençš„é¡ºåºé—®é¢˜</h3><p>å­å…ƒç´ ä¼šè¦†ç›–childrenå±æ€§</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;button children=&#123;<span class="string">'props'</span>&#125; /&gt; =&gt; <span class="xml"><span class="tag">&lt;<span class="name">button</span>&gt;</span>props<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;button&gt;children&lt;<span class="regexp">/button&gt; =&gt; &lt;button&gt;children&lt;/</span>button&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸¤è€…éƒ½å£°æ˜çš„æƒ…å†µä¸‹ï¼Œ æœ€ç»ˆæ˜¾ç¤ºæ•ˆæœä¸º</span></span><br><span class="line">&lt;button children=&#123;<span class="string">'props'</span>&#125;&gt;children&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">&lt;button&gt;children&lt;/</span>button&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>mongooseå¸¸ç”¨crud</title>
      <link href="/2019/10/22/mongoose%E5%B8%B8%E7%94%A8crud/"/>
      <url>/2019/10/22/mongoose%E5%B8%B8%E7%94%A8crud/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ­¤å¤„å‡çœç•¥äº†å›è°ƒå‡½æ•°ï¼Œå¯ä»¥åœ¨æœ«å°¾ä½¿ç”¨å›è°ƒå‡½æ•°ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨await, promiseç­‰</p></blockquote><h4 id="mongooseè¿æ¥mongoDB"><a href="#mongooseè¿æ¥mongoDB" class="headerlink" title="mongooseè¿æ¥mongoDB"></a>mongooseè¿æ¥mongoDB</h4><blockquote><p>nodeå†…éƒ¨æä¾›äº†ä¸€ä¸ªmongoDBæ¨¡å—ï¼Œå°è£…æ•ˆæœä¸å¦‚mongoose</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> URL = <span class="string">'mongodb://&lt;username&gt;:&lt;password&gt;@&lt;ip&gt;:&lt;port:27017å¯çœç•¥&gt;/&lt;DBName&gt;'</span></span><br><span class="line">mongoose.connect(URL, &#123; <span class="attr">useNewUrlParser</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">  .then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`connect mongo success`</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'connect mongo failure'</span>, err)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><h4 id="ç†è§£mongooseçš„ä¸‰ä¸ªå¯¹è±¡"><a href="#ç†è§£mongooseçš„ä¸‰ä¸ªå¯¹è±¡" class="headerlink" title="ç†è§£mongooseçš„ä¸‰ä¸ªå¯¹è±¡"></a>ç†è§£mongooseçš„ä¸‰ä¸ªå¯¹è±¡</h4><blockquote><p>åº”è¯¥æœ‰ä¸€ä¸ªSchema-&gt;Model-&gt;Documentçš„è¿‡ç¨‹</p></blockquote><h6 id="Schema"><a href="#Schema" class="headerlink" title="Schema"></a>Schema</h6><p>çº¦æŸå¯¹è±¡ï¼Œç”¨æ¥è§„èŒƒæ–‡æ¡£çš„ç»“æ„çš„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; Schema &#125; = mongoose</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> userSchema = <span class="keyword">new</span> Schema(&#123; ... &#125;)</span><br></pre></td></tr></table></figure><h6 id="Model"><a href="#Model" class="headerlink" title="Model"></a>Model</h6><p>å¯¹åº”åˆ°MongoDBä¸­çš„é›†åˆï¼Œä¹Ÿå°±æ˜¯ä¹‹å‰å®šä¹‰è¿‡çš„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> UserModel = mongoose.model(<span class="string">'users'</span>, userSchema)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨æ„ï¼Œå®šä¹‰modelçš„åç§°çš„æ—¶å€™ï¼Œmongooseä¼šè‡ªåŠ¨è½¬æ¢æˆå¤æ•°</span></span><br><span class="line"><span class="comment">// ç®€å•åˆ¤æ–­æ˜¯å¦sç»“å°¾ children -&gt; childrens</span></span><br></pre></td></tr></table></figure><h6 id="Document"><a href="#Document" class="headerlink" title="Document"></a>Document</h6><p>æ¯ä¸€ä¸ªcollectionä¸­çš„æ–‡æ¡£å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æ“ä½œçš„æ¯ä¸ªå­˜å‚¨æ–‡æ¡£,ä¹Ÿå°±æ˜¯mongooseå–å‡ºæ¥çš„æ ·å­</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> user = <span class="keyword">new</span> UserModel(&#123; ... &#125;)</span><br></pre></td></tr></table></figure><h4 id="Modelä¸Šçš„curd"><a href="#Modelä¸Šçš„curd" class="headerlink" title="Modelä¸Šçš„curd"></a>Modelä¸Šçš„curd</h4><blockquote><p><code>const UserModel = mongoose.model(&#39;users&#39;, userSchema)</code></p></blockquote><h6 id="create"><a href="#create" class="headerlink" title="create"></a>create</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UserModel.create(&#123; ... &#125;)</span><br></pre></td></tr></table></figure><h6 id="find"><a href="#find" class="headerlink" title="find"></a>find</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">UserModel.find(conditions, [projection])</span><br><span class="line"><span class="comment">// æ— è®ºä»€ä¹ˆæƒ…å†µéƒ½ä¼šè¿”å›ä¹Ÿç»™æ•°ç»„ []</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åªèƒ½æŒ‘é€‰æ˜¾ç¤ºï¼Œæˆ–è¿‡æ»¤ &#123; email: 1, name: 0 &#125; æŠ¥é”™</span></span><br><span class="line">projection = &#123; <span class="attr">email</span>: <span class="number">1</span> &#125; <span class="comment">// å®é™…åªæœ‰email, _idå±æ€§</span></span><br><span class="line">projection = &#123; <span class="attr">email</span>: <span class="number">0</span> &#125; <span class="comment">// å…¶ä»–ï¼ˆé™¤emailï¼‰æ‰€æœ‰, _idå±æ€§</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å­—ç¬¦ä¸²æŒ‘é€‰ï¼Œæœ‰åˆ™æ˜¾ç¤ºï¼Œ-_idï¼Œå¯ä»¥è¿‡æ»¤æ‰id</span></span><br><span class="line">projection = <span class="string">'email name'</span></span><br></pre></td></tr></table></figure><h6 id="findOne-findById"><a href="#findOne-findById" class="headerlink" title="findOne, findById"></a>findOne, findById</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">UserModel.findOne(conditions, [projection])</span><br><span class="line">UserModel.findById(id, [projection])</span><br><span class="line"><span class="comment">// æ­¤æ—¶ä¼šè¿”å› &#123;&#125;, æœ‰å¤šä¸ªæ¡ä»¶æ»¡è¶³ï¼Œè¿”å›ç¬¬ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰¾ä¸åˆ°ä¸ºnull</span></span><br></pre></td></tr></table></figure><h6 id="count-countDocuments"><a href="#count-countDocuments" class="headerlink" title="count, countDocuments"></a>count, countDocuments</h6><blockquote><p>æç¤ºcountæ¥å£å°†è¢«å¼ƒç”¨ï¼Œä½¿ç”¨<code>Collection.countDocuments</code>æ›¿ä»£</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">UserModel.countDocuments()</span><br><span class="line"><span class="comment">// ç›´æ¥è¿”å›æ•°é‡</span></span><br></pre></td></tr></table></figure><h6 id="updateMany"><a href="#updateMany" class="headerlink" title="updateMany"></a>updateMany</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">UserModel.updateMany(conditions, doc, [projection])</span><br><span class="line"><span class="comment">// ä¿®æ”¹å¤šæ¡æ•°æ®</span></span><br><span class="line"><span class="comment">// æ­¤æ—¶è¿”å›æ›´æ–°ç»“æœ &#123; n: 1, nModified: 1, ok: 1 &#125;ï¼Œ æ­¤æ—¶ä»…ä»…ä¸ºæ›¿æ¢</span></span><br><span class="line"><span class="comment">// n -&gt; åŒ¹é™ª nModified -&gt; ä¿®æ”¹çš„æ¡æ•°</span></span><br></pre></td></tr></table></figure><h6 id="updateOne-update"><a href="#updateOne-update" class="headerlink" title="updateOne, update"></a>updateOne, update</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">UserModel.update(conditions, doc, [projection])</span><br><span class="line">UserModel.updateOne(conditions, doc, [projection])</span><br><span class="line"><span class="comment">// ä¿®æ”¹ä¸€æ¡æ•°æ®ï¼Œå¤šæ¡ä»…ä¸ºç¬¬ä¸€ä¸ª</span></span><br><span class="line"><span class="comment">// æ­¤æ—¶è¿”å›æ›´æ–°ç»“æœ &#123; n: 1, nModified: 1, ok: 1 &#125;ï¼Œ æ­¤æ—¶ä»…ä»…ä¸ºæ›¿æ¢docæŒ‡å®š</span></span><br><span class="line"><span class="comment">// n -&gt; åŒ¹é™ª nModified -&gt; ä¿®æ”¹çš„æ¡æ•°</span></span><br></pre></td></tr></table></figure><h6 id="deleteMany"><a href="#deleteMany" class="headerlink" title="deleteMany"></a>deleteMany</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">UserModel.deleteMany(&#123;&#125;)</span><br><span class="line"><span class="comment">// åˆ é™¤æ‰€æœ‰çš„æ•°æ®</span></span><br><span class="line"><span class="comment">// æ­¤æ—¶è¿”å›åˆ é™¤ç»“æœ &#123; n: 1, ok: 1, deletedCount: 1 &#125;</span></span><br></pre></td></tr></table></figure><h6 id="deleteOne"><a href="#deleteOne" class="headerlink" title="deleteOne"></a>deleteOne</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">UserModel.deleteOne(&#123;&#125;)</span><br><span class="line"><span class="comment">// åˆ é™¤å•ä¸ªæ•°æ®ï¼Œå¤šæ¡ä»…ä¸ºç¬¬ä¸€ä¸ª</span></span><br><span class="line"><span class="comment">// æ­¤æ—¶è¿”å›åˆ é™¤ç»“æœ &#123; n: 1, ok: 1, deletedCount: 1 &#125;</span></span><br></pre></td></tr></table></figure><h4 id="Documentä¸Šçš„curd"><a href="#Documentä¸Šçš„curd" class="headerlink" title="Documentä¸Šçš„curd"></a>Documentä¸Šçš„curd</h4><blockquote><p>è¿™é‡Œæ¨¡æ‹Ÿç›´æ¥è¿”å›äº†æ–‡æ¡£å¯¹è±¡ï¼Œå®é™…è¦æ®æƒ…å†µè€Œå®š</p></blockquote><h6 id="set-get-save"><a href="#set-get-save" class="headerlink" title="set, get, save"></a>set, get, save</h6><p>åªæœ‰ä¿å­˜äº†ä¹‹åï¼Œæ‰ä¼šåŒæ­¥åˆ°æ•°æ®åº“ä¸­</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> user = <span class="keyword">await</span> UserModel.findById(<span class="string">'xxx'</span>)</span><br><span class="line"></span><br><span class="line">user.get(<span class="string">'name'</span>)</span><br><span class="line">user.set(<span class="string">'name'</span>, <span class="string">'newNameValue'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¿®æ”¹ä¹Ÿå¯ä»¥ç›´æ¥`.`æ“ä½œæœ€åï¼ŒåŒæ­¥å›å»å³å¯</span></span><br><span class="line">user.name</span><br><span class="line">user.name = <span class="string">'newNameValue'</span> </span><br><span class="line"></span><br><span class="line">user.save()</span><br><span class="line"><span class="comment">// æ­¤æ—¶è¿”å›çš„æ˜¯æ›´æ–°åçš„æ•°æ®ï¼Œå³åŒæ­¥åˆ°æ•°æ®åº“ä¸­</span></span><br></pre></td></tr></table></figure><h6 id="toObject"><a href="#toObject" class="headerlink" title="toObject"></a>toObject</h6><blockquote><p>Documentå¯¹è±¡å¯ä»¥ç›´æ¥è®¿é—®<code>id</code>å±æ€§æŒ‡å‘<code>_id</code>,å½“è½¬æ¢è¿‡åï¼Œåªæœ‰<code>_id</code></p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> user = <span class="keyword">await</span> UserModel.findById(<span class="string">'xxx'</span>)</span><br><span class="line">user.toObject()</span><br><span class="line"><span class="comment">// æ­¤æ—¶è¿”å›çš„æ˜¯æ™®é€šjså¯¹è±¡ï¼Œä¸åœ¨å…·æœ‰documentçš„ç›¸å…³æ–¹æ³•</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å…³äºwebpackä¸­proxyè·¨åŸŸ</title>
      <link href="/2019/10/20/%E5%85%B3%E4%BA%8Ewebpack%E4%B8%ADproxy%E8%B7%A8%E5%9F%9F/"/>
      <url>/2019/10/20/%E5%85%B3%E4%BA%8Ewebpack%E4%B8%ADproxy%E8%B7%A8%E5%9F%9F/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä¸»æµè·¨åŸŸ3ä¸­æ–¹å¼<br>1.jsonp<br>2.æœåŠ¡ç«¯é…åˆcros<br>3.æœåŠ¡å™¨åå‘ä»£ç†<br>ä¸»è¦è®¨è®ºç¬¬ä¸‰ç§ï¼Œåå‘ä»£ç†çš„æ–¹å¼</p></blockquote><h4 id="æƒ…æ™¯"><a href="#æƒ…æ™¯" class="headerlink" title="æƒ…æ™¯"></a>æƒ…æ™¯</h4><ul><li>API-cgi <code>www.api.com</code></li><li>åç«¯æœåŠ¡å™¨ <code>www.rd.com</code></li><li>å‰ç«¯æœåŠ¡å™¨ <code>www.fe.com</code></li></ul><p>æˆ‘ä»¬çš„ç›®çš„æ˜¯é€šè¿‡ï¼Œ<code>www.fe.com</code>å»æ‹¿å–<code>www.api.com</code>ä¸Šçš„èµ„æºï¼Œä½†ç”±äºè·¨åŸŸï¼Œæˆ‘ä»¬éœ€è¦åç«¯æœåŠ¡å™¨å¸®æˆ‘ä»¬æŠ“å–ä¸€ä¸‹ï¼Œåšä¸€æ¬¡è½¬å‘ï¼ˆåŒæºç­–ç•¥åªæ˜¯æµè§ˆå™¨åˆ¶å®šçš„ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å‘è¯·æ±‚ï¼š www.fe.com -&gt; www.rd.com -&gt; www.api.com</span><br><span class="line">å¾—å“åº”ï¼š www.api.com -&gt; www.rd.com -&gt; www.fe.com</span><br></pre></td></tr></table></figure><h4 id="åœ¨devServerä¸­é…ç½®ä»£ç†"><a href="#åœ¨devServerä¸­é…ç½®ä»£ç†" class="headerlink" title="åœ¨devServerä¸­é…ç½®ä»£ç†"></a>åœ¨devServerä¸­é…ç½®ä»£ç†</h4><ul><li>API-cgi <code>www.api.com</code></li><li>å‰ç«¯æœåŠ¡å™¨ <code>www.fe.com</code></li></ul><p>æˆ‘ä»¬ä½¿ç”¨devServeræ¥æ­å»ºä¸€ä¸ªä»£ç†æœåŠ¡å™¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.config  devServer</span></span><br><span class="line"></span><br><span class="line">devServer: &#123;</span><br><span class="line">  proxy: &#123;</span><br><span class="line">    <span class="string">'/api'</span>: &#123;</span><br><span class="line">      target: <span class="string">'http://www.api.com'</span>,</span><br><span class="line">      <span class="comment">/* è¡¨ç¤ºé‡å‘çš„è¯·æ±‚å»é™¤api,æ­¤å­—æ®µæ˜¯æˆ‘ä»¬åŠ çš„ */</span></span><br><span class="line">      pathRewrite: &#123;<span class="string">'^/api'</span> : <span class="string">''</span>&#125;,</span><br><span class="line">      changeOrigin: <span class="literal">true</span>,</span><br><span class="line">      <span class="comment">/* å¦‚æœæœ‰https, å¯é…ç½®æ­¤é¡¹ */</span></span><br><span class="line">      secure: <span class="literal">false</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h4 id="ä¿®æ”¹å‘é€çš„è¯·æ±‚"><a href="#ä¿®æ”¹å‘é€çš„è¯·æ±‚" class="headerlink" title="ä¿®æ”¹å‘é€çš„è¯·æ±‚"></a>ä¿®æ”¹å‘é€çš„è¯·æ±‚</h4><p>ç”±äºæˆ‘ä»¬åœ¨å¼€å‘çš„æ—¶å€™devServerï¼Œæ‰€ä»¥å‰ç«¯æœåŠ¡å™¨ä¹Ÿæ˜¯å‡è®¾åœ¨devServerï¼Œè€Œæˆ‘ä»¬çš„proxyä¹Ÿæ˜¯å‡è®¾åœ¨devServerä¸Šçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å»è¯·æ±‚æˆ‘ä»¬çš„proxy</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># æœ¬æ„</span><br><span class="line">å‘è¯·æ±‚ï¼š www.fe.com -&gt; www.api.com</span><br><span class="line">å¾—å“åº”ï¼š www.api.com -&gt; www.fe.com</span><br><span class="line"></span><br><span class="line"># ä¿®æ”¹å</span><br><span class="line">å‘è¯·æ±‚ï¼š www.fe.com -&gt; www.fe.com/api</span><br><span class="line">å¾—å“åº”ï¼š www.fe.com/api -&gt; www.fe.com</span><br></pre></td></tr></table></figure><p>å…¶å®æˆ‘ä»¬è¯·æ±‚äº†feä¸Šçš„proxyï¼Œä»–ä¼šå»çœŸæ­£è¯·æ±‚<code>www.api.com</code>,ä¹‹åæ‹¿åˆ°æ•°æ®åœ¨è¿”è¿˜ç»™æˆ‘ä»¬ï¼Œè€Œæˆ‘ä»¬æ˜¯ä¸çŸ¥é“çš„ï¼Œç”±äº<code>å‰åéƒ½æ˜¯www.fe.com</code>æ‰€ä»¥æ˜¯å±äºåŒæºçš„ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å¼•å…¥eslint</title>
      <link href="/2019/10/20/%E5%BC%95%E5%85%A5eslint/"/>
      <url>/2019/10/20/%E5%BC%95%E5%85%A5eslint/</url>
      
        <content type="html"><![CDATA[<blockquote><p>node 8+, npm 3+, ä½¿ç”¨å…¶å®˜æ–¹çš„eslintè„šæ‰‹æ¶å·¥å…·</p></blockquote><h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><p>æ¨èå®‰è£…åˆ°devDependencies</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add eslint -D</span><br></pre></td></tr></table></figure><h4 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å…¨å±€</span></span><br><span class="line">eslint --init</span><br><span class="line"></span><br><span class="line"><span class="comment"># æœ¬åœ°env</span></span><br><span class="line">./node_modules/.bin/eslint --init</span><br></pre></td></tr></table></figure><h4 id="æ ¹æ®ç›¸å…³çš„æç¤ºå®‰è£…å³å¯ï¼Œè¿‡ç¨‹ä¸­å¯èƒ½è¿˜éœ€è¦åœ¨å®‰è£…ä¸€äº›å…¶ä»–çš„åŒ…"><a href="#æ ¹æ®ç›¸å…³çš„æç¤ºå®‰è£…å³å¯ï¼Œè¿‡ç¨‹ä¸­å¯èƒ½è¿˜éœ€è¦åœ¨å®‰è£…ä¸€äº›å…¶ä»–çš„åŒ…" class="headerlink" title="æ ¹æ®ç›¸å…³çš„æç¤ºå®‰è£…å³å¯ï¼Œè¿‡ç¨‹ä¸­å¯èƒ½è¿˜éœ€è¦åœ¨å®‰è£…ä¸€äº›å…¶ä»–çš„åŒ…"></a>æ ¹æ®ç›¸å…³çš„æç¤ºå®‰è£…å³å¯ï¼Œè¿‡ç¨‹ä¸­å¯èƒ½è¿˜éœ€è¦åœ¨å®‰è£…ä¸€äº›å…¶ä»–çš„åŒ…</h4><h4 id="eslintæ’ä»¶"><a href="#eslintæ’ä»¶" class="headerlink" title="eslintæ’ä»¶"></a>eslintæ’ä»¶</h4><p>åœ¨npmä¸Šæœç´¢<code>eslintplugin</code>å³å¯çœ‹åˆ°ç›¸å…³çš„eslintæ’ä»¶ï¼Œé€‰æ‹©ä¸‹è½½å³å¯,å¹¶å‚ç…§å…¶ç›¸å…³è¯´æ˜ï¼Œåœ¨<code>.eslintrc.json</code>ä¸­æ·»åŠ è§„åˆ™å³å¯</p>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>reactä¸­refç›¸å…³</title>
      <link href="/2019/10/17/react%E4%B8%ADref%E7%9B%B8%E5%85%B3/"/>
      <url>/2019/10/17/react%E4%B8%ADref%E7%9B%B8%E5%85%B3/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åŸºäºReact 16.8</p></blockquote><ul><li><p>åœ¨æŒ‚è½½refçš„æ—¶å€™ï¼Œå¦‚æœè¿™ä¸ªrefæ˜¯ç›´æ¥æŒ‚è½½åˆ°domä¸Šçš„ï¼Œé‚£ä¹ˆå½“ç»„ä»¶æŒ‚è½½å®Œæˆçš„æ—¶å€™ï¼ŒrefæŒ‡å‘çš„å°±æ˜¯DOMç¤ºä¾‹</p></li><li><p>åœ¨æŒ‚è½½refçš„æ—¶å€™ï¼Œå¦‚æœè¿™ä¸ªrefæ˜¯ç›´æ¥æŒ‚è½½åˆ°componentä¸Šçš„ï¼Œé‚£ä¹ˆå½“ç»„ä»¶æŒ‚è½½å®Œæˆçš„æ—¶å€™ï¼ŒrefæŒ‡å‘çš„å°±æ˜¯ç»„ä»¶å®ä¾‹</p><ul><li>ç”±äºåœ¨å‡½æ•°å¼ç»„ä»¶å½“ä¸­ï¼Œæ˜¯æ²¡æœ‰å®ä¾‹çš„ï¼Œæ‰€ä»¥éƒ½æ˜¯é€šè¿‡refè½¬å‘ç›´æ¥æŒ‚è½½åˆ°å…·ä½“çš„domä¸Š</li></ul></li></ul><h2 id="åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ref"><a href="#åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ref" class="headerlink" title="åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ref"></a>åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ref</h2><p><code>React.createRef()</code>æ¥åˆ›å»ºä¸€ä¸ªref,ç„¶åè¿›è¡ŒæŒ‚è½½</p><h4 id="ç±»å¼ç»„ä»¶"><a href="#ç±»å¼ç»„ä»¶" class="headerlink" title="ç±»å¼ç»„ä»¶"></a>ç±»å¼ç»„ä»¶</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Component4</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span> () &#123;</span><br><span class="line">    <span class="keyword">super</span>()</span><br><span class="line">    <span class="keyword">this</span>.ref = React.createRef()</span><br><span class="line">  &#125;</span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;</span><br><span class="line">      children,</span><br><span class="line">    &#125; = <span class="keyword">this</span>.props</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;button</span><br><span class="line">        ref=&#123;node =&gt; <span class="keyword">this</span>.ref = node&#125;</span><br><span class="line">        onClick=&#123;() =&gt; &#123;<span class="built_in">console</span>.log(<span class="keyword">this</span>.ref)&#125;&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        &#123;children&#125;</span><br><span class="line">      &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="å‡½æ•°å¼ç»„ä»¶"><a href="#å‡½æ•°å¼ç»„ä»¶" class="headerlink" title="å‡½æ•°å¼ç»„ä»¶"></a>å‡½æ•°å¼ç»„ä»¶</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Component3 = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;</span><br><span class="line">    children</span><br><span class="line">  &#125; = props</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> ref = React.createRef()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;button</span><br><span class="line">      ref=&#123;ref&#125;</span><br><span class="line">      onClick=&#123;() =&gt; &#123;<span class="built_in">console</span>.log(ref)&#125;&#125;</span><br><span class="line">    &gt;</span><br><span class="line">      &#123;children&#125;</span><br><span class="line">    &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="åœ¨çˆ¶ç»„ä»¶ä½¿ç”¨å­ç»„ä»¶çš„ref-ä¼ é€’ref"><a href="#åœ¨çˆ¶ç»„ä»¶ä½¿ç”¨å­ç»„ä»¶çš„ref-ä¼ é€’ref" class="headerlink" title="åœ¨çˆ¶ç»„ä»¶ä½¿ç”¨å­ç»„ä»¶çš„ref,ä¼ é€’ref"></a>åœ¨çˆ¶ç»„ä»¶ä½¿ç”¨å­ç»„ä»¶çš„ref,ä¼ é€’ref</h2><h4 id="åœ¨ç±»å¼ç»„ä»¶"><a href="#åœ¨ç±»å¼ç»„ä»¶" class="headerlink" title="åœ¨ç±»å¼ç»„ä»¶"></a>åœ¨ç±»å¼ç»„ä»¶</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Component1.js</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Component1</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span> () &#123;</span><br><span class="line">    <span class="keyword">super</span>()</span><br><span class="line">    <span class="keyword">this</span>.buttonRef = React.createRef()</span><br><span class="line">  &#125;</span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;</span><br><span class="line">      children,</span><br><span class="line">    &#125; = <span class="keyword">this</span>.props</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;button</span><br><span class="line">        ref=&#123;node =&gt; <span class="keyword">this</span>.buttonRef = node&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        &#123;children&#125;</span><br><span class="line">      &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ App.js</span></span><br><span class="line"><span class="regexp">const App = (props) =&gt; &#123;</span></span><br><span class="line"><span class="regexp">  const ref2 = React.createRef()</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/ å½“æŒ‚åœ¨å®Œæˆçš„æ—¶å€™ ref2çš„æŒ‡å‘å°±æ˜¯buttonç»„ä»¶</span></span><br><span class="line"><span class="regexp">  return (</span></span><br><span class="line"><span class="regexp">    &lt;Component2 ref=&#123;ref2&#125;&gt;Component2&lt;/</span>Component2&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å¦‚æœè¦åœ¨ç±»å¼ç»„ä»¶ä¸­è·å–åˆ°DOMçš„refçš„è¯ï¼Œå¯ä»¥é€šè¿‡ä¸€ç§æ›²çº¿æ•‘å›½çš„æ–¹å¼ï¼Œå°±æ˜¯ç»„ä»¶å†…éƒ¨è‡ªè¡ŒæŒ‚è½½ä¸€ä¸ªrefåˆ°thiså®ä¾‹çš„å¯¹è±¡ä¸Šï¼Œçˆ¶ç»„ä»¶é€šè¿‡è®¿é—®å­ç»„ä»¶çš„Componentçš„Refå¯¹è±¡ï¼Œæ‰¾åˆ°ä»–ç›¸åº”å†…éƒ¨æŒ‚è½½çš„DOMçš„refå³å¯</p><p>æ¯”å¦‚åœ¨ä¸Šä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>ref1.buttonRef</code>æ‹¿åˆ°buttonçš„DOMå¯¹è±¡</p><h4 id="åœ¨å‡½æ•°å¼ç»„ä»¶"><a href="#åœ¨å‡½æ•°å¼ç»„ä»¶" class="headerlink" title="åœ¨å‡½æ•°å¼ç»„ä»¶"></a>åœ¨å‡½æ•°å¼ç»„ä»¶</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Component2.js</span></span><br><span class="line"><span class="keyword">const</span> Component2 = React.forwardRef(<span class="function">(<span class="params">props, ref</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;</span><br><span class="line">    children</span><br><span class="line">  &#125; = props</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;button ref=&#123;ref&#125;&gt;&#123;children&#125;&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;)</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ App.js</span></span><br><span class="line"><span class="regexp">const App = (props) =&gt; &#123;</span></span><br><span class="line"><span class="regexp">  const ref1 = React.createRef()</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/ å½“æŒ‚åœ¨å®Œæˆçš„æ—¶å€™ ref1çš„æŒ‡å‘å°±æ˜¯å­ç»„ä»¶Component1å®ä¾‹</span></span><br><span class="line"><span class="regexp">  return (</span></span><br><span class="line"><span class="regexp">    &lt;Component1 ref=&#123;ref1&#125;&gt;Component1&lt;/</span>Component1&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>jsåŸå‹é“¾ç›¸å…³</title>
      <link href="/2019/10/15/js%E5%8E%9F%E5%9E%8B%E9%93%BE%E7%9B%B8%E5%85%B3/"/>
      <url>/2019/10/15/js%E5%8E%9F%E5%9E%8B%E9%93%BE%E7%9B%B8%E5%85%B3/</url>
      
        <content type="html"><![CDATA[<blockquote><p>é¦–å…ˆæ˜¯<code>__proto__</code>æ˜¯ä¸æ¨èä½¿ç”¨çš„ï¼Œè¿™æ˜¯å¤§éƒ¨åˆ†æµè§ˆå™¨å†…éƒ¨ä½¿ç”¨çš„ä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯ç”±äºå¤§éƒ¨åˆ†æµè§ˆå™¨éƒ½æ”¯æŒä»–äº†ï¼Œæ‰€ä»¥ESâ€™è¢«è¿«â€™å°†è¿™ä¸ªå±æ€§å†™åˆ°äº†é™„å½•é‡Œé¢ï¼Œä½†æ˜¯ä¹Ÿåªæ˜¯åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­æ”¯æŒï¼Œå…¶ä»–ç¯å¢ƒä¸æ¨èæ”¯æŒè¯¥å±æ€§ï¼Œåº”è¯¥ä½¿ç”¨<code>Object.getPrototypeOf()</code>æ¥è·å–å¯¹è±¡ä¸Šçš„åŸå‹</p></blockquote><h2 id="prototypeå±æ€§"><a href="#prototypeå±æ€§" class="headerlink" title="prototypeå±æ€§"></a>prototypeå±æ€§</h2><blockquote><p>å½“ä¸€ä¸ªå‡½æ•°è¢«åˆ›å»ºçš„æ—¶å€™ï¼Œä»–çš„åŸå‹å¯¹è±¡å°±è¯ç”Ÿäº†</p></blockquote><p>è¯¥å±æ€§æ˜¯å‡½æ•°ä¸Šç”¨æ¥ä½¿ç”¨çš„ï¼Œä¸ºä»€ä¹ˆåªæœ‰å‡½æ•°æ‰æœ‰è¯¥å±æ€§äº†ï¼Œåº”ä¸ºjsä½¿ç”¨å¯¹è±¡æ¥newå¯¹è±¡çš„æ—¶å€™ï¼Œprototypeå°±æ˜¯æŒ‡å‘çš„ä»–çš„æ„é€ å™¨ï¼Œæ‰€ä»¥æ¯ä¸€ä¸ªå‡½æ•°å…¶å®éƒ½æœ‰å¯èƒ½æˆä¸ºä¸€ä¸ªæ„é€ å™¨ï¼Œå¯ä»¥ç”¨æ¥newçš„ï¼Œè‡ªç„¶ä»–ä»¬å°±éœ€è¦æŒ‚è½½ä¸€ä¸ªå…¬å…±çš„æŒ‡å‘å¯¹è±¡ï¼Œç”¨æ¥ä¿å­˜ä¸€äº›å…¬å…±çš„æ–¹æ³•ï¼Œç”¨æ¥èŠ‚çœç©ºé—´ã€‚ä¹Ÿå°±æœ‰äº†prototypeæ‰§è¡Œæ„é€ å™¨ã€‚</p><p>æ‰€ä»¥<code>__proto__ === prototype === Object.getPrototypeOf()</code></p><blockquote><p><code>new</code>çš„æ—¶å€™å…¶å®å°±æ˜¯ä»Objectç»§æ‰¿ä¸ªå¯¹è±¡ï¼ŒæŒ‚è½½åŸå‹ï¼Œç„¶åæŠŠå®ƒç»‘å®šæ„é€ å™¨æ‰§è¡Œ</p></blockquote><h2 id="ä»€ä¹ˆæ˜¯åŸå‹é“¾"><a href="#ä»€ä¹ˆæ˜¯åŸå‹é“¾" class="headerlink" title="ä»€ä¹ˆæ˜¯åŸå‹é“¾"></a>ä»€ä¹ˆæ˜¯åŸå‹é“¾</h2><p><img src="/img/2019/10/15/1.png" alt="åŸå‹é“¾ä¸Šçš„å…³ç³»"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">â‘  fooçš„æ„é€ å™¨<span class="function"><span class="keyword">function</span> <span class="title">Foo</span> (<span class="params"></span>) </span>&#123;&#125; çš„åŸå‹, Foo.prototype</span><br><span class="line"></span><br><span class="line">â‘¡ å‡½æ•°çš„æ„é€ å™¨<span class="function"><span class="keyword">function</span> <span class="title">Function</span> (<span class="params"></span>) </span>&#123;&#125; çš„åŸå‹,  <span class="built_in">Function</span>.prototype</span><br><span class="line"></span><br><span class="line">â‘¢ å¯¹è±¡çš„æ„é€ å™¨<span class="function"><span class="keyword">function</span> <span class="title">Object</span> (<span class="params"></span>) </span>&#123;&#125; çš„åŸå‹,  <span class="built_in">Object</span>.prototype</span><br><span class="line"></span><br><span class="line">â‘£ å‡½æ•°çš„æ„é€ å™¨<span class="function"><span class="keyword">function</span> <span class="title">Function</span> (<span class="params"></span>) </span>&#123;&#125; çš„åŸå‹, <span class="built_in">Function</span>.prototype</span><br><span class="line"></span><br><span class="line">â‘¤ <span class="function"><span class="keyword">function</span>ï¼Œç”±<span class="title">new</span> <span class="title">Function</span>(<span class="params"></span>)åˆ›é€ å‡ºæ¥çš„çš„æ„é€ å™¨<span class="title">function</span> <span class="title">Function</span> (<span class="params"></span>) </span>&#123;&#125; çš„åŸå‹, <span class="built_in">Function</span>.prototype</span><br><span class="line"></span><br><span class="line">â‘¥ <span class="function"><span class="keyword">function</span> <span class="title">Function</span> æ˜¯æœ€ç‰¹æ®Šçš„, ä»–çš„åŸå‹å¯¹è±¡<span class="title">__prop__</span>å°±æ˜¯ä»–çš„<span class="title">proptype</span>å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ <span class="title">Function</span>.<span class="title">prototype</span></span></span><br></pre></td></tr></table></figure><h4 id="Object-prototype-proto"><a href="#Object-prototype-proto" class="headerlink" title="Object.prototype.__proto__"></a><code>Object.prototype.__proto__</code></h4><p>æŒ‰é“ç†<code>Object.prototype.__proto__</code>ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œåº”è¯¥æŒ‡å‘Objectçš„æ„é€ å™¨çš„åŸå‹å³ï¼ŒObject.prototype,ä½†æ˜¯è¿™æ ·å°±é€ æˆäº†å¾ªç¯çš„é‡å¤å¼•ç”¨ï¼Œå¯¼è‡´å¯»æ‰¾ä¸€ä¸ªå¯¹è±¡çš„åŸå‹é“¾ä¸Šçš„å±æ€§æ–¹æ³•æ—¶ï¼Œæ°¸è¿œæ‰¾ä¸åˆ°å°½å¤´,æ‰€ä»¥ä¸º<code>null</code></p><h4 id="prototypeä¸constructor"><a href="#prototypeä¸constructor" class="headerlink" title="prototypeä¸constructor"></a>prototypeä¸constructor</h4><p>æ„é€ å‡½æ•°æ‹¥æœ‰ä¸€ä¸ªprototypeå±æ€§ï¼ŒæŒ‡å‘çš„æ˜¯åŸå‹å¯¹è±¡ï¼Œç„¶è€ŒåŸå‹å¯¹è±¡ä¸Šï¼Œæœ‰ä¸€ä¸ªå±æ€§æŒ‡å‘çš„constructorå±æ€§æŒ‡å‘çš„æ˜¯æ„é€ å™¨çš„é‚£ä¸ªå‡½æ•°</p><h2 id="å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦åœ¨å¦ä¸€ä¸ªå¯¹è±¡çš„åŸå‹é“¾ä¸Š"><a href="#å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦åœ¨å¦ä¸€ä¸ªå¯¹è±¡çš„åŸå‹é“¾ä¸Š" class="headerlink" title="å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦åœ¨å¦ä¸€ä¸ªå¯¹è±¡çš„åŸå‹é“¾ä¸Š"></a>å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦åœ¨å¦ä¸€ä¸ªå¯¹è±¡çš„åŸå‹é“¾ä¸Š</h2><h4 id="åˆ¤æ–­æ˜¯å¦åœ¨æˆ‘è‡ªå·±çš„åŸå‹é“¾ä¸Šobject-instanceof-constructor"><a href="#åˆ¤æ–­æ˜¯å¦åœ¨æˆ‘è‡ªå·±çš„åŸå‹é“¾ä¸Šobject-instanceof-constructor" class="headerlink" title="åˆ¤æ–­æ˜¯å¦åœ¨æˆ‘è‡ªå·±çš„åŸå‹é“¾ä¸Šobject instanceof constructor"></a>åˆ¤æ–­æ˜¯å¦åœ¨<strong>æˆ‘è‡ªå·±</strong>çš„åŸå‹é“¾ä¸Š<code>object instanceof constructor</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> Foo = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="keyword">let</span> fooObject = <span class="keyword">new</span> Foo()</span><br><span class="line"></span><br><span class="line">fooObject <span class="keyword">instanceof</span> Foo <span class="comment">// true</span></span><br><span class="line">fooObject <span class="keyword">instanceof</span> Functino <span class="comment">// false</span></span><br><span class="line">fooObject <span class="keyword">instanceof</span> <span class="built_in">Object</span> <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h4 id="åˆ¤æ–­æ˜¯å¦åœ¨åˆ«äººçš„åŸå‹é“¾ä¸ŠprototypeObj-isProptotypeOf-object"><a href="#åˆ¤æ–­æ˜¯å¦åœ¨åˆ«äººçš„åŸå‹é“¾ä¸ŠprototypeObj-isProptotypeOf-object" class="headerlink" title="åˆ¤æ–­æ˜¯å¦åœ¨åˆ«äººçš„åŸå‹é“¾ä¸ŠprototypeObj.isProptotypeOf(object)"></a>åˆ¤æ–­æ˜¯å¦åœ¨<strong>åˆ«äºº</strong>çš„åŸå‹é“¾ä¸Š<code>prototypeObj.isProptotypeOf(object)</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> Foo = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="keyword">let</span> fooObject = <span class="keyword">new</span> Foo()</span><br><span class="line"></span><br><span class="line">Foo.isProptotypeOf(fooObject) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Function</span>.isProptotypeOf(fooObject) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Object</span>.isProptotypeOf(fooObject) <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="å¦‚ä½•æ‹’ç»åŸå‹é“¾ï¼Œåªçœ‹è‡ªå·±èº«ä¸Šçš„å±æ€§hasOwnProperty"><a href="#å¦‚ä½•æ‹’ç»åŸå‹é“¾ï¼Œåªçœ‹è‡ªå·±èº«ä¸Šçš„å±æ€§hasOwnProperty" class="headerlink" title="å¦‚ä½•æ‹’ç»åŸå‹é“¾ï¼Œåªçœ‹è‡ªå·±èº«ä¸Šçš„å±æ€§hasOwnProperty"></a>å¦‚ä½•æ‹’ç»åŸå‹é“¾ï¼Œåªçœ‹è‡ªå·±èº«ä¸Šçš„å±æ€§<code>hasOwnProperty</code></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">age</span>: <span class="number">18</span> &#125;</span><br><span class="line"></span><br><span class="line">obj.hasOwnProperty(<span class="string">'age'</span>) <span class="comment">// true</span></span><br><span class="line">obj.hasOwnProperty(<span class="string">'toString'</span>) <span class="comment">// false</span></span><br></pre></td></tr></table></figure><h2 id="å®æˆ˜ï¼ˆåˆ¤æ–­å¯¹è±¡ä¸Šçš„å±æ€§ï¼‰"><a href="#å®æˆ˜ï¼ˆåˆ¤æ–­å¯¹è±¡ä¸Šçš„å±æ€§ï¼‰" class="headerlink" title="å®æˆ˜ï¼ˆåˆ¤æ–­å¯¹è±¡ä¸Šçš„å±æ€§ï¼‰"></a>å®æˆ˜ï¼ˆåˆ¤æ–­å¯¹è±¡ä¸Šçš„å±æ€§ï¼‰</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.some = <span class="string">'222'</span></span><br><span class="line">  <span class="keyword">let</span> ccc = <span class="string">'ccc'</span></span><br><span class="line">  foo.okkoro = <span class="string">'okkoro'</span></span><br><span class="line">  foo.prototpye.a = <span class="string">'aaa'</span></span><br><span class="line">&#125;</span><br><span class="line">foo.koro = <span class="string">'koro'</span></span><br><span class="line">foo.prototpye.test = <span class="string">'test1'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> foo1 = <span class="keyword">new</span> foo ()</span><br><span class="line">foo1.prototpye.test = <span class="string">'test2'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æœ€ç»ˆfoo1ä¸Šçš„å±æ€§ï¼ˆä»…è¯´æ˜ä¸æ­¤é¢˜ç›¸å…³çš„ï¼‰</span></span><br><span class="line">foo: &#123;</span><br><span class="line">  some: <span class="string">'222'</span></span><br><span class="line">  __proto__: &#123;</span><br><span class="line">    a: <span class="string">'aaa'</span>,</span><br><span class="line">    test: <span class="string">'test2'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é¦–å…ˆè¦æ˜ç™½newçš„æ—¶å€™ï¼Œé¦–å…ˆä»objectç»§æ‰¿äº†ä¸€ä¸ªå¯¹è±¡è¿‡æ¥ï¼Œç„¶åæŠŠå½“å‰æ„é€ å™¨çš„åŸå‹ç»™ä»–äº†ä»–ï¼Œä»–çš„åŸå‹ä¸Šå°±æœ‰äº†a,ä¹‹ååˆæ‰‹åŠ¨æŒ‚è½½äº†ä¸€ä¸ªtest,(åé¢è¢«ä¿®æ”¹æ‰äº†ï¼Œå› ä¸ºæ€»æ˜¯æŒ‡å‘çš„å…³ç³»)</p><p>åœ¨å®é™…çš„å±æ€§ä¸Šï¼Œfoo1ä»…æœ‰someä¸€ä¸ªå±æ€§ï¼Œä¹Ÿå°±æ˜¯æ„é€ å‡½æ•°ä¸­thisçš„æ•ˆæœ</p><p>è‡³äºokkoro,koroè¿™ä¸¤ä¸ªå±æ€§ä»…ä»…æ˜¯fooçš„é™æ€å±æ€§ï¼Œé€šè¿‡foo1æ˜¯æ— æ³•è®¿é—®åˆ°çš„ï¼Œå› ä¸ºfoo1å’Œfooçš„å…³ç³»ä»…ä»…æ˜¯åŸå‹å¯¹è±¡ä¸Šçš„å…³ç³»ï¼Œå®é™…æŒ‚è½½çš„å±æ€§æ˜¯ä¸ç›¸è”ç³»çš„ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>nginxé…ç½®spaå‰ç«¯å·¥ç¨‹</title>
      <link href="/2019/10/13/nginx%E9%85%8D%E7%BD%AEspa%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B/"/>
      <url>/2019/10/13/nginx%E9%85%8D%E7%BD%AEspa%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<p>spaåº”ç”¨æœ€ç»ˆæ‰“åŒ…çš„distä¸­ï¼Œæ˜¯ä¼šä»¥index.htmlä½œä¸ºå…¥å£æ–‡ä»¶ï¼Œå¦‚æœä¸€æ—¦ä½¿ç”¨browserURLçš„è¿™ç§æ–¹å¼æ¥åšè·¯ç”±çš„è·³è½¬ï¼Œé‚£ä¹ˆåœ¨éƒ¨ç½²çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå‡ºç°ä»¥ä¸‹é—®é¢˜</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">www.blog.com</span><br><span class="line"></span><br><span class="line">åœ¨æ­£å¸¸æƒ…å†µä¸‹,åœ¨åº”ç”¨å†…ï¼Œè·³è½¬å¼æ²¡é—®é¢˜çš„</span><br><span class="line">www.blog.com/profie</span><br><span class="line">www.blog.com/artcile</span><br><span class="line"></span><br><span class="line">å¦‚æœæ˜¯åˆ·æ–°ç½‘é¡µï¼ŒæœåŠ¡å™¨å°±ä¼šæç¤ºã€‚profileèµ„æºä¸å­˜åœ¨ï¼Œè¿™æ˜¯ç”±äºè·¯ç”±å¯¼è‡´çš„ï¼Œæˆ‘ä»¬åœ¨spaå†…è§£æçš„è·¯ç”±æ²¡æœ‰æ­£ç¡®çš„è¢«è¯†åˆ«ï¼Œåè€Œå½“æˆäº†ä¸€ç§èµ„æº</span><br></pre></td></tr></table></figure><p>åœ¨nginxçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œè¦ä½¿ç”¨å¦‚ä¸‹çš„é…ç½®</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">      listen       8080;</span><br><span class="line">      server_name  localhost;</span><br><span class="line">      root /usr/project/dist;</span><br><span class="line">      index index.html;</span><br><span class="line"></span><br><span class="line">      location / &#123;</span><br><span class="line">          try_files $uri $uri/ @router;</span><br><span class="line">          index index.html;</span><br><span class="line">          proxy_set_header   Host             $host;</span><br><span class="line">          proxy_set_header   X-Real-IP        $remote_addr;</span><br><span class="line">          proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;</span><br><span class="line">          proxy_set_header   X-Forwarded-Proto  $scheme;</span><br><span class="line">      &#125;</span><br><span class="line">      location @router &#123;</span><br><span class="line">          rewrite ^.*$ /index.html break;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> è¿ç»´ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>jsä¸­EventLoopç›¸å…³</title>
      <link href="/2019/10/13/%E7%AE%80%E5%8D%95%E4%BA%86%E8%A7%A3EventLoop/"/>
      <url>/2019/10/13/%E7%AE%80%E5%8D%95%E4%BA%86%E8%A7%A3EventLoop/</url>
      
        <content type="html"><![CDATA[<p><strong>æµè§ˆå™¨ä¸­çš„EventLoopä¸nodeä¸­çš„EventLoopæ˜¯ä¸åŒçš„</strong></p><p>åœ¨jsä¸­ï¼Œæ˜¯å•çº¿ç¨‹çš„ï¼Œæ‰€ä»¥åªèƒ½æŠŠä»»åŠ¡æ”¾è¿›ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œä¾æ¬¡è°ƒç”¨è¿™ä¸ªé˜Ÿåˆ—æ¥å®Œæˆæ‰€æœ‰äº‹æƒ…</p><blockquote><p>å¯ä»¥æƒ³è±¡æˆjså°±æ˜¯ä¸€ä¸ªå…¬äº¤è½¦ï¼Œæ‰€æœ‰çš„ä»»åŠ¡è¿‡æ¥å…ˆæ’é˜Ÿï¼Œç­‰åˆ°äº†æ—¶é—´å…¬äº¤è½¦ä¼šè¿‡æ¥ä¸€è¶Ÿæ‹‰èµ°ï¼Œæ­¤æ—¶ä¸ç®¡ç°åœ¨æ˜¯ä»€ä¹ˆæƒ…å†µï¼Œä»–åªä¼šå°†å½“å‰çš„äººæ‹‰èµ°ï¼Œè‡³äºè¿˜æ²¡æœ‰åˆ°çš„äººå°±åªèƒ½ç­‰ä¸‹ä¸€è¶Ÿå…¬äº¤è½¦ã€‚</p></blockquote><h4 id="å¦‚ä½•æ‰§è¡Œå¼‚æ­¥æ“ä½œçš„"><a href="#å¦‚ä½•æ‰§è¡Œå¼‚æ­¥æ“ä½œçš„" class="headerlink" title="å¦‚ä½•æ‰§è¡Œå¼‚æ­¥æ“ä½œçš„"></a>å¦‚ä½•æ‰§è¡Œå¼‚æ­¥æ“ä½œçš„</h4><p>å½“æ‰§è¡Œåˆ°å¼‚æ­¥ä»»åŠ¡çš„æ—¶å€™ï¼Œé¦–å…ˆä»–ä¼šå°†æ­¤ä»»åŠ¡äº¤ç»™ <code>Event table</code>å»å¤„ç†ï¼Œç­‰åˆ°å¼‚æ­¥æ“ä½œç»“æŸçš„æ—¶å€™ï¼Œå†å‹å…¥ä»»åŠ¡é˜Ÿåˆ—<code>task queen</code>,æ‰€ä»¥åœ¨äº‹ä»¶å¾ªç¯çš„æ—¶å€™ï¼Œä»–å¹¶ä¸ä¼šå»äº†è§£è¿™ä¸ªä»»åŠ¡æ˜¯å¦ç»å®Œæˆï¼ˆå…¬äº¤å¸æœºï¼Œè§æœ‰äººä»–å°±æ‹‰èµ°ï¼Œå¦‚æœé‚£ä¸ªäººæœ‰äº‹æš‚æ—¶è¿˜æ¥ä¸äº†ï¼Œé‚£å°±ç­‰ä¸‹ä¸€ç­è½¦ï¼Œä»¥æ­¤ç±»æ¨ï¼‰ï¼Œæ‰€ä»¥ä¸€æ—¦ä»»åŠ¡å®Œæˆï¼Œå°±å°†æ³¨å†Œçš„å›è°ƒä»»åŠ¡å‹å…¥ä»»åŠ¡é˜Ÿåˆ—ï¼ŒEventLoopåšå®Œå½“å‰ä»»åŠ¡é˜Ÿåˆ—çš„äº‹æƒ…æ—¶å€™ï¼Œå†æ¥æ‰§è¡Œä»–</p><h6 id="setTimeoutçš„é—®é¢˜"><a href="#setTimeoutçš„é—®é¢˜" class="headerlink" title="setTimeoutçš„é—®é¢˜"></a>setTimeoutçš„é—®é¢˜</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ­¤æ—¶æ‰§è¡Œä¸‹æ¥æ€»è€—æ—¶4731</span></span><br><span class="line"><span class="keyword">let</span> startTime = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`å¼€å§‹æ‰§è¡Œå›è°ƒçš„ç›¸éš”æ—¶å·®ï¼š<span class="subst">$&#123;<span class="keyword">new</span> <span class="built_in">Date</span>().getTime()-startTime&#125;</span>`</span>);</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>;i&lt;<span class="number">40000</span>;i++)&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å¦‚æœå°†setTimeoutçš„å»¶æ—¶å»é™¤ */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¤æ—¶æ‰§è¡Œä¸‹æ¥æ€»è€—æ—¶4698</span></span><br><span class="line"><span class="keyword">let</span> startTime = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`å¼€å§‹æ‰§è¡Œå›è°ƒçš„ç›¸éš”æ—¶å·®ï¼š<span class="subst">$&#123;<span class="keyword">new</span> <span class="built_in">Date</span>().getTime()-startTime&#125;</span>`</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>;i&lt;<span class="number">40000</span>;i++)&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°è¿è¡Œçš„æ—¶é—´å¹¶æ²¡æœ‰ç”±äºè¿è¡Œç»“æœè€Œæ”¹å˜ï¼Œæ˜¯å› ä¸ºæ­¤æ—¶çš„timeoutåœ¨å‹å…¥<code>task queen</code>çš„æ—¶å€™ï¼Œä¸»çº¿ç¨‹è¿˜æœ‰ä»»åŠ¡æ²¡æœ‰æ‰§è¡Œå®Œï¼Œæ‰€ä»¥ä¹Ÿå°±é€ æˆäº†å½“å‰å·²ç»æœ‰æ–°ä»»åŠ¡å‹å…¥äº†ï¼Œä½†æ˜¯æ²¡æœ‰æ¥å¾—åŠè¿è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">ä»»åŠ¡æ¯”è¾ƒç©ºçš„æ—¶å€™ï¼Œä¼šå¾—åˆ°åŠæ—¶çš„ç›¸åº”</span><br><span class="line"></span><br><span class="line">ä¸»çº¿ç¨‹  ä»»åŠ¡é˜Ÿåˆ—</span><br><span class="line"> 1   |</span><br><span class="line"> 2   |</span><br><span class="line">     |  </span><br><span class="line">     |  3</span><br><span class="line"> 3   | </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ä»»åŠ¡æ¯”è¾ƒæ»¡çš„æ—¶å€™ï¼Œé€ æˆäº†å»¶è¿Ÿï¼Œå®šæ—¶å™¨ä¸å‡†</span><br><span class="line"></span><br><span class="line">ä¸»çº¿ç¨‹  ä»»åŠ¡é˜Ÿåˆ—</span><br><span class="line"> 1   |</span><br><span class="line"> 1   |</span><br><span class="line"> 1   |  </span><br><span class="line"> 1   |  2</span><br><span class="line"> 1   | </span><br><span class="line"> 1   |</span><br><span class="line"> 1   |</span><br><span class="line"> 2   |</span><br></pre></td></tr></table></figure><h4 id="micro-task-amp-macro-task"><a href="#micro-task-amp-macro-task" class="headerlink" title="micro-task &amp; macro-task"></a>micro-task &amp; macro-task</h4><p>é™¤å»åŒæ­¥ï¼Œå¼‚æ­¥çš„è§’åº¦æ¥çœ‹ï¼Œè¿˜å¯ä»¥åˆ†ä¸ºå¾®ä»»åŠ¡ï¼ˆé™¤å»Process.nextTickã€Promise.then catch finally(æ³¨æ„æˆ‘ä¸æ˜¯è¯´ Promise)ã€MutationObserverï¼‰ï¼Œå…¶ä»–éƒ½å¯ä»¥å½“åšå®ä»»åŠ¡ã€‚<br><strong>mirco-taskçš„å¥½å¤„å°±æ˜¯ï¼Œä»–å¯ä»¥æ’é˜Ÿï¼Œå¦‚æœæœ‰ä¸ªsetTimeoutï¼Œå·²ç»æ‰§è¡Œå®Œäº†ï¼Œåœ¨quenTaskä¸­ç­‰å¾…äº†ï¼Œpromise.thenå¯ä»¥å…ˆä¸ä»–æ‰§è¡Œ</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'script start'</span>);</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'setTimeout'</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'promise1'</span>);</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'promise2'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// script start</span></span><br><span class="line"><span class="comment">// promise1</span></span><br><span class="line"><span class="comment">// promise2</span></span><br><span class="line"><span class="comment">// setTimeout</span></span><br></pre></td></tr></table></figure><h4 id="nodeåˆ™å°†EventLoopåˆ†ä¸º6ä¸ªé˜¶æ®µï¼ˆä¾æ¬¡å¾ªç¯ï¼‰ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªé˜¶æ®µéƒ½æ˜¯ä¸€ç±»çš„marco-taskçš„task-queue"><a href="#nodeåˆ™å°†EventLoopåˆ†ä¸º6ä¸ªé˜¶æ®µï¼ˆä¾æ¬¡å¾ªç¯ï¼‰ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªé˜¶æ®µéƒ½æ˜¯ä¸€ç±»çš„marco-taskçš„task-queue" class="headerlink" title="nodeåˆ™å°†EventLoopåˆ†ä¸º6ä¸ªé˜¶æ®µï¼ˆä¾æ¬¡å¾ªç¯ï¼‰ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªé˜¶æ®µéƒ½æ˜¯ä¸€ç±»çš„marco-taskçš„task queue"></a>nodeåˆ™å°†EventLoopåˆ†ä¸º6ä¸ªé˜¶æ®µï¼ˆä¾æ¬¡å¾ªç¯ï¼‰ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªé˜¶æ®µéƒ½æ˜¯ä¸€ç±»çš„marco-taskçš„task queue</h4><ul><li>timersï¼š æ‰§è¡ŒsetTimeout, setIntervalä¸­çš„åˆ°æœŸçš„callback</li><li>pending callback: ä¸Šä¸€è½®å¾ªç¯ä¸­å°‘æ•°çš„I/O,callbcakä¼šå»¶è¿Ÿåˆ°è¿™é‡Œæ‰§è¡Œ</li><li>idle,prepare: ä»…åœ¨å†…éƒ¨ä½¿ç”¨</li><li>poll æœ€ä¸ºé‡è¦çš„é˜¶æ®µï¼Œæ‰§è¡ŒI/Oç­‰ï¼Œcallback</li><li>check æ‰§è¡ŒsetImmediateçš„callback</li><li>close æ‰§è¡Œcloseçš„callbackäº‹ä»¶</li></ul><h6 id="timers"><a href="#timers" class="headerlink" title="timers"></a>timers</h6><p>è™½ç„¶å®šæ—¶å™¨ä»»ç„¶æ˜¯ä¸å‡†ç¡®çš„ï¼Œä½†æ˜¯å°†timersæ”¾åˆ°äº†EventLoopçš„æœ€å‰é¢ï¼Œä¹Ÿæ˜¯ä¸ºäº†ä¿è¯ï¼Œå°½é‡å‡†æ—¶æ‰§è¡Œå®šæ—¶å™¨ä»»åŠ¡</p><h6 id="poll"><a href="#poll" class="headerlink" title="poll"></a>poll</h6><ul><li><p>æ‰§è¡ŒI/O,callback</p></li><li><p>å¤„ç†<code>poll queue</code>ä¸­çš„taskä»»åŠ¡</p><ul><li>taskæœ‰ä»»åŠ¡ï¼Œæ‰§è¡Œä»–ï¼Œä¸€ç›´åˆ°é˜Ÿåˆ—ä¸ºç©ºæˆ–è€…ç³»ç»Ÿç›¸å…³é™åˆ¶</li><li>taskä¸ºç©ºï¼Œä¼šå»çœ‹æ˜¯å¦æœ‰setImmediate,æœ‰åˆ™ç›´æ¥è·³åˆ°checkï¼Œå¦åˆ™åœ¨è¿™é‡Œé˜»å¡ç­‰å¾…</li></ul></li><li><p>å…¶ä»–çš„ä¸€äº›é˜¶æ®µä¼šæœ‰ç‰¹æ®Šæ‰§è¡Œï¼Œæ¯”å¦‚socket,closeçš„æ—¶å€™ï¼Œå°±ä¼šåˆ°closeå»æ‰§è¡Œ</p></li></ul><h4 id="process-nextTick"><a href="#process-nextTick" class="headerlink" title="process.nextTick"></a>process.nextTick</h4><p>ä»–æ˜¯ä¸€ä¸ªç»ˆææ’é˜Ÿç‹ï¼Œæ¯”micro-taskè¿˜å‰å®³</p><h5 id="å…³äºmicro-taskä¸macro-task"><a href="#å…³äºmicro-taskä¸macro-task" class="headerlink" title="å…³äºmicro-taskä¸macro-task"></a>å…³äºmicro-taskä¸macro-task</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//node</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'1'</span>);</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'2'</span>);</span><br><span class="line">    process.nextTick(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'3'</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'4'</span>);</span><br><span class="line">        resolve();</span><br><span class="line">    &#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'5'</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">process.nextTick(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'6'</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'7'</span>);</span><br><span class="line">    resolve();</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'8'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'9'</span>);</span><br><span class="line">    process.nextTick(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'10'</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'11'</span>);</span><br><span class="line">        resolve();</span><br><span class="line">    &#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'12'</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1  </span></span><br><span class="line"><span class="comment">// 7  </span></span><br><span class="line"><span class="comment">// 6  </span></span><br><span class="line"><span class="comment">// 8  </span></span><br><span class="line"><span class="comment">// 2  </span></span><br><span class="line"><span class="comment">// 4  </span></span><br><span class="line"><span class="comment">// 9  </span></span><br><span class="line"><span class="comment">// 11 </span></span><br><span class="line"><span class="comment">// 3  </span></span><br><span class="line"><span class="comment">// 10 </span></span><br><span class="line"><span class="comment">// 5  </span></span><br><span class="line"><span class="comment">// 12 </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// chrome </span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'1'</span>);</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'2'</span>);</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'4'</span>);</span><br><span class="line">        resolve();</span><br><span class="line">    &#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'5'</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'7'</span>);</span><br><span class="line">    resolve();</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'8'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'9'</span>);</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'11'</span>);</span><br><span class="line">        resolve();</span><br><span class="line">    &#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'12'</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 7</span></span><br><span class="line"><span class="comment">// 8</span></span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line"><span class="comment">// 4</span></span><br><span class="line"><span class="comment">// 5</span></span><br><span class="line"><span class="comment">// 9</span></span><br><span class="line"><span class="comment">// 11</span></span><br><span class="line"><span class="comment">// 12</span></span><br></pre></td></tr></table></figure><p>è‡³äºnodeä¸­ï¼ŒsetTimeoutä¸­æ˜¯åŒä¸€ç±»çš„macro-taskï¼Œæ‰€ä»¥ä»–ä»¬ä¼šå…¨éƒ¨æ‰§è¡Œå®Œï¼Œç­‰å¾…åˆ‡æ¢çš„æ—¶å€™ï¼Œåœ¨æ‰§è¡Œmicro-task,ç„¶è€Œåœ¨chromeä¸­ï¼Œæ¯ä¸€ä¸ªmacro-taskæ˜¯å•ç‹¬æ‰§è¡Œçš„ï¼Œæ‰€ä»¥æ¯ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œçš„æ—¶å€™ï¼Œéƒ½æœ‰æœºä¼šå»åšmacro-task</p>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>éƒ¨ç½²yapiä¸ä½¿ç”¨å®ˆæŠ¤è¿›ç¨‹supervisor</title>
      <link href="/2019/10/10/%E9%83%A8%E7%BD%B2yapi/"/>
      <url>/2019/10/10/%E9%83%A8%E7%BD%B2yapi/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å¤šæ¬¾APIæ–‡æ¡£ç®¡ç†å·¥å…·éƒ½ä½“éªŒäº†ä¸€ä¸‹ï¼Œä»å¼€æºä»¥åŠåæœŸç»´æŠ¤æ¥è¯´ï¼Œyapiç¡®å®æ˜¯ä¸é”™çš„é€‰æ‹©ï¼Œç”±å»å“ªå‰ç«¯å›¢é˜Ÿå‡ºå“ï¼Œå¹¶ä¸”ä¸€ç›´åœ¨ç»´æŠ¤ï¼Œè™½ç„¶ç›¸æ¯”åŒè¡Œä¸šeolinkeræ¥è¯´ï¼Œè¿˜æ˜¯æœ‰ä¸€å®šè·ç¦»ï¼Œä½†æ˜¯å¯¹äºå†…ç½‘éƒ¨ç½²ï¼Œä½¿ç”¨æ¥è¯´ï¼Œyapiç¡®å®æ˜¯ä¸é”™çš„é€‰æ‹©äº†ã€‚</p></blockquote><h2 id="å®‰è£…MongoDB"><a href="#å®‰è£…MongoDB" class="headerlink" title="å®‰è£…MongoDB"></a>å®‰è£…MongoDB</h2><ol><li><p>é…ç½®é˜¿é‡Œyumæº</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc/yum.repos.d/</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ æº</span></span><br><span class="line">vim mongodb-org.repo</span><br><span class="line"></span><br><span class="line"><span class="comment"># mongodb-org.repo</span></span><br><span class="line">[mongodb-org]</span><br><span class="line">name=MongoDB Repository</span><br><span class="line">baseurl=http://mirrors.aliyun.com/mongodb/yum/redhat/7Server/mongodb-org/3.2/x86_64/</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br></pre></td></tr></table></figure></li><li><p>æ›´æ–°yumæº</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum update</span><br></pre></td></tr></table></figure></li></ol><p>3.å®‰è£…MongoDB<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install -y mongodb-org</span><br><span class="line">service mongod start</span><br></pre></td></tr></table></figure></p><h2 id="å®‰è£…YApiéƒ¨ç½²cli"><a href="#å®‰è£…YApiéƒ¨ç½²cli" class="headerlink" title="å®‰è£…YApiéƒ¨ç½²cli"></a>å®‰è£…YApiéƒ¨ç½²cli</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g yapi-cli --registry https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨é¡µé¢é…ç½®ï¼ˆæ‰“å¼€9090ç«¯å£ï¼‰"><a href="#ä½¿ç”¨é¡µé¢é…ç½®ï¼ˆæ‰“å¼€9090ç«¯å£ï¼‰" class="headerlink" title="ä½¿ç”¨é¡µé¢é…ç½®ï¼ˆæ‰“å¼€9090ç«¯å£ï¼‰"></a>ä½¿ç”¨é¡µé¢é…ç½®ï¼ˆæ‰“å¼€9090ç«¯å£ï¼‰</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yapi server</span><br></pre></td></tr></table></figure><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">vim config.json</span><br><span class="line"></span><br><span class="line"><span class="comment"># å»ºè®®ä½¿ç”¨163é‚®ç®±ï¼Œæ•ˆæœæ¯”è¾ƒå¥½</span></span><br><span class="line"> <span class="string">"mail"</span>: &#123;</span><br><span class="line">     <span class="string">"enable"</span>: <span class="literal">true</span>,</span><br><span class="line">     <span class="string">"host"</span>: <span class="string">"smtp.163.com"</span>,</span><br><span class="line">     <span class="string">"port"</span>: 465,</span><br><span class="line">     <span class="string">"from"</span>: <span class="string">"å¯ç”¨äºå‘é€é‚®ä»¶çš„163é‚®ç®±"</span>,</span><br><span class="line">     <span class="string">"auth"</span>: &#123;</span><br><span class="line">         <span class="string">"user"</span>: <span class="string">"163é‚®ç®±"</span>,</span><br><span class="line">         <span class="string">"pass"</span>: <span class="string">"163é‚®ç®±å¯¹åº”çš„å¯†ç æˆ–æˆæƒç "</span></span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¯åŠ¨"><a href="#å¯åŠ¨" class="headerlink" title="å¯åŠ¨"></a>å¯åŠ¨</h2><p>åˆ‡æ¢åˆ°å®‰è£…ç›®å½•ä¸‹ï¼Œä½¿ç”¨nodeå¯åŠ¨æœåŠ¡<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node vendors/server/app.js</span><br></pre></td></tr></table></figure></p><p>æ€»çš„æ¥è¯´å®‰è£…è¿˜æ˜¯å¾ˆç®€å•çš„ï¼Œæ˜¯ä¸€æ¬¾éå¸¸ä¸é”™çš„å·¥å…·ï¼Œå¹¶ä¸”å®‰è£…ä¹Ÿå¾ˆå®¹æ˜“</p><h2 id="ä½¿ç”¨Supervisorå®ˆæŠ¤"><a href="#ä½¿ç”¨Supervisorå®ˆæŠ¤" class="headerlink" title="ä½¿ç”¨Supervisorå®ˆæŠ¤"></a>ä½¿ç”¨Supervisorå®ˆæŠ¤</h2><h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install python-setuptools -y</span><br><span class="line">easy_install supervisor</span><br></pre></td></tr></table></figure><h4 id="ä¿®æ”¹é…ç½®"><a href="#ä¿®æ”¹é…ç½®" class="headerlink" title="ä¿®æ”¹é…ç½®"></a>ä¿®æ”¹é…ç½®</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºç›®å½•</span></span><br><span class="line">mkdir /etc/supervisor</span><br><span class="line"><span class="comment"># åˆ›å»ºæ¨¡æ¿æ–‡ä»¶</span></span><br><span class="line">echo_supervisord_conf &gt; /etc/supervisor/supervisord.conf</span><br><span class="line"><span class="comment"># æ·»åŠ è‡ªå®šä¹‰é…ç½®</span></span><br><span class="line">vim /etc/supervisor/supervisord.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># supervisord.conf è¿½åŠ ï¼ŒåŠ è½½ç›®å½•ä¸‹çš„æ–‡ä»¶</span></span><br><span class="line">[include]</span><br><span class="line">files = conf.d/*.conf</span><br></pre></td></tr></table></figure><h4 id="å¢åŠ YApi-conf"><a href="#å¢åŠ YApi-conf" class="headerlink" title="å¢åŠ YApi.conf"></a>å¢åŠ YApi.conf</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/supervisor/conf.d/YApiGhost.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># YApiGhost.conf</span></span><br><span class="line">[program: YApiGhost]</span><br><span class="line"><span class="built_in">command</span>=node vendors/server/app.js</span><br><span class="line">directory=/usr/yapi/yapi</span><br><span class="line">autorestart=<span class="literal">true</span></span><br><span class="line">stderr_logfile=/var/<span class="built_in">log</span>/YApiGhost.err.log</span><br><span class="line">stdout_logfile=/var/<span class="built_in">log</span>/YApiGhost.out.log</span><br><span class="line">user=root</span><br><span class="line">stopsignal=INT</span><br></pre></td></tr></table></figure><h4 id="å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹"><a href="#å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹" class="headerlink" title="å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹"></a>å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">supervisord -c /etc/supervisor/supervisord.conf</span><br></pre></td></tr></table></figure><h4 id="è®¾ç½®å¼€æœºå¯åŠ¨"><a href="#è®¾ç½®å¼€æœºå¯åŠ¨" class="headerlink" title="è®¾ç½®å¼€æœºå¯åŠ¨"></a>è®¾ç½®å¼€æœºå¯åŠ¨</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/lib/systemd/system/supervisord.service</span><br><span class="line"></span><br><span class="line"><span class="comment"># supervisord.service</span></span><br><span class="line">[Unit]</span><br><span class="line">Description=Supervisor daemon</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=forking</span><br><span class="line">ExecStart=/usr/bin/supervisord -c /etc/supervisor/supervisord.conf</span><br><span class="line">ExecStop=/usr/bin/supervisorctl shutdown</span><br><span class="line">ExecReload=/usr/bin/supervisorctl reload</span><br><span class="line">KillMode=process</span><br><span class="line">Restart=on-failure</span><br><span class="line">RestartSec=42s</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><h4 id="è®¾ç½®å¼€æœºå¯åŠ¨-1"><a href="#è®¾ç½®å¼€æœºå¯åŠ¨-1" class="headerlink" title="è®¾ç½®å¼€æœºå¯åŠ¨"></a>è®¾ç½®å¼€æœºå¯åŠ¨</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> supervisord</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨supervisorctlç®¡ç†"><a href="#ä½¿ç”¨supervisorctlç®¡ç†" class="headerlink" title="ä½¿ç”¨supervisorctlç®¡ç†"></a>ä½¿ç”¨supervisorctlç®¡ç†</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¼€å¯</span></span><br><span class="line">supervisord -c /etc/supervisor/supervisord.conf</span><br><span class="line"><span class="comment"># å…³é—­</span></span><br><span class="line">supervisorctl shutdown</span><br><span class="line"></span><br><span class="line">supervisorctl</span><br><span class="line"></span><br><span class="line">stop    &lt;Service name&gt;</span><br><span class="line">start   &lt;Service name&gt;</span><br><span class="line">restart &lt;Service name&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> è¿ç»´ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ä¸é€‚åˆä½¿ç”¨ç®­å¤´å‡½æ•°çš„åœºæ™¯</title>
      <link href="/2019/10/10/%E4%B8%8D%E9%80%82%E5%90%88%E4%BD%BF%E7%94%A8%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0%E7%9A%84%E5%9C%BA%E6%99%AF/"/>
      <url>/2019/10/10/%E4%B8%8D%E9%80%82%E5%90%88%E4%BD%BF%E7%94%A8%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0%E7%9A%84%E5%9C%BA%E6%99%AF/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ç®­å¤´å‡½æ•°æ— æ³•ç»‘å®šthis<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fn1 = <span class="function">(<span class="params">p</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(p)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn2</span> (<span class="params">p</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(p)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>)</span><br><span class="line">&#125;</span><br><span class="line">fn1.apply(&#123;<span class="attr">name</span>: <span class="string">'zzz'</span>&#125;, [<span class="string">'fn1'</span>])  <span class="comment">// fn1 undefined</span></span><br><span class="line">fn2.apply(&#123;<span class="attr">name</span>: <span class="string">'zzz'</span>&#125;, [<span class="string">'fn2'</span>]) <span class="comment">// fn2 &#123; name: 'zzz' &#125;</span></span><br><span class="line"></span><br><span class="line">fn1.call(&#123;<span class="attr">name</span>: <span class="string">'zzz'</span>&#125;, <span class="string">'fn1'</span>)  <span class="comment">// fn1 undefined</span></span><br><span class="line">fn2.call(&#123;<span class="attr">name</span>: <span class="string">'zzz'</span>&#125;, <span class="string">'fn2'</span>) <span class="comment">// fn2 &#123; name: 'zzz' &#125;</span></span><br></pre></td></tr></table></figure></p></blockquote><h4 id="åœ¨å¯¹è±¡å†…ä½¿ç”¨éœ€è¦æ³¨æ„çš„"><a href="#åœ¨å¯¹è±¡å†…ä½¿ç”¨éœ€è¦æ³¨æ„çš„" class="headerlink" title="åœ¨å¯¹è±¡å†…ä½¿ç”¨éœ€è¦æ³¨æ„çš„"></a>åœ¨å¯¹è±¡å†…ä½¿ç”¨éœ€è¦æ³¨æ„çš„</h4><h6 id="å®šä¹‰å­—é¢é‡çš„æ–¹æ³•"><a href="#å®šä¹‰å­—é¢é‡çš„æ–¹æ³•" class="headerlink" title="å®šä¹‰å­—é¢é‡çš„æ–¹æ³•"></a>å®šä¹‰å­—é¢é‡çš„æ–¹æ³•</h6><p>åœ¨å¯¹è±¡å†…å®šä¹‰æ–¹æ³•çš„æ—¶å€™ï¼Œå¦‚æœè¯¥æ–¹æ¡ˆä½¿ç”¨åˆ°äº†thisï¼Œé‚£ä¹ˆåˆ™éœ€ä¸ºä¼ ç»Ÿå‡½æ•°çš„å½¢å¼<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é”™è¯¯çš„ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">const</span> calculator = &#123;</span><br><span class="line">  array: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">  sum: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>) <span class="comment">// thisæŒ‡å‘çš„æ˜¯å¤–éƒ¨windowå¯¹è±¡ </span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.array.reduce(<span class="function">(<span class="params">result, item</span>) =&gt;</span> result + item, <span class="number">0</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­£ç¡®çš„ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">const</span> calculator = &#123;</span><br><span class="line">  array: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">  sum1: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>) <span class="comment">// æŒ‡å‘å¯¹è±¡æœ¬èº«</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.array.reduce(<span class="function">(<span class="params">result, item</span>) =&gt;</span> result + item, <span class="number">0</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  sum2 () &#123; <span class="comment">// å’Œä¸Šé¢æ˜¯ä¸€æ ·çš„</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>) <span class="comment">// æŒ‡å‘å¯¹è±¡æœ¬èº«</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.array.reduce(<span class="function">(<span class="params">result, item</span>) =&gt;</span> result + item, <span class="number">0</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h6 id="å®šä¹‰åŸå‹ä¸Šçš„æ–¹æ³•"><a href="#å®šä¹‰åŸå‹ä¸Šçš„æ–¹æ³•" class="headerlink" title="å®šä¹‰åŸå‹ä¸Šçš„æ–¹æ³•"></a>å®šä¹‰åŸå‹ä¸Šçš„æ–¹æ³•</h6><p>åŸå‹ä¸Šå®šä¹‰çš„æ–¹æ³•ï¼Œæœ‰æ—¶ç›®çš„å°±æ˜¯å–åˆ°å¯¹è±¡thisï¼Œè¿›è¡Œæ“ä½œï¼Œä¹Ÿä¸èƒ½ä½¿ç”¨ç®­å¤´å‡½æ•°çš„å½¢å¼<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­£ç¡®çš„ä½¿ç”¨æ–¹å¼</span></span><br><span class="line">Cat.prototype.sayCatName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>) <span class="comment">// catå®ä¾‹</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é”™è¯¯çš„ä½¿ç”¨æ–¹å¼</span></span><br><span class="line">Cat.prototype.sayCatName = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">// =&gt; window</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.name; <span class="comment">// å¤–éƒ¨å–ä¸åˆ°å°±ä¼šæŠ¥é”™</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><h4 id="å®šä¹‰äº‹ä»¶çš„å›è°ƒå‡½æ•°ä¸Š"><a href="#å®šä¹‰äº‹ä»¶çš„å›è°ƒå‡½æ•°ä¸Š" class="headerlink" title="å®šä¹‰äº‹ä»¶çš„å›è°ƒå‡½æ•°ä¸Š"></a>å®šä¹‰äº‹ä»¶çš„å›è°ƒå‡½æ•°ä¸Š</h4><p>å› ä¸ºå›è°ƒå‡½æ•°ç›®çš„æ˜¯å½“å‰çš„å¯¹è±¡ï¼Œåœ¨ä¹‹åè¿˜èƒ½è°ƒç”¨å®ƒï¼Œä¹Ÿå°±æ˜¯å¼ºçƒˆéœ€è¦thisçš„ä¿¡æ¯<br>å½“æ—¶ç”¨äº†ç®­å¤´å‡½æ•°çš„æ—¶å€™ï¼Œä¼šä¸¢å¤±this<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> button = <span class="built_in">document</span>.getElementById(<span class="string">'myButton'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// é”™è¯¯çš„ä½¿ç”¨</span></span><br><span class="line">button.addEventListener(<span class="string">'click'</span>, () =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>) <span class="comment">// =&gt; window</span></span><br><span class="line">  <span class="keyword">this</span>.innnerHTML = <span class="string">'new Button Text'</span> <span class="comment">// æŠ¥é”™ï¼Œæ­¤æ—¶windowæ— innerHTMLå±æ€§</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­£ç¡®çš„ä½¿ç”¨</span></span><br><span class="line">button.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>) <span class="comment">// =&gt; button</span></span><br><span class="line">  <span class="keyword">this</span>.innnerHTML = <span class="string">'new Button Text'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h4 id="å®šä¹‰æ„é€ å‡½æ•°"><a href="#å®šä¹‰æ„é€ å‡½æ•°" class="headerlink" title="å®šä¹‰æ„é€ å‡½æ•°"></a>å®šä¹‰æ„é€ å‡½æ•°</h4><p>ç®­å¤´å‡½æ•°å®šä¹‰åœ¨æ„é€ å‡½æ•°ä¸­æ˜¯æ²¡æœ‰æ„ä¹‰çš„<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é”™è¯¯ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">const</span> Fish = <span class="function">(<span class="params">name</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> Fish(<span class="string">'feifei'</span>)) <span class="comment">// æŠ¥é”™ï¼ŒFishä¸æ˜¯æ„é€ å‡½æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­£ç¡®ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">const</span> Dog = <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> Dog(<span class="string">'heihei'</span>))</span><br></pre></td></tr></table></figure></p><h4 id="ä»£ç é£æ ¼"><a href="#ä»£ç é£æ ¼" class="headerlink" title="ä»£ç é£æ ¼"></a>ä»£ç é£æ ¼</h4><p>è™½ç„¶ä½¿ç”¨ç®­å¤´å‡½æ•°å¯ä»¥å°‘å»èŠ±æ‹¬å·ï¼Œå°‘å»return, ä¸€è¡Œå®Œæˆï¼Œä½†æ˜¯ä¸€å®šè¦æ˜¯åœ¨ä»£ç å¯è¯»çš„æƒ…å†µä¸‹ï¼Œ<br>ä¸ä»£ç å¯ç»´æŠ¤æ€§ç›¸æ¯”è¾ƒï¼Œè¿‡çŸ­çš„ä»£ç ä¼šå½±å“å¯¹å…¶çš„è§£è¯»æ€§</p>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å…³äºreactä¸­çš„contextçš„ç†è§£</title>
      <link href="/2019/10/08/%E5%85%B3%E4%BA%8Ereact%E4%B8%AD%E7%9A%84context%E7%9A%84%E7%90%86%E8%A7%A3/"/>
      <url>/2019/10/08/%E5%85%B3%E4%BA%8Ereact%E4%B8%AD%E7%9A%84context%E7%9A%84%E7%90%86%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ¬ä¾‹åªæ˜¯åšè¯´æ˜æ€§ï¼Œå…·ä½“ä»£ç è¦è¿è¡Œèµ·æ¥ï¼Œè¿˜éœ€è¦åŠ å…¥äº›å…¶ä»–å…ƒç´ </p></blockquote><h4 id="ä¸»è¦è§£å†³çš„é—®é¢˜"><a href="#ä¸»è¦è§£å†³çš„é—®é¢˜" class="headerlink" title="ä¸»è¦è§£å†³çš„é—®é¢˜"></a>ä¸»è¦è§£å†³çš„é—®é¢˜</h4><p>åœ¨åº”ç”¨ä¸­å¯èƒ½ä¼šæœ‰å¾ˆå¤šç»„ä»¶ä¼šå»ä½¿ç”¨åˆ°çš„ç»„ä»¶ï¼Œå¹¶ä¸”å½“ä½¿ç”¨çˆ¶å­ä¼ é€’è¿™ä¸€æœºåˆ¶çš„æ—¶å€™ï¼Œä¼šæ˜¾å¾—è¿‡äºè‡ƒè‚¿ç¹çï¼Œæ‰€ä»¥è¦ä½¿ç”¨ä¸Šä¸‹æ–‡çš„æ–¹å¼æ¥è¿›è¡Œä¼ é€’ã€‚</p><h4 id="1-åˆ›å»ºä¸€ä¸ªcontext"><a href="#1-åˆ›å»ºä¸€ä¸ªcontext" class="headerlink" title="1.åˆ›å»ºä¸€ä¸ªcontext"></a>1.åˆ›å»ºä¸€ä¸ªcontext</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// theme-context.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> ThemeContext = React.createContext(<span class="string">'dark'</span>) <span class="comment">// é»˜è®¤ä¸ºdark</span></span><br></pre></td></tr></table></figure><h4 id="2-ä½¿ç”¨contextå†…å®¹-class"><a href="#2-ä½¿ç”¨contextå†…å®¹-class" class="headerlink" title="2.ä½¿ç”¨contextå†…å®¹-class"></a>2.ä½¿ç”¨contextå†…å®¹-class</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// Demo.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; ThemeContext &#125; <span class="keyword">from</span> <span class="string">'./theme-context'</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Demo</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">const</span> theme = <span class="keyword">this</span>.context</span><br><span class="line">    <span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;theme&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Demo.contextType = ThemeContext</span><br></pre></td></tr></table></figure><h4 id="2-ä½¿ç”¨contextå†…å®¹-function"><a href="#2-ä½¿ç”¨contextå†…å®¹-function" class="headerlink" title="2.ä½¿ç”¨contextå†…å®¹-function"></a>2.ä½¿ç”¨contextå†…å®¹-function</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Demo.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; ThemeContext &#125; <span class="keyword">from</span> <span class="string">'./theme-context'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Consumer</span> (<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;ThemeContext.Consumer&gt;</span><br><span class="line">      &#123;theme =&gt; (</span><br><span class="line">        &lt;div&gt;&#123;theme&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      )&#125;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>ThemeContext.Consumer&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-ä¼ é€’å¯ç”¨"><a href="#3-ä¼ é€’å¯ç”¨" class="headerlink" title="3.ä¼ é€’å¯ç”¨"></a>3.ä¼ é€’å¯ç”¨</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; ThemeContext &#125; <span class="keyword">from</span> <span class="string">'./theme-context'</span></span><br><span class="line"><span class="keyword">import</span> Demo <span class="keyword">from</span> <span class="string">'demo'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Wrapper</span> (<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">Demo</span> /&gt;</span>)</span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">class App extends React.Component &#123;</span></span><br><span class="line"><span class="xml">  render (</span></span><br><span class="line"><span class="xml">    return (</span></span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;ThemeContext.Provider value="light"&gt;</span><br><span class="line">          &lt;Wrapper /&gt;  // æ­¤æ—¶ Wrapper å†…çš„ Demo ä½¿ç”¨çš„æ˜¯å°±è¿‘çš„ light</span><br><span class="line">        &lt;/ThemeContext.Provider&gt;</span><br><span class="line">        &lt;Wrapper /&gt;  // æ­¤æ—¶ Wrapper å†…çš„ Demo ä½¿ç”¨çš„æ˜¯é»˜è®¤å€¼ dark</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åœ¨hookä¸­ä½¿ç”¨context"><a href="#åœ¨hookä¸­ä½¿ç”¨context" class="headerlink" title="åœ¨hookä¸­ä½¿ç”¨context"></a>åœ¨hookä¸­ä½¿ç”¨context</h4><p>çˆ¶ç»„ä»¶è¿˜æ˜¯è¦ä½¿ç”¨<code>&lt;MyContext.Provider value={} /&gt;</code>è¿™ç§æ–¹å¼å°†ä¸Šä¸‹æ–‡å¯¹è±¡å…¨å±€ä¼ é€’å‡ºå»ï¼Œä¸åŒçš„å°±æ˜¯ä½¿ç”¨åˆ°contextçš„ç»„ä»¶ï¼Œå¯ä»¥ä½¿ç”¨functionç»„ä»¶ï¼Œæ¥æ–¹ä¾¿çš„æ¥æ”¶<br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Demo.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; ThemeContext &#125; <span class="keyword">from</span> <span class="string">'./theme-context'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Demo</span> (<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> theme = React.useContext(ThemeContext)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ... contextä¸­å˜åŒ–æ—¶ï¼Œè¯¥ç»„ä»¶ä¼šåŒæ­¥åˆ·æ–°</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="éœ€è¦æ³¨æ„çš„é—®é¢˜"><a href="#éœ€è¦æ³¨æ„çš„é—®é¢˜" class="headerlink" title="éœ€è¦æ³¨æ„çš„é—®é¢˜"></a>éœ€è¦æ³¨æ„çš„é—®é¢˜</h4><p>contextä¼šä½¿ç”¨å‚è€ƒæ ‡è¯†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯èƒ½valueä¸å˜çš„æƒ…å†µä¸‹ï¼Œä»–ä¼šé€šçŸ¥ä½¿ç”¨åˆ°contextç»„ä»¶é‡æ–°æ¸²æŸ“<br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;Provider value=&#123;&#123;<span class="attr">something</span>: <span class="string">'something'</span>&#125;&#125;&gt;</span><br><span class="line">  &lt;Toolbar /&gt;</span><br><span class="line">&lt;<span class="regexp">/Provider&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ æ­¤æ—¶æ­¤ç»„ä»¶åˆ·æ–°çš„æ—¶å€™ï¼Œä»–ä¼šé€šçŸ¥ç»„ä»¶ valueå‘ç”Ÿäº†æ”¹å˜ï¼ˆå°½ç®¡å­—é¢é‡å¹¶æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼‰</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ å¯ä»¥å°†valueçš„å€¼æåˆ°stateä¸­å»å­˜å‚¨</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">state = &#123;</span></span><br><span class="line"><span class="regexp">  value: &#123;something: 'something'&#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;Provider value=&#123;this.state.value&#125;&gt;</span></span><br><span class="line"><span class="regexp">  &lt;Toolbar /</span>&gt;</span><br><span class="line">&lt;<span class="regexp">/Provider&gt;</span></span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
    </entry>
    
    <entry>
      <title>å…³äºreactä¸­å¾ªç¯æ¸²æŸ“æ•°æ®æ—¶keyçš„é—®é¢˜</title>
      <link href="/2019/10/05/%E5%85%B3%E4%BA%8Ereact%E4%B8%AD%E5%BE%AA%E7%8E%AF%E6%B8%B2%E6%9F%93%E6%95%B0%E6%8D%AE%E6%97%B6key%E7%9A%84%E9%97%AE%E9%A2%98/"/>
      <url>/2019/10/05/%E5%85%B3%E4%BA%8Ereact%E4%B8%AD%E5%BE%AA%E7%8E%AF%E6%B8%B2%E6%9F%93%E6%95%B0%E6%8D%AE%E6%97%B6key%E7%9A%84%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h2 id="keyçš„å½±å“"><a href="#keyçš„å½±å“" class="headerlink" title="keyçš„å½±å“"></a>keyçš„å½±å“</h2><p>å¾ªç¯å…ƒç´ ä¹‹æ‰€ä»¥éœ€è¦ä¸€ä¸ªkeyï¼Œå°±æ˜¯å› ä¸ºä»–æ— æ³•ç¡®è®¤è¿™ä¸¤ä¸ªå…ƒç´ åœ¨å‰åæ˜¯å¦è¿˜æœ‰å…³è”ï¼Œå› ä¸ºä»–ä»¬å¤§éƒ½æ˜¯ç±»å‹ç›¸åŒçš„ï¼Œä¼šé€ æˆé‡æ–°æ¸²æŸ“æˆ–è€…æ˜¯ä¸€äº›èšç„¦çŠ¶æ€ç­‰ä¸¢å¤±ï¼Œæ‰€ä»¥è¦æ ¹æ®è¿™ä¸ªkeyæ¥åˆ¤æ–­æ˜¯å¦æ˜¯å½“å‰å…ƒç´ <br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> todos = [&#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">title</span>: <span class="string">'eat'</span> &#125;, &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">title</span>: <span class="string">'coding'</span> &#125;]</span><br><span class="line"></span><br><span class="line">todos.map(<span class="function">(<span class="params">todo, index</span>) =&gt;</span> (</span><br><span class="line">  &lt;p key=&#123;index&#125;&gt;</span><br><span class="line">    &lt;span&gt;&#123;todo.title&#125;&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">    comment: &lt;input /</span>&gt;</span><br><span class="line">  &lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">))</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">todos.map((todo, index) =&gt; (</span></span><br><span class="line"><span class="regexp">  &lt;p key=&#123;todo.id&#125;&gt;</span></span><br><span class="line"><span class="regexp">    &lt;span&gt;&#123;todo.title&#125;&lt;/</span>span&gt;</span><br><span class="line">    comment: <span class="xml"><span class="tag">&lt;<span class="name">input</span> /&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">))</span><br></pre></td></tr></table></figure></p><p>å½“æˆ‘ä»¬åœ¨è¾“å…¥æ¡†è¾“å…¥ä¸€å®šçš„å†…å®¹çš„æ—¶å€™ï¼Œæˆ‘ä»¬åˆ‡æ¢ä¸€ä¸‹æ•°ç»„çš„å†…å®¹<br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">todos = [ todos[<span class="number">1</span>], todos[<span class="number">0</span>] ]</span><br></pre></td></tr></table></figure></p><p>æ­¤æ—¶ä¸¤ç§æ–¹å¼ç»‘å®šçš„ä¸åŒç»“æœå¯èƒ½å°±ä¼šï¼Œé€ æˆå…ƒç´ æ”¹å˜äº†ï¼Œä¸Šä¸€æ¬¡è¾“å…¥çš„å†…å®¹ä¸æ ‡ç­¾å¯¹åº”å¼‚å¸¸</p><p><img src="/img/2019/10/05/1.png" alt="åˆå§‹åŒ–"></p><p>å½“æˆ‘ä»¬ç‚¹å‡»åˆ‡æ¢å…ƒç´ å†…çš„é¡ºåºæ—¶</p><p><img src="/img/2019/10/05/2.png" alt="ç‚¹å‡»æŒ‰é’®å"></p>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>devServerå®ç°å±€åŸŸç½‘å†…è®¿é—®</title>
      <link href="/2019/10/04/devServer%E5%AE%9E%E7%8E%B0%E5%B1%80%E5%9F%9F%E7%BD%91%E5%86%85%E8%AE%BF%E9%97%AE/"/>
      <url>/2019/10/04/devServer%E5%AE%9E%E7%8E%B0%E5%B1%80%E5%9F%9F%E7%BD%91%E5%86%85%E8%AE%BF%E9%97%AE/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åœ¨reacté¡¹ç›®ä¸­ï¼Œç»å¸¸ä¼šä½¿ç”¨åˆ°devServer, æ­¤æ—¶å¦‚æœè®¾å¤‡åœ¨åŒä¸€å±€åŸŸç½‘ä¸‹åº”è¯¥æ˜¯å¯ä»¥èƒ¡åŒçš„ï¼ˆåŒä¸€wifiç¯å¢ƒï¼‰</p></blockquote><ol><li><p>æ£€æŸ¥æœ¬æœºé˜²ç«å¢™è®¾ç½®</p></li><li><p>å¼€å¯devServerç›¸å…³é…ç½®ï¼ˆé‡ç‚¹ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">  port: <span class="number">8080</span>,</span><br><span class="line">  disableHostCheck: <span class="literal">true</span>,</span><br><span class="line">  host: <span class="string">'0.0.0.0'</span>,</span><br><span class="line"></span><br><span class="line">  ...</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>eolinkerAMSå¼€æºç‰ˆæ¶è®¾</title>
      <link href="/2019/10/04/eolinkerAMS%E5%BC%80%E6%BA%90%E7%89%88%E6%9E%B6%E8%AE%BE/"/>
      <url>/2019/10/04/eolinkerAMS%E5%BC%80%E6%BA%90%E7%89%88%E6%9E%B6%E8%AE%BE/</url>
      
        <content type="html"><![CDATA[<blockquote><p>javaç‰ˆåœ°å€ <a href="https://gitee.com/haonan98/eoLinker-AMS-Lite-For-Java" target="_blank" rel="noopener">https://gitee.com/haonan98/eoLinker-AMS-Lite-For-Java</a></p></blockquote><h2 id="æ‰€éœ€ç¯å¢ƒ"><a href="#æ‰€éœ€ç¯å¢ƒ" class="headerlink" title="æ‰€éœ€ç¯å¢ƒ"></a>æ‰€éœ€ç¯å¢ƒ</h2><ul><li>java8+ </li><li>mysql5.5+</li></ul><h2 id="åˆ›å»ºæ•°æ®åº“"><a href="#åˆ›å»ºæ•°æ®åº“" class="headerlink" title="åˆ›å»ºæ•°æ®åº“"></a>åˆ›å»ºæ•°æ®åº“</h2><p>åˆ›å»ºæ•°æ®åº“eolinker_osï¼Œå¹¶æ‰§è¡Œeolinker_os.sql</p><h2 id="æ›´æ”¹ç›¸å…³è¿æ¥é…ç½®"><a href="#æ›´æ”¹ç›¸å…³è¿æ¥é…ç½®" class="headerlink" title="æ›´æ”¹ç›¸å…³è¿æ¥é…ç½®"></a>æ›´æ”¹ç›¸å…³è¿æ¥é…ç½®</h2><p>æ›´æ”¹é…ç½®æ–‡ä»¶,setting.propperties</p><h2 id="è¿è¡ŒjaråŒ…"><a href="#è¿è¡ŒjaråŒ…" class="headerlink" title="è¿è¡ŒjaråŒ…"></a>è¿è¡ŒjaråŒ…</h2><p><code>java -jar xxx</code> åç»­è¿›å…¥å¼•å¯¼å³å¯</p><h2 id="é¡¹ç›®åœ°å€"><a href="#é¡¹ç›®åœ°å€" class="headerlink" title="é¡¹ç›®åœ°å€"></a>é¡¹ç›®åœ°å€</h2><p><a href="http://ip:port/eolinker_os/index.html" target="_blank" rel="noopener">http://ip:port/eolinker_os/index.html</a></p><h2 id="å¼€æºæ„Ÿè°¢"><a href="#å¼€æºæ„Ÿè°¢" class="headerlink" title="å¼€æºæ„Ÿè°¢"></a>å¼€æºæ„Ÿè°¢</h2><p><a href="https://www.eolinker.com" target="_blank" rel="noopener">https://www.eolinker.com</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> è¿ç»´ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>814</title>
      <link href="/2019/08/14/814/"/>
      <url>/2019/08/14/814/</url>
      
        <content type="html"><![CDATA[<p>åˆæ˜¯ä¸€ä¸ª814ï¼Œ22å²äº†ï¼Œé•¿å¤§äº†ä¸€å²ï¼Œå“ˆå“ˆå“ˆå“ˆï¼Œä»¥åæ¯å¹´å°±åœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹å§ï¼Œæ˜å¤©å…¬äº¤äº‘å°±å¼€å·¥èµ„äº†ï¼Œç®—äººç”Ÿç¬¬ä¸€æ¡¶é‡‘å§ï¼Œå“ˆå“ˆå“ˆï¼ŒåŠ æ²¹</p><p>æ­å·Â·å…¬äº¤äº‘ 22 å®ä¹ 4k<br>next age =&gt; 6k</p><p>åŠ æ²¹å’¯ï¼</p><p><img src="/img/2019/08/14/4.png" alt="çœ‹åˆ°æˆ‘å•¦â„(â„ â„â€¢â„Ï‰â„â€¢â„ â„)â„"></p>]]></content>
      
      
      
        <tags>
            
            <tag> å¿ƒæƒ… </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å¾®ä¿¡å°ç¨‹åºå†…ï¼Œç”Ÿæˆè‡ªå®šä¹‰äºŒç»´ç </title>
      <link href="/2019/08/14/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%86%85%EF%BC%8C%E7%94%9F%E6%88%90%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8C%E7%BB%B4%E7%A0%81/"/>
      <url>/2019/08/14/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%86%85%EF%BC%8C%E7%94%9F%E6%88%90%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8C%E7%BB%B4%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨å¼€å‘ä¸­ï¼Œéœ€è¦ç”Ÿæˆè‡ªå®šä¹‰çš„äºŒç»´ç ï¼Œäºæ˜¯åšäº†ä¸€ä¸ªåŒ…å‡ºæ¥ï¼Œåˆ†äº«ç»™å¤§å®¶ä¸€èµ·ä½¿ç”¨ã€‚é€‚ç”¨äºå¾®ä¿¡å°ç¨‹åºçš„äºŒç»´ç ç”Ÿæˆå™¨ï¼ŒåŸºäºCanvasç”Ÿæˆï¼Œæ”¯æŒä¸­æ–‡çš„è¾“å…¥ã€‚å¯åœ¨åŸç”Ÿå°ç¨‹åºï¼Œmpvueï¼Œtaroä¸­ä½¿ç”¨ã€‚ï¼ˆæ–‡æœ«æœ‰ä¸€ä¸ªä½¿ç”¨ç¤ºä¾‹ï¼‰<img src="/img/2019/08/14/1.png" alt="qrcode"></p><p>githubåœ°å€ <a href="https://github.com/Z-HNAN/wxmp-qrcode" target="_blank" rel="noopener">wxmp-qrcode</a></p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install wxmp-qrcode</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><ol><li><p>åˆ›å»ºä¸€ä¸ªcanvas,è®¾ç½®å…¶<code>id</code>,ä¸<code>canvas-id</code>ï¼Œ å¹¶è®¾ç½®canvasçš„æ ·å¼ï¼ŒäºŒç»´ç åŸºäºå…¶å¤§å°ç”Ÿæˆå¹¶å±…ä¸­</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"cav-qrcode"</span> <span class="attr">canvas-id</span>=<span class="string">"cav-qrcode"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>å¼•å…¥åŒ…å¹¶ä½¿ç”¨</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> QR <span class="keyword">from</span> <span class="string">'wxmp-qrcode'</span></span><br><span class="line">QR.draw(str, canvasId)</span><br></pre></td></tr></table></figure></li></ol><h2 id="api"><a href="#api" class="headerlink" title="api"></a>api</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * æ ¹æ®canvaså°ºå¯¸ï¼Œç”»å‡ºåˆé€‚å±…ä¸­çš„qrcode</span><br><span class="line"> * @param &#123;Object&#125; str äºŒç»´ç çš„å†…å®¹ (å¿…é¡»)</span><br><span class="line"> * @param &#123;Object&#125; canvasId canvasIdçš„å€¼ (å¿…é¡»)</span><br><span class="line"> * @param &#123;Object&#125; $this ä¼ å…¥ç»„ä»¶çš„this,å…¼å®¹åœ¨ç»„ä»¶ä¸­ç”ŸæˆäºŒç»´ç  ï¼ˆå¯é€‰ï¼Œå¯çœç•¥è¯¥å‚æ•°ï¼‰</span><br><span class="line"> * @param &#123;Object&#125; callback å›è°ƒå‡½æ•° (å¯é€‰)</span><br><span class="line"> */</span><br><span class="line">draw: function (str, canvasId, $this, callback)</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line">* æ¸…é™¤canvaså†…å®¹</span><br><span class="line">* @param &#123;Object&#125; canvasId canvasId (å¿…é¡»)</span><br><span class="line">* @param &#123;Object&#125; callback å›è°ƒå‡½æ•° ï¼ˆå¯é€‰ï¼‰</span><br><span class="line">*/</span><br><span class="line">clear: function (canvasId, callback)</span><br></pre></td></tr></table></figure><h2 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h2><ol><li><p>canvasä¸­ id, canvas-idå¿…é¡»ä¿æŒä¸€è‡´</p><ul><li>id è·å–canvasèŠ‚ç‚¹ï¼Œè‡ªåŠ¨è®¡ç®—å¤§å°ä½¿ç”¨, <strong>äºŒç»´ç å¤§å°åŸºäºcanvasè‡ªåŠ¨ç”Ÿæˆ</strong></li><li>canvas-id ç»˜åˆ¶äºŒç»´ç ä½¿ç”¨</li></ul></li><li><p>å¦‚æœåœ¨ç»„ä»¶ä¸­ä½¿ç”¨ï¼Œéœ€è¦ä¼ å…¥ç»„ä»¶çš„thisï¼Œ<code>draw(str, canvasId, componentThis)</code></p><ul><li>å…·ä½“å‚è§ <a href="https://developers.weixin.qq.com/miniprogram/dev/api/canvas/wx.createCanvasContext.html" target="_blank" rel="noopener">wx.createCanvasContext</a></li></ul></li><li><p>å¯ä»¥ä¿å­˜äºŒç»´ç ä¸ºä¸´æ—¶å›¾ç‰‡åœ°å€</p><ul><li>å…·ä½“å¯å‚è§ <a href="https://developers.weixin.qq.com/miniprogram/dev/api/canvas/wx.canvasToTempFilePath.html" target="_blank" rel="noopener">wx.canvasToTempFilePath</a></li><li>bug: è¯¥æ–¹æ³•æœ‰æ—¶ä¿å­˜çš„å›¾ç‰‡ä¼šæœ‰ä¸€ä¸ªç«–æ¡ã€‚<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">createQrCode: <span class="function"><span class="keyword">function</span> (<span class="params">content, canvasId</span>) </span>&#123;</span><br><span class="line">  QR.api.draw(content, canvasId)</span><br><span class="line">  <span class="keyword">this</span>.canvasToTempImage(canvasId)</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–ä¸´æ—¶ç¼“å­˜å›¾ç‰‡è·¯å¾„</span></span><br><span class="line">canvasToTempImage: <span class="function"><span class="keyword">function</span> (<span class="params">canvasId</span>) </span>&#123;</span><br><span class="line">  wx.canvasToTempFilePath(&#123;</span><br><span class="line">    canvasId, </span><br><span class="line">    success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">let</span> tempFilePath = res.tempFilePath; <span class="comment">// ä¸´æ—¶å›¾ç‰‡åœ°å€ï¼Œå¯åœ¨æ”¾å…¥å›¾ç‰‡srcä¸­ä½¿ç”¨</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ol><h2 id="åŸç”Ÿå°ç¨‹åºwxmpä¸­ä½¿ç”¨"><a href="#åŸç”Ÿå°ç¨‹åºwxmpä¸­ä½¿ç”¨" class="headerlink" title="åŸç”Ÿå°ç¨‹åºwxmpä¸­ä½¿ç”¨"></a>åŸç”Ÿå°ç¨‹åºwxmpä¸­ä½¿ç”¨</h2><ol><li>åœ¨é¡¹ç›®è®¾ç½®ä¸­é€‰æ‹© <code>ä½¿ç”¨npmæ¨¡å—</code><br><img src="/img/2019/08/14/2.png" alt="ä½¿ç”¨npmæ¨¡å—"></li><li>å¦‚æœç¬¬ä¸€æ¬¡ä½¿ç”¨npmæ¨¡å—ï¼Œéœ€è¦é¦–å…ˆåœ¨æ ¹ç›®å½•ä¸­<code>npm init</code>, ä¹‹åå†å®‰è£…æ¨¡å— <code>npm i wxmp-qrcode</code> </li><li>åœ¨å·¥å…·ä¸­é€‰æ‹© <code>æ„å»ºnpm</code><br><img src="/img/2019/08/14/3.png" alt="æ„å»ºnpm"></li><li><p>index.wxml</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"&#123;&#123;canvasId&#125;&#125;"</span> <span class="attr">canvas-id</span>=<span class="string">"&#123;&#123;canvasId&#125;&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">"creatQRCode"</span>&gt;</span> ç”ŸæˆäºŒç»´ç  <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>index.wxss</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">canvas</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1</span>rpx solid <span class="number">#eee</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">400</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">button</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">100</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>index.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> QR <span class="keyword">from</span> <span class="string">'./qrcode'</span></span><br><span class="line"></span><br><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    canvasId: <span class="string">'canvasId'</span>,</span><br><span class="line">    QRdata: <span class="string">'ä½ å¥½ wxmp-qrcode'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  creatQRCode () &#123;</span><br><span class="line">    <span class="keyword">let</span> str = <span class="keyword">this</span>.data.QRdata</span><br><span class="line">    <span class="keyword">let</span> canvasId = <span class="keyword">this</span>.data.canvasId</span><br><span class="line">    QR.draw(str, canvasId)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>taroä¸­é›†æˆredux-saga</title>
      <link href="/2019/08/14/taro%E4%B8%AD%E9%9B%86%E6%88%90redux-saga/"/>
      <url>/2019/08/14/taro%E4%B8%AD%E9%9B%86%E6%88%90redux-saga/</url>
      
        <content type="html"><![CDATA[<blockquote><p>taroä¸­reduxå¤„ç†æ–¹æ¡ˆæ˜¯é‡‡ç”¨redux-thunk,è¿™é‡Œé‡‡ç”¨<a href="https://redux-saga.js.org/" target="_blank" rel="noopener">redux-saga</a>è§£å†³å¼‚æ­¥é—®é¢˜ï¼Œ<em>å¼•å…¥ç›®å‰æœ€æ–°<a href="mailto:redux-saga@1.0.5" target="_blank" rel="noopener">redux-saga@1.0.5</a></em></p></blockquote><h4 id="å¼•å…¥æ–¹å¼ä¸€"><a href="#å¼•å…¥æ–¹å¼ä¸€" class="headerlink" title="å¼•å…¥æ–¹å¼ä¸€"></a>å¼•å…¥æ–¹å¼ä¸€</h4><p>å¯ä»¥ç›´æ¥ä¸‹è½½ç§å­é¡¹ç›®ï¼Œå·²ç»å¼•å…¥äº†sagaï¼Œå¹¶åšå¥½äº†ç›¸å…³é…ç½®ï¼Œå¯åœ¨æ­¤åŸºç¡€ä¸Šå†æ¬¡å¼€å‘<br><a href="https://github.com/Z-HNAN/taro-redux-saga-seed" target="_blank" rel="noopener">taro-redux-saga-seed</a><br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// ä¸‹è½½ç§å­é¡¹ç›®</span><br><span class="line">git clone https://github.com/Z-HNAN/taro-redux-saga-seed</span><br><span class="line"></span><br><span class="line">// å®‰è£…ä¾èµ–</span><br><span class="line">cd taro-redux-saga-seed</span><br><span class="line">npm i </span><br><span class="line"></span><br><span class="line">// å¯åŠ¨é¡¹ç›®-å°ç¨‹åº(å¾®ä¿¡å¼€å‘è€…å·¥å…·æŸ¥çœ‹æ•ˆæœï¼Œæœ‰ä¸€ä¸ª3så»¶è¿Ÿçš„addç¤ºä¾‹)</span><br><span class="line">npm run dev:weapp</span><br></pre></td></tr></table></figure></p><h4 id="å¼•å…¥æ–¹å¼äºŒ"><a href="#å¼•å…¥æ–¹å¼äºŒ" class="headerlink" title="å¼•å…¥æ–¹å¼äºŒ"></a>å¼•å…¥æ–¹å¼äºŒ</h4><p>åœ¨è‡ªå·±å·²ç»æœ‰çš„é¡¹ç›®ä¸Šå¼•å…¥ï¼ŒæŒ‰ç…§åç»­æ­¥éª¤è‡ªè¡Œå¼•å…¥å³å¯</p><h4 id="å®‰è£…redux-saga"><a href="#å®‰è£…redux-saga" class="headerlink" title="å®‰è£…redux-saga"></a>å®‰è£…redux-saga</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i redux-saga</span><br></pre></td></tr></table></figure><h4 id="æ›´æ”¹ç›®å½•å½¢å¼"><a href="#æ›´æ”¹ç›®å½•å½¢å¼" class="headerlink" title="æ›´æ”¹ç›®å½•å½¢å¼"></a>æ›´æ”¹ç›®å½•å½¢å¼</h4><p>å°†æ¯ä¸ªæ–‡ä»¶æ”¾åœ¨æ¨¡å—ä¸­ï¼Œåˆ©äºæŸ¥æ‰¾ï¼Œä¾¿äºå¼•å…¥ï¼Œåé¢å¼•å…¥sagaæ–‡ä»¶ä¹Ÿæ¯”è¾ƒæ¸…æ™°ï¼Œå½“ç„¶è¿™é‡Œåªæ˜¯ä¸€ä¸ªä¸ªäººå–œå¥½ï¼Œä¹Ÿå¯æŒ‰ç…§è‡ªå·±çš„ç›®å½•å½¢å¼æ¥å®‰æ’ï¼Œè¿™é‡Œåªåšä¸€ä¸ªå‚è€ƒ,è¯·å¤šç•™æ„å¼•å…¥æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®ã€‚<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">â””â”€src                     </span><br><span class="line">    â”‚  app.jsx            </span><br><span class="line">    â”‚  app.less           </span><br><span class="line">    â”‚  index.html         </span><br><span class="line">    â”‚                     </span><br><span class="line">    â”œâ”€pages               </span><br><span class="line">    â”‚  â””â”€index            </span><br><span class="line">    â”‚          action.js  </span><br><span class="line">    â”‚          index.jsx  </span><br><span class="line">    â”‚          index.less </span><br><span class="line">    â”‚          reducer.js </span><br><span class="line">    |          saga.js</span><br><span class="line">    â”‚                     </span><br><span class="line">    â””â”€store               </span><br><span class="line">            index.js      </span><br><span class="line">            reducer.js</span><br><span class="line">            saga.js</span><br></pre></td></tr></table></figure></p><h4 id="å¼•å…¥indexæ¨¡å—çš„saga"><a href="#å¼•å…¥indexæ¨¡å—çš„saga" class="headerlink" title="å¼•å…¥indexæ¨¡å—çš„saga"></a>å¼•å…¥indexæ¨¡å—çš„saga</h4><ul><li><code>pages/index/saga.js</code>æ•è·å½“å‰æ¨¡å—ä¸­çš„action</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; put, delay, takeEvery&#125; <span class="keyword">from</span> <span class="string">'redux-saga/effects'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">asyncAddRequest</span> (<span class="params">action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; timeout &#125; = action.payload</span><br><span class="line">  <span class="keyword">yield</span> delay(timeout)</span><br><span class="line">  <span class="keyword">yield</span> put(&#123; <span class="attr">type</span>: <span class="string">'ADD'</span> &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>* (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> takeEvery(<span class="string">'ASYNC_ADD'</span>, asyncAddRequest)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="é…ç½®æ ¹sagaæ–‡ä»¶"><a href="#é…ç½®æ ¹sagaæ–‡ä»¶" class="headerlink" title="é…ç½®æ ¹sagaæ–‡ä»¶"></a>é…ç½®æ ¹sagaæ–‡ä»¶</h4><ul><li><code>store/saga.js</code>å¯åŠ¨å„ä¸ªæ¨¡å—çš„saga</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; all &#125; <span class="keyword">from</span> <span class="string">'redux-saga/effects'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> index <span class="keyword">from</span> <span class="string">'../pages/index/saga'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>* (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> all([</span><br><span class="line">    index()</span><br><span class="line">  ])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åœ¨storeä¸­å¼•å…¥sagaMiddleware"><a href="#åœ¨storeä¸­å¼•å…¥sagaMiddleware" class="headerlink" title="åœ¨storeä¸­å¼•å…¥sagaMiddleware"></a>åœ¨storeä¸­å¼•å…¥sagaMiddleware</h4><ul><li><code>store/index.js</code>sagaè¿æ¥åˆ°store<ul><li>å¼•å…¥saga</li><li>é…ç½®sagaä¸­é—´ä»¶åˆ°middlewares</li><li>å¯åŠ¨saga</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore, applyMiddleware, compose &#125; <span class="keyword">from</span> <span class="string">'redux'</span></span><br><span class="line"><span class="comment">/* å¼•å…¥saga */</span></span><br><span class="line"><span class="keyword">import</span> createSagaMiddleware <span class="keyword">from</span> <span class="string">'redux-saga'</span></span><br><span class="line"><span class="keyword">import</span> rootSaga <span class="keyword">from</span> <span class="string">'./saga'</span></span><br><span class="line"><span class="keyword">import</span> rootReducer <span class="keyword">from</span> <span class="string">'./reducer'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> composeEnhancers =</span><br><span class="line">  <span class="keyword">typeof</span> <span class="built_in">window</span> === <span class="string">'object'</span> &amp;&amp;</span><br><span class="line">  <span class="built_in">window</span>.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ?   </span><br><span class="line">    <span class="built_in">window</span>.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__(&#123;</span><br><span class="line">      <span class="comment">// Specify extensionâ€™s options like name, actionsBlacklist, actionsCreators, serialize...</span></span><br><span class="line">    &#125;) : compose</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ç”ŸæˆsagaMiddleware */</span></span><br><span class="line"><span class="keyword">const</span> sagaMiddleware = createSagaMiddleware();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> middlewares = [</span><br><span class="line">  <span class="comment">/* åº”ç”¨saga */</span></span><br><span class="line">  sagaMiddleware</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å¤„ç†redux-logger */</span></span><br><span class="line"><span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">'development'</span> &amp;&amp; process.env.TARO_ENV !== <span class="string">'quickapp'</span>) &#123;</span><br><span class="line">  middlewares.push(<span class="built_in">require</span>(<span class="string">'redux-logger'</span>).createLogger())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> enhancer = composeEnhancers(</span><br><span class="line">  applyMiddleware(...middlewares),</span><br><span class="line">  <span class="comment">// other store enhancers if any</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">configStore</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> store = createStore(rootReducer, enhancer)</span><br><span class="line">  <span class="comment">/* å¯åŠ¨saga */</span></span><br><span class="line">  sagaMiddleware.run(rootSaga)</span><br><span class="line">  <span class="keyword">return</span> store</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ£€æµ‹"><a href="#æ£€æµ‹" class="headerlink" title="æ£€æµ‹"></a>æ£€æµ‹</h4><ul><li><code>pages/index/index.jsx</code> æœ¬ä¾‹ä»¥taroçš„reduxä¸ºåŸºç¡€è¿›è¡Œæµ‹è¯•</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Taro, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'@tarojs/taro'</span></span><br><span class="line"><span class="keyword">import</span> &#123; View, Button, Text &#125; <span class="keyword">from</span> <span class="string">'@tarojs/components'</span></span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'@tarojs/redux'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; add, minus, asyncAdd &#125; <span class="keyword">from</span> <span class="string">'./action'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./index.less'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    counter: state.index.num</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function">(<span class="params">dispatch</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    add: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      dispatch(add())</span><br><span class="line">    &#125;,</span><br><span class="line">    asyncAdd: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      dispatch(asyncAdd(&#123; <span class="attr">timeout</span>: <span class="number">3000</span> &#125;))</span><br><span class="line">    &#125;,</span><br><span class="line">    minus: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      dispatch(minus())</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@connect(mapStateToProps, mapDispatchToProps)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    config = &#123;</span><br><span class="line">    navigationBarTitleText: <span class="string">'é¦–é¡µ'</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentWillReceiveProps (nextProps) &#123;</span><br><span class="line">    <span class="comment">// console.log(this.props, nextProps)</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentWillUnmount () &#123; &#125;</span><br><span class="line"></span><br><span class="line">  componentDidShow () &#123; &#125;</span><br><span class="line"></span><br><span class="line">  componentDidHide () &#123; &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;View className=<span class="string">'index'</span>&gt;</span><br><span class="line">        &lt;Button className=<span class="string">'add_btn'</span> onClick=&#123;<span class="keyword">this</span>.props.add&#125;&gt;+<span class="xml"><span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line">        &lt;Button className=<span class="string">'dec_btn'</span> onClick=&#123;<span class="keyword">this</span>.props.minus&#125;&gt;-<span class="xml"><span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line">        &lt;Button className=<span class="string">'dec_btn'</span> onClick=&#123;<span class="keyword">this</span>.props.asyncAdd&#125;&gt;<span class="keyword">async</span>&lt;<span class="regexp">/Button&gt;</span></span><br><span class="line"><span class="regexp">        &lt;View&gt;&lt;Text&gt;&#123;this.props.counter&#125;&lt;/</span>Text&gt;<span class="xml"><span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line">        &lt;View&gt;<span class="xml"><span class="tag">&lt;<span class="name">Text</span>&gt;</span>Hello, Redux-saga<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line">      &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default Index</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>reselectè§£è¯»</title>
      <link href="/2019/08/14/reselect%E8%A7%A3%E8%AF%BB/"/>
      <url>/2019/08/14/reselect%E8%A7%A3%E8%AF%BB/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åŸºäº1.0.0 è¿›è¡Œè§£è¯»</p></blockquote><h4 id="ç®€å•å›é¡¾ä¸€ä¸‹é«˜é˜¶å‡½æ•°"><a href="#ç®€å•å›é¡¾ä¸€ä¸‹é«˜é˜¶å‡½æ•°" class="headerlink" title="ç®€å•å›é¡¾ä¸€ä¸‹é«˜é˜¶å‡½æ•°"></a>ç®€å•å›é¡¾ä¸€ä¸‹é«˜é˜¶å‡½æ•°</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myMemorize</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> lastRet = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">let</span> lastParam = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">let</span> resultFuc = fn</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">...args</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (lastRet &amp;&amp; args.every(<span class="function">(<span class="params">value, index</span>) =&gt;</span> value === lastParam[index])) &#123;</span><br><span class="line">      <span class="comment">// æœ‰ç¼“å­˜ç»“æœï¼Œå¹¶ä¸”å‚æ•°å®Œå…¨ä¸€è‡´</span></span><br><span class="line">      <span class="keyword">return</span> lastRet</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ç¼“å­˜ç»“æœä¸ä¸€è‡´</span></span><br><span class="line">    lastParam = args</span><br><span class="line">    lastRet = resultFuc(...args)</span><br><span class="line">    <span class="keyword">return</span> lastRet</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> add = <span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b</span><br><span class="line"><span class="keyword">let</span> memAdd = myMemorize(add)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'---------------------------'</span>)</span><br><span class="line">add(<span class="number">1</span>, <span class="number">2</span>)  =&gt; <span class="number">3</span> è®¡ç®—</span><br><span class="line">add(<span class="number">1</span>, <span class="number">2</span>)  =&gt; <span class="number">3</span> è®¡ç®—</span><br><span class="line"></span><br><span class="line">memAdd(<span class="number">1</span>, <span class="number">2</span>) =&gt; <span class="number">3</span> è®¡ç®—</span><br><span class="line">memAdd(<span class="number">1</span>, <span class="number">2</span>) =&gt; <span class="number">3</span> ç¼“å­˜</span><br></pre></td></tr></table></figure><h4 id="ç›®çš„"><a href="#ç›®çš„" class="headerlink" title="ç›®çš„"></a>ç›®çš„</h4><p>è¿›è¡Œç¼“å­˜æ•°æ®ï¼Œä»–å¯¹çº¯å‡½æ•°çš„ç»“æœè¿›è¡Œä¸€æ¬¡ç¼“å­˜ï¼Œï¼ˆçº¯å‡½æ•°<em>Pure Function</em>ï¼šç»™å®šç¡®å®šçš„è¾“å…¥è¾“å‡ºï¼Œä»–çš„å€¼éƒ½æ˜¯ä¸å˜çš„ï¼Œæ‰€ä»¥æœ‰äº†ç¼“å­˜çš„éœ€æ±‚ï¼Œä¸ç”¨æ¯ä¸€æ¬¡éƒ½è®¡ç®—ï¼‰</p><p>å¦å¤–ï¼Œåœ¨reactä¸­ï¼Œç”±äºReactçš„Diffç®—æ³•ï¼Œä»–ä¼šæ‰“è¡¥ä¸ï¼Œé‚£ä¹ˆå¦‚æœç»™çš„stateç›¸åŒçš„è¯ï¼Œå°±ä¼šè·³è¿‡è¿™ä¸ªè¡¥ä¸ï¼Œä¹Ÿå°±çœå»äº†æ­¤æ¬¡çš„åˆ·æ–°æ“ä½œï¼ŒèŠ‚çœäº†æ—¶é—´ã€‚ç„¶è€Œåœ¨åŸæœ¬çš„Reactä¸­ï¼Œstateæ›´æ–°æ—¶ï¼Œæ‰€æœ‰çš„stateéƒ½ä¼šè¢«é€šçŸ¥åˆ°ï¼Œå†…å®¹å®Œå…¨ä¸€æ ·ï¼Œåªæ˜¯ä»–ä»¬çš„å†…å­˜åœ°å€ä¸åŒï¼Œæ‰€ä»¥å°±å¯¼è‡´äº†Diffä¼šæ‰“ä¸Šä¸€ä¸ªæ— ç”¨çš„è¡¥ä¸ï¼Œåšä¸€äº›ä¸å¿…è¦çš„è§†å›¾åˆ·æ–°æ“ä½œã€‚</p><h4 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h4><p>ä½¿ç”¨é«˜é˜¶å‡½æ•°ï¼Œå°†ä¸Šä¸€æ¬¡çš„çº¯å‡½æ•°çš„å‚æ•°ï¼Œå’Œå‡½æ•°è¿ç®—çš„ç»“æœï¼Œåšå­˜å‚¨ï¼Œå¦‚æœæ­¤æ¬¡çš„å‚æ•°å’Œä¸Šä¸€æ¬¡çš„å®Œå…¨ç›¸åŒï¼Œé‚£ä¹ˆå°±è®¤ä¸ºå¯ä»¥ä½¿ç”¨ä¸Šä¸€æ¬¡çš„ç¼“å­˜ï¼Œä¹Ÿå°±è¾¾åˆ°äº†å­˜å‚¨çš„ç›®çš„ã€‚å¤§é‡è¿ç”¨åˆ°äº†é«˜é˜¶å‡½æ•°çš„æ€æƒ³ã€‚</p><h4 id="ä¸»è¦çš„æ–¹æ³•"><a href="#ä¸»è¦çš„æ–¹æ³•" class="headerlink" title="ä¸»è¦çš„æ–¹æ³•"></a>ä¸»è¦çš„æ–¹æ³•</h4><ul><li><p><code>createSelectorCreator(memoize)</code><br>ç”¨æ¥åšç”Ÿæˆä¸€ä¸ªselect,ä»–çš„é«˜é˜¶å‡½æ•°ä½œç”¨æ˜¯å®šåˆ¶åŒ–äº†è®°å¿†å‡½æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">createSelectorCreator (memoize) &#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * dependencies ä»–æ‰€è¦ä¾èµ–çš„ç›¸å…³å‡½æ•°</span></span><br><span class="line"><span class="comment">   * resultFunc è¿è¡Œæœ€ç»ˆç»“æœçš„å‡½æ•°</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">dependencies, resultFunc</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// æ‹¿åˆ°ä¸€ä¸ªå®šåˆ¶åŒ–çš„memoize</span></span><br><span class="line">    <span class="keyword">const</span> memoizeResultFunc = memoize(resultFunc)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿”å›selector,ä»–çš„ä½œç”¨æ˜¯å¤„ç†æ¯ä¸€ä¸ªstate</span></span><br><span class="line">    <span class="keyword">const</span> selector = <span class="function">(<span class="params">state, props, ...args</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// æ‰§è¡Œæ¯ä¸€ä¸ªdependency,è·å–åˆ°æ¯ä¸€ä¸ªå‚æ•°</span></span><br><span class="line">      <span class="keyword">const</span> params = dependencies.map(</span><br><span class="line">          dependency =&gt; dependency(state, props, ...args)</span><br><span class="line">      );</span><br><span class="line">      <span class="comment">// é€šè¿‡å®šåˆ¶è®°å¿†å‡½æ•°è¿”å›æ•°æ®</span></span><br><span class="line">      <span class="keyword">return</span> memoizedResultFunc(...params);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> selector</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>defaultMemoize(func)</code><br>é»˜è®¤çš„ä¸€ä¸ªè®°å¿†å‡½æ•°ï¼Œä»–çš„é«˜é˜¶å‡½æ•°ä½œç”¨æ˜¯ï¼Œè®°ä½äº†ä¸Šä¸€æ¬¡å‚æ•°å’Œç»“æœ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">defaultMemoize (func) &#123;</span><br><span class="line">  <span class="keyword">let</span> lastParams = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">let</span> lastResult = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">...params</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœä¸Šä¸€æ¬¡æœ‰ç»“æœï¼Œå¹¶ä¸” æ¯ä¸ªå‚æ•°éƒ½ç›¸åŒï¼Œå°±è¿”å›ç»“æœ</span></span><br><span class="line">    <span class="keyword">if</span> (lastParams !== <span class="literal">null</span> &amp;&amp; </span><br><span class="line">      params.every(<span class="function">(<span class="params">value, index</span>) =&gt;</span> value === lastParams[index])) &#123;</span><br><span class="line">      <span class="keyword">return</span> lastResult;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è®°å¿†ä¸Šä¸€æ¬¡çš„å‚æ•°ï¼ŒçœŸæ­£æ‰§è¡Œä¸€æ¬¡ï¼Œå¹¶æŠŠç»“æœéƒ½ç¼“å­˜èµ·æ¥</span></span><br><span class="line">    lastParams = params;</span><br><span class="line">    lastResult = func(...params);</span><br><span class="line">    <span class="keyword">return</span> lastResult;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>defaultEqualityCheck(a, b)</code><br>è¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯åˆ¤æ–­è¿ä¸ªå‚æ•°æ˜¯å¦ç›¸ç­‰ï¼Œä¸Šé¢ä½¿ç”¨äº†ç¡¬æ¯”è¾ƒ <code>===</code>, å½“ç„¶ä¹Ÿå¯ä»¥ç”¨å…¶ä»–çš„åˆ¤æ–­æ–¹æ³•ä»£æ›¿ä¸€ä¸‹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">value === lastParams[index]</span><br><span class="line">defaultEqualityCheck(value, lastParams[index])</span><br></pre></td></tr></table></figure></li></ul><h4 id="æ‰§è¡Œè¿‡ç¨‹"><a href="#æ‰§è¡Œè¿‡ç¨‹" class="headerlink" title="æ‰§è¡Œè¿‡ç¨‹"></a>æ‰§è¡Œè¿‡ç¨‹</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line">  shop: &#123;</span><br><span class="line">    items: [&#123;<span class="attr">id</span>:<span class="number">1</span>, <span class="attr">value</span>: <span class="number">1</span>&#125;,&#123;<span class="attr">id</span>:<span class="number">2</span>, <span class="attr">value</span>: <span class="number">2</span>&#125;,&#123;<span class="attr">id</span>:<span class="number">3</span>, <span class="attr">value</span>: <span class="number">3</span>&#125;]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> shopItemsSelector = <span class="function"><span class="params">state</span> =&gt;</span> state.shop.items</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> totalSelector = createSelector(</span><br><span class="line">  shopItemsSelector,</span><br><span class="line">  (items) =&gt; items.reduce(<span class="function">(<span class="params">acc, item</span>) =&gt;</span> acc + item.value, <span class="number">0</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> total = totalSelector(state)</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. åˆ›å»ºå‡ºselector</span></span><br><span class="line"><span class="keyword">let</span> selector = createSelector([fun1, fun2], fun3)</span><br><span class="line"><span class="keyword">let</span> someState = (<span class="function"><span class="keyword">function</span>(<span class="params">state, props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> state1 = fun1(state, props)</span><br><span class="line">  <span class="keyword">let</span> state2 = fun2(state, props)</span><br><span class="line">  <span class="keyword">return</span> fun3(state1, state2)</span><br><span class="line">&#125;)(state, props)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. è®°å¿†ç»“æœ</span></span><br><span class="line"><span class="keyword">return</span> fun3(state1, state2),</span><br><span class="line"><span class="comment">// å°†ç›´æ¥æ‰§è¡Œfun3æ›¿æ¢ä¸ºå·²ç»è®°å¿†åŒ–è¿‡çš„memoizedResultFunc</span></span><br><span class="line"><span class="keyword">return</span> memoizedResultFunc(state1, state2)</span><br><span class="line">ä»–å»åˆ¤æ–­stateçš„å€¼æ˜¯å¦ç›¸åŒï¼Œå¦‚æœç›¸åŒï¼Œå°±ç›´æ¥è¿”å›å‡ºä¸€ä¸ªä¸Šä¸€æ¬¡å­˜å‚¨çš„ç»“æœ</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    <entry>
      <title>reduxä¸­å¸¸ç”¨çš„efffects</title>
      <link href="/2019/08/14/redux%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84efffects/"/>
      <url>/2019/08/14/redux%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84efffects/</url>
      
        <content type="html"><![CDATA[<h2 id="redux-sagaä¸­effectçš„ä½¿ç”¨"><a href="#redux-sagaä¸­effectçš„ä½¿ç”¨" class="headerlink" title="redux-sagaä¸­effectçš„ä½¿ç”¨"></a>redux-sagaä¸­effectçš„ä½¿ç”¨</h2><p>redux-saga ä¸­å°†æœ‰å‰¯ä½œç”¨çš„æ–¹æ³•ï¼Œéƒ½æ”¾åˆ°äº†å¤–éƒ¨å•ç‹¬çš„æ–‡ä»¶ä¸­å»æ‰§è¡Œ<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">action1(plain object)â€”â€”&gt;redux-sagaç›‘å¬â€”&gt;æ‰§è¡Œç›¸åº”çš„Effectæ–¹æ³•â€”â€”&gt;è¿”å›æè¿°å¯¹è±¡â€”&gt;æ¢å¤æ‰§è¡Œå¼‚æ­¥å’Œå‰¯ä½œç”¨å‡½æ•°â€”&gt;action2(plain object)</span><br></pre></td></tr></table></figure></p><p>æ–¹ä¾¿è¿›è¡Œæµ‹è¯•ï¼Œå¦‚æœeffectæ–¹æ³•æ‰§è¡Œçš„ç»“æœçš„è¿”å›å€¼å°±æ˜¯å°†è¦æ‰§è¡Œçš„å¯¹è±¡ï¼Œé‚£ä¹ˆå¯ä»¥è®¤ä¸ºï¼Œåœ¨ä»Šåè¿™ä¸ªactionæ‰§è¡Œçš„æ—¶å€™ï¼Œä»–çš„ç»“æœå°±æ˜¯æ­£å¸¸çš„ï¼Œä¹Ÿå°±æ˜¯è¯´redux-sagaçš„ä½œç”¨å°±æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥æå‰è·å–åˆ°å³å°†æ‰§è¡Œçš„æ–¹æ³•ï¼Œä»¥åŠä»–çš„å‚æ•°ï¼Œä½†æ˜¯ä»–çš„å…·ä½“æ‰§è¡Œæ—¶é—´æ˜¯æœªçŸ¥çš„</p><h2 id="redux-effectçš„ç›¸å…³effectæ–¹æ³•"><a href="#redux-effectçš„ç›¸å…³effectæ–¹æ³•" class="headerlink" title="redux-effectçš„ç›¸å…³effectæ–¹æ³•"></a>redux-effectçš„ç›¸å…³effectæ–¹æ³•</h2><blockquote><p>v 1.0.5 </p></blockquote><ul><li>take ç›‘å¬æ–¹æ³•ï¼Œå¹¶è¿”å›ä¸€ä¸ªactionå¯¹è±¡<ul><li>takeLatest <code>yield takeLatest(&#39;xxx&#39;, xxxRequest)</code></li></ul></li><li>call è°ƒç”¨æŸä¸ªæ–¹æ³•<ul><li><code>yield call(fn, ...args)</code></li></ul></li><li>put å‘å‡ºä¸€ä¸ªactionï¼Œå…¶å‚æ•°å°±æ˜¯actionå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯å³å°†å‘ç»™reduceråšçœŸæ­£çš„å¤„ç†<ul><li><code>put({type: &#39;XXXX&#39;, payload: {}})</code></li></ul></li><li>select è·å–stateï¼Œè¿”å›çš„ç»“æœæ˜¯stateå¯¹è±¡ï¼Œå¯ä»¥è¿›è¡Œè·å–æ•°æ®<ul><li><code>let xxx = yield select((state) =&gt; state.xxx);</code></li></ul></li><li>debounce é˜²æ­¢æ—¶é—´æŠ–åŠ¨ï¼Œè¿‡ä¸€æ®µæ—¶é—´å‘ä¸€æ¬¡è¯·æ±‚<ul><li><code>yield debounce(1000, &#39;FETCH_AUTOCOMPLETE&#39;, fetchAutocompleteFn)</code></li></ul></li><li>delay å»¶è¿Ÿå¤šå°‘msçš„ä¸€ä¸ªï¼Œç±»ä¼¼äºtimeout<ul><li><code>yield delay(500)</code></li></ul></li><li>all ç›‘å¬æ‰€æœ‰çš„saga,å¯åŠ¨æ‰€æœ‰çš„æ–¹æ³•<ul><li><code>all([ saga1(), saga2() ])</code></li></ul></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>React Fragment</title>
      <link href="/2019/08/14/Fragment/"/>
      <url>/2019/08/14/Fragment/</url>
      
        <content type="html"><![CDATA[<p>å¯ä»¥ç†è§£ä¸º,æ˜¯ä¸€ä¸ªç©ºçš„jsxæ ‡ç­¾<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;&gt;&lt;/&gt; // è¿™å…¶å®æ˜¯&lt;React.Fragment&gt;&lt;/React.Fragment&gt;çš„è¯­æ³•ç³–</span><br></pre></td></tr></table></figure></p><ul><li><p>å½“å‰çˆ¶ç»„ä»¶ä¸­æ˜¯ä¸€ä¸ªtableä¸­çš„tr</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;table&gt;</span><br><span class="line">  &lt;tr&gt; &#123;children&#125; &lt;<span class="regexp">/tr&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>table&gt;</span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœchildrenæ˜¯ä¼ ç»Ÿä¸Šçš„div,</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">  &lt;td&gt;Hello&lt;<span class="regexp">/td&gt;</span></span><br><span class="line"><span class="regexp">  &lt;td&gt;World&lt;/</span>td&gt;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure></li></ul><p>é‚£ä¹ˆæœ€ç»ˆå±•ç¤ºçš„æ•ˆæœä¸º,å±•ç¤ºä¼šå‡ºç°,æ˜¾ç¤ºå¼‚å¸¸<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span>World<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure></p><ul><li>ä½¿ç”¨React.Fragmentæ—¶<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;React.Fragment&gt;</span><br><span class="line">  &lt;td&gt;Hello&lt;<span class="regexp">/td&gt;</span></span><br><span class="line"><span class="regexp">  &lt;td&gt;World&lt;/</span>td&gt;</span><br><span class="line">&lt;<span class="regexp">/React.Fragment&gt;</span></span><br></pre></td></tr></table></figure></li></ul><p>é‚£ä¹ˆæœ€ç»ˆå±•ç¤ºçš„æ•ˆæœä¸º,å±•ç¤ºä¼šå‡ºç°ï¼Œæ˜¾ç¤ºæ­£å¸¸<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>World<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>redux-enhanceræµ…æ</title>
      <link href="/2019/08/13/redux-enhancer%E6%B5%85%E6%9E%90/"/>
      <url>/2019/08/13/redux-enhancer%E6%B5%85%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h2 id="åœ¨reduxçš„createStoreä¸­ï¼Œè¿˜æœ‰ä¸¤ä¸ªå‚æ•°"><a href="#åœ¨reduxçš„createStoreä¸­ï¼Œè¿˜æœ‰ä¸¤ä¸ªå‚æ•°" class="headerlink" title="åœ¨reduxçš„createStoreä¸­ï¼Œè¿˜æœ‰ä¸¤ä¸ªå‚æ•°"></a>åœ¨reduxçš„createStoreä¸­ï¼Œè¿˜æœ‰ä¸¤ä¸ªå‚æ•°</h2><p><code>createStore(reducer, [preloadedState], [enhancer])</code><br>è¿™é‡Œä¸»è¦åˆ†æenhancer,è¿™æ˜¯ä¸€ä¸ªå¢å¼ºå™¨ï¼Œç”¨æ¥å¢å¼ºreduxçš„å„ä¸ªæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯æ›¿æ¢createStoreæ–¹æ³•çš„å‡½æ•°ï¼Œ</p><h4 id="ç®€å•å›é¡¾ä¸€ä¸‹createStore-reducer"><a href="#ç®€å•å›é¡¾ä¸€ä¸‹createStore-reducer" class="headerlink" title="ç®€å•å›é¡¾ä¸€ä¸‹createStore(reducer)"></a>ç®€å•å›é¡¾ä¸€ä¸‹createStore(reducer)</h4><p>å°±æ˜¯åˆ›å»ºå‡ºä¸€ä¸ªstore,ç„¶åæ±‡æ€»æ‰€æœ‰çš„reducerï¼Œå°†æ‰€æœ‰çš„stateè¿‡ä¸€é<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createStore</span> (<span class="params"> reducer </span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> state,</span><br><span class="line">    listenArr = []</span><br><span class="line">    </span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getState</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(state)) <span class="comment">// è¿”å›ä¸€ä¸ªæ‹·è´ï¼Œé˜²æ­¢ç›´æ¥ä¿®æ”¹stateä¸­æ•°æ®</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">dispatch</span> (<span class="params"> action </span>) </span>&#123;</span><br><span class="line">    <span class="comment">// æ‰§è¡Œreducerè¿”å›ç»“æœ,å¹¶ä¸”è¯­æ³•è¦æ±‚ reducer(state = &#123;&#125;, action) è¿™é‡Œstateè¯­æ³•è¦æ±‚æœ‰é»˜è®¤å€¼ï¼Œ å¹¶ä¸”æœ€åè¿”å›äº†ï¼Œæ‰€ä»¥æ‰§è¡Œä¸€æ¬¡å°±æœ‰å€¼</span></span><br><span class="line">    state = reducer(state, action)</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, fn; fn = listenArr[i++]; )&#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> fn === <span class="string">'function'</span>) &#123;</span><br><span class="line">        fn()</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        listenArr.splice(i, <span class="number">1</span>)</span><br><span class="line">        i--</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// åˆå§‹åŒ–ä¸€ä¸‹ï¼Œæ²¡æœ‰å®é™…ä½œç”¨ï¼Œè¿”å›ç”¨æˆ·é»˜è®¤state,</span></span><br><span class="line">  dispatch(&#123;<span class="attr">type</span>: <span class="string">'_INIT_DEFAULT_STATE'</span>&#125;)</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">subscribe</span> (<span class="params"> fn </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ( !listenArr.includes(fn) ) &#123; <span class="comment">// é˜²æ­¢é‡å¤æ·»åŠ </span></span><br><span class="line">      listenArr.push(fn)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">unsubscribe</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">let</span> delIndex = listenArr.indexOf(fn)</span><br><span class="line">      listenArr[delIndex] = <span class="literal">null</span> <span class="comment">// é˜²æ­¢æ•°ç»„å¡Œé™·</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    getState,</span><br><span class="line">    dispatch,</span><br><span class="line">    subscribe</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="ä»€ä¹ˆæ˜¯enhancer-å°±æ˜¯ä»£æ›¿äº†createStoreï¼Œå¯ä»¥åˆ›å»ºå‡ºä¸€ä¸ªç¬¦åˆä½ çš„è¦æ±‚çš„ä¸€ä¸ªstore"><a href="#ä»€ä¹ˆæ˜¯enhancer-å°±æ˜¯ä»£æ›¿äº†createStoreï¼Œå¯ä»¥åˆ›å»ºå‡ºä¸€ä¸ªç¬¦åˆä½ çš„è¦æ±‚çš„ä¸€ä¸ªstore" class="headerlink" title="ä»€ä¹ˆæ˜¯enhancer,å°±æ˜¯ä»£æ›¿äº†createStoreï¼Œå¯ä»¥åˆ›å»ºå‡ºä¸€ä¸ªç¬¦åˆä½ çš„è¦æ±‚çš„ä¸€ä¸ªstore"></a>ä»€ä¹ˆæ˜¯enhancer,å°±æ˜¯ä»£æ›¿äº†createStoreï¼Œå¯ä»¥åˆ›å»ºå‡ºä¸€ä¸ªç¬¦åˆä½ çš„è¦æ±‚çš„ä¸€ä¸ªstore</h2><p>ä»–çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªcreateStore,åº”è¯¥æœ‰å’ŒåŸå‡½æ•°ä¸€æ ·çš„å‚æ•°<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">autoLogger</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// è¿”å›ä¸€ä¸ªå‡½æ•° createStore, æ›¿ä»£åŸå…ˆçš„</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="params">createStore</span> =&gt;</span> (reducer, initialState, enhancer) =&gt; &#123;</span><br><span class="line">    <span class="comment">// æ‹¿åˆ°åŸæ¥çš„store,ç­‰äºå·²ç»åˆ›å»ºå¥½äº†ï¼Œç›´æ¥è£…é¥°å°±å¯ä»¥</span></span><br><span class="line">    <span class="keyword">const</span> store = createStore(reducer, initialState, enhancer) </span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è¦†ç›–åŸå…ˆçš„dispatch</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">dispatch</span> (<span class="params">action</span>) =&gt; </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`dispatch an action: <span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(action)&#125;</span>`</span>);</span><br><span class="line">      <span class="keyword">const</span> res = store.dispatch(action);</span><br><span class="line">      <span class="keyword">const</span> newState = store.getState();</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`current state: <span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(newState)&#125;</span>`</span>);</span><br><span class="line">      <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿”å›æœ€ä¿®æ”¹åçš„store</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      ...store,</span><br><span class="line">      dispatch</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºå‡ºè‡ªå®šä¹‰çš„logger</span></span><br><span class="line">createStore(reducer, autoLogger())</span><br></pre></td></tr></table></figure></p><h4 id="enhancerå°±æ˜¯ä¸€ä¸ªå…è®¸è¦†ç›–çš„createStore"><a href="#enhancerå°±æ˜¯ä¸€ä¸ªå…è®¸è¦†ç›–çš„createStore" class="headerlink" title="enhancerå°±æ˜¯ä¸€ä¸ªå…è®¸è¦†ç›–çš„createStore"></a>enhancerå°±æ˜¯ä¸€ä¸ªå…è®¸è¦†ç›–çš„createStore</h4><p>å½“ç„¶ä»–ä¹Ÿæ˜¯ä¾µå…¥æ€§çš„ï¼Œä¼šç ´åæ‰åŸå§‹çš„storeç»“æ„,ä¸‹é¢çš„ä¾‹å­å°±ç ´åçš„dispatch<br>ç»è¿‡è¿™ä¸ªenhancerå¤„ç†çš„dispatchå°±æ˜¯ä¸€ä¸ªæ¯«æ— ä½œç”¨çš„dispatch,æ‰€ä»¥è¯´ä»–æ˜¯ä¾µå…¥å¼çš„<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">badEnhancer</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dispatch</span> (<span class="params">action</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'hello'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="ä»€ä¹ˆæ˜¯middleware"><a href="#ä»€ä¹ˆæ˜¯middleware" class="headerlink" title="ä»€ä¹ˆæ˜¯middleware"></a>ä»€ä¹ˆæ˜¯middleware</h2><p>ä»–å°±æ˜¯å®˜æ–¹æä¾›çš„ä¸€ä¸ªenhancer,åªæ˜¯æœ€åå…è®¸ä¿®æ”¹dispatch<br>å¯ä»¥çœ‹å‡ºï¼Œä»–çš„åŠŸèƒ½å’Œenhancerä¸€æ ·çš„<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">applyMiddleware</span>(<span class="params">...middlewares</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="params">createStore</span> =&gt;</span> (...args) =&gt; &#123;</span><br><span class="line">    <span class="comment">// çœç•¥</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      ...store,</span><br><span class="line">      dispatch</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="å¤šå±‚enhancer"><a href="#å¤šå±‚enhancer" class="headerlink" title="å¤šå±‚enhancer"></a>å¤šå±‚enhancer</h4><ul><li>å½“æˆ‘ä»¬è¦ä½¿ç”¨å¾ˆå¤šenhancerçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½è¦åŒ…å¾ˆå¤šå±‚</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">function enhancer1 (reducer, initState, () =&gt; &#123;</span><br><span class="line">  return enhancer2 =&gt; (reducer, initState, () =&gt; &#123;</span><br><span class="line"></span><br><span class="line">    return enhancer3 =&gt; (reducer, initState, enhancer) &#123;</span><br><span class="line"></span><br><span class="line">      return createStore(reducer, initState, enhancer) &#123;</span><br><span class="line">        // enhancer3çš„é€»è¾‘</span><br><span class="line">        const store3 = createStore(reducer, initState, enhancer)</span><br><span class="line">        // ... è¦†ç›–æ–¹æ³•</span><br><span class="line">        return &#123; ...store3 &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      return createStore(reducer, initState, enhancer) &#123;</span><br><span class="line">        // enhancer2çš„é€»è¾‘</span><br><span class="line">        const store2 = createStore(reducer, initState, enhancer)</span><br><span class="line">        // ... è¦†ç›–æ–¹æ³•</span><br><span class="line">        return &#123; ...store2 &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return createStore(reducer, initState, enhancer) &#123;</span><br><span class="line">      // enhancer1çš„é€»è¾‘</span><br><span class="line">      const store1 = createStore(reducer, initState, enhancer)</span><br><span class="line">      // ... è¦†ç›–æ–¹æ³•</span><br><span class="line">      return &#123; ...store1 &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ul><li>é€šå¸¸ä½¿ç”¨composeè¿›è¡Œç»„åˆ, åŒ…è£¹å°†applyMiddleware,ä¹Ÿè¦ç»„åˆè¿›å»<br>æœ€åä¼šè¿”å›ä¸€ä¸ªä¾æ¬¡åµŒå¥—çš„enhancerï¼Œç±»ä¼¼ä¸€ä¸ªæ´‹è‘±æ¨¡å‹</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> enhancer = compose(</span><br><span class="line">  applyMiddleware(...middlewares),</span><br><span class="line">  autLogger(),</span><br><span class="line">  otherEnhancer(),</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h4 id="å½“ç„¶ï¼Œå¦‚æœä¸éœ€è¦enhancerï¼Œç›´æ¥createStore-reducer-applyMiddleware-å³å¯"><a href="#å½“ç„¶ï¼Œå¦‚æœä¸éœ€è¦enhancerï¼Œç›´æ¥createStore-reducer-applyMiddleware-å³å¯" class="headerlink" title="å½“ç„¶ï¼Œå¦‚æœä¸éœ€è¦enhancerï¼Œç›´æ¥createStore(reducer, applyMiddleware())å³å¯"></a>å½“ç„¶ï¼Œå¦‚æœä¸éœ€è¦enhancerï¼Œç›´æ¥<code>createStore(reducer, applyMiddleware())</code>å³å¯</h4>]]></content>
      
      
      
        <tags>
            
            <tag> æºç  </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>asyncä¸awaitçš„ç†è§£</title>
      <link href="/2019/07/07/sync%E4%B8%8Eawait%E7%9A%84%E7%90%86%E8%A7%A3/"/>
      <url>/2019/07/07/sync%E4%B8%8Eawait%E7%9A%84%E7%90%86%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å…·ä½“çš„æ‰§è¡Œæƒ…å†µV8ä¸æµè§ˆå™¨ç¯å¢ƒå¯èƒ½ä¼šç•¥æœ‰å·®å¼‚ï¼Œè¿™é‡Œä¸»è¦åšä¸€äº›åŸç†è¯´æ˜ï¼Œå…·ä½“çš„æ‰§è¡Œé¡ºåºå¯èƒ½éœ€è¦è§†å®é™…æƒ…å†µæ¥å®šã€‚</p></blockquote><h2 id="async"><a href="#async" class="headerlink" title="async"></a>async</h2><p>asyncæ˜¯å°†ä¸€ä¸ªæ–¹æ³•ç­‰å¾…ï¼Œä½†æ˜¯å…¶å¹¶ä¸æ˜¯æš‚åœåˆ°é‚£è¾¹ï¼Œè€Œæ˜¯å°†å…¶æŠ›å‡ºä¸»çº¿ç¨‹ï¼Œè¿›å…¥å°±ç»ªé˜Ÿåˆ—ç­‰å¾…ï¼Œè€Œæ•´ä¸ªasyncå‡½æ•°çš„è¿”å›å€¼ä¹Ÿæ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œå…·ä½“åŒºåˆ†ä»¥ä¸‹æƒ…å†µ<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">fn1</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ....</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">'foo'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// -&gt; Promise.resolve('foo')</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">fn2</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ....</span></span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// -&gt; Promise.resolve(undefined)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">fn3</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ....</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    resolve(<span class="string">'success'</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// -&gt; Promise.resolve('success')</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">fn4</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ....</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    reject(<span class="string">'fail'</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// -&gt; Promise.reject('fail')</span></span><br></pre></td></tr></table></figure></p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œasyncçš„ä½œç”¨ï¼Œæœ€åè¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ã€‚</p><h2 id="await"><a href="#await" class="headerlink" title="await"></a>await</h2><p>awaitæ˜¯å°†Promiseçš„å†…å®¹å–å‡ºæ¥çš„ä¸€ä¸ªæ–¹å¼ï¼Œæ–¹ä¾¿æˆ‘ä»¬è¿›è¡Œå¼‚æ­¥ç¼–ç¨‹çš„æ“ä½œï¼Œ<strong>ä»–æ˜¯å–å‡º<code>Promise.resolve()</code>çš„è¿”å›å€¼ï¼Œè¦æ ¹æ®éœ€æ±‚åŠ å…¥<code>try-catch</code>æ¥æ»¡è¶³éœ€æ±‚</strong>ï¼Œä»–çš„æ“ä½œå¿…é¡»åœ¨asyncä¸­æ‰§è¡Œï¼Œå› ä¸ºè¦æš‚æ—¶æŠ›å‡ºä¸»çº¿ç¨‹ï¼ˆâ€œæš‚æ—¶åœæ­¢â€ï¼‰<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// resolveçš„æƒ…å†µï¼Œä¹Ÿæ˜¯æ­£å¸¸çš„æƒ…å†µä¸‹</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getDataSuccess</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    resolve(<span class="string">'success'</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> dataSuccess = <span class="keyword">await</span> getDataSuccess()</span><br><span class="line">  <span class="built_in">console</span>.log(dataSuccess) <span class="comment">// è¾“å‡º--&gt; success</span></span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœæœ‰rejectçš„æƒ…å†µï¼Œéœ€è¦é…åˆtry-catch</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getDataFail</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    reject(<span class="string">'fail'</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> dataFail = <span class="keyword">await</span> getDataFail()</span><br><span class="line">    <span class="built_in">console</span>.log(dataFail)</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error) <span class="comment">// è¾“å‡º--&gt; error</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure></p><h2 id="asyncå’Œawaitæ­é…ä½¿ç”¨"><a href="#asyncå’Œawaitæ­é…ä½¿ç”¨" class="headerlink" title="asyncå’Œawaitæ­é…ä½¿ç”¨"></a>asyncå’Œawaitæ­é…ä½¿ç”¨</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// å…¶ä¸­asyncçš„ä½œç”¨ç›¸å½“äºè¿”å›äº†Promise.resolve( foo() )  async foo () &#123; &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// awaitçš„ä½œç”¨å–å‡ºæ•°æ®  await bar()</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">  resolve( bar() )</span><br><span class="line">&#125;).then(<span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">  ret = val  </span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸¤ä¸ªéƒ¨åˆ†å’Œèµ·æ¥ç›¸å½“äºä¸¤å—Promise</span></span><br><span class="line"><span class="keyword">async</span> fn() &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>( ..... )</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> ret = <span class="keyword">await</span> fn()</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">======== ç­‰ä»·äº =======</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line"> resolve( <span class="built_in">Promise</span>.resolve(fn()) )</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">val</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> v1 = val</span><br><span class="line">  ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="æ³¨æ„ï¼Œç”±äºæµè§ˆå™¨çš„ä¸åŒï¼Œä»¥åŠè¿è¡Œç¯å¢ƒçš„ä¸åŒï¼Œå¯èƒ½è¿è¡Œé¡ºåºä¼šç•¥æœ‰å·®å¼‚"><a href="#æ³¨æ„ï¼Œç”±äºæµè§ˆå™¨çš„ä¸åŒï¼Œä»¥åŠè¿è¡Œç¯å¢ƒçš„ä¸åŒï¼Œå¯èƒ½è¿è¡Œé¡ºåºä¼šç•¥æœ‰å·®å¼‚" class="headerlink" title="æ³¨æ„ï¼Œç”±äºæµè§ˆå™¨çš„ä¸åŒï¼Œä»¥åŠè¿è¡Œç¯å¢ƒçš„ä¸åŒï¼Œå¯èƒ½è¿è¡Œé¡ºåºä¼šç•¥æœ‰å·®å¼‚"></a>æ³¨æ„ï¼Œç”±äºæµè§ˆå™¨çš„ä¸åŒï¼Œä»¥åŠè¿è¡Œç¯å¢ƒçš„ä¸åŒï¼Œå¯èƒ½è¿è¡Œé¡ºåºä¼šç•¥æœ‰å·®å¼‚</h2><blockquote><p>ä»¥ä¸‹ä»…è‡ªå·±åˆ†æï¼ˆä¸ä¸€å®šæ­£ç¡®ï¼‰ï¼Œå¯ä¾›æ€è·¯å‚è€ƒï¼Œå¦‚æœ‰é—®é¢˜ï¼Œæ¬¢è¿æŒ‡æ­£ã€‚</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">testSometing</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"æ‰§è¡ŒtestSometing"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"testSometing"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">testAsync</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"æ‰§è¡ŒtestAsync"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(<span class="string">"hello async"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"test start..."</span>);</span><br><span class="line">    <span class="keyword">const</span> v1 = <span class="keyword">await</span> testSometing();</span><br><span class="line">    <span class="built_in">console</span>.log(v1);</span><br><span class="line">    <span class="keyword">const</span> v2 = <span class="keyword">await</span> testAsync();</span><br><span class="line">    <span class="built_in">console</span>.log(v2);</span><br><span class="line">    <span class="built_in">console</span>.log(v1, v2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">test();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>)=&gt;</span> &#123; </span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"promise start.."</span>); </span><br><span class="line">  resolve(<span class="string">"promise"</span>);</span><br><span class="line">&#125;);</span><br><span class="line">promise.then(<span class="function">(<span class="params">val</span>)=&gt;</span> <span class="built_in">console</span>.log(val));</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"test end..."</span>)</span><br></pre></td></tr></table></figure><h4 id="æ‰§è¡Œæƒ…å†µä¸€"><a href="#æ‰§è¡Œæƒ…å†µä¸€" class="headerlink" title="æ‰§è¡Œæƒ…å†µä¸€"></a>æ‰§è¡Œæƒ…å†µä¸€</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> test start...</span><br><span class="line"><span class="number">2</span> æ‰§è¡ŒtestSometing</span><br><span class="line"><span class="number">3</span> promise start..</span><br><span class="line"><span class="number">4</span> test end...</span><br><span class="line"><span class="number">5</span> promise  *</span><br><span class="line"><span class="number">6</span> testSometing *</span><br><span class="line"><span class="number">7</span> æ‰§è¡ŒtestAsync *</span><br><span class="line"><span class="number">8</span> hello <span class="keyword">async</span></span><br><span class="line"><span class="number">9</span> testSometing hello <span class="keyword">async</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™ç§æƒ…å†µæ˜¯ ç”±äºawait çš„å‡½æ•°æ˜¯ä¸€ä¸ªasync,ç›¸å½“äºä¸¤å±‚Promise,å¦‚ä¸Šï¼Œæ‰€ä»¥ä»–æŠ›å‡ºçº¿ç¨‹2æ¬¡ï¼Œè®©åé¢çš„è¿è¡Œï¼ˆè¾ƒéš¾ç†è§£ä¸€ç§ï¼‰</span></span><br><span class="line">-&gt; <span class="keyword">async</span>çš„å‡½æ•°<span class="built_in">Promise</span>æŠ›å‡ºï¼ˆå‰©ä½™<span class="number">2</span>ä¸ªï¼‰ -&gt; <span class="keyword">new</span> <span class="built_in">Promise</span>çš„<span class="built_in">Promise</span>æŠ›å‡º(å‰©ä½™ä¸€ä¸ª)</span><br><span class="line">-&gt; è¿è¡Œæ ˆç©ºäº†,è°ƒå…¥ -&gt;<span class="keyword">async</span>çš„å‡½æ•°<span class="built_in">Promise</span>æŠ›å‡ºï¼ˆå‰©ä½™<span class="number">1</span>ä¸ªï¼‰-&gt; <span class="keyword">new</span> <span class="built_in">Promise</span>çš„<span class="built_in">Promise</span>æ‰§è¡Œ</span><br><span class="line">-&gt; è¿è¡Œæ ˆç©ºäº†,è°ƒå…¥ -&gt;<span class="keyword">async</span>çš„å‡½æ•°<span class="built_in">Promise</span>æ‰§è¡Œ</span><br></pre></td></tr></table></figure><h4 id="æ‰§è¡Œæƒ…å†µäºŒ"><a href="#æ‰§è¡Œæƒ…å†µäºŒ" class="headerlink" title="æ‰§è¡Œæƒ…å†µäºŒ"></a>æ‰§è¡Œæƒ…å†µäºŒ</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> test start...</span><br><span class="line"><span class="number">2</span> æ‰§è¡ŒtestSometing</span><br><span class="line"><span class="number">3</span> promise start..</span><br><span class="line"><span class="number">4</span> test end...</span><br><span class="line"><span class="number">5</span> testSometing *</span><br><span class="line"><span class="number">6</span> æ‰§è¡ŒtestAsync *</span><br><span class="line"><span class="number">7</span> promise  *</span><br><span class="line"><span class="number">8</span> hello <span class="keyword">async</span></span><br><span class="line"><span class="number">9</span> testSometing hello <span class="keyword">async</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™ç§æƒ…å†µæ˜¯æŠŠä¸¤ä¸ªPromiseæ”¾åˆ°ä¸€èµ·ï¼Œä¹Ÿæ˜¯æ¯”è¾ƒå®¹æ˜“ç†è§£çš„ä¸€ç§æ–¹å¼</span></span><br><span class="line">-&gt; <span class="keyword">async</span>çš„å‡½æ•°<span class="built_in">Promise</span>æŠ›å‡º -&gt; <span class="keyword">new</span> <span class="built_in">Promise</span>çš„<span class="built_in">Promise</span>æŠ›å‡º</span><br><span class="line">-&gt; è¿è¡Œæ ˆç©ºäº†,è°ƒå…¥ -&gt; <span class="keyword">async</span>çš„å‡½æ•°<span class="built_in">Promise</span>æ‰§è¡Œ -&gt; <span class="keyword">new</span> <span class="built_in">Promise</span>çš„<span class="built_in">Promise</span>æ‰§è¡Œ</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>è·¯ç”±router</title>
      <link href="/2019/07/05/%E8%B7%AF%E7%94%B1router/"/>
      <url>/2019/07/05/%E8%B7%AF%E7%94%B1router/</url>
      
        <content type="html"><![CDATA[<h2 id="react-router-dom"><a href="#react-router-dom" class="headerlink" title="react-router-dom"></a>react-router-dom</h2><blockquote><p>åœ¨3.xä»¥ä¸Šä½¿ç”¨<code>react-router-dom</code>,åœ¨ä»¥ä¸‹ä½¿ç”¨<code>react-router</code></p></blockquote><h4 id="BrowseRouter-VS-HashRouter"><a href="#BrowseRouter-VS-HashRouter" class="headerlink" title="BrowseRouter VS HashRouter"></a>BrowseRouter VS HashRouter</h4><ul><li><p>BrowseRouter urlå˜æ¢çš„æ–¹å¼ï¼Œå¤šç”¨äºæœåŠ¡ç«¯æ¸²æŸ“çš„æ–¹å¼ å…¶ä¾é h5çš„ history API</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http://www.demo.com/</span><br><span class="line">http://www.demo.com/personal/</span><br><span class="line">http://www.demo.com/personal/login/</span><br></pre></td></tr></table></figure></li><li><p>HashRouter ä½¿ç”¨å“ˆè¥¿è·¯ç”±ï¼Œ ä½¿ç”¨jsæ„é€ history APIï¼Œ åŸºäºhistory stackæ¥å®Œæˆçš„</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http://www.demo.com/#/</span><br><span class="line">http://www.demo.com/#/personal/</span><br><span class="line">http://www.demo.com/#/personal/login/</span><br></pre></td></tr></table></figure></li></ul><h4 id="RouteråŒ¹é…è§„åˆ™"><a href="#RouteråŒ¹é…è§„åˆ™" class="headerlink" title="RouteråŒ¹é…è§„åˆ™"></a>RouteråŒ¹é…è§„åˆ™</h4><p>ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯éƒ½å¯ä»¥åŒ¹é…çš„<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">1. http://www.demo.com/#/</span><br><span class="line">2. http://www.demo.com/#/user</span><br><span class="line"></span><br><span class="line">éƒ½èƒ½åŒ¹é…åˆ°</span><br><span class="line">&lt;Route path=&quot;/&quot; component /&gt; 1. 2.</span><br><span class="line">&lt;Route path=&quot;/&quot; exact component /&gt; 1.</span><br><span class="line"></span><br><span class="line">// æƒé™æ ¡éªŒ</span><br><span class="line">&lt;Route path=&quot;/pay&quot; render=&#123;() =&gt; &#123;</span><br><span class="line">  let flag = localStorage.getItem(&apos;FLAG&apos;)</span><br><span class="line">  if (flag &amp;&amp; flag === &apos;SAFE&apos;) &#123;</span><br><span class="line">    return &lt;Pay/&gt;</span><br><span class="line">  &#125;</span><br><span class="line">  return &apos;å½“å‰ç¯å¢ƒä¸å®‰å…¨ï¼Œç»ˆæ­¢äº¤æ˜“&apos;</span><br><span class="line">&#125;&#125;/&gt;</span><br><span class="line"></span><br><span class="line">// ä½¿ç”¨ Switchç»„ä»¶åªåŒ¹é…ä¸€ä¸ª,å³åŒ¹é…ä¸€ä¸ªåè·³å‡º</span><br><span class="line">&lt;HashRouter&gt;</span><br><span class="line">&lt;Swtich&gt;</span><br><span class="line">  &lt;Route path=&quot;/&quot; exact component=&#123;A&#125;/&gt;   // ç”±äº` / `åŒ¹é…çš„å¤ªå¹¿æ³›ï¼Œæ‰€ä»¥åŠ ä¸€ä¸‹react</span><br><span class="line">  &lt;Route path=&quot;/user&quot; component=&#123;A&#125;/&gt;</span><br><span class="line">  &lt;Route path=&quot;/pay&quot; component=&#123;A&#125;/&gt;</span><br><span class="line">  &lt;Route  render=&#123;() =&gt; &#123;return &apos;404&apos;&#125; &#125;/&gt; æˆ–è€… &lt;Redirect to=&apos;/&apos; /&gt;</span><br><span class="line">&lt;/Switch&gt;</span><br><span class="line">&lt;/HashRouter&gt;</span><br><span class="line"></span><br><span class="line">&lt;Router /&gt; ä¸è®¾ç½®Pathæ˜¯åŒ¹é…æ‰€æœ‰çš„</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// é‡å®šå‘</span><br><span class="line">&lt;Redirect to=&quot;/?lx=404&quot; /&gt;</span><br><span class="line">&lt;Redirect to=&#123;&#123;</span><br><span class="line">  pathname: &apos;/&apos;,</span><br><span class="line">  search: &apos;?/lx=404&apos;</span><br><span class="line">&#125;&#125; /&gt;</span><br><span class="line"></span><br><span class="line">// å¦‚æœåŠ å…¥äº†PUSHå±æ€§ï¼Œ ä¼šåŠ å…¥åˆ°HISTORY SATCKä¸­å¢æ·»ä¸€æ¡è®°å½•</span><br><span class="line"></span><br><span class="line">&lt;Redirect from=&apos;/custom&apos; to=&apos;/custom/list&apos; /&gt;</span><br><span class="line">å¦‚æœè¯·æ±‚çš„HASHæ˜¯ &apos;/custom&apos; é‚£ä¹ˆå°±é‡å®šå‘åˆ° &apos;/custom/list&apos;</span><br></pre></td></tr></table></figure></p><h4 id="lt-Link-gt-ä¸-lt-NavLink-gt"><a href="#lt-Link-gt-ä¸-lt-NavLink-gt" class="headerlink" title="&lt;Link&gt; ä¸ &lt;NavLink&gt;"></a><code>&lt;Link&gt;</code> ä¸ <code>&lt;NavLink&gt;</code></h4><p>å¿…é¡»éƒ½åŒ…è£¹åœ¨<hashrouter></hashrouter>ä¸­</p><ul><li>åŸç†ï¼šæœ€ç»ˆéƒ½ä¼šè½¬æ¢æˆ<code>&lt;a href=&quot;#/&quot; &gt;xxx&lt;/a&gt;</code></li><li>ä½¿ç”¨ï¼š<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;Link to=&apos;/&apos;&gt;&lt;/Link&gt; æ™®é€šçš„è·³è½¬</span><br><span class="line">&lt;Link to=&#123; &#123;</span><br><span class="line">  pathname: &apos;xxx&apos;,</span><br><span class="line">  search: &apos;xxx&apos;,</span><br><span class="line">  state: &apos;xx&apos;</span><br><span class="line">&#125; &#125; &gt;&lt;/Link&gt;</span><br><span class="line"></span><br><span class="line">&lt;NavLink&gt;ä½¿ç”¨æ–¹æ³•ä¸€æ ·  å¯ä»¥ç‚¹å‡»çš„è·³è½¬ï¼Œä½†æ˜¯å…¶åŸç†æ˜¯åŒ¹é…hashï¼Œå¹¶ä¸æ˜¯onClickå¢åŠ çš„active</span><br><span class="line">&lt;NavLink activeClass=&quot;active&quot; activeStyle&gt;</span><br><span class="line">ä¸€èˆ¬ä¸€çº§è·¯ç”±çš„navä¸èƒ½ç®€å•ä½¿ç”¨NavLinkçš„ç‚¹å‡»æ·»åŠ active,ï¼ˆå› ä¸ºNavå·²ç»è¢«æ¸²æŸ“å¥½äº†ï¼Œ</span><br><span class="line">å¹¶æ²¡æœ‰å› ä¸ºhashçš„æ”¹å˜è€Œé‡æ–°æ¸²æŸ“ï¼‰</span><br><span class="line">æ³¨æ„ï¼šå½“ &lt;NavLink to=&quot;/&quot; /&gt; æ—¶, è¦ä½¿ç”¨ exact</span><br><span class="line"></span><br><span class="line">1. è§£å†³æ–¹æ¡ˆ1 -&gt; å°†navæ”¾åˆ°å„Navç»„ä»¶ä¸­ï¼ˆä¸æ¨èï¼‰</span><br><span class="line">2. è§£å†³æ–¹æ¡ˆ2 -&gt; ä½¿ç”¨withRouteråŒ…èµ·æ¥ export default withRouter(connect()(Nav)),</span><br><span class="line">      åªè¦è®©å…¶é€šè¿‡è·¯ç”±ç®¡æ§å°±å¯ä»¥ï¼Œæ¨¡æ‹Ÿæˆå—è·¯ç”±ç®¡æ§çš„ç»„ä»¶ï¼Œå³å¯æ ¹æ®è·¯ç”±å¯¹çš„æ”¹å˜è€Œæ›´æ–°</span><br></pre></td></tr></table></figure></li></ul><h4 id="å—æ§ç»„ä»¶åœ¨propsä¸Šå¢æ·»çš„å±æ€§"><a href="#å—æ§ç»„ä»¶åœ¨propsä¸Šå¢æ·»çš„å±æ€§" class="headerlink" title="å—æ§ç»„ä»¶åœ¨propsä¸Šå¢æ·»çš„å±æ€§"></a>å—æ§ç»„ä»¶åœ¨propsä¸Šå¢æ·»çš„å±æ€§</h4><ul><li><p>HISTORY åŸºäº history stackå†å²ä¿¡æ¯æ ˆ</p><ul><li>PUSH è¿½åŠ ä¸€æ¡ä¿¡æ¯ this.props.history.push(â€˜./planâ€™)</li><li>GO å‰å¾€ç¬¬å‡ æ¡ 1ï¼Œå¾€åçš„ä¸€é¡µï¼Œ -1 å¾€å‰çš„ä¸€é¡µ</li><li>GO-BACK &lt;=&gt; GO(-1)</li><li>GO-FORWARD &lt;=&gt; GO(1)</li></ul></li><li><p>LOCATION è·å–å½“å‰hashè·¯ç”±æ¸²æŸ“ç»„ä»¶ä¿¡æ¯</p><ul><li>pathname å½“å‰hashåœ°å€</li><li>search å½“å‰ é—®å· + ä¼ å€¼<br><code>http://www.demo.com/#/plan?lx=1</code> -&gt; ?lx=1</li><li>state åŸºäºREDIRECY/LINK/NAV-LINK, å¯¹è±¡ä¸­è®¾ç½®state,å³å¯åœ¨è¿™è·å–<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;LINK to=&#123; &#123;<span class="attr">pathname</span>: <span class="string">'plan'</span>, <span class="attr">search</span>:<span class="string">''</span>, <span class="attr">state</span>: &#123;&#125;&#125; &#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><ul><li>MATCH è·å–å½“å‰è·¯ç”±åŒ¹é…ç»“æœ<ul><li>PARAMS å¦‚æœåŒ¹é…åœ°å€å‚æ•°ï¼Œè·¯å¾„ä¼ å‚æ‰ä½¿ç”¨</li></ul></li></ul><h6 id="ä¼ é€’å‚æ•°"><a href="#ä¼ é€’å‚æ•°" class="headerlink" title="ä¼ é€’å‚æ•°"></a>ä¼ é€’å‚æ•°</h6><ul><li>search <code>?id=1</code>ï¼Œ éœ€è¦è§£æï¼Œå¯æ”¯æŒåˆ·æ–°ï¼Œåœ°å€æ æœ‰çŠ¶æ€</li><li>state <code>to={ {pathname: &#39;/&#39;, state: id} }</code>, ç›´æ¥è·å–ï¼Œåœ°å€æ æ— çŠ¶æ€ï¼Œä½†æ˜¯ä¸å¯åˆ·æ–°ï¼Œå¯ä»¥åšæˆæ”¯ä»˜é¡µç­‰</li><li>URLä¼ é€’ å°†å‚æ•°ä½œä¸ºåœ°å€ä¸€éƒ¨åˆ† restful /detail/3<ol><li>æ›´æ”¹è·¯ç”±è§„åˆ™  <code>&lt;Route path=&quot;/detail:id&quot;</code> component={A}/&gt;</li><li>è®¾ç½®pathname <code>to={ {pathname: &#39;/detail/${id}&#39; } }</code></li><li>è§£æ è·å–åˆ°match, <code>let { match: {param} } = this.props</code> param.idå³å¯ </li></ol></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>reduxä¸react-redux</title>
      <link href="/2019/07/05/redux%E4%B8%8Ereact-redux/"/>
      <url>/2019/07/05/redux%E4%B8%8Ereact-redux/</url>
      
        <content type="html"><![CDATA[<h2 id="Redux"><a href="#Redux" class="headerlink" title="Redux"></a>Redux</h2><blockquote><p>reduxå¹¶ä¸æ˜¯ä¸ºreactè€Œå‡ºï¼Œä»–å¯ä»¥è¿ç”¨åˆ°jQuery, vueç­‰é¡¹ç›®ä¸­</p></blockquote><p>ç»Ÿä¸€çš„çŠ¶æ€ç®¡ç†ï¼Œå°†æ‰€æœ‰çš„çŠ¶æ€å€¼æ”¾åœ¨ä¸€èµ·ï¼Œé€šè¿‡å¯¹Reducerå‘é€dispatchæ¥è¾¾åˆ°ç»Ÿä¸€ç®¡ç†<br><code>ç”¨æˆ· -&gt; reducer</code>  <code>reducer -&gt; æ•°æ®</code> ç±»ä¼¼ä¸€ç§ä¸­ä»‹è€…çš„æ¨¡å¼</p><h4 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h4><ul><li>ç»„ä»¶ä¹‹é—´é€šä¿¡</li><li>æ•°æ®ä¸´æ—¶ç¼“å­˜(å³localstoreçš„åŠŸèƒ½)ï¼Œæ€§èƒ½ä¼˜åŒ–</li></ul><h4 id="ä¸»è¦æµç¨‹"><a href="#ä¸»è¦æµç¨‹" class="headerlink" title="ä¸»è¦æµç¨‹"></a>ä¸»è¦æµç¨‹</h4><p>ç”¨æˆ·å‘å‡ºä¿®æ”¹ï¼Œ<code>dispatch</code> -&gt; reducer, æ¥æ”¶åˆ°æ•°æ®ï¼Œåˆ°<code>reducer</code>ä¸­è¿›è¡ŒåŒ¹é…æŸ¥æ‰¾ï¼Œ<br>ä¿®æ”¹æˆåŠŸåï¼Œæ‰§è¡Œä¹‹å‰è®¢é˜…è¿‡çš„æ–¹æ³• <code>subscribe</code>ã€‚<em>ç”¨æˆ·åœ¨è®¢é˜…äº‹ä»¶ä¸­è¿›è¡Œäº†setState,è§¦å‘è§†å›¾æ›´æ–°</em></p><h4 id="ä¸»è¦æ–¹æ³•"><a href="#ä¸»è¦æ–¹æ³•" class="headerlink" title="ä¸»è¦æ–¹æ³•"></a>ä¸»è¦æ–¹æ³•</h4><ol><li><p>åˆ›å»ºä¸€ä¸ªreducer </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reducer = (state, action) &#123;</span><br><span class="line">  <span class="comment">// .... action.type ä¸ºdispatchçš„typeç±»å‹</span></span><br><span class="line">  <span class="keyword">return</span> state <span class="comment">// è¿”å›æœ€ç»ˆçš„æ•°æ®ä»“åº“</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºå‡ºæ•°æ®ä»“åº“store</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">'redux '</span></span><br><span class="line"><span class="keyword">let</span> store = createStore(reducer)</span><br></pre></td></tr></table></figure></li><li><p>å¯¹éœ€è¦çš„æ•°æ®è¿›è¡Œå–å‡º(<code>getState</code>)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;getState&#125; = store</span><br><span class="line"><span class="comment">// let &#123;xx&#125; = getState()</span></span><br></pre></td></tr></table></figure></li><li><p>è®¢é˜…äº‹ä»¶(<code>subscribe</code>)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; subscribe &#125; = store</span><br><span class="line">subscribe(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// .... setState() ä¸€èˆ¬è°ƒç”¨setStateå¯ä»¥è§¦å‘renderæ›´æ–°</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å–æ¶ˆè®¢é˜…</span></span><br><span class="line"><span class="keyword">let</span> unSubscribute = subscribe()</span><br><span class="line">unSubscribute()</span><br></pre></td></tr></table></figure></li><li><p>è§¦å‘äº‹ä»¶(<code>dispatch</code>)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; dispatch &#125; = store</span><br><span class="line">dispatch(&#123;</span><br><span class="line">  type: XXX_XXX <span class="comment">//ä¸€èˆ¬ä½¿ç”¨å¤§å†™å­—æ¯</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ol><h2 id="react-redux"><a href="#react-redux" class="headerlink" title="react-redux"></a>react-redux</h2><p>æ˜¯reactå¯¹reduxçš„è¿›ä¸€æ­¥å°è£…ï¼Œè®©å…¶æ“ä½œæ›´ç®€æ´</p><h4 id="ä½¿ç”¨æ­¥éª¤"><a href="#ä½¿ç”¨æ­¥éª¤" class="headerlink" title="ä½¿ç”¨æ­¥éª¤"></a>ä½¿ç”¨æ­¥éª¤</h4><ol><li><p>æ ¹ç»„ä»¶ä¸Šæä¾›<code>Provider</code>,å¹¶ä¸”ä½¿ç”¨å…¶åŒ…å›´èµ·æ¥ï¼Œå¹¶ä¼ å…¥store</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Provider store=&#123;store&#125;&gt;<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>....<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">Provider</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li><li><p>æ„é€ ç»„ä»¶ä¸ºconnectç»„ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class Head extends React.Component&#123; ... &#125;</span><br><span class="line">mapStateToProps = (state) =&gt; &#123; return &#123;...state.xxx &#125; &#125;</span><br><span class="line">mapDispatchToProps = (dispatch) =&gt; &#123; return todo () &#123;...&#125; &#125;</span><br><span class="line">export default connect(mapStateToProps, mapDispatchToProps)(Head)</span><br><span class="line"></span><br><span class="line">// mapStateToPropsï¼ŒmapDispatchToPropsä¸¤ä¸ªæ–¹æ³•éƒ½æ˜¯è®²æ•°æ®æŒ‚åœ¨åˆ°Propsä¸Š</span><br><span class="line">// å…¶ä½™å‡å†…éƒ¨æŒ‰ç…§æ­£å¸¸ï¼Œåˆ°æ—¶å€™æ”¹ç¼–æ•°æ® = æ”¹å˜çŠ¶æ€ è§¦å‘componentWillReceiveProps</span><br><span class="line">// å®Œæˆé‡æ–°æ¸²æŸ“ï¼Œå¹¶ä¸”ä¼šæ ¹æ®ä½¿ç”¨çš„æ•°æ®è‡ªåŠ¨ç»‘å®šsubscribeä¸Šå»</span><br><span class="line"></span><br><span class="line">// å³æ‰€æœ‰çš„state,dispatchæ–¹æ³•ä»this.propsä¸Šè§£æ„å³å¯</span><br></pre></td></tr></table></figure></li><li><p>ä»propsä¸Šè§£æ„</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; n &#125; = <span class="keyword">this</span>.props</span><br></pre></td></tr></table></figure></li></ol><h6 id="æ³¨æ„ï¼š"><a href="#æ³¨æ„ï¼š" class="headerlink" title="æ³¨æ„ï¼š"></a>æ³¨æ„ï¼š</h6><ol><li>ä½¿ç”¨å¯¼å‡ºçš„ç»„ä»¶è¿›è¡Œjsxè¯­æ³•ç¼–å†™</li><li>å¦‚æœä¼ å…¥çš„propsä¸reduxè½¬æ¢åçš„å±æ€§å†²çªåï¼Œä¼šå‘ç”Ÿè¦†ç›–</li></ol><h4 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h4><ul><li><p>Provider<br>Provider ä»…ä»…æ˜¯å°†storeæ”¾å…¥ä¸Šä¸‹æ–‡è·¯å¾„ä¸­ï¼Œä¸ºäº†ä»¥åå¯ä»¥æ›´å¥½ä½¿ç”¨ï¼Œç›´æ¥æ¸²æŸ“å­å…ƒç´ å³å¯</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">render () &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.props.children</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>connect<br>è¯¥æ–¹æ³•æœ€ç»ˆè¿˜æ˜¯æ¸²æŸ“Conponent, ç›´æ¥åœ¨render()ä¸­æ¸²æŸ“å³å¯</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">render () &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Componenet</span> &#123;<span class="attr">...this.state</span>&#125; &#123;<span class="attr">...this.props</span>&#125;/&gt;</span></span></span><br><span class="line"><span class="xml">&#125;</span></span><br></pre></td></tr></table></figure></li></ul><ol><li><p>å°†æ‰€æœ‰çš„stateï¼Œæˆ–è€…dispatchä¸­å‡½æ•°æŒ‚åœ¨åˆ°props<br>æœ¬è´¨æ˜¯æŒ‚è½½åˆ°è‡ªå·±çš„stateä¸Šï¼Œæ–¹ä¾¿åç»­<code>setState(...)</code> æ¥è§¦å‘é‡æ–°æ¸²æŸ“ï¼Œç„¶è€Œç»™ä¸‹ä¸€å±‚çš„æ—¶å€™ï¼Œå°±æ˜¯<code>&lt;Component {...state}/&gt;</code>ï¼Œ<br>ä¹Ÿå³å°†å±æ€§ä¼ é€’ï¼Œä»è€Œåœ¨å­ç»„ä»¶ä¸­å¯ä»¥ç›´æ¥é€šè¿‡thisè·å–åˆ°</p></li><li><p>è‡ªåŠ¨è®¢é˜…<br>ç”±äºä»–è‡ªå·±æ˜¯ä»¥stateçš„å½¢å¼å­˜å‚¨çš„ï¼Œæ‰€ä»¥åœ¨<code>ComponentDidMount</code>ä¸­å°±è®¢é˜…å½“æ•°æ®å‘ç”Ÿæ”¹å˜ï¼Œé‡æ–°æ¸²æŸ“ï¼Œæ‰€ä»¥ç»™å­ç»„ä»¶çš„Propsæ”¹å˜ï¼Œ<br>ä¼šè§¦å‘<code>componentWillReceiveProps</code>, å¹¶ä¸”æ¥ä¸‹æ¥ä¼šè§¦å‘ä¸€ç³»åˆ—çš„æ›´æ–°äº‹ä»¶ï¼Œä»è€Œè¾¾åˆ°äº†è‡ªåŠ¨æ›´æ–°çš„ç›®çš„ã€‚</p></li></ol><h4 id="å·¥ç¨‹åŒ–ç›®å½•"><a href="#å·¥ç¨‹åŒ–ç›®å½•" class="headerlink" title="å·¥ç¨‹åŒ–ç›®å½•"></a>å·¥ç¨‹åŒ–ç›®å½•</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">|-store</span><br><span class="line">| |-action          // æ€»çš„actionç›®å½•</span><br><span class="line">|   |-personal.js</span><br><span class="line">|   |-vote.js</span><br><span class="line">|   |-index.js      // æ±‡æ€»å¯¼å‡º import Action .... from '.../store/action'</span><br><span class="line">| |-reducer         // å­˜æ”¾reducer</span><br><span class="line">|   |-personal.js</span><br><span class="line">|   |-vote.js</span><br><span class="line">|   |-index.js      // æ±‡æ€»å¯¼å‡ºçš„ import Reducer .... from '.../store/reducer'</span><br><span class="line">| |-action-types.js // å­˜æ”¾çš„æ‰€æœ‰actionä¸ªä¸­typeç±»å‹å¸¸é‡ import * as TYPE from '.../store/action-types'</span><br><span class="line">| |-index.js        // æ±‡æ€»reduce å¹¶ä¸”åˆ›å»ºå‡ºstore,å¯¼å‡ºå³å¯</span><br></pre></td></tr></table></figure><ul><li><p>reducer<br>ä¸ªé¡¹çš„reducerè¿˜æ˜¯ä»¥ä¹‹å‰çš„æ–¹å¼ï¼Œåˆå¹¶reducerè€ƒè™‘åˆ°é‡å¤çš„é—®é¢˜ï¼Œæ‰€ä»¥è¿›è¡Œäº†ä¸€å±‚å¯¹è±¡ç©ºé—´å‘½å</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; combineReducers &#125; <span class="keyword">from</span> <span class="string">'redux'</span></span><br><span class="line"><span class="keyword">let</span> reducer = combineReducers(&#123;</span><br><span class="line">  personal,</span><br><span class="line">  vote</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å–æ•°æ®çš„æ—¶å€™</span></span><br><span class="line"><span class="keyword">let</span> &#123; name, age &#125; = Store.getStore().personal</span><br></pre></td></tr></table></figure></li><li><p>action<br>actionä¸­,è¿”å›å€¼æ˜¯ä¹‹å‰dispatchçš„å‚æ•°ï¼Œè¿™é‡Œåªæ˜¯ä¸ºäº†ç»Ÿä¸€ç®¡ç†ï¼Œå…¶å®è¿˜æ˜¯ä¹‹å‰çš„åŸç†</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> vote = &#123;</span><br><span class="line">  support () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">type</span>: TYPE.VOTE_SUPPORT &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨çš„æ—¶å€™</span></span><br><span class="line">Store.dispatch(Action.vote.support())</span><br></pre></td></tr></table></figure></li></ul><h4 id="ä¸­é—´ä»¶"><a href="#ä¸­é—´ä»¶" class="headerlink" title="ä¸­é—´ä»¶"></a>ä¸­é—´ä»¶</h4><ul><li><p>ä½¿ç”¨</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore, applyMiddleware &#125; <span class="keyword">from</span> <span class="string">'redux'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> store = createStore(reducer, applyMiddleware(xxxä¸­é—´ä»¶<span class="number">1</span>ï¼Œxxxä¸­é—´ä»¶<span class="number">2.</span>..) )</span><br></pre></td></tr></table></figure></li><li><p>redux-logger: ç”¨äºåœ¨æ§åˆ¶å°æ¸…æ™°æ˜¾ç¤ºå‡ºå½“å‰çš„REDUXçš„æ“ä½œä¿¡æ¯ï¼Œä»¥åŠä¿®æ”¹åçš„çŠ¶æ€ä¿¡æ¯</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€é…ç½®ï¼Œæ§åˆ¶å°ä¼šæ‰“å°å‡ºç›¸åº”çš„æ“ä½œè¿‡ç¨‹</span><br></pre></td></tr></table></figure></li><li><p>redux-thunk: å¤„ç†å¼‚æ­¥Dispatchæ´¾å‘ä»»åŠ¡</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">addCustom (payload) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="params">dispatch</span> =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      dispatch(&#123;</span><br><span class="line">        type: TYPE.ADD_CUSTOM,</span><br><span class="line">        payload</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;, <span class="number">3000</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">dispatch ( Action.custom.addCustom(payload) )</span><br><span class="line"><span class="comment">// åŸç†ï¼Œç¬¬ä¸€æ¬¡å‘å‡º actionä¸ºundefinedï¼Œå¹¶å°†stateåŸæ ·è¿”å›ï¼Œè·å–åˆ°æ•°æ®ï¼Œå†å‘ä¸€æ¬¡æ­£å¸¸çš„</span></span><br></pre></td></tr></table></figure></li><li><p>redux-promise: å¤„ç†å¼‚æ­¥Dispatchæ´¾å‘ä»»åŠ¡,æ”¯æŒpromiseæ“ä½œ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">addCustom (payload) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    type: TYPE.ADD_CUSTOM,</span><br><span class="line">    payload: <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">      setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        resolve(payload)</span><br><span class="line">      &#125;, <span class="number">3000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">dispatch ( Action.custom.addCustom(payload) )</span><br><span class="line"><span class="comment">// åŸç†ï¼Œç¬¬ä¸€æ¬¡å‘å‡ºæ­£å¸¸çš„ï¼Œå½“å‘ç°æ¥æ”¶åˆ°çš„æ•°æ®ä¸ºPromiseï¼Œåˆ™ä¸è¿›è¡Œæ”¹å˜state(å³ä¸å­˜å‚¨state),</span></span><br><span class="line"><span class="comment">// åç»­å®Œæˆåï¼Œå†å‘ä¸€æ¬¡æ­£å¸¸çš„ï¼Œå¹¶æ”¹å˜state</span></span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>reactç»„ä»¶ä½¿ç”¨</title>
      <link href="/2019/07/05/react%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/"/>
      <url>/2019/07/05/react%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="jsxçš„ä½¿ç”¨"><a href="#jsxçš„ä½¿ç”¨" class="headerlink" title="jsxçš„ä½¿ç”¨"></a>jsxçš„ä½¿ç”¨</h2><ol><li>ä¸å»ºè®®å°†JSXç›´æ¥æ¸²æŸ“åˆ°domä¸­ï¼Œä¸€èˆ¬éƒ½æ˜¯æ¸²æŸ“åˆ°ä¸€ä¸ªDIVä¸­ï¼ˆå¯èƒ½ä¼šé¢‘ç¹è·Ÿæ¢ï¼Œdivæ¯”è¾ƒé€‚åˆï¼‰</li><li><code>{}</code>å†…æ˜¯jsï¼Œè¡¨è¾¾å¼ï¼Œä½†æ˜¯ä¸€å®šè¦å­˜åœ¨è¿”å›å€¼æ‰å¯ä»¥ï¼Œfor ä¸ if éƒ½ä¸å¯ä»¥ï¼Œä¸èƒ½ç›´æ¥æ”¾ä¸€ä¸ªå¯¹è±¡ï¼ˆ<ul><li>é™¤äº†ç»™styleèµ‹å€¼</li><li>é™¤äº†React.elementå¯¹è±¡</li></ul></li><li>ä¸€èˆ¬å¾ªç¯åˆ›å»ºJSXå…ƒç´ éƒ½æ˜¯é‡‡ç”¨mapæ–¹æ³•æ¥å®Œæˆï¼Œæ³¨æ„ä½¿ç”¨key={}æ¥ç»‘å®škeyçš„å€¼</li></ol><h2 id="Reactçš„æµç¨‹"><a href="#Reactçš„æµç¨‹" class="headerlink" title="Reactçš„æµç¨‹"></a>Reactçš„æµç¨‹</h2><ol><li>ä½¿ç”¨Babelå°†JSXè¯­æ³•è§„åˆ™ è§£ææˆReact.createElement(type, props, children),ä»…ä»…æ˜¯å½¢å¼ï¼Œä¹Ÿå°±æ˜¯å°†JSXè¯­æ³•è¡¨è¿°å‡ºæ¥ï¼Œä½†æ˜¯æ­¤æ—¶å¹¶æ²¡æœ‰æ‰§è¡Œã€‚</li><li><p>React.createElement(type, props, children) æ‰§è¡Œï¼Œåˆ›å»ºä¸€ä¸ªè™šæ‹ŸDOMï¼Œä¸»è¦åŒ…å«ä¸€ä¸‹çš„éƒ¨åˆ†</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  type: <span class="string">'xxx'</span>, <span class="comment">// åˆ›å»ºçš„å…ƒç´ æ ‡ç­¾åç§°</span></span><br><span class="line">  props: &#123; <span class="attr">key</span>: value, children&#125;, <span class="comment">// ç”¨äºæ ‡ç­¾ä¸Šçš„å±æ€§ï¼Œ å¹¶ä¸”å°†childrenæ”¾å…¥</span></span><br><span class="line">  ref: xxx,</span><br><span class="line">  key: xxx</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>RenderDOM.render(obj, container, callback) æ¸²æŸ“è¿™ä¸ªè™šæ‹Ÿdom</p><ul><li>åˆ›å»ºobjä¸­çš„type -&gt; dom å…ƒç´  document.createElement()</li><li>æ ¹æ®å±æ€§ï¼Œç»™domæ ‡ç­¾ä¸ŠåŠ å±æ€§ï¼Œå¹¶ä¸”åªå¾ªç¯è‡ªèº«å±æ€§ï¼ˆ<code>hasOwnProperty</code>ï¼‰ ç‰¹æ®Šå±æ€§è¦æ³¨æ„ï¼Œæ¯”å¦‚className, style,</li><li>æŒ‚è½½domèŠ‚ç‚¹åˆ°Containerä¸Šï¼Œ container.appendChild(dom)</li></ul></li></ol><h2 id="Reactç”³æ˜ç»„ä»¶çš„æ–¹å¼-åŸºäºå‡½æ•°"><a href="#Reactç”³æ˜ç»„ä»¶çš„æ–¹å¼-åŸºäºå‡½æ•°" class="headerlink" title="Reactç”³æ˜ç»„ä»¶çš„æ–¹å¼-åŸºäºå‡½æ•°"></a>Reactç”³æ˜ç»„ä»¶çš„æ–¹å¼-åŸºäºå‡½æ•°</h2><ul><li>æ‰€æœ‰çš„ç»„ä»¶éƒ½æ˜¯ä»¥å‡½æ•°çš„æ–¹å¼å£°æ˜å‡ºå» <code>export default function Component (props) { ... }</code></li><li>è¦åœ¨è¯¥é¡µé¢ä¸­å¼•å…¥ Reactæ‰å¯ä»¥æ­£å¸¸çš„ä½¿ç”¨ï¼Œå› ä¸ºè¦ä½¿ç”¨React.createElement æ¥åˆ›å»ºå‡ºå…ƒç´ </li><li>ç»è¿‡babelå¤„ç†åï¼Œæ‰€æœ‰çš„å±æ€§éƒ½ä¼šä»¥propså¯¹è±¡çš„å½¢å¼å­˜åœ¨èµ·æ¥ï¼Œæ‰€ä»¥å‡½æ•°çš„å½¢å‚ä½ç½®å°±æ˜¯æ¥å—çš„å‡½æ•°</li></ul><h2 id="Reactç”³æ˜ç»„ä»¶çš„æ–¹å¼-åŸºäºç»„ä»¶Component"><a href="#Reactç”³æ˜ç»„ä»¶çš„æ–¹å¼-åŸºäºç»„ä»¶Component" class="headerlink" title="Reactç”³æ˜ç»„ä»¶çš„æ–¹å¼-åŸºäºç»„ä»¶Component"></a>Reactç”³æ˜ç»„ä»¶çš„æ–¹å¼-åŸºäºç»„ä»¶Component</h2><ul><li>åŸºäºJSXæ¥craeate-elementæ¥è½¬æ¢ä¸ºå¯¹è±¡</li><li>ç»§æ‰¿React.componentå¹¶ä¸”åœ¨æ„é€ å™¨ä¸­è¦è°ƒç”¨ super</li><li>ç»„ä»¶ä¸­å…³äºpropsçš„ä½¿ç”¨<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.superä¸­ä¼ å…¥propsï¼Œå› ä¸ºæ˜¯å®ä¾‹åˆ°å¯¹è±¡ä¸Šäº†ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨this.æ¥è¿›è¡Œè®¿é—®</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">constructor</span> (props) &#123; </span><br><span class="line">  <span class="keyword">super</span>(props)</span><br><span class="line">  <span class="keyword">this</span>.props <span class="comment">// è¿™é‡Œå¯ä»¥æ­£å¸¸çš„è®¿é—®åˆ°å…ƒç´ </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">render ()&#123; </span><br><span class="line">  <span class="keyword">this</span>.props <span class="comment">// è¿™é‡Œå¯ä»¥æ­£å¸¸çš„è®¿é—®åˆ°å…ƒç´ </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.ä¸ä¼ å…¥ï¼Œåœ¨constructorä¸­æ˜¯æ— æ³•ä½¿ç”¨çš„ï¼Œå…¶ä»–åœ°æ–¹reactåšäº†é»˜è®¤å…³è”</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">constructor</span> () &#123;</span><br><span class="line">  <span class="keyword">super</span>()</span><br><span class="line">  <span class="keyword">this</span>.props <span class="comment">// ä¸å¯ä»¥è®¿é—®åˆ°å…ƒç´ </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">render ()&#123; </span><br><span class="line">  <span class="keyword">this</span>.props <span class="comment">// è¿™é‡Œå¯ä»¥æ­£å¸¸çš„è®¿é—®åˆ°å…ƒç´ </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="Reactç”³æ˜ç»„ä»¶-å‡½æ•°å¼-å’Œ-ç»„ä»¶å¼å¼‚åŒ"><a href="#Reactç”³æ˜ç»„ä»¶-å‡½æ•°å¼-å’Œ-ç»„ä»¶å¼å¼‚åŒ" class="headerlink" title="Reactç”³æ˜ç»„ä»¶ å‡½æ•°å¼ å’Œ ç»„ä»¶å¼å¼‚åŒ"></a>Reactç”³æ˜ç»„ä»¶ å‡½æ•°å¼ å’Œ ç»„ä»¶å¼å¼‚åŒ</h2><h4 id="ç›¸åŒç‚¹"><a href="#ç›¸åŒç‚¹" class="headerlink" title="ç›¸åŒç‚¹"></a>ç›¸åŒç‚¹</h4><ul><li>éƒ½æ˜¯é€šè¿‡JSXè½¬æ¢æ‰§è¡Œ</li></ul><h4 id="ä¸åŒç‚¹"><a href="#ä¸åŒç‚¹" class="headerlink" title="ä¸åŒç‚¹"></a>ä¸åŒç‚¹</h4><ul><li>å‡½æ•°å¼ï¼ˆé™æ€ç»„ä»¶ï¼‰ -&gt; æ™®é€šå‡½æ•°æ‰§è¡Œ å…¶ä¸­ thisä¸ºundefined<ul><li>æ“ä½œè¾ƒç®€å•</li><li>é€‚åˆç®€å•è°ƒå–çš„æ–¹å¼</li></ul></li><li>ç»„ä»¶å¼ ï¼ˆåŠ¨æ€ç»„ä»¶ï¼‰-&gt; è°ƒç”¨newæ¥åˆ›å»ºï¼Œ å…¶ä¸­thisä¸ºåˆ›å»ºçš„è™šæ‹Ÿå…ƒç´ <ul><li>è¾ƒä¸ºå¤æ‚</li><li>èƒ½å¤Ÿä½¿ç”¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°</li><li>èƒ½å¤Ÿä½¿ç”¨ä¸€äº›çŠ¶æ€æ¥åŠ¨æ€æ›´æ–°å†…å®¹ </li></ul></li></ul><h2 id="ç»„ä»¶ä¸­çš„çŠ¶æ€"><a href="#ç»„ä»¶ä¸­çš„çŠ¶æ€" class="headerlink" title="ç»„ä»¶ä¸­çš„çŠ¶æ€"></a>ç»„ä»¶ä¸­çš„çŠ¶æ€</h2><p>åªæœ‰åŸºäºç±»çš„ç»„ä»¶ï¼Œæœ‰çŠ¶æ€ï¼Œå¯ä»¥ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°</p><ul><li>å±æ€§åªè¯»ï¼ˆåˆ«äººç»™çš„ï¼‰</li><li>çŠ¶æ€è¯»å†™ï¼ˆè‡ªå·±è®¾å®šï¼‰</li></ul><h4 id="æ¨¡æ‹ŸåŒå‘æ•°æ®ç»‘å®š"><a href="#æ¨¡æ‹ŸåŒå‘æ•°æ®ç»‘å®š" class="headerlink" title="æ¨¡æ‹ŸåŒå‘æ•°æ®ç»‘å®š"></a>æ¨¡æ‹ŸåŒå‘æ•°æ®ç»‘å®š</h4><p>å¯ä»¥åœ¨inputçš„onchangeäº‹ä»¶ä¸­ç»‘å®šsetState()<br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;text&#125; = <span class="keyword">this</span>.state</span><br><span class="line">&lt;input type=<span class="string">"text"</span> onchange=&#123;ev =&gt; &#123;</span><br><span class="line">  <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">    text: ev.target.value</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;&#125; value=&#123;text&#125; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;div&gt;&#123;text&#125;&lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure></p><h2 id="ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ"><a href="#ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ"></a>ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ</h2><h4 id="ç»„ä»¶ç¬¬ä¸€æ¬¡åˆ›å»ºçš„ç”Ÿå‘½å‘¨æœŸ"><a href="#ç»„ä»¶ç¬¬ä¸€æ¬¡åˆ›å»ºçš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç»„ä»¶ç¬¬ä¸€æ¬¡åˆ›å»ºçš„ç”Ÿå‘½å‘¨æœŸ"></a>ç»„ä»¶ç¬¬ä¸€æ¬¡åˆ›å»ºçš„ç”Ÿå‘½å‘¨æœŸ</h4><ul><li><p>static defaultProps{} (é»˜è®¤å‚æ•°ï¼Œéæ­£å¼çš„ç¬¬ä¸€æ­¥ï¼Œéœ€å®‰è£…ç»„ä»¶ prop-types æ‰å¯é…ç½®)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> defaultProps = &#123;</span><br><span class="line">  speed: <span class="number">300</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">  speed: PropTypes.number</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>constructor()<br>ç»„ä»¶çš„æ„é€ å‡½æ•°</p></li><li>componentWillMount()<br>ç»„ä»¶æŒ‚è½½ä¹‹é—´</li><li>render()<br>æ¸²æŸ“ä¸­</li><li>componentDidMount()<br>ç»„ä»¶æ¸²æŸ“å®Œæˆåï¼Œä¸€èˆ¬å°†è¯·æ±‚æ•°æ®æ”¾åˆ°æ­¤å¤„</li></ul><h4 id="æ”¹å˜çŠ¶æ€çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#æ”¹å˜çŠ¶æ€çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="æ”¹å˜çŠ¶æ€çš„ç”Ÿå‘½å‘¨æœŸ"></a>æ”¹å˜çŠ¶æ€çš„ç”Ÿå‘½å‘¨æœŸ</h4><ul><li>shouldComponentUpdate(nextProps, nextState)<br>é’©å­å‡½æ•°ï¼Œå¿…éœ€è¿”å›true,æ‰èƒ½å¤Ÿå‡ºå‘æ›´æ–°ï¼Œä¸€èˆ¬åšæ€§èƒ½ä¼˜åŒ–ä½¿ç”¨</li><li>componentWillUpdate(nextProps, nextState)<br>æ›´æ–°ä¹‹å‰ï¼Œæ­¤æ—¶çš„props, stateè¿˜æ˜¯ä¹‹å‰çš„æ•°æ®ï¼Œå¯ä»¥ç†è§£ä¸ºæ ˆï¼Œæ­¤æ—¶è¿˜æ²¡æœ‰å‹æ ˆ</li><li>render<br>æ¸²æŸ“ä¸­</li><li>componentDidUpdate()<br>æ›´æ–°å®Œæˆå</li></ul><h4 id="ä¼ å…¥çš„å±æ€§å‘ç”Ÿå˜åŒ–"><a href="#ä¼ å…¥çš„å±æ€§å‘ç”Ÿå˜åŒ–" class="headerlink" title="ä¼ å…¥çš„å±æ€§å‘ç”Ÿå˜åŒ–"></a>ä¼ å…¥çš„å±æ€§å‘ç”Ÿå˜åŒ–</h4><ul><li>componentWillReceiveProps(nextProps, nextState)<br>ä¼ å…¥çš„å±æ€§å‘ç”Ÿäº†å˜åŒ–ï¼Œæ¥ä¸‹æ¥æ‰§è¡Œæ”¹å˜çŠ¶æ€ç”Ÿå‘½å‘¨æœŸçš„ä¸€ç³»åˆ—</li></ul><h4 id="å¸è½½"><a href="#å¸è½½" class="headerlink" title="å¸è½½"></a>å¸è½½</h4><ul><li>componentWillUnmount()<br>è¯¥ç»„ä»¶è¢«å¸è½½ä¹‹å‰ï¼Œå¹¶ä¸æ˜¯é”€æ¯ï¼Œç»„ä»¶è¿˜åœ¨</li></ul><h2 id="setState-æ³¨æ„"><a href="#setState-æ³¨æ„" class="headerlink" title="setState() æ³¨æ„"></a>setState() æ³¨æ„</h2><p>æ”¹å˜çŠ¶æ€çš„è¿™ä¸ªæ–¹æ³•æ˜¯ä¸€ä¸ªå¼‚æ­¥æ‰§è¡Œçš„æ–¹æ³•ï¼Œä¸€å®šè¦æ…ç”¨ <code>n: this.state.n++</code> è¿™ç±»æ“ä½œ,æœ€å¥½ä½¿ç”¨<code>n: this.state.n+1</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.state = &#123;</span><br><span class="line">  n: <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">this</span>.state.n)</span><br><span class="line"><span class="keyword">this</span>.setState(&#123;</span><br><span class="line">  n: <span class="keyword">this</span>.state.n++</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">this</span>.state.n)</span><br><span class="line"><span class="comment">// ======= è¿è¡Œæƒ…å†µ (æ³¨æ„++ æ˜¯å…ˆèµ‹å€¼ï¼Œåè‡ªå¢1)</span></span><br><span class="line"><span class="comment">//  ä¸»çº¿ç¨‹                       ç­‰å¾…é˜Ÿåˆ—</span></span><br><span class="line">    <span class="number">1.</span> log(<span class="number">0</span>)</span><br><span class="line">                                <span class="number">2.</span> set <span class="keyword">this</span>.state.n = <span class="number">0</span> (æ­¤æ—¶è¿˜æ²¡åˆ°++)</span><br><span class="line">    <span class="number">3.</span> <span class="keyword">this</span>.state.n = <span class="number">1</span> (æ­¤æ—¶å·²ç»ç»™ä»–++äº†)</span><br><span class="line">    <span class="number">4.</span> log(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">æ‰§è¡Œæƒ…å†µ <span class="number">1</span> -&gt; <span class="number">3</span> -&gt; <span class="number">4</span> -&gt; <span class="number">2</span> æœ€ç»ˆç»“æŸå <span class="keyword">this</span>.state.n = <span class="number">0</span></span><br><span class="line">æ‰€ä»¥æ‰§è¡Œåˆ°ä¸‹ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸçš„æ—¶å€™ï¼ŒæŠŠn=<span class="number">0</span>å¸¦äº†è¿‡å»</span><br></pre></td></tr></table></figure></p><h2 id="ç»„ä»¶ä¹‹é—´é€šä¿¡"><a href="#ç»„ä»¶ä¹‹é—´é€šä¿¡" class="headerlink" title="ç»„ä»¶ä¹‹é—´é€šä¿¡"></a>ç»„ä»¶ä¹‹é—´é€šä¿¡</h2><h4 id="å±æ€§ä¼ é€’-åªè¯»"><a href="#å±æ€§ä¼ é€’-åªè¯»" class="headerlink" title="å±æ€§ä¼ é€’ (åªè¯»)"></a>å±æ€§ä¼ é€’ (åªè¯»)</h4><p>é€šè¿‡propsè¿›è¡Œä¼ é€’ï¼Œçˆ¶äº²ç»™å„¿å­ï¼Œ å„¿å­è®¾ç½®ç»™å­™å­<br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index</span></span><br><span class="line">&lt;Parent n=&#123;<span class="number">1</span>&#125;&gt;<span class="xml"><span class="tag">&lt;/<span class="name">Parent</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Parent</span></span><br><span class="line">&lt;Son n=&#123;<span class="keyword">this</span>.props.n&#125;&gt;<span class="xml"><span class="tag">&lt;/<span class="name">Son</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Son</span></span><br><span class="line">&lt;div&gt;&#123;<span class="keyword">this</span>.props.n&#125;&lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure></p><h4 id="ä¸Šä¸‹æ–‡ä¼ é€’-å¯äºŒæ¬¡ä¿®æ”¹ï¼Œä¸å½±å“å…¶ä»–ç»„ä»¶"><a href="#ä¸Šä¸‹æ–‡ä¼ é€’-å¯äºŒæ¬¡ä¿®æ”¹ï¼Œä¸å½±å“å…¶ä»–ç»„ä»¶" class="headerlink" title="ä¸Šä¸‹æ–‡ä¼ é€’ (å¯äºŒæ¬¡ä¿®æ”¹ï¼Œä¸å½±å“å…¶ä»–ç»„ä»¶)"></a>ä¸Šä¸‹æ–‡ä¼ é€’ (å¯äºŒæ¬¡ä¿®æ”¹ï¼Œä¸å½±å“å…¶ä»–ç»„ä»¶)</h4><p>çˆ¶ç»„ä»¶å…ˆæŠŠéœ€è¦ç»™åä»£å…ƒç´ ï¼ˆåŒ…æ‹¬å­™å­ï¼‰ï¼Œå…¨éƒ½è®¾ç½®å¥½ï¼Œåä»£ç»„ä»¶éœ€è¦ä¿¡æ¯ï¼Œç›´æ¥å»è°ƒå–å³å¯ï¼ˆä¸éœ€è¦å„¿å­è½¬é€’äº†ï¼‰<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ==çˆ¶ç»„ä»¶==</span></span><br><span class="line"><span class="comment">// è®¾ç½®ä¸Šä¸‹æ–‡ç±»å‹</span></span><br><span class="line"><span class="keyword">static</span> childContextTypes = &#123;</span><br><span class="line">  n: PropTypes.number,</span><br><span class="line">  m: PropTypes.number</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å‘ä¸Šä¸‹æ–‡ä¼ é€’æ•°æ®</span></span><br><span class="line">getChildContext () &#123;</span><br><span class="line">  <span class="keyword">let</span> &#123;n, m&#125; <span class="comment">// å¾—åˆ°éœ€è¦æ”¾ç½®çš„å€¼</span></span><br><span class="line">  <span class="keyword">return</span> &#123; <span class="comment">// ä¼ é€’ä¸‹å»</span></span><br><span class="line">    n,</span><br><span class="line">    m</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ==å­ç»„ä»¶==</span></span><br><span class="line"><span class="comment">// å­ç»„ä»¶éœ€è¦ä¸»åŠ¨æ¥å—çš„ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">static</span> contextTypes = &#123;</span><br><span class="line">  n: PropTypes.number</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">this</span>.context.n)</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>jsè®¾è®¡æ¨¡å¼æ€»ç»“</title>
      <link href="/2019/06/25/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E6%80%BB%E7%BB%93/"/>
      <url>/2019/06/25/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<h4 id="å•ä¾‹è®¾è®¡æ¨¡å¼"><a href="#å•ä¾‹è®¾è®¡æ¨¡å¼" class="headerlink" title="å•ä¾‹è®¾è®¡æ¨¡å¼"></a>å•ä¾‹è®¾è®¡æ¨¡å¼</h4><p>jsä¸­ç”±äºæ²¡æœ‰ç±»çš„æ¦‚å¿µï¼Œæ‰€ä»¥å•ä¾‹ä¸éœ€è¦ç‰¹åˆ«è®¾è®¡ï¼Œåªè¦ä¿è¯ä¸€ä¸ªå¼•ç”¨å³å¯ï¼Œä½†æ˜¯ä¿å­˜åˆ°å…¨å±€å¯¹è±¡åˆå®¹æ˜“é€ æˆæ±¡æŸ“ï¼Œ<br>æ‰€ä»¥è¦ç»“åˆé—­åŒ…ã€‚æ³¨æ„ï¼šå¯¹è±¡åˆ›å»ºä¸å•ä¾‹çš„ç®¡ç†è¦åˆ†å¼€ã€‚</p><h4 id="ç­–ç•¥æ¨¡å¼"><a href="#ç­–ç•¥æ¨¡å¼" class="headerlink" title="ç­–ç•¥æ¨¡å¼"></a>ç­–ç•¥æ¨¡å¼</h4><p>å°†ç®—æ³•çš„ä½¿ç”¨ ä¸ ç®—æ³•çš„è®¾è®¡ åˆ†ç¦»å¼€ï¼Œ å¯ä»¥çœ‹æˆå¯å˜çš„å‡½æ•°è°ƒç”¨<br>ä¸»è¦æ˜¯è§£å†³if elseåˆ†æ”¯è¿‡å¤šçš„é—®é¢˜</p><h4 id="ä»£ç†æ¨¡å¼"><a href="#ä»£ç†æ¨¡å¼" class="headerlink" title="ä»£ç†æ¨¡å¼"></a>ä»£ç†æ¨¡å¼</h4><p>å®¢æˆ·ä¸æ–¹ä¾¿ç›´æ¥è®¿é—®æŸä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œæä¾›ä¸€ä¸ªå¯¹è±¡æ¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ï¼Œ å®¢æˆ· -&gt; ä»£ç† -&gt; æœ¬ä½“<br>è™šæ‹Ÿä»£ç† ä»£ç†å¯¹è±¡å’Œå®ä½“ä¹‹é—´åº”è¯¥æ˜¯ä¸€è‡´çš„ï¼Œæ–¹ä¾¿è°ƒç”¨æˆ–è€…æ›¿æ¢<br>ç¼“å­˜ä»£ç† è®¿é—®æŸä¸ªå¯¹è±¡ä¹‹å‰ï¼Œé€šè¿‡é—­åŒ…çœ‹ä¸€ä¸‹ä¹‹å‰æœ‰æ²¡æœ‰ç¼“å­˜è¿‡ï¼Œæ²¡æœ‰åˆ™æ‰§è¡Œå¹¶æ”¾å…¥ç¼“å­˜ return cache[args] = fn()</p><h4 id="è¿­ä»£å™¨æ¨¡å¼"><a href="#è¿­ä»£å™¨æ¨¡å¼" class="headerlink" title="è¿­ä»£å™¨æ¨¡å¼"></a>è¿­ä»£å™¨æ¨¡å¼</h4><p>å°†è¿­ä»£çš„è¿‡ç¨‹æŠ½ç¦»å¼€ï¼Œåªå…³å¿ƒæœ€åçš„ç»“æœï¼Œå¹¶ä¸å…³å¿ƒè¿­ä»£çš„è¿‡ç¨‹<br>å†…éƒ¨è¿­ä»£å™¨ è°ƒç”¨æ–¹ä¾¿ï¼Œæ›´é€‚åˆçœ‹ç»“æœï¼Œjså·²ç»å®ç°äº†å†…éƒ¨è¿­ä»£å™¨forEach<br>å¤–éƒ¨è¿­ä»£å™¨ éœ€è¦æ‰‹åŠ¨æ§åˆ¶è¿­ä»£è¿‡ç¨‹ï¼Œå¯è‡ªå®šä¹‰åŒ–æ¯”è¾ƒé«˜ ï¼ˆæ•°æ®åº“resultMapç±»ä¼¼ï¼Œ.next() ä¸‹ä¸€ä½ï¼‰</p><h4 id="å‘å¸ƒ-è®¢é˜…ï¼ˆè§‚å¯Ÿè€…ï¼‰-æ¨¡å¼"><a href="#å‘å¸ƒ-è®¢é˜…ï¼ˆè§‚å¯Ÿè€…ï¼‰-æ¨¡å¼" class="headerlink" title="å‘å¸ƒ-è®¢é˜…ï¼ˆè§‚å¯Ÿè€…ï¼‰ æ¨¡å¼"></a>å‘å¸ƒ-è®¢é˜…ï¼ˆè§‚å¯Ÿè€…ï¼‰ æ¨¡å¼</h4><p>å°† å¤šä¸ªè®¢é˜…è€… æ”¾åˆ° ä¸€ä¸ªå‘å¸ƒè€…å­˜å‚¨èµ·æ¥ï¼ˆ<em>å°¤å…¶æ˜¯å¯¹å¤šä¸ªäº‹ä»¶çš„å¼‚æ­¥æ‰§è¡Œ</em>ï¼‰ï¼Œå½“è¿™ä¸ªå‘å¸ƒè€…å‘å¸ƒå¯¹è±¡çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨å…¶æ‰€æœ‰è®¢é˜…è€…çš„æ–¹æ³•æ‰§è¡Œï¼Œ<br>è®¢é˜…è€…åªéœ€è¦æŒ‰ç…§è§„å®šè®¢é˜…å…¶å‘å¸ƒè€…è§„å®šçš„æ–¹æ³•å³å¯ï¼Œä¸»è¦æ˜¯äº‹ä»¶çš„è§£è€¦ï¼Œç±»ä¼¼domä¸­çš„äº‹ä»¶ç»‘å®š</p><h4 id="å‘½ä»¤æ¨¡å¼"><a href="#å‘½ä»¤æ¨¡å¼" class="headerlink" title="å‘½ä»¤æ¨¡å¼"></a>å‘½ä»¤æ¨¡å¼</h4><p>è¿™é‡Œä¸»è¦æ˜¯é’ˆå¯¹ç»‘å®šäº‹ä»¶çš„è§£è€¦æ€§ï¼Œ å°† <code>onclick = function () { xxx }</code> åˆ†ç¦»å¼€ï¼Œå˜æˆçº¦å®šå¥½çš„å›ºå®šæ¨¡å¼,<br>ç”¨äº†ä¸€ä¸ªç¬¬ä¸‰è€… ï¼ˆå‘½ä»¤è€…ï¼‰è¿æ¥äº†èµ·æ¥ï¼Œ åšåˆ°äº†è§£è€¦æ€§<br><code>onclick = commandObj.execute()</code> + <code>commandObj.execute = function () { xxx }</code></p><p>æ³¨æ„ï¼š<br>å‘½ä»¤æ¨¡å¼ä¸­çš„ï¼šâ€èªæ˜æ¨¡å¼â€ç”±äºæ²¡æœ‰receiverï¼Œä»ä»£ç ç»“æ„ä¸Šä¸ ç­–ç•¥æ¨¡å¼ æ¥è¿‘ï¼Œä½†æ˜¯ä»ç”¨é€”ä¸ŠåŒºåˆ†ä»–ä»¬<br>å‘½ä»¤æ¨¡å¼ï¼ŒèŒƒå›´å¹¿ï¼Œå¯¹ä»€ä¹ˆæ‰§è¡Œä»€ä¹ˆå‘½ä»¤<br>ç­–ç•¥æ¨¡å¼ï¼ŒæŒ‡å®šèŒƒå›´ï¼Œé‡‡ç”¨ä»€ä¹ˆæ ·çš„æ–¹æ³•è§£å†³</p><p>â€œå‚»ç“œæ¨¡å¼â€ï¼š ç”±receiveråšexecute,æ‰€ä»¥å‘½ä»¤å…¶å®å•¥éƒ½ä¸çŸ¥é“ï¼Œå°±æ˜¯å¾—åˆ°å‘½ä»¤ï¼Œè°ƒexecute<br>â€œèªæ˜æ¨¡å¼â€ï¼š ç›´æ¥åœ¨commandä¸­æ‰§è¡ŒåŠŸèƒ½ï¼Œä¸åšè½¬æ¥ï¼Œä¸­é—´å±‚ç›´æ¥æ‰§è¡Œä»£ç </p><h4 id="ç»„åˆæ¨¡å¼"><a href="#ç»„åˆæ¨¡å¼" class="headerlink" title="ç»„åˆæ¨¡å¼"></a>ç»„åˆæ¨¡å¼</h4><p>æ ‘å½¢ç»“æ„ï¼Œåªéœ€è¦å¯¹æ ‘æ ¹å‘å‡ºæŒ‡ä»¤ï¼Œä¾¿ä¼šä¾æ­¤éå†æ‰€æœ‰çš„å¶å­æ–¹æ³•çš„execute,æ˜¯åœ¨å‘½ä»¤æ¨¡å¼çš„å®å‘½ä»¤ä¸­å»¶ç”³è€Œæ¥<br>ç±»ä¼¼ä¸€ä¸ªæ·±åº¦éå†ï¼Œ å¦‚æœæ˜¯ç»„åˆèŠ‚ç‚¹-&gt; éå†æ‰§è¡Œæ‰€æœ‰çš„å¶èŠ‚ç‚¹çš„ execute, å¦‚æœæ˜¯å¶å­èŠ‚ç‚¹ï¼Œç›´æ¥æ‰§è¡Œå…¶ä»£ç å³å¯</p><h4 id="æ¨¡æ¿æ–¹æ³•æ¨¡å¼"><a href="#æ¨¡æ¿æ–¹æ³•æ¨¡å¼" class="headerlink" title="æ¨¡æ¿æ–¹æ³•æ¨¡å¼"></a>æ¨¡æ¿æ–¹æ³•æ¨¡å¼</h4><p>ç®—æ³•çš„æ¡†æ¶ç”±æ¨¡æ¿å®šä¹‰å¥½ï¼Œå­ç±»åªéœ€è¦æŒ‰ç…§ä¸€å®šçš„è§„åˆ™å»å®ç°ä¸€äº›ç»†èŠ‚çš„å®ç°å³å¯ï¼Œæœ‰ç‚¹ç±»ä¼¼äºä¸javaä¸­çš„æŠ½è±¡ç±»ï¼Œæ¥å£ç±»<br>ä»–æ˜¯ä¸€ç§åŸå‹ç»§æ‰¿çš„æ–¹å¼</p><h4 id="äº«å…ƒæ¨¡å¼"><a href="#äº«å…ƒæ¨¡å¼" class="headerlink" title="äº«å…ƒæ¨¡å¼"></a>äº«å…ƒæ¨¡å¼</h4><p>åŒºåˆ†å¤–éƒ¨çŠ¶æ€ä¸å†…éƒ¨çŠ¶æ€å…¶å®å°±æ˜¯æ‰¾å‡ºå˜åŒ–çš„å’Œä¸å˜åŒ–çš„ï¼Œç²¾é«“æ˜¯åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œä¾æ¬¡æ”¹å˜å…¶å†…éƒ¨çš„å±æ€§ï¼Œæ˜¯ä¸€ç§<br>å…¸å‹çš„ ä»¥æ—¶é—´æ¢ç©ºé—´çš„ä¾‹å­ï¼Œ å¯¹è±¡æ± ä¹Ÿç±»ä¼¼äº«å…ƒæ¨¡å¼è™½ç„¶æ²¡æœ‰ä½“ç°çŠ¶æ€åˆ†ç¦»ï¼Œä½†æ˜¯æœ‰å…±äº«çš„ä½“ç°</p><h4 id="èŒè´£é“¾æ¨¡å¼"><a href="#èŒè´£é“¾æ¨¡å¼" class="headerlink" title="èŒè´£é“¾æ¨¡å¼"></a>èŒè´£é“¾æ¨¡å¼</h4><p>ç”¨æ¥ç®€åŒ–if elseçš„ç›¸å…³æ“ä½œï¼Œæ¯ä¸ªæ–¹æ³•åªéœ€è¦å¤„ç†è‡ªå·±çš„é‚£ä¸€ç‰‡ï¼Œå¤„ç†ä¸äº†å°±å¾€åæŠ›ï¼Œç›´åˆ°æœ‰ç›¸åº”çš„<br>èŒè´£è€…å¯ä»¥å¤„ç†å³å¯ã€‚ä¸€èˆ¬ç”¨å­—ç¬¦ä¸²<code>&#39;nextSuccessor&#39;</code>è¡¨ç¤ºä¼ é€’ç»™ä¸‹ä¸€ä¸ªèŒè´£å¯¹è±¡ï¼Œæˆ–è€…æ‰‹åŠ¨è°ƒç”¨ä¸‹å»<br>ä¸€èˆ¬æœ€åä¸€ä¸ªé“¾éƒ½è¦æ”¾ä¸€ä¸ªæ¥é”…ä¾ ï¼Œè¦ä¸å°±è¢«æ”¾èµ°äº†</p><h4 id="ä¸­ä»‹è€…æ¨¡å¼"><a href="#ä¸­ä»‹è€…æ¨¡å¼" class="headerlink" title="ä¸­ä»‹è€…æ¨¡å¼"></a>ä¸­ä»‹è€…æ¨¡å¼</h4><p>å¯¹è±¡ä¹‹é—´çš„å¼•ç”¨è¿‡äºå¤æ‚çš„æ—¶å€™ï¼Œé€šå¸¸å¯ä»¥å¼•å…¥ä¸­ä»‹è€…ï¼Œå°†æ¯ä¸ªäººçš„å…³ç³»éƒ½æ‰¯åˆ°ä¸­ä»‹è€…èº«ä¸Šï¼Œè¿™æ ·ä¼šå‡å°‘å¯¹è±¡ä¹‹é—´å…³ç³»ç»´æŠ¤<br>çš„å›°æ‰°ï¼Œä½†æ˜¯æ‰€æœ‰çš„å…³ç³»éƒ½æ˜¯ç”±ä¸­ä»‹è€…æ¥ç»´æŠ¤çš„ï¼Œä¸­ä»‹è€…ä¸€èˆ¬ä¼šè¾ƒå¤§ï¼Œå¤„ç†é€»è¾‘è¾ƒä¸ºå¤æ‚ï¼Œä½†æ˜¯å…¶ä»–ç±»éƒ½æ˜¯ç±»ä¼¼é€æ˜çš„ï¼Œæ‰€æœ‰<br>å…³ç³»éƒ½æœ‰ä¸­ä»‹è€…æ¥ç»´æŠ¤ï¼Œç±»ä¹‹é—´æ˜¯ä¸çŸ¥é“è‡ªå·±æ˜¯å¦ä¸åˆ«äººæœ‰å…³è”(å¯¼è‡´æœ¬èº«çš„å…³è”ä¸è¢«å…³æ³¨)ï¼ŒæŠ˜ä¸­ä½¿ç”¨<br>åªéœ€è¦ç»´æŠ¤ä¸­ä»‹è€… å°±å®Œæˆäº†ç±»ä¹‹é—´çš„å…³ç³»ç»´æŠ¤</p><h4 id="è£…é¥°è€…æ¨¡å¼"><a href="#è£…é¥°è€…æ¨¡å¼" class="headerlink" title="è£…é¥°è€…æ¨¡å¼"></a>è£…é¥°è€…æ¨¡å¼</h4><p>ä¸»è¦æ˜¯ä¸ºäº†åœ¨ä¸æ”¹åŠ¨åŸå‡½æ•°çš„æƒ…å†µä¸‹ï¼Œè¿›è¡Œæ‹“å±•ï¼Œæœ€ä¸»è¦çš„è¿ç”¨æ˜¯åœ¨å‡½æ•°ä¹‹å‰<code>.before</code>ï¼Œå‡½æ•°ä¹‹å<code>.after</code><br>ä½¿ç”¨äº†AOPç¼–ç¨‹çš„æ€æƒ³ï¼Œè®©åŠŸèƒ½ä¹‹é—´çš„è€¦åˆåº¦ä¸‹é™ï¼Œå¹¶ä¸”è£…é…æ€§å˜å¼ºï¼Œå¯ä»¥æ ¹æ®ä¸åŒçš„éœ€æ±‚å»è£…é…ä¸åŒçš„åŠŸèƒ½</p><p>æ³¨æ„ï¼šï¼ˆä¸¤è€…ä»£ç ç»“æ„ç›¸ä¼¼ï¼Œä½†æ˜¯è¦ä»ç›®çš„æ¥è¿›è¡ŒåŒºåˆ†ï¼‰<br>è£…é¥°è€…æ¨¡å¼ï¼š é€šå¸¸ä¼šæ·»åŠ ä¸€è¿ä¸²çš„è£…é¥°è€…ï¼Œç»™ä»–æ‹“å±•ä¹‹å¤–çš„ä¸€äº›åŠŸèƒ½ã€‚<br>ä»£ç†æ¨¡å¼ï¼š é€šå¸¸åªæœ‰ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œè€Œä»–çš„ç›®çš„æ˜¯å¢å¼ºåŸæœ‰çš„åŠŸèƒ½</p><h4 id="çŠ¶æ€æ¨¡å¼"><a href="#çŠ¶æ€æ¨¡å¼" class="headerlink" title="çŠ¶æ€æ¨¡å¼"></a>çŠ¶æ€æ¨¡å¼</h4><p>æ ¹æ®ä¸åŒçš„åœºæ™¯æ¥è§£å†³ä¸åŒçš„é—®é¢˜ï¼Œä¸»è¦æ˜¯åœ¨ä¸åŒçŠ¶æ€ä¸‹è¡¨ç°å‡ºçš„æ–¹æ³•ä¸ä¸€æ ·ï¼Œå°†å„ä¸ªäº‹ä»¶ç»‘å®šåˆ°çŠ¶æ€ä¸­<br>å®šä¹‰ä¸”åˆ‡æ¢çŠ¶æ€çš„æ–¹å¼ï¼Œçœå»äº†å¤§éƒ¨åˆ†if else çš„é€»è¾‘ç»“æ„,å…¶å®å°±æ˜¯é¸­å­ç±»å‹ï¼Œè¿›è¡Œæ›¿æ¢è°ƒè¿™ä¸ªæ›¿æ¢å¯¹è±¡ä¸­çš„æ–¹æ³•</p><h4 id="é€‚é…å™¨æ¨¡å¼"><a href="#é€‚é…å™¨æ¨¡å¼" class="headerlink" title="é€‚é…å™¨æ¨¡å¼"></a>é€‚é…å™¨æ¨¡å¼</h4><p>ä¸»è¦æ˜¯åœ¨ä¸æ”¹åŠ¨åŸæœ‰ä»£ç çš„æƒ…å†µä¸‹ è¿›è¡Œä¿®æ”¹ï¼Œåœ¨ä»£ç çš„ç¼–å†™é˜¶æ®µæ˜¯ä¸ä¼šæœ‰çš„ï¼Œè‚¯å®šæ˜¯åœ¨å¯¹æ¥è€é¡¹ç›®çš„æ—¶å€™ï¼Œ<br>ä¿®æ”¹äº†æŸäº›æ¥å£ï¼Œä»è€Œè¿›è¡Œå˜é€šçš„ä¸€ç§æ–¹å¼ï¼Œæˆ–æ˜¯ä¸ºäº†å…¼å®¹å…¶ä»–çš„API,æˆ–è€…æ˜¯åšæ–¹æ³•ä¹‹é—´çš„è½¬æ¢çš„</p><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>JavaScriptä¸­çš„è®¾è®¡æ¨¡å¼ï¼Œå¾ˆå¤šéƒ½æ˜¯é‡‡ç”¨äº†é«˜é˜¶å‡½æ•°çš„ä¸€ç§å˜å½¢ï¼Œ å…¶ä¸­å¤§é‡å……æ–¥ç€é—­åŒ…çš„æ¦‚å¿µ<br>å¾ˆå¤šè®¾è®¡æ¨¡å¼çœ‹ä¼¼ç›¸åŒï¼Œç»“æ„ä¹Ÿæ˜¯å¤§éƒ¨åˆ†ä¸€æ ·çš„ï¼Œä½†æ˜¯ä¸»è¦æ˜¯æ€æƒ³ä¸Šçš„ä¸åŒï¼Œä»–ä»¬æ‰€é’ˆå¯¹ï¼Œæ‰€è§£å†³çš„é—®é¢˜ä¸ä¸€è‡´<br>è€Œä¸èƒ½å•å•ä»å½¢å¼ç»“æ„ä¸ŠåŒºåˆ†å®ƒä»¬ï¼Œä»¥åŠJavaScriptæ˜¯æ²¡æœ‰ç±»çš„æ¦‚å¿µçš„ï¼Œæ‰€ä»¥éœ€è¦çµæ´»çš„ä½¿ç”¨é¸­å­æ¨¡å¼æ¥è¾¾åˆ°<br>ä¸åŒçš„è®¾è®¡</p>]]></content>
      
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>14é€‚é…å™¨æ¨¡å¼</title>
      <link href="/2019/06/25/14%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/06/25/14%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> é€‚é…å™¨æ¨¡å¼</span></span><br><span class="line"><span class="comment">  ä¸»è¦æ˜¯ä¸ºäº†é€‚é…ä¹‹å‰çš„åŠŸèƒ½ï¼Œ æˆ–è€…æ˜¯ä¸ºäº†åœ¨ä¸ä¿®æ”¹ä»£ç çš„æƒ…å†µä¸‹ è¿›è¡Œä¸åŒæ¥å£ä¹‹é—´çš„é€šä¿¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬ä¸‰æ–¹æ¥å£ä¸åŒ</span></span><br><span class="line"><span class="keyword">var</span> googleMap = &#123;</span><br><span class="line">  show: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'å¼€å§‹æ¸²æŸ“è°·æ­Œåœ°å›¾'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> baiduMap = &#123;</span><br><span class="line">  show: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'å¼€å§‹æ¸²æŸ“ç™¾åº¦åœ°å›¾'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> renderMap = <span class="function"><span class="keyword">function</span> (<span class="params">map</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (map.show <span class="keyword">instanceof</span> <span class="built_in">Function</span>) &#123;</span><br><span class="line">    map.show()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">renderMap(googleMap)</span><br><span class="line">renderMap(baiduMap)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> tencentMap = &#123;</span><br><span class="line">  display: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'å¼€å§‹æ¸²æŸ“è…¾è®¯åœ°å›¾'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¤æ—¶éœ€è¦ä¸€ä¸ªtencentåœ°å›¾çš„é€‚é…å™¨</span></span><br><span class="line"><span class="keyword">var</span> tencentMapAdapter = &#123;</span><br><span class="line">  show: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> tencentMap.display()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">renderMap(tencentMap)</span><br><span class="line">renderMap(tencentMapAdapter)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// éœ€è¦çš„ç±»å‹ä¸ä¸€æ ·</span></span><br><span class="line"><span class="keyword">var</span> getCity = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> city = [</span><br><span class="line">    &#123;<span class="attr">name</span>: <span class="string">'Lanzhou'</span>,<span class="attr">id</span>: <span class="string">'11'</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">name</span>: <span class="string">'Hangzhou'</span>,<span class="attr">id</span>: <span class="string">'12'</span>&#125;</span><br><span class="line">  ]</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> city</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(getCity())</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">0: Object &#123; name: "Lanzhou", id: "11" &#125;</span></span><br><span class="line"><span class="comment">1: Object &#123; name: "Hangzhou", id: "12" &#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç°åœ¨éœ€æ±‚éœ€è¦è¿™æ ·çš„æ ¼å¼ &#123;11: 'Lanzhou', 12: 'Hangzhou'&#125;</span></span><br><span class="line"><span class="comment">// å†ä¸æ”¹åŠ¨åŸæœ‰ä»£ç çš„æƒ…å†µä¸‹ åªèƒ½ä½¿ç”¨é€‚é…å™¨</span></span><br><span class="line"><span class="keyword">var</span> cityAddressAdapter = <span class="function"><span class="keyword">function</span> (<span class="params">oldAddressfn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> address = &#123;&#125;,</span><br><span class="line">    oldAddress = oldAddressfn()</span><br><span class="line">    </span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>, c; c = oldAddress[i++]; ) &#123;</span><br><span class="line">    address[c.id] = c.name</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> address</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">getCity = cityAddressAdapter(getCity)</span><br><span class="line"><span class="built_in">console</span>.log( getCity() )</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>13çŠ¶æ€æ¨¡å¼</title>
      <link href="/2019/06/25/13%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/06/25/13%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> çŠ¶æ€æ¨¡å¼ï¼Œ åœ¨ä¸åŒçš„çŠ¶æ€ä¸‹é¢ åŠ¨æ€çš„ä¸ºä¸åŒçš„äº‹ä»¶ç»‘å®šä¸åŒçš„æ–¹æ³•ï¼Œ </span></span><br><span class="line"><span class="comment"> è¿™é‡Œæ¨¡æ‹Ÿ ç”µç¯å¼€å…³çš„ä¾‹å­ï¼Œ å…³ç¯çŠ¶æ€  æŒ‰é’®ä½œç”¨ - å¼€ç¯  å¼€ç¯çŠ¶æ€ æŒ‰é’®ä½œç”¨ - å…³ç¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸é€‚ç”¨çŠ¶æ€æ¨¡å¼ è€¦åˆæ€§æ¯”è¾ƒé«˜ï¼Œå„ç§çŠ¶æ€è€¦åˆåœ¨ä¸€èµ·</span></span><br><span class="line"><span class="keyword">var</span> Light = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.state = <span class="string">'off'</span></span><br><span class="line">  <span class="keyword">this</span>.button = <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line">Light.prototype.init = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> button = <span class="built_in">document</span>.createElement(<span class="string">'button'</span>),</span><br><span class="line">    self = <span class="keyword">this</span></span><br><span class="line">  </span><br><span class="line">  button.innerHTML = <span class="string">'å¼€å…³'</span></span><br><span class="line">  <span class="keyword">this</span>.button = <span class="built_in">document</span>.body.appendChild( button )</span><br><span class="line">  <span class="keyword">this</span>.button.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    self.buttonWasPressed()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">Light.prototype.buttonWasPressed = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.state === <span class="string">'on'</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'å…³ç¯'</span>)</span><br><span class="line">    <span class="keyword">this</span>.state = <span class="string">'off'</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.state === <span class="string">'off'</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'å¼€ç¯'</span>)</span><br><span class="line">    <span class="keyword">this</span>.state = <span class="string">'on'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> light = <span class="keyword">new</span> Light()</span><br><span class="line">light.init()</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¼ ç»Ÿæ¨¡æ‹Ÿç±»çš„ä¸€ç§å†™æ³• çŠ¶æ€æ¨¡å¼ å¯¹è±¡æ–¹æ³•è¯­è¨€ä¸­çš„å®ç°</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// offLightState</span></span><br><span class="line"><span class="keyword">var</span> OffLightState = <span class="function"><span class="keyword">function</span> (<span class="params">light</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.light = light</span><br><span class="line">&#125;</span><br><span class="line">OffLightState.prototype.buttonWasPressed = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'å¼±å…‰'</span>) <span class="comment">// offLightStateå¯¹åº”è¡Œä¸º</span></span><br><span class="line">  <span class="keyword">this</span>.light.setState(<span class="keyword">this</span>.light.weakLightState)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// WeakLightState</span></span><br><span class="line"><span class="keyword">var</span> WeakLightState = <span class="function"><span class="keyword">function</span> (<span class="params">light</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.light = light</span><br><span class="line">&#125;</span><br><span class="line">WeakLightState.prototype.buttonWasPressed = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'å¼ºå…‰'</span>) <span class="comment">// WeakLightStateå¯¹åº”è¡Œä¸º</span></span><br><span class="line">  <span class="keyword">this</span>.light.setState(<span class="keyword">this</span>.light.strongLightState)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// StrongLightState</span></span><br><span class="line"><span class="keyword">var</span> StrongLightState = <span class="function"><span class="keyword">function</span> (<span class="params">light</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.light = light</span><br><span class="line">&#125;</span><br><span class="line">StrongLightState.prototype.buttonWasPressed = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'å…³ç¯'</span>) <span class="comment">// StrongLightStateå¯¹åº”è¡Œä¸º</span></span><br><span class="line">  <span class="keyword">this</span>.light.setState(<span class="keyword">this</span>.light.offLightState)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> Light = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.offLightState = <span class="keyword">new</span> OffLightState(<span class="keyword">this</span>)</span><br><span class="line">  <span class="keyword">this</span>.weakLightState = <span class="keyword">new</span> WeakLightState(<span class="keyword">this</span>)</span><br><span class="line">  <span class="keyword">this</span>.strongLightState = <span class="keyword">new</span> StrongLightState(<span class="keyword">this</span>)</span><br><span class="line">  <span class="keyword">this</span>.button = <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line">Light.prototype.init = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> button = <span class="built_in">document</span>.createElement(<span class="string">'button'</span>),</span><br><span class="line">    self = <span class="keyword">this</span></span><br><span class="line">    </span><br><span class="line">  <span class="keyword">this</span>.button = <span class="built_in">document</span>.body.appendChild(button)</span><br><span class="line">  <span class="keyword">this</span>.button.innerHTML = <span class="string">'å¼€å…³ç±»çš„çŠ¶æ€æœº'</span></span><br><span class="line">  <span class="keyword">this</span>.currentState = <span class="keyword">this</span>.offLightState <span class="comment">// è®¾ç½®åˆå§‹åŒ–å…³ç¯çš„çŠ¶æ€</span></span><br><span class="line">  <span class="keyword">this</span>.button.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    self.currentState.buttonWasPressed()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">Light.prototype.setState = <span class="function"><span class="keyword">function</span> (<span class="params"> newState </span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.currentState = newState</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> light = <span class="keyword">new</span> Light()</span><br><span class="line">light.init()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// javascript ç‰ˆæœ¬çš„çŠ¶æ€æœº FSM Finite State Machine æœ‰é™çŠ¶æ€æœº</span></span><br><span class="line"><span class="keyword">var</span> Light = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.currentState = FSM.off</span><br><span class="line">  <span class="keyword">this</span>.button = <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line">Light.prototype.init = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> button = <span class="built_in">document</span>.createElement(<span class="string">'button'</span>),</span><br><span class="line">    self = <span class="keyword">this</span></span><br><span class="line">  </span><br><span class="line">  button.innerHTML = <span class="string">'å¼€å…³ç¯FSMå®ç°æ¨¡å¼'</span></span><br><span class="line">  <span class="keyword">this</span>.button = <span class="built_in">document</span>.body.appendChild(button)</span><br><span class="line">  <span class="keyword">this</span>.button.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    self.currentState.buttonWasPressed.call(self)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> FSM = &#123;</span><br><span class="line">  off: &#123;</span><br><span class="line">    buttonWasPressed: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'å¼€ç¯'</span>)</span><br><span class="line">      <span class="keyword">this</span>.button.innerHTML = <span class="string">'ä¸‹ä¸€æ¬¡å…³ç¯'</span></span><br><span class="line">      <span class="keyword">this</span>.currentState = FSM.on</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  on: &#123;</span><br><span class="line">    buttonWasPressed: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'å…³ç¯'</span>)</span><br><span class="line">      <span class="keyword">this</span>.button.innerHTML = <span class="string">'ä¸‹ä¸€æ¬¡å¼€ç¯'</span></span><br><span class="line">      <span class="keyword">this</span>.currentState = FSM.off</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> light = <span class="keyword">new</span> Light()</span><br><span class="line">light.init()</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœæœ‰ä¿®æ”¹ åªéœ€å‘€åœ¨çŠ¶æ€æœºä¸­ä¿®æ”¹å³å¯,ä¸ç”¨æ”¹åŠ¨åŸå§‹çš„ä»£ç </span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>12è£…é¥°è€…æ¨¡å¼</title>
      <link href="/2019/06/25/12%E8%A3%85%E9%A5%B0%E8%80%85%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/06/25/12%E8%A3%85%E9%A5%B0%E8%80%85%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> è£…é¥°è€…æ¨¡å¼ï¼Œé€šå¸¸ä½¿ç”¨ä¸€è¿ä¸²çš„å¯¹è±¡æ¥ä¸ºå…¶å¢å¼ºåŠŸèƒ½ï¼Œ å…¶ä¼˜ç‚¹ å°±æ˜¯ åœ¨ä¸æ”¹åŠ¨æºç çš„æƒ…å†µä¸‹è¿›è¡Œå¢åŠ </span></span><br><span class="line"><span class="comment">  </span></span><br><span class="line"><span class="comment">  å¯¼å¼¹å‘å°„çš„ä¾‹å­</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> plane = &#123;</span><br><span class="line">  fire: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'å‘å°„å­å¼¹ biu~'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">plane.fire()</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> missileDecorator = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'å‘å°„å¯¼å¼¹'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> fire1 = plane.fire</span><br><span class="line">plane.fire = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  fire1()</span><br><span class="line">  missileDecorator()</span><br><span class="line">&#125;</span><br><span class="line">plane.fire()</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> atomDecorator = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'å‘å°„åŸå­å¼¹'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> fire2 = plane.fire</span><br><span class="line">plane.fire = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  fire2()</span><br><span class="line">  atomDecorator()</span><br><span class="line">&#125;</span><br><span class="line">plane.fire()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> è£…é¥°å‡½æ•°</span></span><br><span class="line"><span class="comment"> åœ¨ä¸æ”¹å˜åŸæœ‰å‡½æ•°çš„å‰æä¸‹ï¼Œè¿›è¡Œå¯¹å‡½æ•°åŠŸèƒ½çš„æ‰©å……ï¼Œæ³¨æ„åŸthisæŒ‡å‘çš„é—®é¢˜ï¼Œæ‰€ä»¥è¦ä½¿ç”¨applyçš„æ–¹å¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ™®é€šæ¨¡å¼ ä¸è€ƒè™‘thisçš„é—®é¢˜</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'1'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> _a = a</span><br><span class="line"></span><br><span class="line">a = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  _a()</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'2'</span>)</span><br><span class="line">&#125;</span><br><span class="line">a()</span><br><span class="line"></span><br><span class="line"><span class="comment">// è€ƒè™‘thisæŒ‡å‘çš„  å¦‚ document.getElementById</span></span><br><span class="line"><span class="comment">// ä½¿ç”¨AOPè¿›è¡Œè£…é¥°</span></span><br><span class="line"><span class="built_in">Function</span>.prototype.before = <span class="function"><span class="keyword">function</span> (<span class="params">beforefn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> __self = <span class="keyword">this</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    beforefn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>)</span><br><span class="line">    <span class="keyword">return</span> __self.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Function</span>.prototype.after = <span class="function"><span class="keyword">function</span> (<span class="params">afterfn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> __self = <span class="keyword">this</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> ret = __self.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>)</span><br><span class="line">    afterfn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>)</span><br><span class="line">    <span class="keyword">return</span> ret</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'==========================='</span>)</span><br><span class="line"><span class="built_in">window</span>.onload = (<span class="built_in">window</span>.onload || <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; &#125;).after(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'2'</span>)</span><br><span class="line">&#125;).after(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'3'</span>)</span><br><span class="line">&#125;).after(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'4'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">window</span>.onload = (<span class="built_in">window</span>.onload || <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; &#125;).before(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'1'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿˜å¯ä»¥ä½¿ç”¨æ­¤ç‰¹æ€§æ”¹å˜å‚æ•°</span></span><br><span class="line"><span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span> (<span class="params">param</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(param) <span class="comment">// &#123; a: "a", b: "b" &#125;</span></span><br><span class="line">&#125;</span><br><span class="line">func = func.before(<span class="function"><span class="keyword">function</span> (<span class="params">param</span>) </span>&#123;</span><br><span class="line">  param.b = <span class="string">'b'</span></span><br><span class="line">&#125;)</span><br><span class="line">func(&#123; <span class="attr">a</span>: <span class="string">'a'</span> &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> ç»“åˆAOPåšè¯·æ±‚åŠ token</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> ajax = <span class="function"><span class="keyword">function</span> (<span class="params">type, url, param</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(param)</span><br><span class="line">  <span class="comment">// todo.....çœç•¥è¿™é‡Œ</span></span><br><span class="line">&#125;</span><br><span class="line">ajax(<span class="string">'GET'</span>, <span class="string">'api.com/userinfo'</span>, &#123; <span class="attr">name</span>: <span class="string">'zhn'</span> &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// é…ç½®ä¸€ä¸ªè·å–tokençš„æ–¹æ³• ç”¨æ¥æ ¡éªŒapi</span></span><br><span class="line"><span class="keyword">var</span> getToken = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'Token'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æœ€åŸºæœ¬çš„æ€æƒ³å°±æ˜¯ ç¡¬ç¼–ç åˆ°å†…éƒ¨ï¼Œ ä¸åˆ©äºæ‹“å±•ï¼Œ ä¸åˆ©äºåç»­çš„ç»´æŠ¤</span></span><br><span class="line"><span class="keyword">var</span> ajax = <span class="function"><span class="keyword">function</span> (<span class="params">type, url, param</span>) </span>&#123;</span><br><span class="line">  param = param || &#123;&#125;</span><br><span class="line">  param.token = getToken()</span><br><span class="line">  <span class="built_in">console</span>.log(param)</span><br><span class="line">  <span class="comment">// todo.....çœç•¥è¿™é‡Œ</span></span><br><span class="line">&#125;</span><br><span class="line">ajax(<span class="string">'GET'</span>, <span class="string">'api.com/userinfo'</span>, &#123; <span class="attr">name</span>: <span class="string">'zhn'</span> &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™é‡Œä½¿ç”¨AOPçš„æ€æƒ³ åŠ å…¥è£…é¥°æ¨¡å¼ </span></span><br><span class="line"><span class="built_in">Function</span>.prototype.befor = <span class="function"><span class="keyword">function</span> (<span class="params">beforefn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> __self = <span class="keyword">this</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    beforefn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>)</span><br><span class="line">    <span class="keyword">return</span> __self.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">ajax = ajax.before(<span class="function"><span class="keyword">function</span> (<span class="params">type, url, param</span>) </span>&#123;</span><br><span class="line">  param.token = getToken()</span><br><span class="line">&#125;)</span><br><span class="line">ajax(<span class="string">'GET'</span>, <span class="string">'api.com/userinfo'</span>, &#123; <span class="attr">name</span>: <span class="string">'zhn'</span> &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> è¡¨å•éªŒè¯æ–¹å¼ åŸºäºAOPæ€æƒ³,åŠæ—¶è¿ç§»äº†é¡¹ç›®ï¼Œæˆ–æ˜¯æ”¹å˜ç¯å¢ƒï¼Œå¯ä»¥éšæ—¶å–æ¶ˆéªŒè¯ï¼Œå–æ¶ˆbefore(validate) å³å¯ï¼Œé‡æ–°ç»‘å®šä¸€ä¸ªç©ºå‡½æ•°</span></span><br><span class="line"><span class="comment"> é€šå¸¸è¡¨å•æäº¤ä¼šå°† æ ¡éªŒæ–¹æ³• å’Œ æäº¤ajaxæ–¹æ³•é…åˆ°ä¸€èµ·ï¼Œä½†æ˜¯è¿™æ ·ä¼šæ˜¾å¾—å¾ˆè‡ƒè‚¿ï¼Œè¡¨å•æäº¤åªåº”è¯¥åŒ…å«ä¸€ä¸ªæäº¤</span></span><br><span class="line"><span class="comment"> å¯¹äºè¡¨å•çš„æ ¡éªŒåŠŸèƒ½ï¼Œåº”è¯¥ä½œä¸ºä¸€ä¸ªè£…é¥°è€…ï¼Œæ¥åˆ‡å…¥åˆ°æäº¤ä¹‹å‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¹‹å‰çš„æ¨¡å¼</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> validata = function () &#123;</span></span><br><span class="line"><span class="comment">    // xxxxxx ä¸€å¤§å †éªŒè¯é€»è¾‘</span></span><br><span class="line"><span class="comment"> &#125;</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> ajax('GET', 'api.com/userinfo', &#123; name: 'zhn' &#125;)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨AOPè¿›è¡Œä¼˜åŒ–  å¦‚æœéªŒè¯çš„æ–¹å¼ ä¸º false åˆ™é˜»æ­¢æäº¤</span></span><br><span class="line"><span class="built_in">Function</span>.prototype.before = <span class="function"><span class="keyword">function</span> (<span class="params">beforefn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> __self = <span class="keyword">this</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (beforefn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>) === <span class="literal">false</span>) &#123;</span><br><span class="line">      <span class="comment">// å…ˆå‰çº¦å®šçš„é€»è¾‘ è¿”å›falseç›´æ¥é˜»æ­¢æäº¤ï¼Œä¸æ‰§è¡Œåé¢çš„å‡½æ•°</span></span><br><span class="line">      <span class="keyword">return</span> </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> __self.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> username = <span class="built_in">document</span>.getElementById(<span class="string">'username'</span>)</span><br><span class="line"><span class="keyword">var</span> password = <span class="built_in">document</span>.getElementById(<span class="string">'password'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> validata = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> (username.value === <span class="string">''</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'ç”¨æˆ·åä¸èƒ½ä¸ºç©º'</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> (password.value === <span class="string">''</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'å¯†ç ä¸èƒ½ä¸ºç©º'</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> submit = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> param = &#123;</span><br><span class="line">    username: username.value,</span><br><span class="line">    password: password.value</span><br><span class="line">  &#125;</span><br><span class="line">  ajax(<span class="string">'GET'</span>, <span class="string">'api.com/userinfo'</span>, &#123; <span class="attr">name</span>: <span class="string">'zhn'</span> &#125;)</span><br><span class="line">&#125;</span><br><span class="line">submit = submit.before(validata) <span class="comment">// æå‰æŠŠæ£€éªŒå‡½æ•° ä»¥AOPçš„å½¢å¼æ”¾è¿›å»</span></span><br><span class="line"><span class="comment">// submit()</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>11ä¸­ä»‹è€…æ¨¡å¼</title>
      <link href="/2019/06/25/11%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/06/25/11%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">  ä¸­ä»‹è€…æ¨¡å¼ï¼Œ æ‰€æœ‰ç±»ä¹‹é—´çš„å…³ç³»éƒ½æœ‰ ä¸€ä¸ªä¸­ä»‹è€…ç»Ÿä¸€ç»´æŠ¤ï¼Œ å‡å°‘äº†ç±»ä¸ç±»ä¹‹é—´çš„å…³è”ï¼Œ</span></span><br><span class="line"><span class="comment">   è¿™ç§å…³ç³»è¦æŠ˜ä¸­çš„è€ƒè™‘ï¼Œå¦‚æœç±»ä¹‹é—´çš„å…³ç³»éƒ½å–æ¶ˆï¼Œç­‰åˆ°ç±»å¤šäº†åŸºæœ¬çš„å…³è”å¯èƒ½éƒ½ä¼šä¸¢å¤±ï¼Œä¸­ä»‹è€…ä¼šè¶Šæ¥è¶Šå¤æ‚</span></span><br><span class="line"><span class="comment">   ä¾‹å­ï¼Œç»Ÿä¸€ä¸€å¤„çš„ä¿®æ”¹ï¼Œæ”¹å˜æ‰€æœ‰çš„ä½ç½®</span></span><br><span class="line"><span class="comment">   å¹¶ä¸”è¦ é€‰æ‹©é¢œè‰²ï¼Œ é€‰æ‹©æ•°é‡ï¼Œ åœ¨æœ€åçš„æŒ‰é’®ä¸Šåšæç¤ºä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> colortSelect = <span class="built_in">document</span>.getElementById(<span class="string">'colorSelect'</span>)</span><br><span class="line"><span class="keyword">var</span> numberInput = <span class="built_in">document</span>.getElementById(<span class="string">'numberInput'</span>)</span><br><span class="line"><span class="keyword">var</span> colorInfo = <span class="built_in">document</span>.getElementById(<span class="string">'colorInfo'</span>)</span><br><span class="line"><span class="keyword">var</span> numberInfo = <span class="built_in">document</span>.getElementById(<span class="string">'numberInfo'</span>)</span><br><span class="line"><span class="keyword">var</span> nextBtn = <span class="built_in">document</span>.getElementById(<span class="string">'nextBtn'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¼ ç»Ÿæ–¹å¼ è¦å¯¹colorSelect numberInput ä¾æ¬¡ç»‘å®šäº‹ä»¶,å…¶æ ¸å¿ƒä¸šåŠ¡ä»£ç å¯èƒ½æ˜¯ç›¸åŒçš„</span></span><br><span class="line"><span class="keyword">var</span> goods = &#123;</span><br><span class="line">  <span class="string">"red"</span>: <span class="number">3</span>,</span><br><span class="line">  <span class="string">"blue"</span>: <span class="number">6</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* é¢œè‰²æ¡†çš„é€»è¾‘  */</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">colortSelect.onchange = function () &#123; </span></span><br><span class="line"><span class="comment">  var color = this.value,</span></span><br><span class="line"><span class="comment">    number = numberInput.value,</span></span><br><span class="line"><span class="comment">    stock = goods[color]</span></span><br><span class="line"><span class="comment">  </span></span><br><span class="line"><span class="comment">  colorInfo.innerHTML = color</span></span><br><span class="line"><span class="comment">  </span></span><br><span class="line"><span class="comment">  if (!color) &#123;</span></span><br><span class="line"><span class="comment">    nextBtn.disabled = true</span></span><br><span class="line"><span class="comment">    nextBtn.innerHTML = "è¯·é€‰æ‹©æ‰‹æœºé¢œè‰²"</span></span><br><span class="line"><span class="comment">    return</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">  </span></span><br><span class="line"><span class="comment">  if (!/^[1-9]\d*$/.test(number)) &#123; // åˆ¤æ–­éæ­£æ•´æ•°</span></span><br><span class="line"><span class="comment">    nextBtn.disabled = true</span></span><br><span class="line"><span class="comment">    nextBtn.innerHTML = "è¯·è¾“å…¥æ­£ç¡®çš„è´­ä¹°æ•°é‡"</span></span><br><span class="line"><span class="comment">    return</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">  </span></span><br><span class="line"><span class="comment">  if (number &gt; stock) &#123;</span></span><br><span class="line"><span class="comment">    nextBtn.disabled = true</span></span><br><span class="line"><span class="comment">    nextBtn.innerHTML = "åº“å­˜ä¸è¶³"</span></span><br><span class="line"><span class="comment">    return</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">  </span></span><br><span class="line"><span class="comment">   nextBtn.disabled = false</span></span><br><span class="line"><span class="comment">  nextBtn.innerHTML = "åŠ å…¥è´­ç‰©è½¦"</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">/* è¾“å…¥æ¡†çš„é€»è¾‘ */</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">numberInput.oninput = function () &#123;</span></span><br><span class="line"><span class="comment">  var number = this.value,</span></span><br><span class="line"><span class="comment">    color = colortSelect.value,</span></span><br><span class="line"><span class="comment">    stock = goods[color]</span></span><br><span class="line"><span class="comment">  </span></span><br><span class="line"><span class="comment">  colorInfo.innerHTML = color</span></span><br><span class="line"><span class="comment">  numberInfo.innerHTML = number</span></span><br><span class="line"><span class="comment">  </span></span><br><span class="line"><span class="comment">  if (!color) &#123;</span></span><br><span class="line"><span class="comment">    nextBtn.disabled = true</span></span><br><span class="line"><span class="comment">    nextBtn.innerHTML = "è¯·é€‰æ‹©æ‰‹æœºé¢œè‰²"</span></span><br><span class="line"><span class="comment">    return</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">  </span></span><br><span class="line"><span class="comment">  if (!/^[1-9]\d*$/.test(number)) &#123; // åˆ¤æ–­éæ­£æ•´æ•°</span></span><br><span class="line"><span class="comment">    nextBtn.disabled = true</span></span><br><span class="line"><span class="comment">    nextBtn.innerHTML = "è¯·è¾“å…¥æ­£ç¡®çš„è´­ä¹°æ•°é‡"</span></span><br><span class="line"><span class="comment">    return</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">  </span></span><br><span class="line"><span class="comment">  if (number &gt; stock) &#123;</span></span><br><span class="line"><span class="comment">    nextBtn.disabled = true</span></span><br><span class="line"><span class="comment">    nextBtn.innerHTML = "åº“å­˜ä¸è¶³"</span></span><br><span class="line"><span class="comment">    return</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">  </span></span><br><span class="line"><span class="comment">  nextBtn.disabled = false</span></span><br><span class="line"><span class="comment">  nextBtn.innerHTML = "åŠ å…¥è´­ç‰©è½¦"</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">/* è™½ç„¶å¯ä»¥æŠŠç›¸åŒçš„ä»£ç æŠ½ç¦»å‡ºæ¥ï¼Œå¯æ˜¯å¦‚æœè¦æ‹“å±•ï¼Œæˆ–è€…æ˜¯åŠ å…¥å…¶å®ƒçš„ç§æœ‰é€»è¾‘</span></span><br><span class="line"><span class="comment">  è¦æ±‚ä¿®æ”¹ä»£ç ï¼Œä¸ç¬¦åˆå¼€é—­åŸåˆ™ï¼Œ æ‰€ä»¥ä½¿ç”¨ä¸€ä¸ªä¸­ä»‹è€…ç®¡ç†ä»–ä»¬</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* ä¸­ä»‹è€… */</span></span><br><span class="line"><span class="keyword">var</span> mediator = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> colortSelect = <span class="built_in">document</span>.getElementById(<span class="string">'colorSelect'</span>),</span><br><span class="line">    numberInput = <span class="built_in">document</span>.getElementById(<span class="string">'numberInput'</span>),</span><br><span class="line">    colorInfo = <span class="built_in">document</span>.getElementById(<span class="string">'colorInfo'</span>),</span><br><span class="line">    numberInfo = <span class="built_in">document</span>.getElementById(<span class="string">'numberInfo'</span>),</span><br><span class="line">    nextBtn = <span class="built_in">document</span>.getElementById(<span class="string">'nextBtn'</span>)</span><br><span class="line">    </span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    changed: <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123; <span class="comment">// objæ˜¯å“ªä¸€ä¸ªå¯¹è±¡æ”¹å˜äº†</span></span><br><span class="line">      <span class="keyword">var</span> color = colortSelect.value,</span><br><span class="line">        number = numberInput.value,</span><br><span class="line">        stock = goods[color]</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">if</span> (obj === colortSelect) &#123; <span class="comment">// colorSelect å‘ç”Ÿæ”¹å˜</span></span><br><span class="line">        colorInfo.innerHTML = color</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (obj === numberInput) &#123;</span><br><span class="line">        numberInfo.innerHTML = number</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">if</span> (!color) &#123;</span><br><span class="line">        nextBtn.disabled = <span class="literal">true</span></span><br><span class="line">        nextBtn.innerHTML = <span class="string">"è¯·é€‰æ‹©æ‰‹æœºé¢œè‰²"</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (!<span class="regexp">/^[1-9]\d*$/</span>.test(number)) &#123; <span class="comment">// åˆ¤æ–­éæ­£æ•´æ•°</span></span><br><span class="line">        nextBtn.disabled = <span class="literal">true</span></span><br><span class="line">        nextBtn.innerHTML = <span class="string">"è¯·è¾“å…¥æ­£ç¡®çš„è´­ä¹°æ•°é‡"</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (number &gt; stock) &#123;</span><br><span class="line">        nextBtn.disabled = <span class="literal">true</span></span><br><span class="line">        nextBtn.innerHTML = <span class="string">"åº“å­˜ä¸è¶³"</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      nextBtn.disabled = <span class="literal">false</span></span><br><span class="line">      nextBtn.innerHTML = <span class="string">'æ”¾å…¥è´­ç‰©è½¦'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line"><span class="comment">// äº‹ä»¶å‡½æ•°</span></span><br><span class="line">colortSelect.onchange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  mediator.changed(<span class="keyword">this</span>)</span><br><span class="line">&#125;</span><br><span class="line">numberInput.oninput = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  mediator.changed(<span class="keyword">this</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> é¢œè‰²æ¡†å’Œè¾“å…¥æ¡† å®Œå…¨ä¸çŸ¥é“å¯¹æ–¹çš„å­˜åœ¨ï¼Œ ç”±äºé€»è¾‘éƒ½æ˜¯æ”¾åœ¨ä¸­ä»‹è€…å½“ä¸­çš„ï¼Œ æ‰€ä»¥å»æ‰å…¶ä»–ç±»å¯¹æ•´ä½“æ²¡ä»€ä¹ˆå½±å“</span></span><br><span class="line"><span class="comment"> è™½ç„¶åŠŸèƒ½ä¹‹é—´çš„è€¦åˆå‡å°‘äº†ï¼Œ ä½†ç”±äºæŠŠé€»è¾‘å†…èšåˆ°ä¸­ä»‹è€…ï¼Œä¸šåŠ¡ä¸Šæ²¡æœ‰ä½“ç°å‡ºæ¥ é¢œè‰² å’Œ æ•°é‡ ä¹‹é—´çš„å…³ç³» </span></span><br><span class="line"><span class="comment"> æ‹“å±•æ€§ï¼Œ åªéœ€è¦åœ¨ä¸­ä»‹è€…å¢åŠ æ‹“å±•çš„ä»£ç ï¼Œ å³å¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">var mediator = (function ()&#123;</span></span><br><span class="line"><span class="comment">  </span></span><br><span class="line"><span class="comment">  var memorySelect = document.getElementById('memorySelect')</span></span><br><span class="line"><span class="comment">  </span></span><br><span class="line"><span class="comment">  return &#123;</span></span><br><span class="line"><span class="comment">    changed: function (obj) &#123;</span></span><br><span class="line"><span class="comment">      var memory = memorySelect.value</span></span><br><span class="line"><span class="comment">      // .... ç›¸å…³é€»è¾‘</span></span><br><span class="line"><span class="comment">      </span></span><br><span class="line"><span class="comment">      if (obj === memorySelect) &#123;</span></span><br><span class="line"><span class="comment">        memoryInfo.innerHTML = memory</span></span><br><span class="line"><span class="comment">      &#125;</span></span><br><span class="line"><span class="comment">      </span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">&#125;)()</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>10èŒè´£é“¾æ¨¡å¼</title>
      <link href="/2019/06/25/10%E8%81%8C%E8%B4%A3%E9%93%BE%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/06/25/10%E8%81%8C%E8%B4%A3%E9%93%BE%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> èŒè´£é“¾æ¨¡å¼ï¼Œç”¨äºä¼ é€’å¯¹è±¡ï¼Œä¾æ¬¡æ‹†åˆ†ï¼Œæ˜¯è‡ªå·±è§£å†³çš„ç±»å‹å°±è§£å†³ï¼Œå¦åˆ™å°±ä¼ é€’ä¸‹å»ï¼Œäº¤ç»™åˆ«äººè§£å†³</span></span><br><span class="line"><span class="comment"> ä¸»è¦æ˜¯é¿å…äº†ç¹ççš„ if else ç»“æ„ï¼Œ æ•´ä¸ªä»£ç çœ‹èµ·æ¥ç»“æ„æ¯”è¾ƒæ¸…æ™°ï¼Œç»„ç»‡æ¯”è¾ƒæ˜ç¡®ã€‚</span></span><br><span class="line"><span class="comment"> ä¾‹å­ï¼Œä½¿ç”¨ä¼˜æƒ åˆ¸</span></span><br><span class="line"><span class="comment"> äº¤äº†500å®šé‡‘ï¼Œ 100 ä¼˜æƒ åˆ¸</span></span><br><span class="line"><span class="comment"> äº¤äº†200å®šé‡‘   50 ä¼˜æƒ åˆ¸</span></span><br><span class="line"><span class="comment"> æ²¡äº¤å®šé‡‘/å®šé‡‘æ²¡æœ‰ä»˜æ¬¾    æ²¡æœ‰ä¼˜æƒ åˆ¸</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¹‹å‰ä½¿ç”¨if else</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> order = <span class="function"><span class="keyword">function</span> (<span class="params"> orderType, pay, stock </span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (orderType === <span class="number">1</span>) &#123; <span class="comment">// 100ä¼˜æƒ åˆ¸</span></span><br><span class="line">    <span class="keyword">if</span> ( pay === <span class="literal">true</span>) &#123; <span class="comment">// ä»˜å®šé‡‘</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'å¾—åˆ°100ä¼˜æƒ åˆ¸'</span>)</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (stock &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'æ™®é€šè´­ä¹°'</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'æ‰‹æœºæ²¡æœ‰åº“å­˜'</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (orderType === <span class="number">2</span>) &#123; <span class="comment">// 50ä¼˜æƒ åˆ¸</span></span><br><span class="line">    <span class="keyword">if</span> ( pay === <span class="literal">true</span>) &#123; <span class="comment">// ä»˜å®šé‡‘</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'å¾—åˆ°50ä¼˜æƒ åˆ¸'</span>)</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (stock &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'æ™®é€šè´­ä¹°'</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'æ‰‹æœºæ²¡æœ‰åº“å­˜'</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123; <span class="comment">// æ²¡æœ‰ä¼˜æƒ åˆ¸</span></span><br><span class="line">    <span class="keyword">if</span> (stock &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'æ™®é€šè´­ä¹°'</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'æ‰‹æœºæ²¡æœ‰åº“å­˜'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">order(<span class="number">1</span>, <span class="literal">true</span>, <span class="number">10</span>)</span><br><span class="line">order(<span class="number">1</span>, <span class="literal">false</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// èŒè´£é“¾è¿‡æ¸¡ä»£ç </span></span><br><span class="line"><span class="keyword">var</span> order500 = <span class="function"><span class="keyword">function</span> (<span class="params"> orderType, pay, stock </span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (orderType === <span class="number">1</span> &amp;&amp; pay === <span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'500å…ƒå®šé‡‘é¢„è´­ï¼Œå¾—åˆ°100ä¼˜æƒ åˆ¸'</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123; <span class="comment">// å¤„ç†ä¸äº†å…¨ä¸¢ç»™ä¸‹ä¸€ä¸ª</span></span><br><span class="line">    order200( orderType, pay, stock )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> order200 = <span class="function"><span class="keyword">function</span> (<span class="params"> orderType, pay, stock </span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (orderType === <span class="number">2</span> &amp;&amp; pay === <span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'200å…ƒå®šé‡‘é¢„è´­ï¼Œå¾—åˆ°50ä¼˜æƒ åˆ¸'</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123; <span class="comment">// å¤„ç†ä¸äº†å…¨ä¸¢ç»™ä¸‹ä¸€ä¸ª</span></span><br><span class="line">    orderNormal( orderType, pay, stock )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> orderNormal = <span class="function"><span class="keyword">function</span> (<span class="params"> orderType, pay, stock </span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (stock &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æ­£å¸¸è´­ä¹°'</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123; <span class="comment">// å¤„ç†ä¸äº†å…¨ä¸¢ç»™ä¸‹ä¸€ä¸ª</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'åº“å­˜ä¸è¶³'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">order500(<span class="number">1</span>, <span class="literal">true</span>, <span class="number">10</span>)</span><br><span class="line">order500(<span class="number">1</span>, <span class="literal">false</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥ä¸Šä»£ç å­˜åœ¨è€¦åˆæ€§æ¯”è¾ƒå¤§, è§£è€¦</span></span><br><span class="line"><span class="keyword">var</span> Chain = <span class="function"><span class="keyword">function</span> (<span class="params"> fn </span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.fn = fn</span><br><span class="line">  <span class="keyword">this</span>.successor = <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line">Chain.prototype.setNextSuccessor = <span class="function"><span class="keyword">function</span> (<span class="params">successor</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.successor = successor</span><br><span class="line">&#125;</span><br><span class="line">Chain.prototype.passRequest = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> ret = <span class="keyword">this</span>.fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>)</span><br><span class="line">  <span class="keyword">if</span> (ret === <span class="string">'nextSuccessor'</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.successor &amp;&amp; <span class="keyword">this</span>.successor.passRequest.apply(<span class="keyword">this</span>.successor, <span class="built_in">arguments</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> order500 = <span class="function"><span class="keyword">function</span> (<span class="params"> orderType, pay, stock </span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (orderType === <span class="number">1</span> &amp;&amp; pay === <span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'500å…ƒå®šé‡‘é¢„è´­ï¼Œå¾—åˆ°100ä¼˜æƒ åˆ¸'</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123; <span class="comment">// å¤„ç†ä¸äº†å…¨ä¸¢ç»™ä¸‹ä¸€ä¸ª</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'nextSuccessor'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> order200 = <span class="function"><span class="keyword">function</span> (<span class="params"> orderType, pay, stock </span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (orderType === <span class="number">2</span> &amp;&amp; pay === <span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'200å…ƒå®šé‡‘é¢„è´­ï¼Œå¾—åˆ°50ä¼˜æƒ åˆ¸'</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123; <span class="comment">// å¤„ç†ä¸äº†å…¨ä¸¢ç»™ä¸‹ä¸€ä¸ª</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'nextSuccessor'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> orderNormal = <span class="function"><span class="keyword">function</span> (<span class="params"> orderType, pay, stock </span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (stock &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æ­£å¸¸è´­ä¹°'</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123; <span class="comment">// å¤„ç†ä¸äº†å…¨ä¸¢ç»™ä¸‹ä¸€ä¸ª</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'åº“å­˜ä¸è¶³'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> chainOrder500 = <span class="keyword">new</span> Chain(order500)</span><br><span class="line"><span class="keyword">var</span> chainOrder200 = <span class="keyword">new</span> Chain(order200)</span><br><span class="line"><span class="keyword">var</span> chainOrderNormal = <span class="keyword">new</span> Chain(orderNormal)</span><br><span class="line">chainOrder500.setNextSuccessor(chainOrder200)</span><br><span class="line">chainOrder200.setNextSuccessor(chainOrderNormal)</span><br><span class="line"></span><br><span class="line">chainOrder500.passRequest(<span class="number">1</span>, <span class="literal">true</span>, <span class="number">10</span>)</span><br><span class="line">chainOrder500.passRequest(<span class="number">1</span>, <span class="literal">false</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// js AOPçš„æ€æƒ³å†™æ³• ç±»ä¼¼æ°¸è¿œå…ˆæ‰§è¡Œä»–è‡ªå·±ï¼Œå¦‚æœè¿”å›æ˜¯retSuccessorå°±å†è°ƒç”¨ä»–åé¢çš„å‡½æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Function</span>.prototype.after = <span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> self = <span class="keyword">this</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> ret = self.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>)</span><br><span class="line">    <span class="keyword">if</span> (ret === <span class="string">'nextSuccessor'</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> order500 = <span class="function"><span class="keyword">function</span> (<span class="params"> orderType, pay, stock </span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (orderType === <span class="number">1</span> &amp;&amp; pay === <span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'500å…ƒå®šé‡‘é¢„è´­ï¼Œå¾—åˆ°100ä¼˜æƒ åˆ¸'</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123; <span class="comment">// å¤„ç†ä¸äº†å…¨ä¸¢ç»™ä¸‹ä¸€ä¸ª</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'nextSuccessor'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> order200 = <span class="function"><span class="keyword">function</span> (<span class="params"> orderType, pay, stock </span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (orderType === <span class="number">2</span> &amp;&amp; pay === <span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'200å…ƒå®šé‡‘é¢„è´­ï¼Œå¾—åˆ°50ä¼˜æƒ åˆ¸'</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123; <span class="comment">// å¤„ç†ä¸äº†å…¨ä¸¢ç»™ä¸‹ä¸€ä¸ª</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'nextSuccessor'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> orderNormal = <span class="function"><span class="keyword">function</span> (<span class="params"> orderType, pay, stock </span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (stock &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æ­£å¸¸è´­ä¹°'</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123; <span class="comment">// å¤„ç†ä¸äº†å…¨ä¸¢ç»™ä¸‹ä¸€ä¸ª</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'åº“å­˜ä¸è¶³'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> order = order500.after(order200).after(orderNormal)</span><br><span class="line">order(<span class="number">1</span>, <span class="literal">true</span>, <span class="number">10</span>)</span><br><span class="line">order(<span class="number">1</span>, <span class="literal">false</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* æ–‡ä»¶ä¸Šä¼ æ¡ˆä¾‹</span></span><br><span class="line"><span class="comment">  é‡æ„ä¹‹å‰è¿­ä»£å™¨æ¨¡å¼ï¼Œè¿™é‡Œä½¿ç”¨èŒè´£é“¾æ¨¡å¼æ›´å¥½ä¸€äº›</span></span><br><span class="line"><span class="comment">  ä¸€èˆ¬èŒè´£é“¾æœ€åè¦æœ‰ä¸€ä¸ªæ¥é”…ä¾ </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> getActiveObj = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ActiveXObject(<span class="string">'TXFTNActiveX.FTNUpload'</span>)</span><br><span class="line">  &#125;<span class="keyword">catch</span>(e)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'nextSuccessor'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> getFlashUplaodObj = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="comment">//   if ( supportFlash() ) &#123; // æ¨¡æ‹Ÿæ”¯æŒæ’ä»¶</span></span><br><span class="line"><span class="comment">//     var str = '&lt;object type="application/x-shockwave-flash"&gt;&lt;/object&gt;'</span></span><br><span class="line"><span class="comment">//     return $(str).appendTo( $('body') )</span></span><br><span class="line"><span class="comment">//   &#125;</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">'nextSuccessor'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> getFormUploadObj = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> str = <span class="string">'&lt;input name="File" type="File"&gt;&lt;/input&gt;'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Function</span>.prototype.after = <span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123; <span class="comment">// ä¸ä¹‹å‰ä¸€æ ·</span></span><br><span class="line">  <span class="keyword">var</span> self = <span class="keyword">this</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> ret = self.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>)</span><br><span class="line">    <span class="keyword">if</span> (ret === <span class="string">'nextSuccessor'</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> getUploadObj = getActiveObj.after(getFlashUplaodObj).after(getFormUploadObj)</span><br><span class="line"><span class="built_in">console</span>.log(getUploadObj())</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>09äº«å…ƒæ¨¡å¼</title>
      <link href="/2019/06/25/09%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/06/25/09%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">  äº«å…ƒæ¨¡å¼ flyweight,å°†ç›¸ä¼¼çš„éƒ¨åˆ†æŠ½å–å‡ºæ¥å¤ç”¨ï¼Œä½†æ˜¯ä¼šç‰ºç‰²æ—¶é—´ä¸ºä»£ä»·ï¼ˆæ›¿æ¢å±æ€§æ‰€èŠ±è´¹çš„ä¸€äº›æ—¶é—´ï¼‰ </span></span><br><span class="line"><span class="comment">  ç§»åŠ¨ç«¯æµè§ˆå™¨ é€šå¸¸åˆ†é…çš„å†…å­˜ä¸å¤Ÿå¤šï¼Œå¦‚æœåˆ›å»ºäº†å¤§é‡çš„å¯¹è±¡ï¼Œå¾ˆæœ‰å¯èƒ½ä¼šå´©æºƒ</span></span><br><span class="line"><span class="comment">  æœ€ä¸»è¦çš„å°±æ˜¯ æ‰¾åˆ°å†…éƒ¨çŠ¶æ€ å’Œ å¤–éƒ¨çŠ¶æ€</span></span><br><span class="line"><span class="comment">  å†…éƒ¨çŠ¶æ€ï¼š æ¯ä¸€ä¸ªå…ƒçš„æœ¬è´¨åŒºåˆ«</span></span><br><span class="line"><span class="comment">  å¤–éƒ¨çŠ¶æ€ï¼š å¯ä»¥å°†ä¸åŒçš„å±æ€§ç»™è¿™ä¸ªå…ƒï¼Œæ´¾ç”Ÿå‡ºå¤šä¸ªå¯¹è±¡ï¼Œ</span></span><br><span class="line"><span class="comment">  ä¸€å¼ å·å­ï¼Œå…¶é¢˜ç›®å°±æ˜¯å†…éƒ¨çŠ¶æ€ï¼Œæ¯ä¸ªäººçš„è€ƒç”Ÿä¿¡æ¯ä¸ç­”æ¡ˆå°±åƒå¤–éƒ¨çŠ¶æ€ï¼Œç”¨è¿™ä¸ªå¤–éƒ¨çŠ¶æ€å¯ä»¥ç”Ÿæˆå…¨ç­æ‰€æœ‰äººçš„è€ƒå·</span></span><br><span class="line"><span class="comment">  ï¼Œè€Œå·å­å§‹ç»ˆéƒ½æ˜¯ä¸€å¼ ï¼ˆè¿™é‡Œå‡è®¾å·å­æ˜¯ç­çº§å…±ç”¨ä¸€å¼ ï¼Œå¤§å®¶å†™åœ¨å„è‡ªç­”é¢˜å¡ä¸Šï¼ˆå¤–éƒ¨çŠ¶æ€ä¸Šï¼‰ï¼‰</span></span><br><span class="line"><span class="comment">  </span></span><br><span class="line"><span class="comment">  æ¨¡ç‰¹æ‹ç…§çš„ä¾‹å­ ç°åœ¨æœ‰50ä»¶ç”·è£…ï¼Œ50ä»¶å¥³è£… ä¾æ¬¡æ¨¡ç‰¹å±•ç¤ºæ‹ç…§</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸ä½¿ç”¨äº«å…ƒæ¨¡å¼ï¼Œ å¯¹è±¡çˆ†ç‚¸, è¿™é‡Œ50ä¸ªç”·æ¨¡ç‰¹ï¼Œ50ä¸ªå¥³æ¨¡ç‰¹æ˜¯ä¸€ç§æµªè´¹</span></span><br><span class="line"><span class="keyword">var</span> Model = <span class="function"><span class="keyword">function</span> (<span class="params">sex, underwear</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.sex = sex</span><br><span class="line">  <span class="keyword">this</span>.underwear = underwear</span><br><span class="line">&#125;</span><br><span class="line">Model.prototype.takePhoto = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'sex: '</span> + <span class="keyword">this</span>.sex + <span class="string">' underwear: '</span> + <span class="keyword">this</span>.underwear)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç”·æ¨¡ç‰¹æ‹ç…§</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">50</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">var</span> maleModel = <span class="keyword">new</span> Model(<span class="string">'male'</span>, <span class="string">'underwear'</span> + i)</span><br><span class="line">  maleModel.takePhoto()</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¥³æ¨¡ç‰¹æ‹ç…§</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">50</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">var</span> femaleModel = <span class="keyword">new</span> Model(<span class="string">'female'</span>, <span class="string">'underwear'</span> + i)</span><br><span class="line">  femaleModel.takePhoto()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨äº«å…ƒæ¨¡å¼ï¼Œä¸åœä¿®æ”¹æ¨¡ç‰¹çš„å±æ€§å³å¯,åªéœ€è¦æ ¹æ®æ€§åˆ« åˆ›å»ºä¸¤ä¸ªæ¨¡ç‰¹å³å¯</span></span><br><span class="line"><span class="keyword">var</span> Model = <span class="function"><span class="keyword">function</span> (<span class="params">sex</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.sex = sex</span><br><span class="line">&#125;</span><br><span class="line">Model.prototype.takePhoto = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'sex: '</span> + <span class="keyword">this</span>.sex + <span class="string">' underwear: '</span> + <span class="keyword">this</span>.underwear)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> maleModel = <span class="keyword">new</span> Model(<span class="string">'male'</span>),</span><br><span class="line">  femaleModel = <span class="keyword">new</span> Model(<span class="string">'female'</span>)</span><br><span class="line">  </span><br><span class="line"><span class="comment">// ç”·æ¨¡ç‰¹æ‹ç…§</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">50</span>; i++) &#123;</span><br><span class="line">  maleModel.underwear = <span class="string">'underwear'</span> + i</span><br><span class="line">  maleModel.takePhoto()</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¥³æ¨¡ç‰¹æ‹ç…§</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">50</span>; i++) &#123;</span><br><span class="line">  femaleModel.underwear = <span class="string">'underwear'</span> + i</span><br><span class="line">  femaleModel.takePhoto()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">  æ–‡ä»¶ä¸Šä¼ çš„ä¾‹å­ï¼Œ æ ¹æ®ä¸Šä¼ æ§ä»¶çš„ä¸åŒï¼Œä½¿ç”¨ä¸åŒçš„åˆ›å»ºæ–¹å¼ </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å·¥å‚å¯¹è±¡å®ä¾‹åŒ–,åˆ›å»º å…ƒ çš„åœ°æ–¹, å¾ˆåƒå•ä¾‹æ¨¡å¼</span></span><br><span class="line"><span class="keyword">var</span> Upload = <span class="function"><span class="keyword">function</span> (<span class="params">uploadType</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.uploadType = uploadType</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> UploadFactory = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> createdFlyWeightObjs = &#123;&#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    create: <span class="function"><span class="keyword">function</span> (<span class="params">uploadType</span>) </span>&#123; <span class="comment">// å†…éƒ¨çŠ¶æ€æ˜¯æ§ä»¶ç±»å‹ ï¼ˆhtml5ä¸Šä¼ ï¼Œè¿˜æ˜¯falshä¸Šä¼ ï¼‰</span></span><br><span class="line">      <span class="keyword">if</span> (createdFlyWeightObjs[uploadType]) &#123;</span><br><span class="line">         <span class="keyword">return</span> createdFlyWeightObjs[uploadType]</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> createdFlyWeightObjs[uploadType] = <span class="keyword">new</span> Upload(uploadType)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤–éƒ¨çŠ¶æ€ç®¡ç†å™¨,ä¿å­˜æ‰€æœ‰çš„å¤–éƒ¨çŠ¶æ€</span></span><br><span class="line"><span class="keyword">var</span> uploadManager = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> uploadDatabase = &#123;&#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    add: <span class="function"><span class="keyword">function</span> (<span class="params">id, uploadType, fileName, fileSize</span>) </span>&#123; <span class="comment">// å¢åŠ ä¸€ä¸ªå¤–éƒ¨çŠ¶æ€</span></span><br><span class="line">      <span class="keyword">var</span> flyweightObj = UploadFactory.create(uploadType)</span><br><span class="line">      <span class="comment">// ... ç›¸å…³æ“ä½œ</span></span><br><span class="line">      uploadDatabase[id] = &#123;</span><br><span class="line">        fileName,</span><br><span class="line">        fileSize</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> flyweightObj</span><br><span class="line">    &#125;,</span><br><span class="line">    setExternalState: <span class="function"><span class="keyword">function</span> (<span class="params">id, flyweightObj</span>) </span>&#123; <span class="comment">// è®¾ç½®å½“å‰çš„å…ƒçš„å¤–éƒ¨çŠ¶æ€</span></span><br><span class="line">      <span class="keyword">var</span> uploadData = uploadDatabase[id]</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> uploadData) &#123;</span><br><span class="line">        flyweightObj[key] = uploadData[key]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> startUpload = <span class="function"><span class="keyword">function</span> (<span class="params">uploadType, files</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, file; file = files[i++]; ) &#123;</span><br><span class="line">    <span class="keyword">var</span> uploadObj = uploadManager.add(file.id, uploadType, file.fileName, file.fileSize)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// è®©uploadDatabaseä¸­æ‰¹é‡ä¸Šä¼  marcoUpload</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸Šä¼ æ–‡ä»¶</span></span><br><span class="line">startUpload(<span class="string">'plugin'</span>, [</span><br><span class="line">  &#123;</span><br><span class="line">    id: <span class="number">1</span>,</span><br><span class="line">    fileName: <span class="string">'1.txt'</span>,</span><br><span class="line">    fileSize: <span class="number">1000</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    id: <span class="number">2</span>,</span><br><span class="line">    fileName: <span class="string">'2.txt'</span>,</span><br><span class="line">    fileSize: <span class="number">2000</span></span><br><span class="line">  &#125;</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">startUpload(<span class="string">'flash'</span>, [</span><br><span class="line">  &#123;</span><br><span class="line">    id: <span class="number">4</span>,</span><br><span class="line">    fileName: <span class="string">'4.txt'</span>,</span><br><span class="line">    fileSize: <span class="number">4000</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    id: <span class="number">5</span>,</span><br><span class="line">    fileName: <span class="string">'5.txt'</span>,</span><br><span class="line">    fileSize: <span class="number">5000</span></span><br><span class="line">  &#125;</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“ç„¶å¦‚æœè¦ä¿®æ”¹çŠ¶æ€ï¼Œæ¯”å¦‚æ·»åŠ æ¯ä¸ªæ–‡ä»¶åè¿˜è¦è¿›è¡Œä¸€äº›å…¶ä»–æ“ä½œ</span></span><br><span class="line"><span class="keyword">var</span> add = <span class="function"><span class="keyword">function</span> (<span class="params">id, uploadType, fileName, fileSize</span>) </span>&#123; <span class="comment">// å¢åŠ ä¸€ä¸ªå¤–éƒ¨çŠ¶æ€</span></span><br><span class="line">  <span class="keyword">var</span> flyweightObj = UploadFactory.create(uploadType)</span><br><span class="line">  <span class="comment">// ... ç›¸å…³æ“ä½œ</span></span><br><span class="line">  uploadDatabase[id] = &#123;</span><br><span class="line">    fileName,</span><br><span class="line">    fileSize</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// è·å–è¿™ä¸ªæ–‡ä»¶çš„å®Œå…¨å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">var</span> dom = &#123;&#125;</span><br><span class="line">  dom.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    flyweightObj.todo(id) <span class="comment">// todoè¿™ä¸ªæ–¹æ³•æ˜¯å®šä¹‰åˆ°Upload å³åŸæ¥çš„ å…ƒ å¯¹è±¡ä¸Š, è¿™é‡Œçš„æ–¹æ³•åº”è¯¥æ˜¯ä¸ªäº‹ä»¶</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> flyweightObj</span><br><span class="line">&#125;</span><br><span class="line">Upload.prototype.todo = <span class="function"><span class="keyword">function</span> (<span class="params">id</span>) </span>&#123;</span><br><span class="line">  uploadManager.setExternalState(id, <span class="keyword">this</span>)</span><br><span class="line">  <span class="comment">// æ­¤æ—¶çš„thiså°±æ˜¯å ç”¨å…ƒå¯¹è±¡çš„æ‰€æœ‰å±æ€§ï¼Œ æ˜¯ä¸€ä¸ªå®Œæ•´çš„ä¸Šä¼ å¯¹è±¡</span></span><br><span class="line">  <span class="comment">// this.xxxxxx</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* äº«å…ƒæ¨¡å¼å¯¹è±¡æ± çš„åº”ç”¨</span></span><br><span class="line"><span class="comment">  è·å– å’Œ å½’è¿˜éƒ½æ˜¯å»å¯¹è±¡æ± ä¸­</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> objectPoolFactory = <span class="function"><span class="keyword">function</span> (<span class="params">createObjFn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> objectPool = []</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    create: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">// å–å‡ºä¸€ä¸ª</span></span><br><span class="line">      <span class="comment">// å¦‚æœå¯¹è±¡æ± ä¸­æœ‰ å°±æ‹¿å‡ºå»ä¸€ä¸ªï¼Œ å¦åˆ™å°±åˆ›å»ºä¸€ä¸ª</span></span><br><span class="line">      <span class="keyword">var</span> obj = objectPool.length === <span class="number">0</span> ? createObjFn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>) : objectPool.shift()</span><br><span class="line">      <span class="keyword">return</span> obj</span><br><span class="line">    &#125;,</span><br><span class="line">    recover: <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123; <span class="comment">// å½’è¿˜ä¸€ä¸ª</span></span><br><span class="line">      objectPool.push(obj)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç°åœ¨åˆ›å»ºä¸€ä¸ªiframçš„å¯¹è±¡æ± </span></span><br><span class="line"><span class="keyword">var</span> iframeFactory = objectPoolFactory(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> iframe = <span class="built_in">document</span>.createElement(<span class="string">'iframe'</span>)</span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(iframe) </span><br><span class="line">  iframe.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    iframe.onload = <span class="literal">null</span> <span class="comment">// é˜²æ­¢iframeé‡å¤åŠ è½½</span></span><br><span class="line">    iframeFactory.recover(iframe)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> iframe</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">var</span> iframe1 = iframeFactory.create()</span><br><span class="line">iframe1.src = <span class="string">'https://www.baidu.com'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> iframe2 = iframeFactory.create()</span><br><span class="line">iframe2.src = <span class="string">'https://www.aliyun.com'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> timer = setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> iframe3 = iframeFactory.create()</span><br><span class="line">  iframe3.src = <span class="string">'https://im.qq.com'</span></span><br><span class="line">&#125;, <span class="number">10000</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœ10såä¹‹å‰çš„ç½‘ç«™æœ‰åŠ è½½å®Œæ¯•çš„ï¼Œå°±æ”¹å˜åŸæœ‰çš„ï¼Œå¦åˆ™å°±åˆ›å»ºä¸€ä¸ªiframe</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>08æ¨¡æ¿æ–¹æ³•æ¨¡å¼</title>
      <link href="/2019/06/25/08%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/06/25/08%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">  æ¨¡æ¿æ–¹æ³•è®¾è®¡æ¨¡å¼</span></span><br><span class="line"><span class="comment">  å°†ç®—æ³•çš„æ¡†æ¶ä¸é¡ºåºä»¥åŠä¸€äº›ä¸å˜çš„è¿‡ç¨‹æ‘†æ”¾åœ¨ä¸€èµ·ï¼Œå…¶å­ç±»åªéœ€è¦å®ç°å…¶ç»†èŠ‚å³å¯</span></span><br><span class="line"><span class="comment">  Coffee or Tea ä¾‹å­</span></span><br><span class="line"><span class="comment">  å†²å’–å•¡ï¼š</span></span><br><span class="line"><span class="comment">  æŠŠæ°´ç…®æ²¸</span></span><br><span class="line"><span class="comment">  ç”¨æ²¸æ°´å†²æ³¡å’–å•¡</span></span><br><span class="line"><span class="comment">  æŠŠå’–å•¡å€’è¿›å±‹å­</span></span><br><span class="line"><span class="comment">  åŠ ç³–å’Œç‰›å¥¶</span></span><br><span class="line"><span class="comment">  æ³¡èŒ¶ï¼š</span></span><br><span class="line"><span class="comment">  æŠŠæ°´ç…®æ²¸</span></span><br><span class="line"><span class="comment">  ç”¨æ²¸æ°´æµ¸æ³¡èŒ¶å¶</span></span><br><span class="line"><span class="comment">  æŠŠèŒ¶æ°´å€’è¿›æ¯å­</span></span><br><span class="line"><span class="comment">  åŠ æŸ æª¬</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æŠ½è±¡å‡ºä¸€ä¸ªé¥®æ–™çš„æ¦‚å¿µ</span></span><br><span class="line"><span class="keyword">var</span> Beverage = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">Beverage.prototype.boilWate = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'æŠŠæ°´ç…®æ²¸'</span>)</span><br><span class="line">&#125;</span><br><span class="line">Beverage.prototype.brew = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">Beverage.prototype.pourInCup = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">Beverage.prototype.addCondiments = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">Beverage.prototype.init = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.boilWate()</span><br><span class="line">  <span class="keyword">this</span>.brew()</span><br><span class="line">  <span class="keyword">this</span>.pourInCup()</span><br><span class="line">  <span class="keyword">this</span>.addCondiments()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å’–å•¡</span></span><br><span class="line"><span class="keyword">var</span> Coffee = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">Coffee.prototype = <span class="keyword">new</span> Beverage()</span><br><span class="line">Coffee.prototype.brew = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'æ²¸æ°´å†²æ³¡å’–å•¡'</span>)</span><br><span class="line">&#125;</span><br><span class="line">Coffee.prototype.pourInCup = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'æŠŠå’–å•¡å€’è¿›æ¯å­'</span>)</span><br><span class="line">&#125;</span><br><span class="line">Coffee.prototype.addCondiments = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'åŠ ç³–å’Œç‰›å¥¶'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> coffee = <span class="keyword">new</span> Coffee()</span><br><span class="line">coffee.init()</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ä¹Ÿå¯ä»¥ä½¿ç”¨ä¼ é€’å¯¹è±¡çš„æ–¹å¼ ç„¶è€Œè¿™ç§æ–¹å¼æ˜¯ä½¿ç”¨é—­åŒ…çš„æ–¹å¼ï¼Œåˆ›å»ºåæ— æ³•ä¿®æ”¹ï¼Œå› ä¸ºæ‰¾ä¸åˆ°ç›¸åº”çš„æ–¹æ³•ï¼Œéƒ½æ˜¯å°è£…åœ¨å‡½æ•°é‡Œ */</span></span><br><span class="line"><span class="keyword">var</span> Beverage = <span class="function"><span class="keyword">function</span> (<span class="params">param</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> boilWate = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æŠŠæ°´ç…®æ²¸'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">var</span> brew = param.brew || <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'å¿…é¡»ä¼ é€’ brew æ–¹æ³•'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">var</span> pourInCup = param.pourInCup || <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'å¿…é¡»ä¼ é€’ pourInCup æ–¹æ³•'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">var</span> addCondiments = param.addCondiments || <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'å¿…é¡»ä¼ é€’ addCondiments æ–¹æ³•'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">var</span> F = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  F.prototype.init = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    boilWate()</span><br><span class="line">    brew()</span><br><span class="line">    pourInCup()</span><br><span class="line">    addCondiments()</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> F</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Coffee = Beverage(&#123;</span><br><span class="line">  brew: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'ç”¨æ°´å†²æ³¡å’–å•¡'</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  pourInCup: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æŠŠå’–å•¡å€’è¿›æ¯å­'</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  addCondiments: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'åŠ ç³–å’Œç‰›å¥¶'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> coffee = <span class="keyword">new</span> Coffee()</span><br><span class="line">coffee.init()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* æ‹“å±•</span></span><br><span class="line"><span class="comment"> è¿™ç§å›è°ƒçš„æ–¹å¼ï¼Œç§°ä¸º å¥½è±åæ–¹å¼ï¼Œä½ åªéœ€è¦æŠŠå‡½æ•°ç»™æˆ‘ï¼Œ ä»€ä¹ˆæ—¶å€™æ‰§è¡Œæˆ‘è¯´äº†ç®—ï¼Œå•¥æ—¶å€™è°ƒä¹Ÿæ˜¯æˆ‘è¯´äº†ç®—</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> å¯ä»¥æ·»åŠ ä¸€äº›é’©å­å‡½æ•°ï¼Œç”¨æ¥æ§åˆ¶æ¨¡æ¿ä¸­çš„æ–¹æ³•æ˜¯å¦éœ€è¦æ‰§è¡Œ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">Coffee.prototype.pourInCup = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.customerWantsCondiments()) &#123;</span><br><span class="line">    <span class="keyword">this</span>.addCondiments()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">Coffee.prototype.customerWantsCondiments = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">window</span>.confirm(<span class="string">'æ˜¯å¦éœ€è¦æ·»åŠ è°ƒæ–™'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>07ç»„åˆæ¨¡å¼</title>
      <link href="/2019/06/25/07%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/06/25/07%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">  ç»„åˆæ¨¡å¼</span></span><br><span class="line"><span class="comment">  æ›´åŠ å¼ºå¤§çš„ å®å‘½ä»¤,å…¶ä¼˜ç‚¹æ˜¯å¯ä»¥ä¸€æ¬¡æ€§çš„æ‰§è¡Œæ–¹æ³•ä¸éœ€è¦if else åˆ¤æ–­å“ªäº›è¦æ‰§è¡Œï¼Œå“ªäº›è¦éå†</span></span><br><span class="line"><span class="comment">  æ‰“å¼€ç©ºè°ƒ</span></span><br><span class="line"><span class="comment">  æ‰“å¼€ç”µè§†æœºå’ŒéŸ³å“</span></span><br><span class="line"><span class="comment">  å…³é—¨ï¼Œå¼€ç”µè„‘ï¼Œç™»å½•QQ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> MacroCommand = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">// å®å‘½ä»¤ ä¹Ÿå³ç»„åˆæ¨¡å¼çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    commandList: [],</span><br><span class="line">    add: <span class="function"><span class="keyword">function</span> (<span class="params">command</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.commandList.push(command)</span><br><span class="line">    &#125;,</span><br><span class="line">    execute: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, command; command = <span class="keyword">this</span>.commandList[i++]; ) &#123;</span><br><span class="line">        command.execute()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* æ‰“å¼€ç©ºè°ƒæŒ‡ä»¤ */</span></span><br><span class="line"><span class="keyword">var</span> openAcCommand = &#123;</span><br><span class="line">  execute: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æ‰“å¼€ç©ºè°ƒ'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* æ‰“å¼€ç”µè§†æœºå’ŒéŸ³å“æŒ‡ä»¤ */</span></span><br><span class="line"><span class="keyword">var</span> openTVCommand = &#123;</span><br><span class="line">  execute: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æ‰“å¼€ç”µè§†æœº'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> openSoundCommand = &#123;</span><br><span class="line">  execute: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æ‰“å¼€éŸ³å“'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»„åˆå‘½ä»¤</span></span><br><span class="line"><span class="keyword">var</span> macroCommand1 = MacroCommand()</span><br><span class="line">macroCommand1.add(openTVCommand)</span><br><span class="line">macroCommand1.add(openSoundCommand)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* å…³é—¨ï¼Œå¼€ç”µè„‘ï¼Œç™»å½•QQæŒ‡ä»¤ */</span></span><br><span class="line"><span class="keyword">var</span> closeDoorCommand = &#123;</span><br><span class="line">  execute: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'å…³é—¨'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> openPCCommand = &#123;</span><br><span class="line">  execute: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æ‰“å¼€ç”µè„‘'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> openQQCommand = &#123;</span><br><span class="line">  execute: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æ‰“å¼€QQ'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»„åˆå‘½ä»¤</span></span><br><span class="line"><span class="keyword">var</span> macroCommand2 = MacroCommand()</span><br><span class="line">macroCommand2.add(closeDoorCommand)</span><br><span class="line">macroCommand2.add(openPCCommand)</span><br><span class="line">macroCommand2.add(openQQCommand)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* ç»„åˆä¸‰ä¸ªäº‹ä»¶ */</span></span><br><span class="line"><span class="keyword">var</span> macroCommand = MacroCommand()</span><br><span class="line">macroCommand.add(openAcCommand)</span><br><span class="line">macroCommand.add(macroCommand1)</span><br><span class="line">macroCommand.add(macroCommand2)</span><br><span class="line"><span class="comment">// æ‰§è¡Œå‘½ä»¤</span></span><br><span class="line">macroCommand.execute()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* ç”±äºå…¶æ‰§è¡Œçš„é€æ˜æ€§çš„åŸå› </span></span><br><span class="line"><span class="comment">  å¾ˆæœ‰å¯èƒ½ä¼šè¯¯å¯¹å¶å­èŠ‚ç‚¹ è°ƒç”¨add,æ­¤æ—¶å¯ä»¥æŠ›å‡ºç›¸åº”çš„å¼‚å¸¸æ¥è§£å†³</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> openAcCommand = &#123;</span><br><span class="line">  execute: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æ‰“å¼€ç©ºè°ƒ'</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  add: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'å¶å­å¯¹è±¡ä¸èƒ½å†æ·»åŠ å­èŠ‚ç‚¹'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> ä½¿ç”¨å‘½ä»¤æ¨¡å¼æ¨¡æ‹Ÿä¸€ä¸ª æ‰«ææ–‡ä»¶å¤¹çš„å®ä¾‹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Folder = <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123; </span><br><span class="line">  <span class="keyword">this</span>.name = name</span><br><span class="line">  <span class="keyword">this</span>.files = []</span><br><span class="line">&#125;</span><br><span class="line">Folder.prototype.add = <span class="function"><span class="keyword">function</span> (<span class="params">file</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.files.push(file) </span><br><span class="line">&#125;</span><br><span class="line">Folder.prototype.scan = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'å¼€å§‹æ‰«ææ–‡ä»¶å¤¹: '</span> + <span class="keyword">this</span>.name)</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, file; file = <span class="keyword">this</span>.files[i++]; ) &#123;</span><br><span class="line">    file.scan()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> File = <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name</span><br><span class="line">&#125;</span><br><span class="line">File.prototype.add = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'æ–‡ä»¶ä¸‹é¢ä¸èƒ½å†æ·»åŠ æ–‡ä»¶'</span>)</span><br><span class="line">&#125;</span><br><span class="line">File.prototype.scan = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'å¼€å§‹æ‰«ææ–‡ä»¶: '</span> + <span class="keyword">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> folder = <span class="keyword">new</span> Folder(<span class="string">'å­¦ä¹ èµ„æ–™'</span>)</span><br><span class="line"><span class="keyword">var</span> folder1 = <span class="keyword">new</span> Folder(<span class="string">'JavaScript'</span>)</span><br><span class="line"><span class="keyword">var</span> folder2 = <span class="keyword">new</span> Folder(<span class="string">'jQuery'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> file1 = <span class="keyword">new</span> File(<span class="string">'JavaSccriptè®¾è®¡æ¨¡å¼'</span>)</span><br><span class="line"><span class="keyword">var</span> file2 = <span class="keyword">new</span> File(<span class="string">'ç²¾é€šjQuery'</span>)</span><br><span class="line"><span class="keyword">var</span> file3 = <span class="keyword">new</span> File(<span class="string">'é‡æ„ä¸æ¨¡å¼'</span>)</span><br><span class="line"></span><br><span class="line">folder1.add(file1)</span><br><span class="line">folder2.add(file2)</span><br><span class="line"></span><br><span class="line">folder.add(folder1)</span><br><span class="line">folder.add(folder2)</span><br><span class="line">folder.add(file3)</span><br><span class="line"></span><br><span class="line">folder.scan()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* å¢åŠ çˆ¶èŠ‚ç‚¹ï¼Œå°±å¯ä»¥åšåˆ°ç»„åˆæ¨¡å¼çš„åˆ é™¤ */</span></span><br><span class="line"><span class="keyword">var</span> Folder = <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name</span><br><span class="line">  <span class="keyword">this</span>.parent = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">this</span>.files = []</span><br><span class="line">&#125;</span><br><span class="line">Folder.prototype.add = <span class="function"><span class="keyword">function</span> (<span class="params">file</span>) </span>&#123;</span><br><span class="line">  file.parent = <span class="keyword">this</span></span><br><span class="line">  <span class="keyword">this</span>.files.push(file)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> File = <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name</span><br><span class="line">  <span class="keyword">this</span>.parent = <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“åšåˆ é™¤çš„æ—¶å€™</span></span><br><span class="line">File.prototype.remove = Folder.prototype.remove = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="keyword">this</span>.parent) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> files = <span class="keyword">this</span>.parent.files, l = files.length; l &gt;= <span class="number">0</span>; l--) &#123;</span><br><span class="line">    <span class="keyword">var</span> file = files[i]</span><br><span class="line">    <span class="keyword">if</span> (file = <span class="keyword">this</span>) &#123;</span><br><span class="line">      files.splice(l, <span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>06å‘½ä»¤æ¨¡å¼</title>
      <link href="/2019/06/25/06%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/06/25/06%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> å‘½ä»¤æ¨¡å¼</span></span><br><span class="line"><span class="comment"> æ¨¡æ‹Ÿç»™æŒ‰é’®ç»‘å®šä¸€ä¸ªåˆ·æ–°äº‹ä»¶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// çœŸå®åˆ·æ–°é€»è¾‘ </span></span><br><span class="line"><span class="keyword">var</span> MenuBar = &#123;</span><br><span class="line">  refresh: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'åˆ·æ–°äº†é¡µé¢'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ·æ–°å‘½ä»¤ (ä¸­é—´å•†å‘½ä»¤è€…)</span></span><br><span class="line"><span class="keyword">var</span> RefreshMenuBarCommand = <span class="function"><span class="keyword">function</span> (<span class="params"> recevier </span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    execute: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      recevier.refresh()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®å‘½ä»¤</span></span><br><span class="line"><span class="keyword">var</span> setCommand = <span class="function"><span class="keyword">function</span> (<span class="params"> button, command</span>) </span>&#123;</span><br><span class="line">  button.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    command.execute()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> button1 = &#123;&#125; <span class="comment">// è¿™é‡Œæ¨¡æ‹Ÿbutton1æŒ‰é’®</span></span><br><span class="line"><span class="keyword">var</span> refreshMenuBarCommand = RefreshMenuBarCommand ( MenuBar ) <span class="comment">// è·å–å‘½ä»¤</span></span><br><span class="line">setCommand( button1, refreshMenuBarCommand)</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å®å‘½ä»¤ï¼Œå¯ä»¥æ‰§è¡Œä¸€æ‰¹å‘½ä»¤ï¼Œå°±æ˜¯æŠŠå‘½ä»¤æ”¾å…¥æ•°ç»„ä¸­ï¼Œä¸€æ‰¹æ‰§è¡Œ</span></span><br><span class="line"><span class="comment"> å…³é—¨ -&gt; æ‰“å¼€ç”µè„‘ -&gt; ç™»å½•QQ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> closeDoorCommand = &#123;</span><br><span class="line">  execute: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'å…³é—¨'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> openPCCommand = &#123;</span><br><span class="line">  execute: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æ‰“å¼€ç”µè„‘'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> openQQCommand = &#123;</span><br><span class="line">  execute: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æ‰“å¼€QQ'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> MacroCommand = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    commandList: [],</span><br><span class="line">    add: <span class="function"><span class="keyword">function</span> (<span class="params"> command </span>) </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.commandList.push(command)</span><br><span class="line">    &#125;,</span><br><span class="line">    execute: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, command; command = <span class="keyword">this</span>.commandList[i++]; ) &#123;</span><br><span class="line">        command.execute()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> marcroCommand = MacroCommand()</span><br><span class="line">marcroCommand.add (closeDoorCommand )</span><br><span class="line">marcroCommand.add (openPCCommand )</span><br><span class="line">marcroCommand.add (openQQCommand )</span><br><span class="line">marcroCommand.execute()</span><br><span class="line"></span><br><span class="line"><span class="comment">/* åŸºäºå‘½ä»¤æ¨¡å¼çš„æ’¤é”€/é‡åšï¼ˆå¯é‡åšçš„å‘½ä»¤ï¼‰</span></span><br><span class="line"><span class="comment"> æŠŠå†å²å‘½ä»¤å…¨éƒ¨ä¿å­˜èµ·æ¥ï¼Œä¹‹åå…¨éƒ¨å‘½ä»¤é‡åšï¼Œç›´åˆ°æ‰€éœ€è¦çš„å‰ä¸€æ­¥</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> commandStack = [] <span class="comment">// å†å²å‘½ä»¤é˜Ÿåˆ—</span></span><br><span class="line"></span><br><span class="line">command() <span class="comment">// æ‰§è¡Œå‘½ä»¤</span></span><br><span class="line">commandStack.push(command) <span class="comment">// æ”¾å…¥å†å²å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é‡åšä»»åŠ¡ replay æŠŠä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡é‡æ–°åšä¸€é</span></span><br><span class="line"><span class="keyword">var</span> replay = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> command</span><br><span class="line">  <span class="keyword">while</span> (command = commandStack.shift()) &#123;</span><br><span class="line">    command()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ’¤é”€å‘½ä»¤ä¸€èˆ¬ä¸º undo</span></span><br><span class="line"><span class="keyword">var</span> undo = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"> <span class="comment">// commandStack.pop()</span></span><br><span class="line"> <span class="comment">// ä¹‹åæ ¹æ®é€»è¾‘è¿›è¡Œæ“ä½œ</span></span><br><span class="line"> </span><br><span class="line"> <span class="comment">// æˆ–è€…é‡åšåˆ°ä¸Šä¸€æ­¥</span></span><br><span class="line"> commandStack.pop() <span class="comment">// å¼¹å‡ºä¸Šä¸€æ­¥</span></span><br><span class="line"> replay() <span class="comment">// é‡åšæ‰€æœ‰</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>05è®¢é˜…è€…æ¨¡å¼</title>
      <link href="/2019/06/25/05%E8%AE%A2%E9%98%85%E8%80%85%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/06/25/05%E8%AE%A2%E9%98%85%E8%80%85%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> è®¢é˜…ï¼Œå‘å¸ƒè€…</span></span><br><span class="line"><span class="comment"> æ¨¡æ‹Ÿå”®æ¥¼éƒ¨çš„æƒ…å†µ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> salesOffices = &#123; <span class="comment">// å”®æ¥¼éƒ¨</span></span><br><span class="line">  clientList: &#123;&#125;, <span class="comment">// è®¢é˜…çš„åˆ—è¡¨</span></span><br><span class="line">  </span><br><span class="line">  listen: <span class="function"><span class="keyword">function</span> (<span class="params"> key, fn </span>) </span>&#123; <span class="comment">// è®¢é˜…è€…ï¼šè®¢é˜…äº‹ä»¶</span></span><br><span class="line">    <span class="keyword">if</span> ( !<span class="keyword">this</span>.clientList[ key ] ) &#123; <span class="comment">// å¦‚æœè¿˜æ²¡æœ‰è®¢é˜…è¿‡ï¼Œå…ˆåˆå§‹åŒ–ä¸€ä¸‹</span></span><br><span class="line">      <span class="keyword">this</span>.clientList[ key ] = []</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.clientList[ key ].push( fn ) <span class="comment">// è®¢é˜…æ¶ˆæ¯æ·»åŠ è¿›ç¼“å­˜åˆ—è¡¨</span></span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  trigger: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">// å‘å¸ƒè€…: å‘å¸ƒæ¶ˆæ¯</span></span><br><span class="line">    <span class="keyword">var</span> key = <span class="built_in">Array</span>.prototype.shift.call( <span class="built_in">arguments</span> ), <span class="comment">// æ¶ˆæ¯ç±»å‹</span></span><br><span class="line">      fns = <span class="keyword">this</span>.clientList[ key ] <span class="comment">// è®¢é˜…è¯¥æ¶ˆæ¯çš„æ‰€æœ‰æ–¹æ³•</span></span><br><span class="line">      </span><br><span class="line">    <span class="keyword">if</span> ( !fns || fns.length === <span class="number">0</span>) &#123; <span class="comment">// æ²¡æœ‰äººè®¢é˜…</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>, fn; fn = fns[ i++ ]; ) &#123; <span class="comment">// æ‰§è¡Œè®¢é˜…</span></span><br><span class="line">      fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">salesOffices.listen( <span class="string">'squareMeter88'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"> price </span>) </span>&#123; <span class="comment">// è®¢é˜…squareMeter88äº‹ä»¶</span></span><br><span class="line">  <span class="built_in">console</span>.log( <span class="string">'squareMeter88 -&gt; ä»·æ ¼ä¸º'</span> + price )</span><br><span class="line">&#125;)</span><br><span class="line">salesOffices.listen( <span class="string">'squareMeter100'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"> price </span>) </span>&#123; <span class="comment">// è®¢é˜…squareMeter100äº‹ä»¶</span></span><br><span class="line">  <span class="built_in">console</span>.log( <span class="string">'squareMeter100 -&gt; ä»·æ ¼ä¸º'</span> + price )</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">salesOffices.trigger( <span class="string">'squareMeter88'</span>, <span class="number">2000000</span>) <span class="comment">// å‘å¸ƒsquareMeter88äº‹ä»¶</span></span><br><span class="line">salesOffices.trigger( <span class="string">'squareMeter100'</span>, <span class="number">3000000</span>) <span class="comment">// å‘å¸ƒsquareMeter100äº‹ä»¶</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> é€šç”¨çš„è®¢é˜…è€…äº‹ä»¶ï¼ˆå¢åŠ removeï¼‰ </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> event = &#123;</span><br><span class="line">  clientList: &#123;&#125;,</span><br><span class="line">  listen: <span class="function"><span class="keyword">function</span> (<span class="params"> key, fn </span>) </span>&#123; <span class="comment">// è®¢é˜…åŠŸèƒ½</span></span><br><span class="line">    <span class="keyword">if</span> ( !<span class="keyword">this</span>.clientList[ key ]) &#123;</span><br><span class="line">      <span class="keyword">this</span>.clientList[ key ] = []</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.clientList[ key ].push( fn )</span><br><span class="line">  &#125;,</span><br><span class="line">  remove: <span class="function"><span class="keyword">function</span>(<span class="params"> key, fn </span>) </span>&#123; <span class="comment">// å–æ¶ˆäº‹ä»¶çš„è®¢é˜…</span></span><br><span class="line">    <span class="keyword">var</span> fns = <span class="keyword">this</span>.clientList[ key ]</span><br><span class="line">    <span class="keyword">if</span> ( !fns ) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ( !fn ) &#123; <span class="comment">// æ²¡æœ‰æŒ‡å®š é»˜è®¤å»é™¤æ‰€æœ‰</span></span><br><span class="line">      fns &amp;&amp; ( fns.length = <span class="number">0</span> )</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">for</span> ( <span class="keyword">var</span> l = fns.length - <span class="number">1</span>; l &gt;= <span class="number">0</span>; l--) &#123;</span><br><span class="line">         <span class="keyword">var</span> _fn = fns[ l ]</span><br><span class="line">         <span class="keyword">if</span> ( _fn === fn ) &#123;</span><br><span class="line">           fns.splice( l, <span class="number">1</span>)</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  trigger: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">// å‘å¸ƒåŠŸèƒ½</span></span><br><span class="line">    <span class="keyword">var</span> key = <span class="built_in">Array</span>.prototype.shift.call( <span class="built_in">arguments</span> ),</span><br><span class="line">      fns = <span class="keyword">this</span>.clientList[ key ]</span><br><span class="line">      </span><br><span class="line">    <span class="keyword">if</span> ( !fns || fns.length === <span class="number">0</span> ) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>, fn; fn = fns[ i++ ]; ) &#123;</span><br><span class="line">      fn.apply( <span class="keyword">this</span>, <span class="built_in">arguments</span> )</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> installEvent = <span class="function"><span class="keyword">function</span> (<span class="params"> obj </span>) </span>&#123; <span class="comment">// å®‰è£…äº‹ä»¶</span></span><br><span class="line">  <span class="keyword">for</span> ( <span class="keyword">var</span> key <span class="keyword">in</span> event) &#123;</span><br><span class="line">    obj[ key ] = event[ key ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> salesOffices = &#123;&#125;</span><br><span class="line">installEvent(salesOffices) <span class="comment">// å®‰è£…å‘å¸ƒè€…æ¨¡å—</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> handleSquareMeter88Fn1 = <span class="function"><span class="keyword">function</span> (<span class="params"> price </span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log( <span class="string">'fn1å¾—çŸ¥ squareMeter88 -&gt; ä»·æ ¼ä¸º'</span> + price )</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> handleSquareMeter88Fn2 = <span class="function"><span class="keyword">function</span> (<span class="params"> price </span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log( <span class="string">'fn2å¾—çŸ¥ squareMeter88 -&gt; ä»·æ ¼ä¸º'</span> + price )</span><br><span class="line">&#125;</span><br><span class="line">salesOffices.listen( <span class="string">'squareMeter88'</span>, handleSquareMeter88Fn1 ) <span class="comment">// fn1è®¢é˜…squareMeter88äº‹ä»¶</span></span><br><span class="line">salesOffices.listen( <span class="string">'squareMeter88'</span>, handleSquareMeter88Fn2 ) <span class="comment">// fn2è®¢é˜…squareMeter88äº‹ä»¶</span></span><br><span class="line">salesOffices.trigger( <span class="string">'squareMeter88'</span>, <span class="number">2000000</span> )</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'==========================='</span>)</span><br><span class="line">salesOffices.remove( <span class="string">'squareMeter88'</span>, handleSquareMeter88Fn1 ) <span class="comment">// å–æ¶ˆfn1å¯¹squareMeter88äº‹ä»¶çš„è®¢é˜…</span></span><br><span class="line">salesOffices.trigger( <span class="string">'squareMeter88'</span>, <span class="number">2000000</span> )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* ç„¶è€Œç°å®ä¸­ä¸éœ€è¦ä¸ºç‰¹å®šçš„å¯¹è±¡ä¸“é—¨æ³¨å†Œè¿™ä¸€ä¸ªå‘å¸ƒè®¢é˜…ï¼Œ å…±ç”¨ä¸€ä¸ªå³å¯ */</span></span><br><span class="line"><span class="keyword">var</span> Event = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> clientList = &#123;&#125;,</span><br><span class="line">    listen,</span><br><span class="line">    trigger,</span><br><span class="line">    remove</span><br><span class="line">    </span><br><span class="line">    listen = <span class="function"><span class="keyword">function</span> (<span class="params"> key, fn </span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> ( !clientList[ key ]) &#123;</span><br><span class="line">        clientList[ key ] = []</span><br><span class="line">      &#125;</span><br><span class="line">      clientList[ key ].push( fn )</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    remove = <span class="function"><span class="keyword">function</span> (<span class="params"> key, fn </span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> fns = clientList[ key ]</span><br><span class="line">      <span class="keyword">if</span> ( !fns ) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> ( !fn ) &#123;</span><br><span class="line">        fns &amp;&amp; (fns.length = <span class="number">0</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">var</span> l = fns.length - <span class="number">1</span>; l &gt;= <span class="number">0</span>; l--) &#123;</span><br><span class="line">          <span class="keyword">var</span> _fn = fns[ l ]</span><br><span class="line">          <span class="keyword">if</span> ( _fn === fn ) &#123;</span><br><span class="line">            fns.splice( l, <span class="number">1</span> )</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    trigger = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> key = <span class="built_in">Array</span>.prototype.shift.call( <span class="built_in">arguments</span> ),</span><br><span class="line">        fns = clientList[ key ]</span><br><span class="line">      <span class="keyword">if</span> ( !fns || fns.length === <span class="number">0</span> ) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>, fn; fn = fns[ i++ ]; ) &#123;</span><br><span class="line">        fn.apply( <span class="keyword">this</span>, <span class="built_in">arguments</span> )</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®€å•å®ç°åˆ°è¿™é‡Œï¼Œ å®Œæ•´çš„å‘å¸ƒè€… è®¢é˜…è€…æ¨¡å¼è¿˜éœ€è¦æä¾›å¦‚ä¸‹ä¸¤ä¸ªæ–¹é¢çš„èƒ½åŠ›</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> 1.å…¨å±€äº‹ä»¶å‘½åå†²çª </span></span><br><span class="line"><span class="comment"> æ¯”å¦‚éƒ½å‘å¸ƒäº†ä¸€ä¸ª squareMeter88 æ— æ³•ç¡®å®šå…·ä½“æ˜¯é‚£ä¸€ä¸ª äº‹ä»¶å‘å¸ƒå‡ºæ¥çš„ï¼Œå¯èƒ½äº‹ä»¶é‡åï¼Œä¸ä¾¿äºç®¡ç†</span></span><br><span class="line"><span class="comment"> è¿™é‡Œå¯ä»¥å¼•å…¥ namespace åœ¨æ¯ä¸€ä¸ªå‘½åç©ºé—´å†…è¿›è¡Œäº‹ä»¶çš„è®¢é˜…</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> å¯ä»¥æ˜¾ç¤ºåˆ›å»ºå‘½åç©ºé—´ååœ¨å†…éƒ¨è°ƒç”¨</span></span><br><span class="line"><span class="comment"> é»˜è®¤æƒ…å†µä¸‹ä¸ç”³æ˜ï¼Œå°±åœ¨è‡ªå·±ç”³æ˜çš„'_default'ç¯å¢ƒä¸­</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> 2.ç¦»çº¿æ—¶é—´çš„å‘å¸ƒ</span></span><br><span class="line"><span class="comment"> æœ‰çš„äº‹ä»¶å‘å¸ƒå‡ºæ¥ï¼Œå¯èƒ½è®¢é˜…è€…è¿˜æ²¡æ¥å¾—åŠè®¢é˜…ï¼Œè¿™é‡Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªç¦»çº¿çš„cache,ç­‰å¾…ä½•æ—¶çš„æ—¶æœºå‘å¸ƒå‡ºå»</span></span><br><span class="line"><span class="comment"> ç¦»çº¿äº‹ä»¶åªèƒ½å‘å¸ƒä¸€æ¬¡ï¼Œä¸èƒ½é‡å¤å‘å¸ƒï¼Œä¸ç„¶å°±æ²¡æœ‰äº†å‘å¸ƒçš„æ„ä¹‰ï¼ˆå®ƒåªæ˜¯å½“æ—¶æ²¡å‘å¸ƒï¼Œç­‰åˆ°äº‹å®œçš„æ—¶æœºå†å°†äº‹ä»¶å‘å¸ƒå‡ºå»ï¼‰</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> åœ¨è§¦å‘çš„æ—¶å€™ï¼Œåˆ¤å®šæœ‰ç¦»çº¿äº‹ä»¶é˜Ÿåˆ—ï¼Œå°±å…ˆåˆ«çœŸè§¦å‘ï¼Œå…ˆæ”¾å…¥ç¦»çº¿äº‹ä»¶é˜Ÿåˆ—ä¸­</span></span><br><span class="line"><span class="comment"> å½“è§¦å‘ç›‘å¬listenæ—¶ å¦‚æœæœ‰ç¦»çº¿äº‹ä»¶é˜Ÿåˆ—ï¼Œå°±æŠŠç¦»çº¿äº‹ä»¶é˜Ÿåˆ—è°ƒå‡ºæ¥è¿è¡Œä¸€æ¬¡</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>04è¿­ä»£å™¨æ¨¡å¼</title>
      <link href="/2019/06/25/04%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/06/25/04%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* è¿­ä»£å™¨æ¨¡å¼</span></span><br><span class="line"><span class="comment"> å°†è¿­ä»£çš„è¿‡ç¨‹æŠ½ç¦»å¼€ï¼Œæ ¹æ®ä¸šåŠ¡çš„éœ€æ±‚å®šåˆ¶ æ˜¯å…³å¿ƒç»“æœï¼Œè¿˜æ˜¯å…³å¿ƒè¿­ä»£çš„è¿‡ç¨‹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// æ¨¡æ‹ŸforEachå†…éƒ¨è¿­ä»£å™¨</span></span><br><span class="line"><span class="keyword">var</span> each = <span class="function"><span class="keyword">function</span> (<span class="params"> ary, callback </span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, l = ary.length; i &lt; l; i++) &#123;</span><br><span class="line">    callback.call( ary[i], ary[i], i)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">each( [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="function"><span class="keyword">function</span> (<span class="params">item, index</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`arr[<span class="subst">$&#123;index&#125;</span>] -&gt; <span class="subst">$&#123;item&#125;</span>`</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> é€šè¿‡ç¼–å†™ä¸€ä¸ªæ¯”è¾ƒå‡½æ•°ï¼Œ åˆ†åˆ«ä½¿ç”¨å†…éƒ¨è¿­ä»£å™¨ï¼Œå’Œå¤–éƒ¨è¿­ä»£å™¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å†…éƒ¨è¿­ä»£å™¨ ç»“åˆä¹‹å‰ç¼–å†™çš„ each</span></span><br><span class="line"><span class="keyword">var</span> compare = <span class="function"><span class="keyword">function</span> (<span class="params"> arr1, arr2 </span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (arr1.length !== arr2.length) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>( <span class="string">'arr1 ä¸ arr2 ä¸ç›¸ç­‰'</span> )</span><br><span class="line">  &#125;</span><br><span class="line">  each( arr1, <span class="function"><span class="keyword">function</span> (<span class="params">item, index</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (item !== arr2[ index ]) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>( <span class="string">'arr1 ä¸ arr2 ä¸ç›¸ç­‰'</span> )</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="built_in">console</span>.log( <span class="string">'arr1 ä¸ arr2 ç›¸ç­‰'</span> )</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// compare( [1,2,3], [1,2,4]) // Error: arr1 ä¸ arr2 ä¸ç›¸ç­‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤–éƒ¨è¿­ä»£å™¨  åªè¦ä¿è¯å¯¹è±¡æœ‰length å¹¶ä¸”å…¶keyæ˜¯æ•°å­— &#123;"0": '0index', '1': '1index'&#125;</span></span><br><span class="line"><span class="keyword">var</span> Iterator = <span class="function"><span class="keyword">function</span> (<span class="params"> obj </span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> current = <span class="number">0</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">var</span> next = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    current += <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">var</span> isDone = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> current &gt;= obj.length</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">var</span> getCurrItem = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> obj[ current ]</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    next, isDone, getCurrItem</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> compare = <span class="function"><span class="keyword">function</span> (<span class="params"> iterator1, iterator2 </span>) </span>&#123; <span class="comment">// å¦‚æœé•¿åº¦ä¸ç›¸åŒ æ˜¯ä¸ªbug</span></span><br><span class="line">  <span class="keyword">while</span> ( !iterator1.isDone() &amp;&amp; !iterator2.isDone()) &#123;</span><br><span class="line">    <span class="keyword">if</span> ( iterator1.getCurrItem() !== iterator2.getCurrItem() ) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>( <span class="string">'iterator1 å’Œ iterator ä¸ç›¸ç­‰'</span> )</span><br><span class="line">    &#125;</span><br><span class="line">    iterator1.next()</span><br><span class="line">    iterator2.next()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log( <span class="string">'iterator1 å’Œ iterator ç›¸ç­‰'</span> )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> iterator1 = Iterator([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line"><span class="keyword">var</span> iterator2 = Iterator([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line"><span class="comment">// compare(iterator1, iterator2) // iterator1 å’Œ iterator ç›¸ç­‰</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* åº”ç”¨å†…éƒ¨è¿­ä»£å™¨ æ¥æ ¹æ®æ”¯æŒçš„ç±»å‹ æ’å…¥ä¸åŒçš„ä¸Šä¼ æ§ä»¶ */</span></span><br><span class="line"><span class="comment">// ä¸ç¬¦åˆå¼€é—­åŸåˆ™çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">var</span> getUploadObj = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ActiveXObject(<span class="string">"TXFTNActiveX.FTNUpload"</span>) <span class="comment">// IE ä¸Šä¼ æ§ä»¶</span></span><br><span class="line">  &#125;<span class="keyword">catch</span>(e)&#123;</span><br><span class="line">    <span class="keyword">if</span> ( suportFlash() ) &#123; <span class="comment">// æ”¯æŒfalsh æ§ä»¶ æ¨¡æ‹Ÿ</span></span><br><span class="line">      <span class="keyword">var</span> str = <span class="string">'&lt;object type="application/x-shockwave-flash"&gt;&lt;/object&gt;'</span></span><br><span class="line">      <span class="keyword">return</span> $(str).appendTo( $(<span class="string">'body'</span>) )</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">var</span> str = <span class="string">'&lt;input name="File" type="File"&gt;&lt;/input&gt;'</span></span><br><span class="line">      <span class="keyword">return</span> $(str).appendTo( $(<span class="string">'body'</span>) )</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125; <span class="comment">// å¦‚æœæœ‰å¦ä¸€ç§ä¸Šä¼ æ–¹å¼å°±éœ€è¦ ä¿®æ”¹ä»£ç  ä¸ç¬¦åˆå¼€é—­åŸåˆ™ </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¦åˆå¼€é—­åŸåˆ™çš„å†™æ³• + å†…éƒ¨è¿­ä»£å™¨</span></span><br><span class="line"><span class="keyword">var</span> getActiveUploadObj = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">// IE ä¸Šä¼ æ§ä»¶</span></span><br><span class="line">  <span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ActiveXObject(<span class="string">"TXFTNActiveX.FTNUpload"</span>) </span><br><span class="line">  &#125;<span class="keyword">catch</span>(e)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> getFlashUploadObj = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> ( suportFlash() ) &#123; <span class="comment">// æ”¯æŒfalsh æ§ä»¶ æ¨¡æ‹Ÿ</span></span><br><span class="line">    <span class="keyword">var</span> str = <span class="string">'&lt;object type="application/x-shockwave-flash"&gt;&lt;/object&gt;'</span></span><br><span class="line">    <span class="keyword">return</span> $(str).appendTo( $(<span class="string">'body'</span>) )</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> getFormUploadObj = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> str = <span class="string">'&lt;input name="File" type="File"&gt;&lt;/input&gt;'</span></span><br><span class="line">  <span class="keyword">return</span> $(str).appendTo( $(<span class="string">'body'</span>) )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> iteratorUploadObj = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">// å¦‚æœè¿”å›æ˜¯ä¸æ˜¯false åˆ™è¿”å›è¯¥å¯¹è±¡ å¾ªç¯ç»“æŸ</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i =<span class="number">0</span>, fn; fn = <span class="built_in">arguments</span>[ i++]; )&#123;</span><br><span class="line">    <span class="keyword">var</span> uploadObj = fn()</span><br><span class="line">    <span class="keyword">if</span> (uploadObj !== <span class="literal">false</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> uploadObj</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> uploadObj = iteratorUploadObj( getActiveUploadObj, getFlashUploadObj, getFormUploadObj )</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœéœ€æ±‚é…ç½®æ–°çš„ä¸Šä¼ å¯¹è±¡ åªéœ€è¦å†æ·»åŠ æ–°çš„æ–¹æ³•å³å¯</span></span><br><span class="line"><span class="keyword">var</span> getHtml5UplaodObj = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ........ å…·ä½“ä»£ç ç•¥ å¦‚æœä¸æˆåŠŸå¯ä»¥è¿”å›false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> getWebkitUploadObj = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ........ å…·ä½“ä»£ç ç•¥ å¦‚æœä¸æˆåŠŸå¯ä»¥è¿”å›false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¤æ—¶æ»¡è¶³äº†å¼€é—­åŸåˆ™</span></span><br><span class="line"><span class="keyword">var</span> uploadObj = iteratorUploadObj( getActiveUploadObj, getFlashUploadObj, </span><br><span class="line">  getHtml5UplaodObj, getWebkitUploadObj, getFormUploadObj )</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>03ä»£ç†æ¨¡å¼</title>
      <link href="/2019/06/25/03%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/06/25/03%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ä»£ç†æ¨¡å¼ï¼Œé€šè¿‡ä¸€ä¸ªä»£ç†å¯¹è±¡è®¿é—®æœ¬ä½“</span></span><br><span class="line"><span class="comment"> æ¨¡æ‹Ÿå°æ˜å°†èŠ±é€ç»™A</span></span><br><span class="line"><span class="comment"> å¯ä»¥é€šè¿‡Bè½¬é€ç»™A</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> Flower = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* é»˜è®¤ */</span></span><br><span class="line"><span class="keyword">var</span> xiaoming = &#123;</span><br><span class="line">  sendFlower: <span class="function"><span class="keyword">function</span> (<span class="params"> target </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> flower = <span class="keyword">new</span> Flower()</span><br><span class="line">    target.receiveFlower( flower )</span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> A = &#123;</span><br><span class="line">  receiveFlower: <span class="function"><span class="keyword">function</span> (<span class="params"> flower </span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="string">'æ”¶åˆ°äº†èŠ±'</span> + flower)</span><br><span class="line">  &#125;,</span><br><span class="line">  listenGoodMood: <span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'å¿ƒæƒ…ä¸é”™ï¼Œæˆ‘ç­”åº”å•¦'</span>)</span><br><span class="line">      fn()</span><br><span class="line">    &#125;, <span class="number">5000</span>)  <span class="comment">// å‡è®¾A 5såå¿ƒæƒ…å˜å¥½</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// xiaoming.sendFlower( A ) è¿™é‡ŒAåªæœ‰åœ¨å¿ƒæƒ…å¥½çš„æ—¶å€™ æ‰æ”¶èŠ±,æ‰€ä»¥è¿™é‡Œä¸è¡Œ, éœ€è¦ä¸€ä¸ªä»£ç†B</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> B = &#123;</span><br><span class="line">  receiveFlower: <span class="function"><span class="keyword">function</span> (<span class="params"> flower </span>) </span>&#123;</span><br><span class="line">    A.listenGoodMood(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      A.receiveFlower( flower )</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// xiaoming.sendFlower( B ) //é€šè¿‡ä¸€ä¸ªä»£ç†B å®Œæˆäº†ä»»åŠ¡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* è™šæ‹Ÿä»£ç†å‘é€æ•´åˆhttpè¯·æ±‚å‘é€</span></span><br><span class="line"><span class="comment"> å¯¹äºå®æ—¶æ€§ä¸å¤ªé«˜çš„ç³»ç»Ÿå¯ä»¥é‡‡ç”¨ï¼Œå‡å°‘é¢‘ç¹çš„httpæ¬¡æ•°ä¿è¯é«˜æ•ˆ </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> synchronousFile = <span class="function"><span class="keyword">function</span> (<span class="params"> id </span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log( <span class="string">'å¼€å§‹åŒæ­¥æ–‡ä»¶ï¼Œ HTTP....'</span> + id )</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> checkbox = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'input'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, c; c = checkbox[i++]; ) &#123;</span><br><span class="line">  c.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ( <span class="keyword">this</span>.checked === <span class="literal">true</span> ) &#123;</span><br><span class="line">      synchronousFile ( <span class="keyword">this</span>.id )</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* é¢‘ç¹çš„å‘é€æµªè´¹ç½‘ç»œè¯·æ±‚ï¼Œ å¯ä»¥æ•´åˆæˆä¸€æ‰¹ è¿›è¡Œå‘é€ </span></span><br><span class="line"><span class="comment"> å…¶åŸç†ç±»ä¼¼å…¬äº¤è½¦å‘è½¦ï¼Œ åªè¦æœ‰ä¸€ä¸ªè¯·æ±‚è¿‡æ¥å°±æ”¾ä¸€ä¸ªå…¬äº¤è½¦ï¼Œ</span></span><br><span class="line"><span class="comment"> ç­‰å¾…2såï¼Œä¸€èµ·å‘è½¦ï¼Œåç»­çš„è¯·æ±‚ç›´æ¥ä¸Šè½¦å³å¯</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> proxySynchronousFile = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> cache = [], <span class="comment">// ä¿å­˜å‘é€é˜Ÿåˆ—</span></span><br><span class="line">    timer <span class="comment">// å®šæ—¶å™¨</span></span><br><span class="line">    </span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"> id </span>) </span>&#123; <span class="comment">// ä»£ç†å¯¹è±¡è¦ä¸æœ¬ä½“è®¾è®¡ä¸€è‡´ æ–¹ä¾¿è°ƒæ¢å’Œæ›´æ”¹</span></span><br><span class="line">     cache.push(id) <span class="comment">// æ”¾å…¥å‘é€é˜Ÿåˆ—</span></span><br><span class="line">     <span class="keyword">if</span> ( timer ) &#123; <span class="comment">// å½“å‰å·²ç»æœ‰ä¸€æ‰¹å‡†å¤‡å¥½ï¼Œå‘é€ä¸­</span></span><br><span class="line">       <span class="keyword">return</span></span><br><span class="line">     &#125;</span><br><span class="line">     </span><br><span class="line">     timer = setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">       synchronousFile ( cache.join( <span class="string">','</span> ) )</span><br><span class="line">       clearTimeout( timer )</span><br><span class="line">       timer = <span class="literal">null</span></span><br><span class="line">       cache.length = <span class="number">0</span> <span class="comment">// æ¸…ç©ºé›†åˆ</span></span><br><span class="line">     &#125;, <span class="number">2000</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> checkbox = <span class="built_in">document</span>.getElementsByTagName( <span class="string">'input'</span> )</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, c; c = checkbox[i++]; ) &#123;</span><br><span class="line">  c.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.checked === <span class="literal">true</span>) &#123;</span><br><span class="line">      proxySynchronousFile( <span class="keyword">this</span>.id )</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ç¼“å­˜ä»£ç†ï¼Œå°±æ˜¯å°†ä¸€äº›ç»“æœæå‰ç¼“å­˜èµ·æ¥ï¼Œç„¶ååç»­ä¾¿äºç›´æ¥æŸ¥æ‰¾</span></span><br><span class="line"><span class="comment">  å¦‚ è¿™é‡Œåšä¸€äº›å¤§è®¡ç®—ï¼ˆè®¤ä¸ºæ­¤å¤„ä¸ºå¤æ‚è®¡ç®—ï¼‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> mult = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, l = <span class="built_in">arguments</span>.length; i &lt; l; i++) &#123;</span><br><span class="line">    a = a * <span class="built_in">arguments</span>[i]</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> a</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> add = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">0</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, l = <span class="built_in">arguments</span>.length; i &lt; l; i++) &#123;</span><br><span class="line">    a = a + <span class="built_in">arguments</span>[i] </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> a</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºç¼“å­˜ä»£ç†çš„å·¥å‚</span></span><br><span class="line"><span class="keyword">var</span> createProxyFactory = <span class="function"><span class="keyword">function</span> (<span class="params"> fn </span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> cache = &#123;&#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> args = <span class="built_in">Array</span>.prototype.join.call( <span class="built_in">arguments</span>, <span class="string">','</span> )</span><br><span class="line">    <span class="keyword">if</span> (args <span class="keyword">in</span> cache) &#123;</span><br><span class="line">      <span class="keyword">return</span> cache[ args ]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cache[ args ] = fn.apply( <span class="keyword">this</span>, <span class="built_in">arguments</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> proxyMult = createProxyFactory( mult )</span><br><span class="line"><span class="keyword">var</span> proxyAdd = createProxyFactory( add )</span><br><span class="line"></span><br><span class="line">proxyMult(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>) <span class="comment">// è¿›è¡Œè®¡ç®—ï¼Œå¹¶ä¸”æŠŠç»“æœæ”¾å…¥ç¼“å­˜ä¸­</span></span><br><span class="line">proxyMult(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>) <span class="comment">// ä»ç¼“å­˜ä¸­ç›´æ¥è¯»å–</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>02ç­–ç•¥æ¨¡å¼</title>
      <link href="/2019/06/25/02%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/06/25/02%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰ç­–ç•¥</span></span><br><span class="line"><span class="keyword">var</span> strategies = &#123;</span><br><span class="line">  <span class="string">"S"</span>: <span class="function"><span class="keyword">function</span> (<span class="params">salary</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> salary * <span class="number">4</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"A"</span>: <span class="function"><span class="keyword">function</span> (<span class="params">salary</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> salary * <span class="number">3</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"B"</span>: <span class="function"><span class="keyword">function</span> (<span class="params">salary</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> salary * <span class="number">2</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ç­–ç•¥</span></span><br><span class="line"><span class="keyword">var</span> calculateBonus = <span class="function"><span class="keyword">function</span> (<span class="params"> level, salary</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> strategies[ level ]( salary )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨</span></span><br><span class="line"><span class="built_in">console</span>.log( calculateBonus( <span class="string">'S'</span>, <span class="number">10000</span>) )</span><br><span class="line"><span class="built_in">console</span>.log( calculateBonus( <span class="string">'B'</span>, <span class="number">10000</span>) )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* ä½¿ç”¨æ¡ˆä¾‹ï¼Œåšä¸€ä¸ªè¡¨å•éªŒé…ç½® validator */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* ç­–ç•¥å¯¹è±¡ */</span></span><br><span class="line"><span class="keyword">var</span> strategies = &#123;</span><br><span class="line">  isNonEmpty: <span class="function"><span class="keyword">function</span> (<span class="params"> value, errorMsg </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (value === <span class="string">''</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> errorMsg</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  minLength: <span class="function"><span class="keyword">function</span> (<span class="params">value, length, errorMsg</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (value.length &lt; length) &#123;</span><br><span class="line">      <span class="keyword">return</span> errorMsg</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  maxLength: <span class="function"><span class="keyword">function</span> (<span class="params">value, length, errorMsg</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (value.length &gt; length) &#123;</span><br><span class="line">      <span class="keyword">return</span> errorMsg</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  isMobile: <span class="function"><span class="keyword">function</span> (<span class="params">value, errorMsg</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="regexp">/^1[3|5|8][0-9]&#123;9&#125;$/</span>.test( value )) &#123;</span><br><span class="line">      <span class="keyword">return</span> errorMsg</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* éªŒè¯å™¨ validator */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Validator</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">      <span class="keyword">this</span>.cache = []</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  add (dom, rules) &#123; <span class="comment">// æ·»åŠ ä¸€ä¸ªç­–ç•¥</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, rule; rule = rules[ i++ ]; ) &#123;</span><br><span class="line">      <span class="keyword">var</span> that = <span class="keyword">this</span></span><br><span class="line">      </span><br><span class="line">      ;(<span class="function"><span class="keyword">function</span> (<span class="params">rule</span>) </span>&#123; <span class="comment">// å¼‚æ­¥è°ƒç”¨ï¼Œ è¿™é‡Œè¦æ³¨æ„é—­åŒ…ï¼Œå¦åˆ™ä¸€ç›´æ£€éªŒæ­¤é¡¹æœ€åä¸€ä¸ªç­–ç•¥</span></span><br><span class="line">        <span class="keyword">var</span> strategyAry = rule.strategy.split( <span class="string">':'</span> )</span><br><span class="line">        <span class="keyword">var</span> errorMsg = rule.errorMsg</span><br><span class="line">        </span><br><span class="line">        that.cache.push(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">// cacheæ”¾å…¥é…ç½®å¥½çš„å¾…æ‰§è¡Œæ–¹æ³•</span></span><br><span class="line">          <span class="keyword">var</span> strategy = strategyAry.shift()  <span class="comment">// ['minLength', 6]</span></span><br><span class="line">          strategyAry.unshift( dom.value ) <span class="comment">// æŠŠå¾…æµ‹å€¼æ”¾å…¥ç¬¬ä¸€ä¸ªå‚æ•° ['value', 6] </span></span><br><span class="line">          strategyAry.push(errorMsg) <span class="comment">// æŠŠé”™è¯¯æç¤º æ”¾å…¥æœ€åä¸€ä¸ª ï¼ˆç¬¬äºŒä½æˆ–ç¬¬ä¸‰ä½ï¼‰ ['value', 6ï¼Œ 'ä¸èƒ½å°‘äº6ä½']</span></span><br><span class="line">          <span class="keyword">return</span> strategies[ strategy ].apply(dom, strategyAry)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)(rule)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  validate () &#123; <span class="comment">// éªŒè¯ç­–ç•¥</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, validatorFunc; validatorFunc = <span class="keyword">this</span>.cache [ i++ ]; ) &#123;</span><br><span class="line">      <span class="keyword">var</span> errorMsg = validatorFunc()</span><br><span class="line">      <span class="keyword">if</span> ( errorMsg ) &#123;</span><br><span class="line">        <span class="keyword">return</span> errorMsg</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ================= å®¢æˆ·ç«¯è°ƒç”¨ =================  */</span></span><br><span class="line"><span class="keyword">var</span> registerForm = <span class="built_in">document</span>.getElementById(<span class="string">'registerForm'</span>) <span class="comment">// è·å–å…ƒç´ </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> validataFunc = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">// éªŒè¯é€»è¾‘</span></span><br><span class="line">  <span class="keyword">var</span> validator = <span class="keyword">new</span> Validator()</span><br><span class="line">  </span><br><span class="line">  validator.add(registerForm.username, [&#123;</span><br><span class="line">    strategy: <span class="string">'isNonEmpty'</span>,</span><br><span class="line">    errorMsg: <span class="string">'ç”¨æˆ·åä¸èƒ½ä¸ºç©º'</span></span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    strategy: <span class="string">'minLength:6'</span>,</span><br><span class="line">    errorMsg: <span class="string">'ç”¨æˆ·åä¸èƒ½å°‘äº6ä½'</span></span><br><span class="line">  &#125;])</span><br><span class="line">  </span><br><span class="line">  validator.add(registerForm.password, [&#123;</span><br><span class="line">    strategy: <span class="string">'minLength:6'</span>,</span><br><span class="line">    errorMsg: <span class="string">'å¯†ç ä¸èƒ½å°‘äº6ä½'</span></span><br><span class="line">  &#125;])</span><br><span class="line">  </span><br><span class="line">  validator.add(registerForm.phonenumber, [&#123;</span><br><span class="line">    strategy: <span class="string">'isMobile'</span>,</span><br><span class="line">    errorMsg: <span class="string">'æ‰‹æœºå·ä¸æ­£ç¡®'</span></span><br><span class="line">  &#125;])</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// è°ƒç”¨æ ¡éªŒ</span></span><br><span class="line">  <span class="keyword">var</span> errorMsg = validator.validate()</span><br><span class="line">  <span class="keyword">return</span> errorMsg</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">registerForm.onsubmit = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">// ç»‘å®šéªŒè¯é€»è¾‘</span></span><br><span class="line">  <span class="keyword">var</span> errorMsg = validataFunc()</span><br><span class="line">  <span class="keyword">if</span> ( errorMsg ) &#123; <span class="comment">// æœ‰é”™è¯¯ï¼Œ é˜»æ­¢æäº¤</span></span><br><span class="line">    alert( errorMsg )</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span> (name) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name</span><br><span class="line">  &#125;</span><br><span class="line">  sayHi () &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'hi'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Person(<span class="string">'zhn'</span>)</span><br><span class="line"><span class="comment">// console.log(p)</span></span><br><span class="line">p.sayHi()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>01å•ä¾‹æ¨¡å¼</title>
      <link href="/2019/06/25/01%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/06/25/01%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* æ³¨æ„ï¼šå•ä¾‹ç®¡ç† å’Œ å¯¹è±¡åˆ›å»ºè¦åˆ†å¼€ */</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">// è¿”å›åˆ›å»ºå•ä¾‹çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">var getSingle = function ( fn ) &#123;</span></span><br><span class="line"><span class="comment">  var result</span></span><br><span class="line"><span class="comment">  return function () &#123;</span></span><br><span class="line"><span class="comment">    return result || (result = fn.apply(this, arguments))</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">// åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">var createSigleIframe = getSingle(function () &#123;</span></span><br><span class="line"><span class="comment">  var iframe = document.createElement('iframe')</span></span><br><span class="line"><span class="comment">  document.body.appendChild(iframe)</span></span><br><span class="line"><span class="comment">  return iframe</span></span><br><span class="line"><span class="comment">&#125;)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">// ä½¿ç”¨</span></span><br><span class="line"><span class="comment">document.getElementById( 'loginBtn' ).onclick = function () &#123;</span></span><br><span class="line"><span class="comment">  var loginLayer = createSigleIframe()</span></span><br><span class="line"><span class="comment">  loginLayer.src = 'http://www.baidu.com'</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">document.getElementById( 'loginBtn' ).onclick = function () &#123; // å¤šæ¬¡è°ƒç”¨ä¸ä¼šåˆ›å»ºå¤šä¸ªiframe</span></span><br><span class="line"><span class="comment">  var loginLayer = createSigleIframe()</span></span><br><span class="line"><span class="comment">  loginLayer.src = 'http://www.google.com'</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">/* æ¨¡æ‹Ÿå°ç¨‹åºä¸­äº‘å¼€å‘è·å–dbçš„ä¾‹å­ï¼Œä½¿ç”¨å•ä¾‹ */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> getSingle = <span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> result</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> result || (result = fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> getDB = getSingle(<span class="function"><span class="keyword">function</span> (<span class="params">wx</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> wx.cloud.database()</span><br><span class="line">&#125;) </span><br><span class="line"> </span><br><span class="line"><span class="comment">// è¿™é‡Œä¿è¯å§‹ç»ˆå–å‡ºäº†ä¸€ä¸ªdb</span></span><br><span class="line"><span class="comment">// var wx = &#123;name: 'wx'&#125;</span></span><br><span class="line"><span class="keyword">var</span> db = getDB(wx)</span><br><span class="line"><span class="comment">// ......</span></span><br><span class="line"><span class="keyword">var</span> db = getDB()</span><br><span class="line"><span class="comment">// ......</span></span><br><span class="line"><span class="keyword">var</span> db = getDB()</span><br><span class="line"><span class="comment">// ......</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>jsçš„ç›¸å…³é«˜é˜¶å‡½æ•°</title>
      <link href="/2019/06/25/js%E7%9A%84%E7%9B%B8%E5%85%B3%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0/"/>
      <url>/2019/06/25/js%E7%9A%84%E7%9B%B8%E5%85%B3%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<h4 id="æŸ¯é‡ŒåŒ–-currying"><a href="#æŸ¯é‡ŒåŒ–-currying" class="headerlink" title="æŸ¯é‡ŒåŒ– currying"></a>æŸ¯é‡ŒåŒ– currying</h4><p>å°±æ˜¯æŠŠä¸€äº›æ–¹æ³• åœ¨å†…éƒ¨åšäº†ï¼Œæˆ–è€…å¯ä»¥è¿ç»­è°ƒç”¨ å‡å°‘æ™®éæ€§ï¼Œ å¢åŠ é€‚ç”¨æ€§ï¼Œæå‰åš<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åšä¸€ä¸ªèƒ½å¤Ÿç´¯åŠ çš„æ–¹æ³•</span></span><br><span class="line"><span class="keyword">var</span> currying = <span class="function"><span class="keyword">function</span> (<span class="params"> fn </span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> args = []</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">arguments</span>.length === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> fn.apply( <span class="keyword">this</span>, args)</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      [].push.apply( args, <span class="built_in">arguments</span> )</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">arguments</span>.callee  <span class="comment">// è¿”å›è°ƒç”¨å‡½æ•° å¯ä»¥fn()()()</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> cost = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> money = <span class="number">0</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, l = <span class="built_in">arguments</span>.length; i &lt; l; i++ ) &#123;</span><br><span class="line">      money += <span class="built_in">arguments</span>[i]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> money</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line"><span class="comment">//  var result = cost(1, 2, 3) // ç«‹å³è®¡ç®—6</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// var cost = currying (cost) // æŸ¯é‡ŒåŒ–</span></span><br><span class="line"><span class="comment">// cost(1)</span></span><br><span class="line"><span class="comment">// cost(2)</span></span><br><span class="line"><span class="comment">// cost(3)(4)</span></span><br><span class="line"><span class="comment">// var result = cost() // è¿™é‡Œåœ¨è®¡ç®—10</span></span><br></pre></td></tr></table></figure></p><h4 id="éæŸ¯é‡ŒåŒ–-uncurrying"><a href="#éæŸ¯é‡ŒåŒ–-uncurrying" class="headerlink" title="éæŸ¯é‡ŒåŒ– uncurrying"></a>éæŸ¯é‡ŒåŒ– uncurrying</h4><p>å°±æ˜¯æŠŠåŸæœ¬å†…éƒ¨çš„ä¸€äº›æ–¹æ³• æŠ½ç¦»å‡ºæ¥ï¼Œå¯ä»¥å•ç‹¬ä½¿ç”¨ï¼Œ å€Ÿç”¨æ–¹æ³•ï¼Œåªè¦æ˜¯thisæŒ‡å‘çš„é—®é¢˜</p><ul><li><p>document.createElement()<br> -&gt; æ­¤æ—¶çš„createElementçš„è°ƒç”¨è€…æ˜¯document</p></li><li><p>createFn = document.createElement<br>-&gt; createFn()  -&gt;  æ­¤æ—¶çš„createElementçš„è°ƒç”¨è€…æ˜¯window.æ‰€ä»¥ä¼šå‡ºç°å¼‚å¸¸</p></li><li><p>ä¸»è¦çš„è§£å†³æ–¹æ¡ˆ æ˜¯æŠŠthiså›ºå®šä¸‹æ¥</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.uncurrying = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> self = <span class="keyword">this</span> <span class="comment">// è¿™é‡Œæ˜¯æ–¹æ³•ä½“</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> obj = <span class="built_in">Array</span>.prototype.shift.call( <span class="built_in">arguments</span> ) </span><br><span class="line">    <span class="keyword">return</span> self.apply( obj, <span class="built_in">arguments</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> push = <span class="built_in">Array</span>.prototype.push.uncurrying()</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="string">"0"</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">"length"</span>: <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line">push(obj, <span class="number">1</span>) <span class="comment">// Object [ 0, 1 ]</span></span><br></pre></td></tr></table></figure><h4 id="å‡½æ•°èŠ‚æµ"><a href="#å‡½æ•°èŠ‚æµ" class="headerlink" title="å‡½æ•°èŠ‚æµ"></a>å‡½æ•°èŠ‚æµ</h4><p>é¢‘ç¹è§¦å‘çš„äº‹ä»¶é€ æˆçš„ä¸å¿…è¦çš„äº‹ä»¶çš„æµªè´¹,è¿”å›é‚£äº›é¢‘ç¹çš„å‡½æ•°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> throttle = <span class="function"><span class="keyword">function</span> (<span class="params">fn, interval</span>) </span>&#123;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">var</span> _self = fn, <span class="comment">// åŸå§‹å‡½æ•°çš„å¼•ç”¨</span></span><br><span class="line">    timer,  <span class="comment">// è®¡æ—¶å™¨</span></span><br><span class="line">    firstTime = <span class="literal">true</span> <span class="comment">// ç¬¬ä¸€æ¬¡</span></span><br><span class="line">    </span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> args = <span class="built_in">arguments</span></span><br><span class="line">    _me = <span class="keyword">this</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (firstTime) &#123; <span class="comment">// ç¬¬ä¸€æ¬¡è¿›å…¥</span></span><br><span class="line">      _self.apply(_me, args)</span><br><span class="line">      <span class="keyword">return</span> firstTime = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (timer) &#123; <span class="comment">// å½“å‰æ­£åœ¨å‡†å¤‡è¿è¡Œä¸­</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    timer = setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      clearTimeout(timer)</span><br><span class="line">      timer = <span class="literal">null</span></span><br><span class="line">      _self.apply(_me, args)</span><br><span class="line">      </span><br><span class="line">    &#125;, interval || <span class="number">500</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.onresize = throttle(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'1'</span>)</span><br><span class="line">&#125;, <span class="number">500</span>) <span class="comment">// ä¿è¯äº‹ä»¶è§¦å‘500ms/æ¬¡</span></span><br></pre></td></tr></table></figure><h4 id="åˆ†æ—¶å‡½æ•°"><a href="#åˆ†æ—¶å‡½æ•°" class="headerlink" title="åˆ†æ—¶å‡½æ•°"></a>åˆ†æ—¶å‡½æ•°</h4><p>æµè§ˆå™¨æ‰§è¡Œé€Ÿåº¦å¾ˆå¿«ï¼Œæœ‰å¯èƒ½ä½¿å…¶åƒä¸æ¶ˆï¼Œå‡æ­»ï¼Œå´©æºƒï¼Œå¯ä»¥é™ä½é€Ÿåº¦ï¼Œåˆ†æ‰¹æ‰§è¡Œ<br>ç±»ä¼¼ä¸åå¤§å·´è½¦ï¼Œ ä¸€æ‰¹ä¸€æ‰¹çš„æ‹‰å®¢</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> timeChunk = <span class="function"><span class="keyword">function</span> (<span class="params">ary, fn, count</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> obj,</span><br><span class="line">    t</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">var</span> len = ary.length</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">var</span> start = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="built_in">Math</span>.min(count || <span class="number">1</span>, ary.length); i++) &#123; <span class="comment">// è¿™é‡Œä¿è¯ä¸€æ¬¡è¿è¡Œæœ€å°æ¬¡æ•°</span></span><br><span class="line">      <span class="keyword">var</span> obj = ary.shift()</span><br><span class="line">      fn(obj)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    t = setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (ary.length === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> clearInterval(t)</span><br><span class="line">      &#125;</span><br><span class="line">      start()</span><br><span class="line">    &#125;, <span class="number">200</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> ary = []</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">  ary.push(i)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> render = timeChunk(ary, <span class="function"><span class="keyword">function</span> (<span class="params">n</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// TODO...... ä¸€æ¬¡æ‰§è¡Œ8ä¸ªä»»åŠ¡ ä¸€æ‰¹ä¸€æ‰¹æ‰§è¡Œ</span></span><br><span class="line">  <span class="comment">// console.log(n)</span></span><br><span class="line">&#125;, <span class="number">8</span>)</span><br><span class="line"></span><br><span class="line">render()</span><br></pre></td></tr></table></figure><h4 id="æƒ°æ€§åŠ è½½"><a href="#æƒ°æ€§åŠ è½½" class="headerlink" title="æƒ°æ€§åŠ è½½"></a>æƒ°æ€§åŠ è½½</h4><p>åˆ¤æ–­æµè§ˆå™¨ç±»å‹ï¼Œè¿™ç§éœ€è¦å¹²ä¸€æ¬¡å­˜å‚¨èµ·æ¥å³å¯</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> addEvent = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">// æå‰ç¼“å­˜èµ·æ¥äº†ï¼Œ ä½†æ˜¯å¯èƒ½ä¸€æ¬¡æ²¡æ‰§è¡Œï¼Œä¼šæµªè´¹</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">window</span>.addEventListener) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">ele, type, handler</span>) </span>&#123;</span><br><span class="line">      ele.addEventListener(typem, handler, <span class="literal">false</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">window</span>.attachEvent) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">ele, type, handler</span>) </span>&#123;</span><br><span class="line">      ele.attachEvent(<span class="string">'on'</span> + typem, handler)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line"><span class="comment">// addEvent(dom, 'click', () =&gt; &#123; console.log(1) &#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> addEvent = <span class="function"><span class="keyword">function</span> (<span class="params">ele, type, handler</span>) </span>&#123; <span class="comment">// å½“ç¬¬ä¸€æ¬¡ç”¨å®Œä¹‹åæ”¹å˜æŒ‡å‘</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">window</span>.addEventListener) &#123;</span><br><span class="line">    addEvent = <span class="function"><span class="keyword">function</span> (<span class="params">ele, type, handler</span>) </span>&#123;</span><br><span class="line">      ele.addEventListener(typem, handler, <span class="literal">false</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">window</span>.attachEvent) &#123;</span><br><span class="line">    addEvent = <span class="function"><span class="keyword">function</span> (<span class="params">ele, type, handler</span>) </span>&#123;</span><br><span class="line">      ele.attachEvent(<span class="string">'on'</span> + typem, handler)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// addEvent(dom, 'click', () =&gt; &#123; console.log(1) &#125;)</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>jsä¸­æ­£åˆ™ç›¸å…³çš„æ–¹é¢</title>
      <link href="/2019/06/12/js%E4%B8%AD%E6%AD%A3%E5%88%99%E7%9B%B8%E5%85%B3%E7%9A%84%E6%96%B9%E9%9D%A2/"/>
      <url>/2019/06/12/js%E4%B8%AD%E6%AD%A3%E5%88%99%E7%9B%B8%E5%85%B3%E7%9A%84%E6%96%B9%E9%9D%A2/</url>
      
        <content type="html"><![CDATA[<h4 id="æ¯”è¾ƒåŸºç¡€çš„ç”¨æ³•"><a href="#æ¯”è¾ƒåŸºç¡€çš„ç”¨æ³•" class="headerlink" title="æ¯”è¾ƒåŸºç¡€çš„ç”¨æ³•"></a>æ¯”è¾ƒåŸºç¡€çš„ç”¨æ³•</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ­£åˆ™åmatchçš„ç»“æœæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸² gæ˜¯å…¨å±€æ›¿æ¢ å¦åˆ™ä»–åŒ¹é…åˆ°ç¬¬ä¸€ä¸ªå°±åœä¸‹æ¥äº†</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'abc666'</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/^a.*6$/g</span>) <span class="comment">// ^è¡¨ç¤ºä¸¥æ ¼å¼€å¤´  $è¡¨ç¤ºä¸¥æ ¼ç»“å°¾ [ "abc666" ]</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'6^1a'</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/\^1a/g</span>) <span class="comment">//  [ "^1a" ] å¯¹å…³é”®è¯è¿›è¡Œè½¬ä¹‰ </span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'   hello world  '</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/(^\s+)|(\s+$)/</span>) <span class="comment">// åŒ¹é…å‰åçš„ç©ºæ ¼ [ "    ", "  "]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'php'</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/p.p/</span>) <span class="comment">// .è¡¨ç¤ºä»»æ„å­—ç¬¦ ä¸€ä¸ªç‚¹è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ [ "php" ]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'phahsp'</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/p.*p/</span>) <span class="comment">// .*è¡¨ç¤ºä»»æ„çš„å­—ç¬¦ä¸² [ "phahsp" ]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'pha_hsp'</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/p\w*p/g</span>) <span class="comment">// \wè¡¨ç¤º å­—æ¯ æ•°å­— ä¸‹åˆ’çº¿ [ "pha_hsp" ]</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'p*@ #*-+p'</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/p\W*p/g</span>) <span class="comment">// \Wè¡¨ç¤º éå­—æ¯ éæ•°å­— éä¸‹åˆ’çº¿ [ "p*@ #*-+p" ]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'hello123456666aas5474xc'</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/\d/g</span>) <span class="comment">// \d è¡¨ç¤ºä¹Ÿç»™æ•°å­— [ "1", "2", "3", "4", "5", "6", "6", "6", "6", "5", â€¦ ]</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/\d+/g</span>) <span class="comment">// è´ªå©ªæ¨¡å¼ï¼Œä¼šä¸€ç›´åŒ¹é…ä¸‹å» [ "123456666", "5474" ]</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/\D+/g</span>) <span class="comment">// \D è¡¨ç¤ºéæ•°å­— [ "hello", "aas", "xc" ]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'abcd nihao 666 zhn'</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/\bn.*/g</span>) <span class="comment">// \b è¡¨ç¤ºåŒ¹é…è¾¹ç•Œ ä»¥å¼€å¤´  ä½¿ç”¨ç©ºæ ¼åšä¾æ® [ "nihao 666 zhn" ]</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/\bn.*o/g</span>) <span class="comment">// [ "nihao" ]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å‰©ä¸‹æŸ¥é˜…é…ç½®æ‰‹å†Œå³å¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* åˆ†ç»„çš„ä½¿ç”¨ */</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'1111, 1212, 1331 1344'</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/\d\d\d\d/g</span>) <span class="comment">// æŸ¥æ‰¾å››ä¸ªæ•°å­— [ "1111", "1212", "1331" ]</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/(\d)(\d)\1\2/g</span>) <span class="comment">// åŒ¹é…ä½¿ç”¨ \1 [ "1111", "1212" ]</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/(\d)(?:\d)(\d)\2/g</span>) <span class="comment">// åŒ¹é…ä½¿ç”¨ ç¦æ­¢ä½¿ç”¨æ­¤åˆ†ç»„ ?: [ "1111", "1344" ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* æ–­è¨€/ç¯è§† */</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'java11 and es6'</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/[A-z]+(?=\d)/g</span>) <span class="comment">// åé™åˆ¶,ä½†æ˜¯è‡ªå·±ä¸ä¼šè¢«è¾“å‡º [ "java", "es" ] </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'12sda4716'</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/(?!^\d+\$)^[0-9a-zA-Z]+$/g</span>) <span class="comment">// å‰è¡¨èŒƒå›´ ä¸èƒ½åªæ˜¯æ•°å­—çš„æƒ…å†µä¸‹ æ»¡è¶³[0-9a-zA-Z]+å³ï¼Œ   [ "12sda4716" ]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(result)</span><br></pre></td></tr></table></figure><h4 id="å‡½æ•°æ–¹æ³•ç›¸å…³"><a href="#å‡½æ•°æ–¹æ³•ç›¸å…³" class="headerlink" title="å‡½æ•°æ–¹æ³•ç›¸å…³"></a>å‡½æ•°æ–¹æ³•ç›¸å…³</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*RegExp test æ­£åˆ™è¡¨è¾¾å¼çš„æ–¹æ³• */</span></span><br><span class="line"><span class="keyword">var</span> res = <span class="regexp">/abc/g</span>.test(<span class="string">'abc'</span>) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*RegExp exec æ­£åˆ™è¡¨è¾¾å¼çš„æ–¹æ³• */</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'1111 1122 3434 5678 8989'</span></span><br><span class="line"><span class="keyword">var</span> r = <span class="regexp">/(\d)\d\1\d/g</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¼šæœ‰è¿ç»­æ€§</span></span><br><span class="line"><span class="keyword">var</span> i = r.lastIndex <span class="comment">// å‰ä¸€æ¬¡åŒ¹é…çš„ä½ç½® 0</span></span><br><span class="line"><span class="keyword">var</span> res = r.exec(str) <span class="comment">// [ "1111", "1" ]  '1111'æ˜¯åŒ¹é…çš„ç»“æœ  '1'æ˜¯åˆ†ç»„çš„ä¿¡æ¯</span></span><br><span class="line"><span class="built_in">console</span>.log(i, res) <span class="comment">// 0 [ "1111", "1" ]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> i = r.lastIndex  <span class="comment">// ä¸Šä¸€æ¬¡åŒ¹é…çš„ç»“æŸä½ç½® 4</span></span><br><span class="line"><span class="keyword">var</span> res = r.exec(str) <span class="comment">// [ "3434", "3" ]</span></span><br><span class="line"><span class="built_in">console</span>.log(i, res) <span class="comment">// 4 [ "3434", "3" ] </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*String  replaceçš„æ–¹æ³• */</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'helli world'</span> </span><br><span class="line"><span class="keyword">var</span> result = str.replace(<span class="string">'l'</span>, <span class="string">'L'</span>) <span class="comment">// heLli world åªæ›¿æ¢ä¸€å¤„</span></span><br><span class="line"><span class="keyword">var</span> result = str.replace(<span class="regexp">/l/</span>, <span class="string">'L'</span>) <span class="comment">// heLli world</span></span><br><span class="line"><span class="keyword">var</span> result = str.replace(<span class="regexp">/l/g</span>, <span class="string">'L'</span>) <span class="comment">// heLLi worLd å…¨å±€æ›¿æ¢/g</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å€ŸåŠ©å­è¡¨è¾¾å¼ 12345 - 12[12-3-45]45</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'12345'</span></span><br><span class="line"><span class="keyword">var</span> result = str.replace(<span class="regexp">/(3)/g</span>, <span class="string">"[$`-$1-$']"</span>) <span class="comment">// $` åŒ¹é…å·¦ä¾§çš„éƒ¨åˆ†  $' åŒ¹é…å³ä¾§çš„éƒ¨åˆ†</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'1234567'</span></span><br><span class="line"><span class="keyword">var</span> result = str.replace(<span class="regexp">/(2).(4).(6)/g</span>, <span class="string">"[$`-$2-$']"</span>) <span class="comment">// 1[1-4-7]7 æ•´ä¸ªåˆ†ç»„å·¦å³</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å»é™¤æ±‰å­—ç›¸åŒçš„éƒ¨åˆ†</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">"è¿™è¿™è¿™è¿™ä¸¸ä¸¸ä¸¸å­å¤šå¤šå¤šå¤šå¤šå¤šå°‘é’±ä¸€ä¸€ä¸€ä¸€æ–¤"</span></span><br><span class="line"><span class="keyword">var</span> result = str.replace(<span class="regexp">/([\u4e00-\u9fa5])\1*/g</span>, <span class="string">'$1'</span>) <span class="comment">//æ€§èƒ½ç•¥å·®ï¼Œæ‰€æœ‰éƒ½è¦åŒ¹é… å­ï¼Œå°‘ï¼Œé’±ä¹Ÿæ›¿æ¢äº†ï¼ˆå­ -&gt; å­ï¼‰ è¿™ä¸¸å­å¤šå°‘é’±ä¸€æ–¤</span></span><br><span class="line"><span class="keyword">var</span> result = str.replace(<span class="regexp">/([\u4e00-\u9fa5])\1+/g</span>, <span class="string">'$1'</span>) <span class="comment">//æ€§èƒ½ç•¥å¥½ï¼Œå­ï¼Œå°‘ï¼Œé’±æ ¹æœ¬å°±æ²¡åŒ¹é…åˆ°ï¼ˆä¸æ»¡è¶³\1+ï¼‰ è¿™ä¸¸å­å¤šå°‘é’±ä¸€æ–¤</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å€ŸåŠ©æ›¿æ¢å‡½æ•° é¦–å­—æ¯å¤§å†™</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'aaa bbb ccc'</span> <span class="comment">// Aaa Bbb Ccc</span></span><br><span class="line"><span class="keyword">var</span> result = str.replace(<span class="regexp">/[a-z]+/g</span>, <span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123; <span class="comment">// xä¸ºåŒ¹é…åˆ°çš„çš„ç»„</span></span><br><span class="line">  <span class="keyword">return</span> x.substr(<span class="number">0</span>, <span class="number">1</span>).toUpperCase() + x.substr(<span class="number">1</span>) <span class="comment">// æœ€åè¦å°† x è¿”å›å‡ºå»</span></span><br><span class="line">&#125;) </span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(result)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>jsä¸­æ­£åˆ™ç›¸å…³çš„æ–¹é¢</title>
      <link href="/2019/06/12/%E6%AD%A3%E5%88%99%E7%9B%B8%E5%85%B3/"/>
      <url>/2019/06/12/%E6%AD%A3%E5%88%99%E7%9B%B8%E5%85%B3/</url>
      
        <content type="html"><![CDATA[<h4 id="æ¯”è¾ƒåŸºç¡€çš„ç”¨æ³•"><a href="#æ¯”è¾ƒåŸºç¡€çš„ç”¨æ³•" class="headerlink" title="æ¯”è¾ƒåŸºç¡€çš„ç”¨æ³•"></a>æ¯”è¾ƒåŸºç¡€çš„ç”¨æ³•</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ­£åˆ™åmatchçš„ç»“æœæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸² gæ˜¯å…¨å±€æ›¿æ¢ å¦åˆ™ä»–åŒ¹é…åˆ°ç¬¬ä¸€ä¸ªå°±åœä¸‹æ¥äº†</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'abc666'</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/^a.*6$/g</span>) <span class="comment">// ^è¡¨ç¤ºä¸¥æ ¼å¼€å¤´  $è¡¨ç¤ºä¸¥æ ¼ç»“å°¾ [ "abc666" ]</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'6^1a'</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/\^1a/g</span>) <span class="comment">//  [ "^1a" ] å¯¹å…³é”®è¯è¿›è¡Œè½¬ä¹‰ </span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'   hello world  '</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/(^\s+)|(\s+$)/</span>) <span class="comment">// åŒ¹é…å‰åçš„ç©ºæ ¼ [ "    ", "  "]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'php'</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/p.p/</span>) <span class="comment">// .è¡¨ç¤ºä»»æ„å­—ç¬¦ ä¸€ä¸ªç‚¹è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ [ "php" ]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'phahsp'</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/p.*p/</span>) <span class="comment">// .*è¡¨ç¤ºä»»æ„çš„å­—ç¬¦ä¸² [ "phahsp" ]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'pha_hsp'</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/p\w*p/g</span>) <span class="comment">// \wè¡¨ç¤º å­—æ¯ æ•°å­— ä¸‹åˆ’çº¿ [ "pha_hsp" ]</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'p*@ #*-+p'</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/p\W*p/g</span>) <span class="comment">// \Wè¡¨ç¤º éå­—æ¯ éæ•°å­— éä¸‹åˆ’çº¿ [ "p*@ #*-+p" ]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'hello123456666aas5474xc'</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/\d/g</span>) <span class="comment">// \d è¡¨ç¤ºä¹Ÿç»™æ•°å­— [ "1", "2", "3", "4", "5", "6", "6", "6", "6", "5", â€¦ ]</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/\d+/g</span>) <span class="comment">// è´ªå©ªæ¨¡å¼ï¼Œä¼šä¸€ç›´åŒ¹é…ä¸‹å» [ "123456666", "5474" ]</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/\D+/g</span>) <span class="comment">// \D è¡¨ç¤ºéæ•°å­— [ "hello", "aas", "xc" ]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'abcd nihao 666 zhn'</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/\bn.*/g</span>) <span class="comment">// \b è¡¨ç¤ºåŒ¹é…è¾¹ç•Œ ä»¥å¼€å¤´  ä½¿ç”¨ç©ºæ ¼åšä¾æ® [ "nihao 666 zhn" ]</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/\bn.*o/g</span>) <span class="comment">// [ "nihao" ]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å‰©ä¸‹æŸ¥é˜…é…ç½®æ‰‹å†Œå³å¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* åˆ†ç»„çš„ä½¿ç”¨ */</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'1111, 1212, 1331 1344'</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/\d\d\d\d/g</span>) <span class="comment">// æŸ¥æ‰¾å››ä¸ªæ•°å­— [ "1111", "1212", "1331" ]</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/(\d)(\d)\1\2/g</span>) <span class="comment">// åŒ¹é…ä½¿ç”¨ \1 [ "1111", "1212" ]</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/(\d)(?:\d)(\d)\2/g</span>) <span class="comment">// åŒ¹é…ä½¿ç”¨ ç¦æ­¢ä½¿ç”¨æ­¤åˆ†ç»„ ?: [ "1111", "1344" ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* æ–­è¨€/ç¯è§† */</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'java11 and es6'</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/[A-z]+(?=\d)/g</span>) <span class="comment">// åé™åˆ¶,ä½†æ˜¯è‡ªå·±ä¸ä¼šè¢«è¾“å‡º [ "java", "es" ] </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'12sda4716'</span></span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/(?!^\d+\$)^[0-9a-zA-Z]+$/g</span>) <span class="comment">// å‰è¡¨èŒƒå›´ ä¸èƒ½åªæ˜¯æ•°å­—çš„æƒ…å†µä¸‹ æ»¡è¶³[0-9a-zA-Z]+å³ï¼Œ   [ "12sda4716" ]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(result)</span><br></pre></td></tr></table></figure><h4 id="å‡½æ•°æ–¹æ³•ç›¸å…³"><a href="#å‡½æ•°æ–¹æ³•ç›¸å…³" class="headerlink" title="å‡½æ•°æ–¹æ³•ç›¸å…³"></a>å‡½æ•°æ–¹æ³•ç›¸å…³</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*RegExp test æ­£åˆ™è¡¨è¾¾å¼çš„æ–¹æ³• */</span></span><br><span class="line"><span class="keyword">var</span> res = <span class="regexp">/abc/g</span>.test(<span class="string">'abc'</span>) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*RegExp exec æ­£åˆ™è¡¨è¾¾å¼çš„æ–¹æ³• */</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'1111 1122 3434 5678 8989'</span></span><br><span class="line"><span class="keyword">var</span> r = <span class="regexp">/(\d)\d\1\d/g</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¼šæœ‰è¿ç»­æ€§</span></span><br><span class="line"><span class="keyword">var</span> i = r.lastIndex <span class="comment">// å‰ä¸€æ¬¡åŒ¹é…çš„ä½ç½® 0</span></span><br><span class="line"><span class="keyword">var</span> res = r.exec(str) <span class="comment">// [ "1111", "1" ]  '1111'æ˜¯åŒ¹é…çš„ç»“æœ  '1'æ˜¯åˆ†ç»„çš„ä¿¡æ¯</span></span><br><span class="line"><span class="built_in">console</span>.log(i, res) <span class="comment">// 0 [ "1111", "1" ]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> i = r.lastIndex  <span class="comment">// ä¸Šä¸€æ¬¡åŒ¹é…çš„ç»“æŸä½ç½® 4</span></span><br><span class="line"><span class="keyword">var</span> res = r.exec(str) <span class="comment">// [ "3434", "3" ]</span></span><br><span class="line"><span class="built_in">console</span>.log(i, res) <span class="comment">// 4 [ "3434", "3" ] </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*String  replaceçš„æ–¹æ³• */</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'helli world'</span> </span><br><span class="line"><span class="keyword">var</span> result = str.replace(<span class="string">'l'</span>, <span class="string">'L'</span>) <span class="comment">// heLli world åªæ›¿æ¢ä¸€å¤„</span></span><br><span class="line"><span class="keyword">var</span> result = str.replace(<span class="regexp">/l/</span>, <span class="string">'L'</span>) <span class="comment">// heLli world</span></span><br><span class="line"><span class="keyword">var</span> result = str.replace(<span class="regexp">/l/g</span>, <span class="string">'L'</span>) <span class="comment">// heLLi worLd å…¨å±€æ›¿æ¢/g</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å€ŸåŠ©å­è¡¨è¾¾å¼ 12345 - 12[12-3-45]45</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'12345'</span></span><br><span class="line"><span class="keyword">var</span> result = str.replace(<span class="regexp">/(3)/g</span>, <span class="string">"[$`-$1-$']"</span>) <span class="comment">// $` åŒ¹é…å·¦ä¾§çš„éƒ¨åˆ†  $' åŒ¹é…å³ä¾§çš„éƒ¨åˆ†</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'1234567'</span></span><br><span class="line"><span class="keyword">var</span> result = str.replace(<span class="regexp">/(2).(4).(6)/g</span>, <span class="string">"[$`-$2-$']"</span>) <span class="comment">// 1[1-4-7]7 æ•´ä¸ªåˆ†ç»„å·¦å³</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å»é™¤æ±‰å­—ç›¸åŒçš„éƒ¨åˆ†</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">"è¿™è¿™è¿™è¿™ä¸¸ä¸¸ä¸¸å­å¤šå¤šå¤šå¤šå¤šå¤šå°‘é’±ä¸€ä¸€ä¸€ä¸€æ–¤"</span></span><br><span class="line"><span class="keyword">var</span> result = str.replace(<span class="regexp">/([\u4e00-\u9fa5])\1*/g</span>, <span class="string">'$1'</span>) <span class="comment">//æ€§èƒ½ç•¥å·®ï¼Œæ‰€æœ‰éƒ½è¦åŒ¹é… å­ï¼Œå°‘ï¼Œé’±ä¹Ÿæ›¿æ¢äº†ï¼ˆå­ -&gt; å­ï¼‰ è¿™ä¸¸å­å¤šå°‘é’±ä¸€æ–¤</span></span><br><span class="line"><span class="keyword">var</span> result = str.replace(<span class="regexp">/([\u4e00-\u9fa5])\1+/g</span>, <span class="string">'$1'</span>) <span class="comment">//æ€§èƒ½ç•¥å¥½ï¼Œå­ï¼Œå°‘ï¼Œé’±æ ¹æœ¬å°±æ²¡åŒ¹é…åˆ°ï¼ˆä¸æ»¡è¶³\1+ï¼‰ è¿™ä¸¸å­å¤šå°‘é’±ä¸€æ–¤</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å€ŸåŠ©æ›¿æ¢å‡½æ•° é¦–å­—æ¯å¤§å†™</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'aaa bbb ccc'</span> <span class="comment">// Aaa Bbb Ccc</span></span><br><span class="line"><span class="keyword">var</span> result = str.replace(<span class="regexp">/[a-z]+/g</span>, <span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123; <span class="comment">// xä¸ºåŒ¹é…åˆ°çš„çš„ç»„</span></span><br><span class="line">  <span class="keyword">return</span> x.substr(<span class="number">0</span>, <span class="number">1</span>).toUpperCase() + x.substr(<span class="number">1</span>) <span class="comment">// æœ€åè¦å°† x è¿”å›å‡ºå»</span></span><br><span class="line">&#125;) </span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(result)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ç©¿è¶Šæ—¶ç©ºçš„ä¿¡</title>
      <link href="/2019/06/12/%E7%A9%BF%E8%B6%8A%E6%97%B6%E7%A9%BA%E7%9A%84%E4%BF%A1/"/>
      <url>/2019/06/12/%E7%A9%BF%E8%B6%8A%E6%97%B6%E7%A9%BA%E7%9A%84%E4%BF%A1/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å¦‚æœæŠŠæ¥æ‰¾æˆ‘å’¨è¯¢çš„äººæ¯”å–»æˆè¿·é€”çš„ç¾”ç¾Šï¼Œé€šå¸¸ä»–ä»¬çš„æ‰‹ä¸Šéƒ½æœ‰åœ°å›¾ï¼Œå´æ²¡æœ‰çœ‹ï¼Œæˆ–æ˜¯ä¸çŸ¥é“è·¯åœ¨å“ªé‡Œã€‚</p></blockquote><p>ä¸œé‡åœ­å¾è€å…ˆç”Ÿè‘—çš„ã€Šè§£å¿§æ‚è´§åº—ã€‹ï¼Œæ•…äº‹çœ‹ä¼¼ç‹¬ç«‹ï¼Œå´åˆç©¿æ’å…¶ä¸­ï¼Œæœ€åä¸€å¹•çœŸçš„æ˜¯éœ‡æƒŠåˆ°äº†æˆ‘ï¼Œç©¿è¶Šæ—¶ç©ºçš„è¿æ¥ï¼Œå´è¿‘åœ¨çœ¼å‰ï¼Œæ¯ä¸ªäººæˆ–è®¸éƒ½æœ‰ä¸€ä¸ªå°ç‰›å¥¶ç®±ï¼Œæˆ‘æƒ³è¿™é›¶æ˜Ÿçš„æ¸©æš–ï¼Œå¯¹æˆ‘ä»¬æ¥è¯´ï¼Œå°±å·²ç»è¶³å¤Ÿäº†ã€‚</p><p>ä¹‹å‰ä»¥ä¸ºè‡ªå·±æˆ–è®¸ä¸çˆ±çœ‹ä¹¦ï¼Œä¸€ç›´å¼•ä»¥ä¸ºå‚²ï¼Œæˆ–è®¸æ˜¯è¯¥é™ä¸‹å¿ƒæ¥ï¼Œå»ä»åˆ«äººçš„ç”Ÿæ´»ä¸­ç…§äº®åˆ°è‡ªå·±çš„å½±å­ã€‚</p><blockquote><p> å¯æ˜¯æ¢ä¸ªè§’åº¦æ¥çœ‹ï¼Œæ­£å› ä¸ºæ˜¯ä¸€å¼ ç™½çº¸ï¼Œæ‰å¯ä»¥éšå¿ƒæ‰€æ¬²çš„æç»˜åœ°å›¾ï¼Œä¸€åˆ‡å°½åœ¨ä½ è‡ªå·±ï¼Œå¯¹ä½ æ¥è¯´ï¼Œä¸€åˆ‡éƒ½æ˜¯è‡ªç”±ï¼Œåœ¨ä½ é¢å‰æ˜¯æ— é™çš„å¯èƒ½ï¼Œè¿™å¯æ˜¯å¾ˆæ£’çš„äº‹å•Šï¼Œæˆ‘è¡·å¿ƒçš„ç¥ˆç¥·ä½ å¯ä»¥ç›¸ä¿¡è‡ªå·±ï¼Œæ— æ‚”çš„ç‡ƒçƒ§è‡ªå·±çš„äººç”Ÿã€‚  </p></blockquote><p>æˆ–è®¸è¿™å°±æ˜¯æµªçŸ¢æ‚è´§åº—çš„é­…åŠ›æ‰€åœ¨ï¼Œæˆ–è®¸è¿™æ­£ä¹Ÿæ˜¯é˜…è¯»çš„é­…åŠ›å§ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> å¿ƒæƒ… </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>promiseä¸­é“¾å¼è°ƒç”¨thençš„é—®é¢˜</title>
      <link href="/2019/06/11/promise%E4%B8%AD%E9%93%BE%E5%BC%8F%E8%B0%83%E7%94%A8then%E7%9A%84%E9%97%AE%E9%A2%98/"/>
      <url>/2019/06/11/promise%E4%B8%AD%E9%93%BE%E5%BC%8F%E8%B0%83%E7%94%A8then%E7%9A%84%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<blockquote><p>promiseæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³å¼‚æ­¥è°ƒç”¨çš„æ–¹æ³•ï¼Œå…¶é“¾å¼è°ƒç”¨ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ–¹å¼ï¼Œè¿™é‡Œæ¢ç©¶ä¸€ä¸‹å…¶è°ƒç”¨è¿‡ç¨‹</p></blockquote><h4 id="ä¸»è¦é—®é¢˜"><a href="#ä¸»è¦é—®é¢˜" class="headerlink" title="ä¸»è¦é—®é¢˜"></a>ä¸»è¦é—®é¢˜</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.resolve()</span><br><span class="line">.then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>()  </span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.resolve()</span><br><span class="line">.then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">Promise</span>()  </span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸Šä¸‹ä¸¤ç§Promiseçš„æ–¹å¼ä¸­ï¼Œ æ˜¯å¦ä¼šè¿›è¡Œä¸‹å»ï¼Œ</span></span><br><span class="line"><span class="comment">//ä»¥åŠæ–°äº§ç”Ÿçš„promiseæ˜¯å¦ä¼šè¢«ä¼ é€’ä¸‹å»,æˆ–è€…è¯´æœ‰ä»€ä¹ˆä¸åŒ</span></span><br></pre></td></tr></table></figure><h4 id="æµ‹è¯•ä»£ç "><a href="#æµ‹è¯•ä»£ç " class="headerlink" title="æµ‹è¯•ä»£ç "></a>æµ‹è¯•ä»£ç </h4><p><em>æ¯ä¸€å¥æ‰“å°åé¢éƒ½è¾“å‡ºäº†æ—¶é—´æˆ³ï¼Œæ˜¯ä¸ºäº†æ›´å¥½æè¿°è¿è¡Œé¡ºåº</em><br>æµ‹è¯•ä»£ç ç›´æ¥è´´åœ¨ä¸‹æ–¹ï¼Œå¯ä»¥æ‹¿åˆ°æµè§ˆå™¨ä¸­è¿›è¡Œæµ‹è¯•æŸ¥çœ‹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br></pre></td><td class="code"><pre><span class="line">;(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// fn1()</span></span><br><span class="line">  <span class="comment">// fn1_1()</span></span><br><span class="line">  <span class="comment">// fn2()</span></span><br><span class="line">  <span class="comment">// fn3()</span></span><br><span class="line">  <span class="comment">// fn4()</span></span><br><span class="line">  <span class="comment">// fn5()</span></span><br><span class="line">  <span class="comment">// fn6()</span></span><br><span class="line">  <span class="comment">// fn7()</span></span><br><span class="line">  <span class="comment">// fn8()</span></span><br><span class="line">  <span class="comment">// fn9()</span></span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'start'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'11111'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">    </span><br><span class="line">  &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'22222'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">    </span><br><span class="line">  &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'33333'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line"></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'end'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  start 1560165694777</span></span><br><span class="line"><span class="comment">  11111 1560165694787</span></span><br><span class="line"><span class="comment">  end 1560165694790</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1_1</span> (<span class="params"></span>) </span>&#123; </span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'start'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'11111'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">    resolve()</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'11111-1111'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">  &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'22222'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">    </span><br><span class="line">  &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'33333'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line"></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'end'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  start 1560166834093</span></span><br><span class="line"><span class="comment">  11111 1560166834106</span></span><br><span class="line"><span class="comment">  11111-1111 1560166834108</span></span><br><span class="line"><span class="comment">  end 1560166834110</span></span><br><span class="line"><span class="comment">  22222 1560166834115</span></span><br><span class="line"><span class="comment">  33333 1560166834119</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">é€šè¿‡å‰ fn1, fn1_1 ä¸¤ä¸ªå°ä¾‹å­å¯çŸ¥ï¼Œæœ€å¼€å§‹çš„new Promiseå¯èƒ½å¯¹æˆ‘ä»¬è¿›è¡Œå¹²æ‰°ï¼Œ</span></span><br><span class="line"><span class="comment">å‡ºç°è¿™ç§çŠ¶å†µçš„åŸå› æ˜¯ï¼Œç”³æ˜ new Promiseçš„æ—¶å€™æ­¤æ—¶å¼‚æ­¥è¿˜æœªå¼€å§‹ï¼Œæ‰€ä»¥æˆ‘ä»¬</span></span><br><span class="line"><span class="comment">ç›´æ¥æŒ‰ç…§æ¥ä¸‹æ¥çš„æ–¹å¼è¿›è¡Œæµ‹è¯•</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn2</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'start'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">  <span class="built_in">Promise</span>.resolve()</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'11111'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">    </span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'22222'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">    </span><br><span class="line">  &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'33333'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line"></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'end'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  start 1560166657107</span></span><br><span class="line"><span class="comment">  end 1560166657117</span></span><br><span class="line"><span class="comment">  11111 1560166657120</span></span><br><span class="line"><span class="comment">  22222 1560166657122</span></span><br><span class="line"><span class="comment">  33333 1560166657130</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn3</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'start'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">  <span class="built_in">Promise</span>.resolve()</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'11111'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">    </span><br><span class="line">  &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'22222'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="string">'2222error'</span>)</span><br><span class="line">    </span><br><span class="line">  &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'33333'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line"></span><br><span class="line">  &#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'end'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  start 1560166779524</span></span><br><span class="line"><span class="comment">  end 1560166779533</span></span><br><span class="line"><span class="comment">  11111 1560166779537</span></span><br><span class="line"><span class="comment">  22222 1560166779539</span></span><br><span class="line"><span class="comment">  2222error 1560166779543</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">é€šè¿‡ fn3 è¿™ä¸ªä¾‹å­çŸ¥é“äº†ï¼Œåªè¦åœ¨è°ƒç”¨è¿‡ç¨‹ä¸­ï¼Œè¿”å›äº†ä¸€ä¸ªPromiseçš„rejectçŠ¶æ€å°±ä¼šç»“æŸä¸‹å»</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn4</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'start'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">  <span class="built_in">Promise</span>.resolve()</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'11111'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123; <span class="built_in">console</span>.log(<span class="string">'inner Promise'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())&#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'22222'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">    </span><br><span class="line">  &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'33333'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line"></span><br><span class="line">  &#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'end'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  start 1560167538395</span></span><br><span class="line"><span class="comment">  end 1560167538407</span></span><br><span class="line"><span class="comment">  11111 1560167538409</span></span><br><span class="line"><span class="comment">  inner Promise 1560167538414</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">é€šè¿‡ fn4 è¿™ä¸ªä¾‹å­ï¼Œå¦‚æœè°ƒç”¨é“¾ä¸­è¿”å›ä¸€ä¸ªpendingï¼Œ</span></span><br><span class="line"><span class="comment">ä»–ä¹Ÿä¼šç­‰å¾…ï¼ˆPromiseåˆ›å»ºå‡ºæ¥å°±æ˜¯pendingçŠ¶æ€ï¼‰,</span></span><br><span class="line"><span class="comment">ä»–æ—¢æ²¡æœ‰reject,ä¹Ÿæ²¡æœ‰resovleã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">åˆ°ç›®å‰ï¼Œä¸€å…±æœ‰ä¸¤ç§æ–¹å¼ä¼šé˜»æ­¢é“¾å¼ï¼Œ </span></span><br><span class="line"><span class="comment">â‘  è¿”å›äº†ä¸€ä¸ªrejectçš„Promise   </span></span><br><span class="line"><span class="comment">â‘¡ è¿”å›penddingçŠ¶æ€çš„Promsie</span></span><br><span class="line"><span class="comment">å…¶ä½™çš„æƒ…å†µéƒ½ä¼šç•…é€šæ— é˜»çš„è¿è¡Œä¸‹å»(å‰æç›´æ¥å°±åœ¨è°ƒç”¨é“¾ä¸­äº†)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn5</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'start'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">  <span class="built_in">Promise</span>.resolve()</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'11111'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">    </span><br><span class="line">  &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'22222'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">    <span class="built_in">Promise</span>.reject(<span class="string">'2222error'</span>)  </span><br><span class="line">    </span><br><span class="line">  &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'33333'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line"></span><br><span class="line">  &#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'end'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  start 1560166933856</span></span><br><span class="line"><span class="comment">  end 1560166933865</span></span><br><span class="line"><span class="comment">  11111 1560166933869</span></span><br><span class="line"><span class="comment">  22222 1560166933873</span></span><br><span class="line"><span class="comment">  33333 1560166933874</span></span><br><span class="line"><span class="comment">  (node:8196) UnhandledPromiseRejectionWarning: 2222error</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">é€šè¿‡ fn5 è¿™ä¸ªä¾‹å­ï¼Œå…¶å®é‚£ä¸ªæ–°åˆ›å»ºçš„Promise,å¹¶ä¸å±äºè¿™ä¸ªè°ƒç”¨é“¾ï¼Œæˆ‘ä»¬æ¥ç€å‘ä¸‹éªŒè¯</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn6</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'start'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">  <span class="built_in">Promise</span>.resolve()</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'11111'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">    </span><br><span class="line">  &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'22222'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">    <span class="built_in">Promise</span>.reject(<span class="string">'2222error'</span>).then().catch(<span class="function"><span class="params">err</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'inner'</span> + err, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()))  </span><br><span class="line">    </span><br><span class="line">  &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'33333'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line"></span><br><span class="line">  &#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'end'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  start 1560167831274</span></span><br><span class="line"><span class="comment">  end 1560167831292</span></span><br><span class="line"><span class="comment">  11111 1560167831296</span></span><br><span class="line"><span class="comment">  22222 1560167831301</span></span><br><span class="line"><span class="comment">  33333 1560167831307</span></span><br><span class="line"><span class="comment">  inner2222error 1560167831316</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">é€šè¿‡ fn6 æˆ‘ä»¬å·²ç»çŸ¥é“äº†åœ¨è°ƒç”¨é“¾ä¸­ï¼Œå¦‚æœreturn å‡ºä¸€ä¸ªPromiseï¼Œé‚£ä¹ˆ</span></span><br><span class="line"><span class="comment">å®ƒå°†å±äºæ­¤è°ƒç”¨é“¾ï¼Œå¦åˆ™å°±ä¼šæœ‰ä»–è‡ªå·±çš„ä¸€ä¸ªè°ƒç”¨é“¾</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">timeout</span>(<span class="params">ms</span>) </span>&#123; <span class="comment">// è¿™é‡Œæ¨¡æ‹Ÿä¸€ä¸ªå¼‚æ­¥æ“ä½œ</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">    setTimeout(resolve, ms);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn7</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'start'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">  <span class="built_in">Promise</span>.resolve()</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'11111'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">    <span class="keyword">return</span> timeout(<span class="number">500</span>)</span><br><span class="line">    </span><br><span class="line">  &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'22222'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">    <span class="keyword">return</span> timeout(<span class="number">500</span>)</span><br><span class="line">    </span><br><span class="line">  &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'33333'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">    <span class="keyword">return</span> timeout(<span class="number">500</span>)</span><br><span class="line">    </span><br><span class="line">  &#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">    <span class="keyword">return</span> timeout(<span class="number">500</span>)</span><br><span class="line"></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'end'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  start 1560167223744</span></span><br><span class="line"><span class="comment">  end 1560167223759</span></span><br><span class="line"><span class="comment">  11111 1560167223764</span></span><br><span class="line"><span class="comment">  22222 1560167224274</span></span><br><span class="line"><span class="comment">  33333 1560167224779</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn8</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'start'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">  <span class="built_in">Promise</span>.resolve()</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'11111'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">    timeout(<span class="number">500</span>)</span><br><span class="line">    </span><br><span class="line">  &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'22222'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">    timeout(<span class="number">500</span>)</span><br><span class="line">    </span><br><span class="line">  &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'33333'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">    timeout(<span class="number">500</span>)</span><br><span class="line">    </span><br><span class="line">  &#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">    timeout(<span class="number">500</span>)</span><br><span class="line"></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'end'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  start 1560168006937</span></span><br><span class="line"><span class="comment">  end 1560168006951</span></span><br><span class="line"><span class="comment">  11111 1560168006954</span></span><br><span class="line"><span class="comment">  22222 1560168006961</span></span><br><span class="line"><span class="comment">  33333 1560168006966</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn9</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'start'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">  <span class="built_in">Promise</span>.resolve()</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'11111'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">    timeout(<span class="number">500</span>).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123; <span class="built_in">console</span>.log(<span class="string">'inner11111'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()) &#125;)</span><br><span class="line">    </span><br><span class="line">  &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'22222'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">    timeout(<span class="number">500</span>).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123; <span class="built_in">console</span>.log(<span class="string">'inner22222'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()) &#125;)</span><br><span class="line">    </span><br><span class="line">  &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'33333'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">    timeout(<span class="number">500</span>).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123; <span class="built_in">console</span>.log(<span class="string">'inner33333'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()) &#125;)</span><br><span class="line">    </span><br><span class="line">  &#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">    timeout(<span class="number">500</span>).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123; <span class="built_in">console</span>.log(<span class="string">'inner44444'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()) &#125;)</span><br><span class="line"></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'end'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime())</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  start 1560168109766</span></span><br><span class="line"><span class="comment">  end 1560168109775</span></span><br><span class="line"><span class="comment">  11111 1560168109778</span></span><br><span class="line"><span class="comment">  22222 1560168109781</span></span><br><span class="line"><span class="comment">  33333 1560168109785</span></span><br><span class="line"><span class="comment">  inner11111 1560168110281</span></span><br><span class="line"><span class="comment">  inner22222 1560168110288</span></span><br><span class="line"><span class="comment">  inner33333 1560168110291</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">æœ€åé€šè¿‡ fn7, fn8, fn9 è¿™ä¸‰ä¸ªä¾‹å­ä¸­ï¼Œä»¥åŠä¼ å…¥çš„æ—¶é—´ï¼Œ</span></span><br><span class="line"><span class="comment">ç¡®å®å°è¯äº†ä¹‹å‰æ‰€è¯´çš„ï¼Œè¿™é‡Œç”¨ä¸€å‰¯å›¾è¿›è¡Œä»£æ›¿ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">æ‰€ä»¥æœ€ä¸ºå…³é”®çš„å°±æ˜¯ï¼Œåœ¨Promiseçš„è°ƒç”¨é“¾ä¸­ï¼Œå…³é”®è¦æ˜ç™½ä½ æ–°äº§ç”Ÿçš„è¿™ä¸ª Promsie</span></span><br><span class="line"><span class="comment">æ˜¯å¦æ·»åŠ åˆ°äº†è¿™ä¸ªè°ƒç”¨é“¾ä¸­</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h4 id="æ€»ç»“å›¾ç¤º"><a href="#æ€»ç»“å›¾ç¤º" class="headerlink" title="æ€»ç»“å›¾ç¤º"></a>æ€»ç»“å›¾ç¤º</h4><p><img src="/img/2019/06/11/1.png" alt="Promiseè°ƒç”¨é“¾"></p>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>äº‘å‡½æ•°ä¸­ç”Ÿæˆexcelå¹¶ä¸”ä¸Šä¼ åˆ°äº‘å­˜å‚¨ä¸­</title>
      <link href="/2019/06/05/%E4%BA%91%E5%87%BD%E6%95%B0%E4%B8%AD%E7%94%9F%E6%88%90excel%E5%B9%B6%E4%B8%94%E4%B8%8A%E4%BC%A0%E5%88%B0%E4%BA%91%E5%AD%98%E5%82%A8%E4%B8%AD/"/>
      <url>/2019/06/05/%E4%BA%91%E5%87%BD%E6%95%B0%E4%B8%AD%E7%94%9F%E6%88%90excel%E5%B9%B6%E4%B8%94%E4%B8%8A%E4%BC%A0%E5%88%B0%E4%BA%91%E5%AD%98%E5%82%A8%E4%B8%AD/</url>
      
        <content type="html"><![CDATA[<blockquote><p>äº‘ç¯å¢ƒ1.0.51</p></blockquote><p>å°ç¨‹åºçš„äº‘å¼€å‘åŠŸèƒ½ä¸ºæˆ‘ä»¬å¸¦æ¥äº†å¾ˆå¤§çš„æ–¹ä¾¿ï¼Œäºæ˜¯å°±æ‰“ç®—ç ”ç©¶ä¸€ä¸‹å¦‚ä½•åœ¨äº‘å‡½æ•°ä¸­æ‹‰å–æ•°æ®ï¼Œä¹‹åç”Ÿæˆexcelåˆ°äº‘å­˜å‚¨ä¸­ï¼Œè¿‡ç¨‹ä¸­è¸©äº†äº›å‘ï¼Œè¿™é‡Œåˆ†äº«ç»™å¤§å®¶ï¼Œå¸Œæœ›èƒ½æœ‰æ‰€å¸®åŠ©ã€‚</p><h4 id="é¦–å…ˆäº†è§£ä¸€ä¸ªnodeç”Ÿæˆexcelçš„åº“excel-export"><a href="#é¦–å…ˆäº†è§£ä¸€ä¸ªnodeç”Ÿæˆexcelçš„åº“excel-export" class="headerlink" title="é¦–å…ˆäº†è§£ä¸€ä¸ªnodeç”Ÿæˆexcelçš„åº“excel-export"></a>é¦–å…ˆäº†è§£ä¸€ä¸ªnodeç”Ÿæˆexcelçš„åº“<a href="https://github.com/functionscope/Node-Excel-Export" target="_blank" rel="noopener">excel-export</a></h4><p><em>è™½ç„¶å·²ç»è®¸ä¹…æœªæ›´æ–°äº†ï¼Œä½†æ˜¯ç›®å‰è¿˜æ²¡æœ‰ä»€ä¹ˆå¤ªå¤§çš„é—®é¢˜ï¼Œæ‰€ä»¥åœ¨ä»–çš„åŸºç¡€ä¸Šè¿›è¡Œå¼€å‘,å¹¶ä¸”ä¸Šæ‰‹ä¹Ÿæ¯”è¾ƒå®¹æ˜“</em></p><h4 id="ä¸»è¦ç”¨æ³•"><a href="#ä¸»è¦ç”¨æ³•" class="headerlink" title="ä¸»è¦ç”¨æ³•"></a>ä¸»è¦ç”¨æ³•</h4><ol><li><p>å¼•å…¥</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> nodeExcel = <span class="built_in">require</span>(<span class="string">'excel-export'</span>);</span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºé…ç½®å¯¹è±¡</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> conf = &#123;</span><br><span class="line">  stylesXmlFile, <span class="comment">// çº¦æŸæ–‡ä»¶ï¼ˆä¸ç„¶ç”Ÿæˆçš„excelæ‰“å¼€ä¼šæŠ¥ä¸€äº›é—®é¢˜ï¼‰</span></span><br><span class="line">  cols,          <span class="comment">// å¯ç†è§£ä¸ºè¡¨å¤´  [&#123; caption: 'columnName', type: 'string' &#125;], è¿™é‡Œå‡ºäºæ–¹ä¾¿,typeä¸ºstring,å…·ä½“å¯ç§»æ­¥å…¶æ–‡æ¡£æŸ¥çœ‹</span></span><br><span class="line">  rows,          <span class="comment">// å¯ä»¥ç†è§£ä¸ºå¡«å……çš„æ•°æ® ['wechat', 'mp']</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºæµå¯¹è±¡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let result = nodeExcel.execute(conf)</span><br><span class="line">// æ™®é€šnodeåç«¯å¯ä»¥ç›´æ¥ä½¿ç”¨ res.end(result, &apos;binary&apos;); è¿›è¡Œä¸‹è½½ï¼Œè¦è®°å¾—æ·»åŠ ç›¸åº”çš„å¤´ï¼Œå…¶æ–‡æ¡£é‡Œä¹Ÿæœ‰è¯´æ˜</span><br><span class="line">// æœ€ç»ˆå¯ä»¥ä½¿ç”¨ Buffer.from(result.toString(), &apos;binary&apos;) è½¬æ¢ä¸ºä¸€ä¸ªBufferå¯¹è±¡</span><br></pre></td></tr></table></figure></li></ol><h4 id="åµŒå…¥äº‘å¼€å‘"><a href="#åµŒå…¥äº‘å¼€å‘" class="headerlink" title="åµŒå…¥äº‘å¼€å‘"></a>åµŒå…¥äº‘å¼€å‘</h4><p>å¤§è‡´çš„æ€è·¯å°±æ˜¯ [æ‹‰å–æ•°æ®] -&gt; [ç”Ÿæˆexcelæµå¯¹è±¡] -&gt; [ä¸Šä¼ åˆ°äº‘å­˜å‚¨ä¸­] -&gt; [è¿”å›è¯¥fileID]</p><h5 id="å‡ ä¸ªè¸©å‘ç‚¹"><a href="#å‡ ä¸ªè¸©å‘ç‚¹" class="headerlink" title="å‡ ä¸ªè¸©å‘ç‚¹"></a>å‡ ä¸ªè¸©å‘ç‚¹</h5><ol><li>è¯»å…¥æ–‡ä»¶è¦ä½¿ç”¨ <code>path.resolve(__dirname, &#39;xxx&#39;)</code></li><li>å¾—åˆ°excelæµå¯¹è±¡ ä½¿ç”¨ <code>Buffer.from(result.toString(), &#39;binary&#39;)</code> å†é…åˆ<code>cloud.uploadFile</code></li><li>ç”Ÿæˆæ—¶confè¦é…ç½®<code>stylesXmlFile</code>,ä¸ç„¶æ‰“å¼€æ–‡ä»¶æ€»æœ‰ä¸ªæç¤ºï¼Œå¾ˆä¸çˆ½!,<code>styles.xml</code>è¿™ä¸ªæ–‡ä»¶å¯ä»¥åœ¨<code>node_modules/excel-export/example/styles.xml</code>æ‰¾åˆ°ã€‚</li><li>æ•°æ®å’Œè¡¨å¤´æœ€å¥½æ˜¯å¯¹åº”çš„ï¼Œæ•°æ®ä¹Ÿå¯ä»¥å­˜åœ¨ç©ºå€¼</li></ol><h4 id="äº‘å‡½æ•°ç›®å½•ç»“æ„"><a href="#äº‘å‡½æ•°ç›®å½•ç»“æ„" class="headerlink" title="äº‘å‡½æ•°ç›®å½•ç»“æ„"></a>äº‘å‡½æ•°ç›®å½•ç»“æ„</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- testDownload</span><br><span class="line">- |- index.js</span><br><span class="line">- |- styles.xml</span><br><span class="line">- |- package.json</span><br><span class="line">- |- package-lock.json</span><br><span class="line">- |- node_modules (åœ¨å¼€å‘å·¥å…·ä¸­åº”è¯¥æ˜¯ä¸æ˜¾ç¤ºçš„)</span><br></pre></td></tr></table></figure><h4 id="package-jsonä¸­çš„ä¾èµ–"><a href="#package-jsonä¸­çš„ä¾èµ–" class="headerlink" title="package.jsonä¸­çš„ä¾èµ–"></a>package.jsonä¸­çš„ä¾èµ–</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">"dependencies": &#123;</span><br><span class="line">  "excel-export": "^0.5.1",</span><br><span class="line">  "wx-server-sdk": "latest"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="index-jsæ–‡ä»¶ä»£ç "><a href="#index-jsæ–‡ä»¶ä»£ç " class="headerlink" title="index.jsæ–‡ä»¶ä»£ç "></a>index.jsæ–‡ä»¶ä»£ç </h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// äº‘å‡½æ•°å…¥å£æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">const</span> cloud = <span class="built_in">require</span>(<span class="string">'wx-server-sdk'</span>)</span><br><span class="line"><span class="keyword">const</span> nodeExcel = <span class="built_in">require</span>(<span class="string">'excel-export'</span>)</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"></span><br><span class="line">cloud.init(&#123;</span><br><span class="line">  env: <span class="string">"xxxx"</span>   <span class="comment">// ä½ çš„ç¯å¢ƒ</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> db = cloud.database()</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”Ÿæˆåˆ†æ•°é¡¹å¹¶ä¸”ä¸‹è½½å¯¹åº”çš„excel</span></span><br><span class="line">exports.main = <span class="keyword">async</span> (event, context) =&gt; &#123;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">let</span> collectionId = <span class="string">'123666'</span>                 <span class="comment">// æ¨¡æ‹Ÿçš„é›†åˆå</span></span><br><span class="line">  <span class="keyword">let</span> openId = <span class="string">'sda6248daa888764'</span>             <span class="comment">// æ¨¡æ‹Ÿopenid</span></span><br><span class="line">  <span class="keyword">let</span> confParams = [<span class="string">'å§“å'</span>, <span class="string">'å­¦å·'</span>, <span class="string">'ç­¾åˆ°æ—¶é—´'</span>] <span class="comment">// æ¨¡æ‹Ÿè¡¨å¤´</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">let</span> jsonData = []</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// è·å–æ•°æ®</span></span><br><span class="line">  <span class="keyword">await</span> db.collection(collectionId).get().then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    jsonData = res.data</span><br><span class="line">  &#125;)</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// è½¬æ¢æˆexcelæµæ•°æ®</span></span><br><span class="line">  <span class="keyword">let</span> conf = &#123;</span><br><span class="line">    stylesXmlFile: path.resolve(__dirname, <span class="string">'styles.xml'</span>),</span><br><span class="line">    name: <span class="string">'sheet'</span>,</span><br><span class="line">    cols: confParams.map(<span class="function"><span class="params">param</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">caption</span>: param, <span class="attr">type</span>: <span class="string">'string'</span> &#125;</span><br><span class="line">    &#125;),</span><br><span class="line">    rows: jsonToArray(jsonData)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> result = nodeExcel.execute(conf) <span class="comment">// resultä¸ºexceläºŒè¿›åˆ¶æ•°æ®æµ</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ä¸Šä¼ åˆ°äº‘å­˜å‚¨</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> cloud.uploadFile(&#123;</span><br><span class="line">    cloudPath: <span class="string">`download/sheet<span class="subst">$&#123;openId&#125;</span>.xlsx`</span>,    <span class="comment">// excelæ–‡ä»¶åç§°åŠè·¯å¾„ï¼Œå³äº‘å­˜å‚¨ä¸­çš„è·¯å¾„</span></span><br><span class="line">    fileContent: Buffer.from(result.toString(), <span class="string">'binary'</span>),</span><br><span class="line">  &#125;)</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// jsonå¯¹è±¡è½¬æ¢æˆæ•°ç»„å¡«å……</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">jsonToArray</span> (<span class="params">arrData</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>()</span><br><span class="line">    arrData.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> itemArray = <span class="keyword">new</span> <span class="built_in">Array</span>()</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> item) &#123;</span><br><span class="line">        <span class="keyword">if</span> (key === <span class="string">'_id'</span> || key === <span class="string">'_openid'</span>) &#123; <span class="keyword">continue</span> &#125;</span><br><span class="line">        itemArray.push(item[key])</span><br><span class="line">      &#125;</span><br><span class="line">      arr.push(itemArray)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> arr</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è§¦å‘äº‘å‡½æ•°ï¼Œå¯ä»¥çœ‹åˆ°äº‘å­˜å‚¨ä¸­æœ‰äº†åˆšåˆšç”Ÿæˆçš„æ–‡ä»¶"><a href="#è§¦å‘äº‘å‡½æ•°ï¼Œå¯ä»¥çœ‹åˆ°äº‘å­˜å‚¨ä¸­æœ‰äº†åˆšåˆšç”Ÿæˆçš„æ–‡ä»¶" class="headerlink" title="è§¦å‘äº‘å‡½æ•°ï¼Œå¯ä»¥çœ‹åˆ°äº‘å­˜å‚¨ä¸­æœ‰äº†åˆšåˆšç”Ÿæˆçš„æ–‡ä»¶"></a>è§¦å‘äº‘å‡½æ•°ï¼Œå¯ä»¥çœ‹åˆ°äº‘å­˜å‚¨ä¸­æœ‰äº†åˆšåˆšç”Ÿæˆçš„æ–‡ä»¶</h4><p><img src="/img/2019/06/05/1.png" alt="æ•°æ®åº“ä¸­çš„æ•°æ®"><br>æ•°æ®åº“ä¸­çš„æ•°æ®,ç”±äºè¡¨å¤´éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥è¿™è¾¹çš„keyå¯ä»¥é€‚å½“çš„ç®€åŒ–ï¼Œä½†æ˜¯è¦æ³¨æ„æ•°æ®åº“ä¸­æ‹‰å–æ•°æ®é¡ºåºçš„é—®é¢˜</p><p><img src="/img/2019/06/05/2.png" alt="æœ€ç»ˆç”Ÿæˆçš„excel"><br>æœ€ç»ˆç”Ÿæˆçš„excel</p>]]></content>
      
      
      
        <tags>
            
            <tag> wxmp </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>2.jQueryä¸­é€‰æ‹©å…ƒç´ çš„ç›¸å…³</title>
      <link href="/2019/06/01/jQuery%E4%B8%AD%E9%80%89%E6%8B%A9%E5%85%83%E7%B4%A0%E7%9A%84%E7%9B%B8%E5%85%B3/"/>
      <url>/2019/06/01/jQuery%E4%B8%AD%E9%80%89%E6%8B%A9%E5%85%83%E7%B4%A0%E7%9A%84%E7%9B%B8%E5%85%B3/</url>
      
        <content type="html"><![CDATA[<blockquote><p>jQueryä¸­æœ€åéƒ½æ˜¯è¾“å‡ºä¸€ä¸ªä¼ªæ•°ç»„ï¼Œä¹Ÿå³æœ¬è´¨æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œ{0:xx, 1:xx, length:2}ä¸ºå…¶å‡†å¤‡äº†lengthï¼Œä¹Ÿå³å¯ä»¥ä½¿ç”¨å¾ªç¯ï¼Œä½†æ˜¯ä¸èƒ½ä½¿ç”¨æ•°ç»„çš„å†…ç½®æ–¹æ³•<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.lenth; i++)&#123;</span><br><span class="line">  <span class="keyword">let</span> temp = <span class="keyword">this</span>[i]  <span class="comment">// å…¶å®æ˜¯é€šè¿‡ä¸€ä¸ªå­—é¢é‡çš„æ–¹å¼å–åˆ°äº†å¯¹è±¡å†…éƒ¨çš„æ•°æ®ã€‚</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">this</span>.slice()  <span class="comment">// x æŠ¥é”™ï¼Œå…¶ä¸æ˜¯ä¸€ä¸ªæ•°ç»„</span></span><br></pre></td></tr></table></figure></p></blockquote><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¼šå‡ºç°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'&lt;div&gt;&lt;/div&gt;'</span>)  <span class="comment">// åˆ›å»ºå…ƒç´ </span></span><br><span class="line">$(<span class="string">'#dv1'</span>)        <span class="comment">// é€‰æ‹©id</span></span><br><span class="line">$(<span class="string">'.div a.active'</span>) <span class="comment">// å¤æ‚çš„é€‰æ‹©å™¨</span></span><br><span class="line">$(<span class="built_in">document</span>)   <span class="comment">// ä¼ å…¥çš„å¯¹è±¡</span></span><br><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; &#125;) <span class="comment">// é¡µé¢åŠ è½½å‡½æ•°</span></span><br><span class="line">$(<span class="string">'[]'</span>) $(<span class="string">'&#123;&#125;'</span>)  <span class="comment">// ä¸€äº›å…¶ä»–çš„</span></span><br></pre></td></tr></table></figure><p>é¦–å…ˆä»–éƒ½æ˜¯é€šè¿‡ä¸€äº›æ­£åˆ™çš„åˆ¤æ–­ï¼Œç”¨æ¥åŒ¹é…ï¼Œç”¨if elseæ¥åˆ†æ²»ä¸åŒçš„æƒ…å†µã€‚</p><ul><li><p><code>$(&#39;&lt;div&gt;&lt;/div&gt;&#39;) $(&#39;&lt;div title=&#39;div&#39; html=&quot;div&quot;&gt;&lt;/div&gt;&#39;)</code>htmlæ ‡ç­¾çš„å½¢å¼<br>ä¸»è¦ä½¿ç”¨jQuery.parseHTMLè§£ææˆhtmlå­—ç¬¦ä¸²çš„å½¢å¼ï¼Œå¹¶æœ€åjQuery.mergeæ¥æ··åˆæˆä½æ•°ç»„ï¼Œå¦‚æœé‡Œé¢æœ‰å±æ€§ï¼Œåˆ™éå†è¿™ä¸ªå±æ€§,<br>å¦‚æœæ˜¯jQueryå®šä¹‰çš„æ–¹æ³•ï¼Œå¦‚css(),html(),å°±é‡‡ç”¨ <code>this[ key ] (this[key])</code> å¦åˆ™è¿›è¡Œå±æ€§æ·»åŠ ï¼Œ<code>this.attr(key, this[key])</code></p></li><li><p><code>$(&#39;#dv1&#39;)</code>idçš„å½¢å¼<br>ä¸»è¦é€šè¿‡æå–å…¶idå¹¶ä¸”é€šè¿‡jsåŸç”Ÿæ–¹æ³•getElementByIdç”¨æ¥è·å–dom,ä¹‹åæŒ‚è½½åˆ°thisåè¾“å‡ºå³å¯</p></li><li><p><code>$(&#39;.div a.active&#39;)</code>å¤æ‚çš„é€‰æ‹©å™¨<br>ä¸»è¦é€šè¿‡ä½¿ç”¨jQueryçš„å†…ç½®æ–¹æ³•findæ¥è¿›è¡Œå¯»æ‰¾ï¼Œå…¶findå†…éƒ¨ä½¿ç”¨äº†sizzleå¼•æ“è¿›è¡ŒæŸ¥æ‰¾</p></li><li><p><code>$(function () { })</code>function é¡µé¢åŠ è½½å‡½æ•°<br>ç›´æ¥å°†å…¶æŒ‚è½½åˆ°rootjQuery.ready() ä¸Šé¢ï¼Œé¡µé¢åŠ è½½å‡½æ•°</p></li><li><p><code>$(&#39;[]&#39;) $(&#39;{}&#39;)</code>å…¶ä»–ä¸€äº›å½¢å¼<br>é€šè¿‡jQuery.makeArrayï¼Œä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œå˜æˆä¸€ä¸ªä¼ªæ•°ç»„åè¾“å‡ºå³å¯</p></li></ul><h4 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h4><p>jQueryä¸­çš„ä¼ªæ•°ç»„é‡Œé¢éƒ½æ˜¯domå¯¹è±¡ï¼Œè¿™ä¹Ÿå°±è§£é‡Šäº†ä¸ºä»€ä¹ˆå¯ä»¥é€šè¿‡<code>$(&#39;&#39;)[0] $(&#39;&#39;).get(0)</code> æ¥è½¬æ¢æˆdomå¯¹è±¡ï¼Œï¼ˆgetæ–¹æ³•å†…éƒ¨å°±æ˜¯this[num]ï¼Œå¦‚æœæ˜¯è´Ÿæ•° -&gt; ä»åå¾€å‰å–ï¼Œé‚£ä¹ˆå°±æ˜¯this[this.length+num]ï¼‰</p><p>domå¯¹è±¡è½¬æ¢æˆjQueryå¯¹è±¡åªéœ€è¦ <code>$(dom)</code>,å¦‚æœæ˜¯å¯¹è±¡çš„è¯<code>this[0] = dom</code> ç›´æ¥æŒ‚è½½ä¸Šå»å³å¯</p>]]></content>
      
      
      
        <tags>
            
            <tag> æºç  </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>1.å¯¹åˆ›å»ºjQueryçš„ç†è§£</title>
      <link href="/2019/05/31/%E5%AF%B9%E5%88%9B%E5%BB%BAjQuery%E7%9A%84%E7%90%86%E8%A7%A3/"/>
      <url>/2019/05/31/%E5%AF%B9%E5%88%9B%E5%BB%BAjQuery%E7%9A%84%E7%90%86%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h2 id="å…³äºjQueryä¸­åˆ›å»ºå¯¹è±¡çš„ç›¸å…³ï¼ŒjQuery-fn-init-prototype-jQuery-fn"><a href="#å…³äºjQueryä¸­åˆ›å»ºå¯¹è±¡çš„ç›¸å…³ï¼ŒjQuery-fn-init-prototype-jQuery-fn" class="headerlink" title="å…³äºjQueryä¸­åˆ›å»ºå¯¹è±¡çš„ç›¸å…³ï¼ŒjQuery.fn.init.prototype = jQuery.fn;"></a>å…³äºjQueryä¸­åˆ›å»ºå¯¹è±¡çš„ç›¸å…³ï¼ŒjQuery.fn.init.prototype = jQuery.fn;</h2><blockquote><p>æœ¬æ–‡ä»¥jQuery2.0.3åˆ†æä¸ºä¾‹</p></blockquote><h2 id="å…³äºæ„é€ å‡½æ•°çš„ä¸¤ä¸ªç‚¹"><a href="#å…³äºæ„é€ å‡½æ•°çš„ä¸¤ä¸ªç‚¹" class="headerlink" title="å…³äºæ„é€ å‡½æ•°çš„ä¸¤ä¸ªç‚¹"></a>å…³äºæ„é€ å‡½æ•°çš„ä¸¤ä¸ªç‚¹</h2><ul><li>åœ¨JSä¸­åˆ›å»ºå¯¹è±¡å¿…é¡»è¦ä½¿ç”¨<code>new</code>ï¼Œå¦åˆ™å°±å¦‚åŒæ„å»ºäº†ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œ<code>this</code>è¡¨ç¤ºæœªæ¥åˆ›å»ºçš„å®ä¾‹ï¼Œ å¹¶è¿”å›this</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span> (<span class="params">school</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.school = school</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Student(<span class="string">'hdu'</span>) <span class="comment">// åˆ›å»ºäº†å¯¹è±¡ &#123;school: 'hdu'&#125;</span></span><br><span class="line">Student(<span class="string">'hdu'</span>) <span class="comment">// ä»…ä»…æ˜¯æ‰§è¡Œäº†ä¸€ä¸ªå‡½æ•° å¹¶æ— å…¶ä»–ä½œç”¨</span></span><br></pre></td></tr></table></figure><ul><li>å¦‚æœæ„é€ å‡½æ•°ä¸­æœ‰è¿”å›å€¼<code>return xxx</code> å¦‚æœ<code>xxx</code>æ˜¯ä¸ªå¤æ‚ç±»å‹ï¼ˆå¯¹è±¡,æ•°ç»„â€¦ï¼‰æ—¶ï¼Œæœ€ç»ˆè¿”å›è¿™ä¸ªå¤æ‚ç±»å‹ï¼ˆå¯¹è±¡,æ•°ç»„â€¦ï¼‰</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span> (<span class="params">school</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.school = school</span><br><span class="line">  <span class="keyword">return</span> <span class="number">666</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">new</span> Student(<span class="string">'hdu'</span>) <span class="comment">// &#123;school: 'hdu'&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span> (<span class="params">school</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.school = school</span><br><span class="line">  <span class="keyword">return</span> &#123;<span class="attr">name</span>: <span class="string">'LiHua'</span>&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">new</span> Student(<span class="string">'hdu'</span>) <span class="comment">// &#123;name: 'LiHua'&#125;</span></span><br></pre></td></tr></table></figure><h4 id="jQuery-fn-init-prototype-jQuery-fnçš„ä½œç”¨"><a href="#jQuery-fn-init-prototype-jQuery-fnçš„ä½œç”¨" class="headerlink" title="jQuery.fn.init.prototype = jQuery.fnçš„ä½œç”¨"></a><code>jQuery.fn.init.prototype = jQuery.fn</code>çš„ä½œç”¨</h4><blockquote><p>é¦–å…ˆåœ¨jQueryä¸­å®šä¹‰äº† <code>jQuery.fn = jQuery.prototype</code> ï¼Œå…¶åº”è¯¥æ˜¯æ–¹ä¾¿åç»­çš„è°ƒç”¨ï¼Œfnå°±æ˜¯prototype</p></blockquote><blockquote><p>æˆ‘ä»¬åœ¨è°ƒç”¨jQueryçš„æ—¶å€™ï¼Œæ˜¯é‡‡ç”¨<code>$(&#39;&#39;)</code>(<em>$ = jQuery</em>)</p></blockquote><p>æˆ‘ä»¬éƒ½çŸ¥é“jQueryæ˜¯é¢å‘å¯¹è±¡çš„æ€æƒ³ï¼Œå…¶<code>$(&#39;&#39;).css()</code>,é‚£ä¹ˆæˆ‘ä»¬å°±èƒ½æ¨æµ‹å‡ºæ¥ï¼Œ<code>$(&#39;&#39;)</code>è¿”å›å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œ<br>ä½†æ˜¯ä¹‹å‰æˆ‘ä»¬çœ‹åˆ°æ„é€ å‡½æ•°å¿…é¡»è¦ä½¿ç”¨<code>new</code>è¿™ä¸ªå…³é”®å­—æ‰è¡Œ,ä¹Ÿå°±æ˜¯<code>new $(&#39;&#39;)</code>ï¼Œ<br>ç„¶è€ŒjQueryç›®çš„å°±æ˜¯è®©æˆ‘ä»¬<code>write less</code>,æ‰€ä»¥æˆ‘ä»¬è‡ªç„¶å°±æ¨æµ‹å‡ºæ¥ï¼Œ<code>$(&#39;&#39;)</code>ä»–çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">jQuery = <span class="function"><span class="keyword">function</span>(<span class="params"> selector, context </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> jQuery.fn.init( selector, context, rootjQuery );</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p><p>è¿™ä¹Ÿå°±è¯æ˜äº†æˆ‘ä»¬çš„æ¨æµ‹, è°ƒç”¨<code>$(&#39;&#39;)</code>å…¶è¿”å›å€¼æ˜¯<code>jQuery.fn.init</code>çš„ä¸€ä¸ªå®ä¾‹</p><p>é‚£ä¹ˆé—®é¢˜åˆæ¥äº†ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œå¥½å¤šæ–¹æ³•éƒ½æ˜¯æŒ‚è½½åˆ°<code>$</code>åŸå‹ä¸Šé¢çš„ï¼Œé‚£ä¹ˆæ—¢ç„¶åˆ›å»ºå‡ºçš„æ˜¯<code>jQuery.fn.init</code>çš„ä¸€ä¸ªå®ä¾‹ï¼Œ<br>è°ƒç”¨<code>$(&#39;&#39;).css()</code> é‚£ä¹ˆè¿™ä¸ª<code>css()</code>åº”è¯¥åœ¨<code>jQuery.fn.init</code>çš„åŸå‹ä¸Šæ‰å¯¹ï¼Œä½†æ˜¯çºµè§‚æºç ï¼Œéƒ½æ˜¯å¯¹<code>jQuery</code>çš„åŸå‹æ“ä½œçš„ï¼Œ<br>æˆ‘ä»¬è‡ªå·±å®šä¹‰æ‹“å±•æ–¹æ³•ä¹Ÿæ˜¯ <code>$.fn.myFunction</code>,è¿™éƒ½è¯´æ˜äº†æˆ‘ä»¬ç¡®å®æ˜¯æŒ‚è½½åˆ° <code>$</code>çš„åŸå‹ä¸Šçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å¦¨å¤§èƒ†å‡è®¾ä¸€ä¸‹ï¼Œ<br><strong><code>jQuery.fn.init</code>çš„åŸå‹å°±æ˜¯<code>jQuery</code>çš„åŸå‹</strong>ï¼Œè¿™æ ·æ‰èƒ½å¾ˆå¥½çš„è§£é‡Šæˆ‘ä»¬çš„æ¨æµ‹ï¼Œä¹Ÿå°±è¯´æ˜äº†æˆ‘ä»¬è™½ç„¶åˆ›å»ºå‡ºçš„æ˜¯<code>jQuery.fn.init</code>çš„ä¸€ä¸ªå®ä¾‹ï¼Œ<br>ç”±äºå…¶åŸå‹ä¹Ÿæ˜¯<code>jQuery</code>çš„åŸå‹ï¼Œæ‰€ä»¥æˆ‘ä»¬ç»™jQueryæ·»åŠ çš„æ‹“å±•æ–¹æ³•ï¼Œè‡ªç„¶å°±å…³è”åˆ°jQuery.fn.initä¸Šäº†</p><p>å¸¦ç€é—®é¢˜å‘ä¸‹ç¿»ï¼Œæœä¸å…¶ç„¶!<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Give the init function the jQuery prototype for later instantiation</span></span><br><span class="line">jQuery.fn.init.prototype = jQuery.fn;</span><br></pre></td></tr></table></figure></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>jQueryä¸ºäº†æˆ‘ä»¬ä¹¦å†™æ–¹ä¾¿ï¼Œé¿å…äº†<code>new $(&#39; &#39;)</code>, ä½†æ˜¯ä»–çš„æºç ä¸­å¸®æˆ‘ä»¬newäº†ä¸€ä¸ªå¯¹è±¡å‡ºæ¥ï¼Œä¸ºäº†å…³è”ï¼Œå°±åªèƒ½æŠŠjQueryçš„åŸå‹å’Œåº•å±‚å¸®æˆ‘ä»¬newå‡ºæ¥çš„è¿™ä¸ªçš„åŸå‹ç»‘å®šåœ¨ä¸€èµ·ï¼Œ</p><p>è¿™å°±æœ‰ä¸€ä¸ªå‡è±¡ï¼š <code>$(&#39;&#39;)</code>ï¼Œç»™æˆ‘ä»¬ new äº†ä¸€ä¸ªjQueryå‡ºæ¥ã€‚</p><ul><li>å…¶å®æˆ‘ä»¬ç”¨çš„æ˜¯jQuery.fn.initçš„å®ä¾‹</li><li>jQueryä¹Ÿåªæ˜¯ä¸€ä¸ªæ–¹æ³•å</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> æºç  </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>è§£è¯»webpack,ç®€å•å®ç°mypack</title>
      <link href="/2019/05/26/%E8%A7%A3%E8%AF%BBwebpack-%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0mypack/"/>
      <url>/2019/05/26/%E8%A7%A3%E8%AF%BBwebpack-%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0mypack/</url>
      
        <content type="html"><![CDATA[<p>è™½ç„¶ä½¿ç”¨webpackæœ‰ä¸€é˜µæ—¥å­äº†ï¼Œä½†æ˜¯å¯¹å…¶å†…éƒ¨çš„ç›¸å…³æ‰“åŒ…è¿‡ç¨‹ï¼Œè¿˜ä¸æ˜¯å¾ˆäº†è§£ï¼Œä»Šå¤©ç¿»é˜…äº†ç›¸å…³èµ„æ–™åï¼Œå€Ÿé‰´å†™äº†ä¸€ä¸ªwebpackç®€åŒ–ç‰ˆæœ¬ï¼Œä»…æ˜¯å…¶æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œmypack</p><h4 id="äº†è§£ä¸€ä¸‹requireJSçš„å¤§è‡´è¿è¡Œè¿‡ç¨‹"><a href="#äº†è§£ä¸€ä¸‹requireJSçš„å¤§è‡´è¿è¡Œè¿‡ç¨‹" class="headerlink" title="äº†è§£ä¸€ä¸‹requireJSçš„å¤§è‡´è¿è¡Œè¿‡ç¨‹"></a>äº†è§£ä¸€ä¸‹requireJSçš„å¤§è‡´è¿è¡Œè¿‡ç¨‹</h4><blockquote><p>è¿™é‡Œéœ€è¦nodeç¯å¢ƒï¼ˆç”¨åˆ°äº†æ–‡ä»¶è¯»å†™ç›¸å…³ï¼Œwebpackä¹Ÿæ˜¯åœ¨nodeä¸Šè¿è¡Œçš„ï¼‰</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myRequire</span> (<span class="params">moduleName</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// contentæŒ‡ç¤ºæ–‡ä»¶çš„å†…å®¹</span></span><br><span class="line">  <span class="keyword">let</span> content = fs.readFileSync(moduleName, <span class="string">'UTF8'</span>)</span><br><span class="line">  <span class="keyword">let</span> fn = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">'exports'</span>, <span class="string">'module'</span>, <span class="string">'require'</span>, <span class="string">'__dirname'</span>, </span><br><span class="line">    <span class="string">'__filename'</span>, content + <span class="string">'\n return module.exports'</span>)</span><br><span class="line">  <span class="keyword">let</span> <span class="built_in">module</span> = &#123;</span><br><span class="line">    exports: &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> fn(<span class="built_in">module</span>.exports, <span class="built_in">module</span>, myRequire, __dirname, __filename)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = myRequire(<span class="string">'./b.js'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(str)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// b.js</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="string">"Hello RequireJS!"</span></span><br></pre></td></tr></table></figure><h4 id="æ¨¡æ‹Ÿä¸€ä¸‹AMDçš„æ‰“åŒ…æ–¹å¼ï¼Œè™½ç„¶ä¸å¸¸ç”¨ï¼Œä½†æ˜¯å¯¹ç†è§£èµ·æ¥æ˜¯æœ‰å¸®åŠ©çš„"><a href="#æ¨¡æ‹Ÿä¸€ä¸‹AMDçš„æ‰“åŒ…æ–¹å¼ï¼Œè™½ç„¶ä¸å¸¸ç”¨ï¼Œä½†æ˜¯å¯¹ç†è§£èµ·æ¥æ˜¯æœ‰å¸®åŠ©çš„" class="headerlink" title="æ¨¡æ‹Ÿä¸€ä¸‹AMDçš„æ‰“åŒ…æ–¹å¼ï¼Œè™½ç„¶ä¸å¸¸ç”¨ï¼Œä½†æ˜¯å¯¹ç†è§£èµ·æ¥æ˜¯æœ‰å¸®åŠ©çš„"></a>æ¨¡æ‹Ÿä¸€ä¸‹AMDçš„æ‰“åŒ…æ–¹å¼ï¼Œè™½ç„¶ä¸å¸¸ç”¨ï¼Œä½†æ˜¯å¯¹ç†è§£èµ·æ¥æ˜¯æœ‰å¸®åŠ©çš„</h4><blockquote><p>å¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œ<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// myAMD.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> factories = &#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myDefine</span> (<span class="params">moduleName, dependencies, factory</span>) </span>&#123;</span><br><span class="line">  factory.dependencies = dependencies <span class="comment">// æŒ‚åœ¨è¯¥æ–¹æ³•ä¸Šçš„ä¾èµ–å…³ç³»</span></span><br><span class="line">  factories[moduleName] = factory <span class="comment">// åˆ›å»ºå¯¹åº”å…³ç³»</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myRequire</span> (<span class="params">mods, callback</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> result = mods.map(<span class="function"><span class="params">mod</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> factory = factories[mod] <span class="comment">// è·å–è¯¥æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">let</span> dependencies = factory.dependencies <span class="comment">// è·å–è¯¥ä¾èµ–</span></span><br><span class="line">    <span class="keyword">let</span> exports</span><br><span class="line">    myRequire(dependencies, <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">      exports = factory.apply(<span class="literal">null</span>, <span class="built_in">arguments</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> exports</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> callback.apply(<span class="literal">null</span>, result)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç”³æ˜ä¾èµ–</span></span><br><span class="line">myDefine(<span class="string">'name'</span>, [], <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'AMD'</span></span><br><span class="line">&#125;)</span><br><span class="line">myDefine(<span class="string">'age'</span>, [], <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">666</span></span><br><span class="line">&#125;)</span><br><span class="line">myDefine(<span class="string">'person'</span>, [<span class="string">'name'</span>, <span class="string">'age'</span>], <span class="function"><span class="keyword">function</span> (<span class="params">name, age</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> person = <span class="string">'person '</span> + name + <span class="string">' is '</span> + age</span><br><span class="line">  <span class="keyword">return</span> person</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// å¼•å…¥ä¾èµ– ç¬¬ä¸€ç§æ–¹å¼</span></span><br><span class="line">myRequire([<span class="string">'name'</span>, <span class="string">'age'</span>], <span class="function"><span class="keyword">function</span> (<span class="params">name, age</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(name, age)</span><br><span class="line">&#125;)</span><br><span class="line">myRequire([<span class="string">'person'</span>], <span class="function"><span class="keyword">function</span> (<span class="params">person</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(person)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p></blockquote><h6 id="å…¶ä¸­çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯"><a href="#å…¶ä¸­çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯" class="headerlink" title="å…¶ä¸­çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯"></a>å…¶ä¸­çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯</h6><ol><li>ç”³æ˜äº†ä¸€ä¸ªå…¨å±€çš„factoriesï¼Œå¹¶ä¸”é€šè¿‡å…¶moduleNameä½œä¸ºkey,å…¶factoryï¼ˆä¹Ÿå°±æ˜¯callbackï¼‰ä½œä¸ºvalue,åœ¨ç”³æ˜çš„è¿‡ç¨‹ä¸­å°±å·²ç»å…³è”åˆ°äº†å…¨å±€çš„factories,åç»­ç›´æ¥ä»ä¸­å–å‡ºå³å¯ã€‚</li><li>åœ¨æŒ‚è½½å…¶ä¾èµ–çš„æ—¶å€™ï¼Œrequireå†…éƒ¨åˆ†åˆ«å°†å…¶ä¾èµ–è½¬æ¢ä¸ºä¾èµ–çš„ç»“æœï¼ˆmapæ–¹æ³•ï¼‰ï¼Œè¿™é‡Œå¦‚æœå†æœ‰ä¾èµ–å¯ä»¥åˆ©ç”¨é€’å½’çš„æ–¹å¼è§£å†³ã€‚</li></ol><h4 id="mypackçš„å®ç°"><a href="#mypackçš„å®ç°" class="headerlink" title="mypackçš„å®ç°"></a>mypackçš„å®ç°</h4><ol><li>é…ç½®mypackçš„ç¯å¢ƒ</li></ol><ul><li><p>é¦–å…ˆåœ¨å»ºç«‹mypackï¼Œï¼ˆå¹¶è¿›å…¥mypackæ–‡ä»¶å¤¹ä¸­ï¼‰å¹¶ä¸”å°†åœ¨binä¸­åˆ›å»ºå‡ºmypack.js,å¹¶ä¸”åˆå§‹åŒ–npmç¯å¢ƒ<code>npm init -y</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">|-mypack</span><br><span class="line">| |-bin</span><br><span class="line">|  |-mypack.js</span><br><span class="line">| |-package.json</span><br><span class="line">|</span><br><span class="line"></span><br><span class="line">// æ³¨æ„ä¿®æ”¹package.jsonä¸­çš„è·¯å¾„é—®é¢˜ bin: bin/mypack.js</span><br></pre></td></tr></table></figure></li><li><p>ç„¶ååœ¨mypack.jsä¸­æ–‡ä»¶å¤´éƒ¨<code>#! /usr/bin/env node</code> ä¸ç„¶ä¼šæŠ¥æ²¡æœ‰é€‚å½“çš„jsè§£æå™¨</p></li><li><p>ä¹‹åæˆ‘ä»¬è¿›è¡Œé“¾æ¥ <code>npm link</code> è¿™æ ·æˆ‘ä»¬å°±å…¨å±€å®‰è£…ï¼Œé€€å›å…¶ä»–ä½ç½®éƒ½å¯ä»¥æ‰§è¡Œå‘½ä»¤ <code>&gt;mypack</code></p></li></ul><ol start="2"><li>é¦–å…ˆç¡®å®šå…¥å£æ–‡ä»¶ï¼Œå‡ºå£æ–‡ä»¶çš„ä½ç½®ï¼Œä¹Ÿå³æœ‰æ‰§è¡Œçš„å¼€å§‹ä½ç½®ï¼Œå°†è§£æå…¥å£æ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œé€’å½’çš„è¯»å…¥ï¼ŒæŠŠrequireæ›¿æ¢æˆæœ¬è§„åˆ™å¯è¯†åˆ«çš„å‡½æ•°åï¼ˆæœ¬ä¾‹myRequireï¼‰ï¼Œå¹¶ä¸”ä»¥key(æ–‡ä»¶è·¯å¾„)ï¼Œvalue(å†…å®¹)çš„å½¢å¼æ”¾åˆ°æ€»çš„modulesä¸­ã€‚ä¹Ÿå³æ‰€æœ‰ç”¨åˆ°çš„ä¾èµ–å·²ç»åˆ°å†…å­˜ä¸­ã€‚</li><li>ç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œå¹¶ä¸”ç¬¬ä¸€ä¸ªrequireçš„å°±æ˜¯å…¥å£æ–‡ä»¶ï¼Œä¾æ¬¡æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯ç¢°è§myRequire(å·²ç»åœ¨ç¬¬äºŒæ­¥å…¨éƒ¨æ­£åˆ™æ›¿æ¢)æ—¶ï¼Œè§£æå‡ºå†…å®¹è¿”å›ã€‚</li><li>é€’å½’çš„è¿›è¡ŒmyRequireçš„è§£æï¼Œå…¶å‚æ•°å°±ä¸ºä¹‹å‰çš„modulesçš„key,é€šè¿‡æ˜ å°„å…³ç³»å–å‡ºå†…å®¹æ‰§è¡Œã€‚<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// mypack.js  mypackä»£ç </span></span><br><span class="line"></span><br><span class="line"><span class="meta">#! /usr/bin/env node</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> entry = <span class="string">'./src/index.js'</span>  <span class="comment">// å…¥å£æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">let</span> output = <span class="string">'./dist/index.js'</span>  <span class="comment">// å‡ºå£æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">let</span> modules = []</span><br><span class="line"><span class="keyword">let</span> script = fs.readFileSync(entry, <span class="string">'UTF8'</span>)</span><br><span class="line"><span class="comment">// åŒ¹é…å¯¹åº”å…³ç³»</span></span><br><span class="line"><span class="keyword">let</span> replaceReg = <span class="function">(<span class="params">script</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> script.replace(<span class="regexp">/require\(['"](.+?)["']\)/g</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> name = path.join(<span class="string">'./src'</span>, <span class="built_in">arguments</span>[<span class="number">1</span>])</span><br><span class="line">    <span class="keyword">let</span> content = fs.readFileSync(name, <span class="string">'UTF8'</span>)</span><br><span class="line">    <span class="comment">// å¯¹äºæ¯æ‹¿åˆ°çš„contentéƒ½è¿›è¡Œä¸€æ¬¡æ›¿æ¢</span></span><br><span class="line">    content = replaceReg(content)</span><br><span class="line">    modules.push(&#123;name, content&#125;)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`mypack_require('<span class="subst">$&#123;name&#125;</span>')`</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">script = replaceReg(script)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ejs = <span class="built_in">require</span>(<span class="string">'ejs'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> template = <span class="string">`</span></span><br><span class="line"><span class="string">(function(modules) &#123;</span></span><br><span class="line"><span class="string">   // å¼•å…¥</span></span><br><span class="line"><span class="string">   function mypack_require(moduleId) &#123;</span></span><br><span class="line"><span class="string">     var module = &#123;</span></span><br><span class="line"><span class="string">       exports: &#123;&#125;</span></span><br><span class="line"><span class="string">     &#125;;</span></span><br><span class="line"><span class="string">     modules[moduleId].call(module.exports, module, module.exports, mypack_require);</span></span><br><span class="line"><span class="string">     return module.exports;</span></span><br><span class="line"><span class="string">   &#125;</span></span><br><span class="line"><span class="string">   return mypack_require("&lt;%-entry%&gt;");</span></span><br><span class="line"><span class="string"> &#125;)</span></span><br><span class="line"><span class="string">  (&#123;</span></span><br><span class="line"><span class="string">   "&lt;%-entry%&gt;": (function(module, exports, mypack_require) &#123;</span></span><br><span class="line"><span class="string">     eval(\`&lt;%-script%&gt;\`);</span></span><br><span class="line"><span class="string">  &#125;) // index.jsçš„æ–‡ä»¶</span></span><br><span class="line"><span class="string">&lt;%for(let i = 0; i &lt; modules.length; i++)&#123;</span></span><br><span class="line"><span class="string">let module = modules[i]%&gt;</span></span><br><span class="line"><span class="string">  ,</span></span><br><span class="line"><span class="string">    "&lt;%-module.name%&gt;": (function(module, exports, mypack_require) &#123;</span></span><br><span class="line"><span class="string">      eval(\`&lt;%-module.content%&gt;\`);</span></span><br><span class="line"><span class="string">    &#125;)</span></span><br><span class="line"><span class="string">&lt;%&#125;%&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> &#125;);</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"><span class="comment">// æœ€ç»ˆresultä¸ºæ‰“åŒ…åçš„ç»“æœ</span></span><br><span class="line"><span class="keyword">let</span> result = ejs.render(template, &#123;</span><br><span class="line">  entry,</span><br><span class="line">  script,</span><br><span class="line">  modules</span><br><span class="line">&#125;)</span><br><span class="line">fs.writeFileSync(output, result)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'mypack success'</span>)</span><br></pre></td></tr></table></figure></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// ç›®å½•ç»“æ„</span><br><span class="line">|-src</span><br><span class="line">| |a.js</span><br><span class="line">| |c.js</span><br><span class="line">| |index.js</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.jsæ‰“åŒ…å‰çš„å†…å®¹</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">require</span>(<span class="string">'./a.js'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'hello mypack'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// a.js</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">'./c.js'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'hello mypack666'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// c.js</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'=====c.js======'</span>)</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js æ‰“åŒ…åçš„å†…å®¹</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">modules</span>) </span>&#123;</span><br><span class="line">   <span class="comment">// å¼•å…¥</span></span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">mypack_require</span>(<span class="params">moduleId</span>) </span>&#123;</span><br><span class="line">     <span class="keyword">var</span> <span class="built_in">module</span> = &#123;</span><br><span class="line">       exports: &#123;&#125;</span><br><span class="line">     &#125;;</span><br><span class="line">     modules[moduleId].call(<span class="built_in">module</span>.exports, <span class="built_in">module</span>, <span class="built_in">module</span>.exports, mypack_require);</span><br><span class="line">     <span class="keyword">return</span> <span class="built_in">module</span>.exports;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> mypack_require(<span class="string">"./src/index.js"</span>);</span><br><span class="line"> &#125;)</span><br><span class="line">  (&#123;</span><br><span class="line">   <span class="string">"./src/index.js"</span>: (<span class="function"><span class="keyword">function</span>(<span class="params">module, exports, mypack_require</span>) </span>&#123;</span><br><span class="line">     <span class="built_in">eval</span>(<span class="string">`mypack_require('src\a.js')</span></span><br><span class="line"><span class="string">console.log('hello mypack')`</span>);</span><br><span class="line">  &#125;) <span class="comment">// index.jsçš„æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">  ,</span><br><span class="line">    <span class="string">"src\a.js"</span>: (<span class="function"><span class="keyword">function</span>(<span class="params">module, exports, mypack_require</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">eval</span>(<span class="string">`console.log('hello mypack666')`</span>);</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> &#125;);</span><br></pre></td></tr></table></figure><ol start="5"><li>æ·»åŠ ä¸€ä¸ªstyleLoader,è¿™é‡Œä»¥å‡½æ•°çš„å½¢å¼è¿›è¡Œæ”¾å…¥ï¼Œä¹Ÿå¯ä»¥å•ç‹¬å†™ä¸€ä¸ªæ¨¡å—å¼•å…¥</li></ol><ul><li>loader å…¶å®å°±æ˜¯åœ¨è§£ææ‰€æœ‰çš„ä»£ç æ—¶ï¼ˆé€’å½’è¯»å…¥ä»£ç ï¼Œå³replaceRegä¹‹ä¸­ï¼Œå¯¹æ¨¡å—å†…å®¹åœ¨è¿›è¡Œä¸€äº›å¤„ç†ï¼‰</li><li>loader è§£æä¸åŒçš„æ–‡ä»¶æ˜¯æ ¹æ®æ­£åˆ™è¡¨è¾¾å¼çš„åç¼€è¿›è¡ŒåŒºåˆ†çš„ã€‚</li><li>è¿™é‡Œé’ˆå¯¹äºstyleLoaderä¸­çš„cssä»£ç ï¼Œç¬¬ä¸€æ˜¯è¿›è¡Œäº†å‹ç¼©æˆä¸€è¡Œï¼Œå¹¶ä¸”æ›¿æ¢æ‰äº†/r/nè§£ææ—¶çš„æ ‡å¿—ï¼Œå› ä¸ºinnerTextæ¥æ”¶çš„æ˜¯å­—ç¬¦ä¸²ï¼Œç„¶è€Œå­—ç¬¦ä¸²æ˜¯æ— æ³•æ¢è¡Œçš„ï¼Œæ‰€ä»¥åªèƒ½å‹ç¼©æˆä¸€è¡Œï¼Œåœ¨å°†åŸæ¥ç©ºè¡Œå½¢æˆçš„/r/næ›¿æ¢æ‰ã€‚ï¼ˆæ–‡æœ«æå‡ºä¸€ç§ä¸å‹ç¼©çš„æ–¹æ¡ˆï¼‰</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  mypack.js  mypackä»£ç åŠ å…¥äº†styleLoader </span></span><br><span class="line"></span><br><span class="line"><span class="meta">#! /usr/bin/env node</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> entry = <span class="string">'./src/index.js'</span>  <span class="comment">// å…¥å£æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">let</span> output = <span class="string">'./dist/index.js'</span>  <span class="comment">// å‡ºå£æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">let</span> modules = []</span><br><span class="line"><span class="keyword">let</span> script = fs.readFileSync(entry, <span class="string">'UTF8'</span>)</span><br><span class="line"><span class="comment">//======================styleLoaderç”³æ˜===================</span></span><br><span class="line"><span class="keyword">let</span> styleLoader = <span class="function"><span class="keyword">function</span> (<span class="params">source</span>) </span>&#123; <span class="comment">//æ¨¡æ‹ŸstyleLoader</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">    let style = document.createElement('style')</span></span><br><span class="line"><span class="string">    style.innerText = <span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(source).replace(<span class="regexp">/\\r\\n/g</span>, <span class="string">''</span>)&#125;</span></span></span><br><span class="line"><span class="string">    document.head.appendChild(style)</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//=====================styleLoaderç”³æ˜ç»“æŸ===================</span></span><br><span class="line"><span class="comment">// åŒ¹é…å¯¹åº”å…³ç³»</span></span><br><span class="line"><span class="keyword">let</span> replaceReg = <span class="function">(<span class="params">script</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> script.replace(<span class="regexp">/require\(['"](.+?)["']\)/g</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> name = path.join(<span class="string">'./src'</span>, <span class="built_in">arguments</span>[<span class="number">1</span>])</span><br><span class="line">    <span class="keyword">let</span> content = fs.readFileSync(name, <span class="string">'UTF8'</span>)</span><br><span class="line">    <span class="comment">// å¯¹äºæ¯æ‹¿åˆ°çš„contentéƒ½è¿›è¡Œä¸€æ¬¡æ›¿æ¢</span></span><br><span class="line">    content = replaceReg(content)</span><br><span class="line"><span class="comment">//======================åº”ç”¨è§„åˆ™=====================</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="regexp">/\.css$/</span>.test(name))&#123;</span><br><span class="line">      content = styleLoader(content) <span class="comment">// å¤„ç†styleLoader</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//=====================åº”ç”¨è§„åˆ™ç»“æŸ===================</span></span><br><span class="line">    modules.push(&#123;name, content&#125;)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`mypack_require('<span class="subst">$&#123;name&#125;</span>')`</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">script = replaceReg(script)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ejs = <span class="built_in">require</span>(<span class="string">'ejs'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> template = <span class="string">`</span></span><br><span class="line"><span class="string">(function(modules) &#123;</span></span><br><span class="line"><span class="string">   // å¼•å…¥</span></span><br><span class="line"><span class="string">   function mypack_require(moduleId) &#123;</span></span><br><span class="line"><span class="string">     var module = &#123;</span></span><br><span class="line"><span class="string">       exports: &#123;&#125;</span></span><br><span class="line"><span class="string">     &#125;;</span></span><br><span class="line"><span class="string">     modules[moduleId].call(module.exports, module, module.exports, mypack_require);</span></span><br><span class="line"><span class="string">     return module.exports;</span></span><br><span class="line"><span class="string">   &#125;</span></span><br><span class="line"><span class="string">   return mypack_require("&lt;%-entry%&gt;");</span></span><br><span class="line"><span class="string"> &#125;)</span></span><br><span class="line"><span class="string">  (&#123;</span></span><br><span class="line"><span class="string">   "&lt;%-entry%&gt;": (function(module, exports, mypack_require) &#123;</span></span><br><span class="line"><span class="string">     eval(\`&lt;%-script%&gt;\`);</span></span><br><span class="line"><span class="string">  &#125;) // index.jsçš„æ–‡ä»¶</span></span><br><span class="line"><span class="string">&lt;%for(let i = 0; i &lt; modules.length; i++)&#123;</span></span><br><span class="line"><span class="string">let module = modules[i]%&gt;</span></span><br><span class="line"><span class="string">  ,</span></span><br><span class="line"><span class="string">    "&lt;%-module.name%&gt;": (function(module, exports, mypack_require) &#123;</span></span><br><span class="line"><span class="string">      eval(\`&lt;%-module.content%&gt;\`);</span></span><br><span class="line"><span class="string">    &#125;)</span></span><br><span class="line"><span class="string">&lt;%&#125;%&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> &#125;);</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"><span class="comment">// æœ€ç»ˆresultä¸ºæ‰“åŒ…åçš„ç»“æœ</span></span><br><span class="line"><span class="keyword">let</span> result = ejs.render(template, &#123;</span><br><span class="line">  entry,</span><br><span class="line">  script,</span><br><span class="line">  modules</span><br><span class="line">&#125;)</span><br><span class="line">fs.writeFileSync(output, result)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'mypack success'</span>)</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// ç›®å½•ç»“æ„</span><br><span class="line">|-src</span><br><span class="line">| |a.js</span><br><span class="line">| |c.js</span><br><span class="line">| |b.css</span><br><span class="line">| |index.js</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.jsæ‰“åŒ…å‰çš„å†…å®¹</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">require</span>(<span class="string">'./a.js'</span>)</span><br><span class="line"><span class="built_in">require</span>(<span class="string">'./b.css'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'hello mypack'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// a.js</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">'./c.js'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'hello mypack666'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// c.js</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'=====c.js======'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//b.css</span></span><br><span class="line">body&#123;</span><br><span class="line">  background: hotpink;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js æ‰“åŒ…åçš„å†…å®¹</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">modules</span>) </span>&#123;</span><br><span class="line">   <span class="comment">// å¼•å…¥</span></span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">mypack_require</span>(<span class="params">moduleId</span>) </span>&#123;</span><br><span class="line">     <span class="keyword">var</span> <span class="built_in">module</span> = &#123;</span><br><span class="line">       exports: &#123;&#125;</span><br><span class="line">     &#125;;</span><br><span class="line">     modules[moduleId].call(<span class="built_in">module</span>.exports, <span class="built_in">module</span>, <span class="built_in">module</span>.exports, mypack_require);</span><br><span class="line">     <span class="keyword">return</span> <span class="built_in">module</span>.exports;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> mypack_require(<span class="string">"./src/index.js"</span>);</span><br><span class="line"> &#125;)</span><br><span class="line">  (&#123;</span><br><span class="line">   <span class="string">"./src/index.js"</span>: (<span class="function"><span class="keyword">function</span>(<span class="params">module, exports, mypack_require</span>) </span>&#123;</span><br><span class="line">     <span class="built_in">eval</span>(<span class="string">`mypack_require('src\a.js')</span></span><br><span class="line"><span class="string">mypack_require('src\b.css')</span></span><br><span class="line"><span class="string">console.log('hello mypack')`</span>);</span><br><span class="line">  &#125;) <span class="comment">// index.jsçš„æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">  ,</span><br><span class="line">    <span class="string">"src\c.js"</span>: (<span class="function"><span class="keyword">function</span>(<span class="params">module, exports, mypack_require</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">eval</span>(<span class="string">`console.log('=====c.js======')`</span>);</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">  ,</span><br><span class="line">    <span class="string">"src\a.js"</span>: (<span class="function"><span class="keyword">function</span>(<span class="params">module, exports, mypack_require</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">eval</span>(<span class="string">`mypack_require('src\c.js')</span></span><br><span class="line"><span class="string">console.log('hello mypack666')`</span>);</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">  ,</span><br><span class="line">    <span class="string">"src\b.css"</span>: (<span class="function"><span class="keyword">function</span>(<span class="params">module, exports, mypack_require</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">eval</span>(<span class="string">`</span></span><br><span class="line"><span class="string">    let style = document.createElement('style')</span></span><br><span class="line"><span class="string">    style.innerText = "body&#123;  background: hotpink;&#125;"</span></span><br><span class="line"><span class="string">    document.head.appendChild(style)</span></span><br><span class="line"><span class="string">  `</span>);</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> &#125;);</span><br></pre></td></tr></table></figure><ol start="6"><li>ä¸å‹ç¼©cssçš„ä¸€ç§å†™æ³•</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">style.innerText = \\\<span class="string">` <span class="subst">$&#123;source&#125;</span> \\\`</span></span><br><span class="line"><span class="string">// ä»£ç åœ¨æ„å»ºçš„æ—¶å€™ è¾“å‡ºåˆ°index.jså˜æˆäº† evel(`</span> ...\<span class="string">` backgrounde... \` ... `</span>)</span><br><span class="line"><span class="comment">// ä»£ç å†è¢«æ‰§è¡Œçš„æ—¶å€™ï¼Œæ‰§è¡Œevelçš„æ—¶å€™ï¼Œå°±ä»¥æ¨¡æ¿å­—ç¬¦ä¸²` background ...` å‘ˆç°å‡ºæ¥</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// index.js æ‰“åŒ…åå˜ä¸º</span></span><br><span class="line">style.innerText = \<span class="string">` body&#123;</span></span><br><span class="line"><span class="string">  background: hotpink;</span></span><br><span class="line"><span class="string">&#125; \`</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> æºç  </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ç§å¥½æ¯ä¸€é¢—åœŸè±†</title>
      <link href="/2019/05/24/%E7%A7%8D%E5%A5%BD%E6%AF%8F%E4%B8%80%E9%A2%97%E5%9C%9F%E8%B1%86/"/>
      <url>/2019/05/24/%E7%A7%8D%E5%A5%BD%E6%AF%8F%E4%B8%80%E9%A2%97%E5%9C%9F%E8%B1%86/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ„Ÿè°¢75å²çš„ä»»è€å…ˆç”Ÿ</p></blockquote><ul><li>â€œé£å£æµªå°–â€çš„åä¸º</li></ul><p>è¿™å‡ å¤©ç”±äºç¾å›½ç›¸å…³æ”¿ç­–ï¼Œåä¸ºçš„èŠ¯ç‰‡è¥¿æ–¹ä¾›åº”é“¾ä¼¼ä¹å…¨éƒ¨æ–­è£‚ï¼ŒåŠ ä¸Šä¹‹å‰å­Ÿå¥³å£«è¢«åŠ æ‹¿å¤§æ”¿åºœè½¯ç¦ï¼Œå°±åœ¨è¿™æ ·ä¸€ä¸ªç´§æ€¥å…³å¤´ï¼Œå¤§å®¶éƒ½åœ¨æ‹…å¿ƒåä¸ºä»Šåå‘å±•ä¹‹æ—¶ï¼Œä»»è€å…ˆç”Ÿçš„é‡‡è®¿ä¼¼ä¹å½¢æˆäº†å·¨å¤§åå·®ï¼Œå°±è¿æˆ‘ä»¬çš„å¤®è§†è®°è€…éƒ½æ„Ÿåˆ°è¯§å¼‚ï¼Œè€Œåœ¨ä»–çš„å›ç­”ä¸­ï¼Œæ— ä¸æ˜¾ç¤ºä¸€ä¸ªæŒèˆµäººçš„æ²‰ç¨³ã€‚</p><ul><li>ç§å¥½æ¯ä¸€é¢—åœŸè±†</li></ul><p>ä»»è€å…ˆç”Ÿçš„å›ç­”ä¸­ï¼Œå…³äºåŸºç¡€æ•™è‚²è°ˆåˆ°äº†å¾ˆå¤šï¼Œä¹Ÿæåˆ°å…¬å¸å†…éƒ¨çš„æ•°å­¦å®¶ï¼Œç‰©ç†å­¦å®¶ï¼Œä»¥åŠå·¥ç¨‹å¸ˆï¼Œå…¨çƒäººæ‰çš„å¼•è¿›,ç”Ÿäºå¿§æ‚£æ­»äºå®‰ä¹ã€‚è¿™éƒ½æ˜¯å€¼å¾—æˆ‘ä»¬æ€è€ƒçš„é—®é¢˜ã€‚æˆ–è®¸ä¸èƒ½å¸¦ä¸Šè¿‡äºåæ¿€çš„æƒ³æ³•ï¼ŒçœŸæ­£çš„å‘å±•ï¼Œæ‰æ˜¯æœ€é‡è¦çš„ï¼Œå°±å¦‚ä»»è€å…ˆç”Ÿæ‰€è¯´ï¼Œåœ¨æ”€ç™»ç å³°çš„é“è·¯ä¸Šï¼Œæˆ‘ä»¬æš‚æ—¶æ»‘äº†ä¸‹å»ï¼Œä½†æ˜¯æœ‰æœä¸€æ—¥ï¼Œæˆ‘ä»¬ä¼šåœ¨å³°é¡¶æºæ‰‹å…±è¿›ã€‚</p><p>åœ¨è¿™æ ·çš„ç¯å¢ƒä¸‹ï¼Œä¼¼ä¹éƒ½æœ‰äº†å»æèŠ¯ç‰‡çš„æƒ³æ³•ï¼Œä½†ç»™æˆ‘å½±å“æœ€å¤§çš„ï¼Œå°±æ˜¯é‚£å¥â€œç§å¥½æ¯ä¸€ä¸ªåœŸè±†â€ï¼Œæˆ‘ä»¬æ€æ ·çˆ±å›½ï¼Œå¹¶ä¸æ˜¯ä¹°ä»–çš„æ‰‹æœºï¼Œä¹Ÿä¸æ˜¯ä¸€çªèœ‚å»å¹²ä»€ä¹ˆï¼Œå„è¡Œå„ä¸šéƒ½å¯¹ç¥–å›½æœ‰è´¡çŒ®ï¼Œæˆ–è®¸æˆ‘ä»¬ç§å¥½æ¯ä¸€é¢—åœŸè±†ï¼Œå°±æ˜¯å¯¹ç¥–å›½æœ€å¤§çš„æ”¯æŒã€‚</p><p>åŠ æ²¹ï¼â€œæ„¿æœ‰æœä¸€æ—¥ï¼Œæˆ‘ä»¬åœ¨ç å³°æºæ‰‹å…±è¿›ã€‚â€</p><p><img src="/img/2019/05/24/1.png" alt="75å²çš„ä»»è€å…ˆç”Ÿ"></p>]]></content>
      
      
      
        <tags>
            
            <tag> å¿ƒæƒ… </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Apache2çš„å®‰è£…ä¸é…ç½®</title>
      <link href="/2019/05/23/Apache2%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/"/>
      <url>/2019/05/23/Apache2%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å½“å‰ç¯å¢ƒCentos7</p></blockquote><ol><li><p>å®‰è£…Apache</p><ul><li><code>yum install httpd</code></li></ul></li><li><p>httpd å¯åŠ¨</p><ul><li><code>service httpd start</code></li></ul></li><li><p>httpd çŠ¶æ€æŸ¥çœ‹</p><ul><li><code>service httpd status</code></li></ul></li><li><p>httpd åœæ­¢</p><ul><li><code>service httpd stop</code></li></ul></li><li><p>å®‰è£…ç›®å½•ä»‹ç»</p><ul><li><p>Apacheé»˜è®¤å°†ç½‘ç«™çš„æ ¹ç›®å½•æŒ‡å‘/var/www/html</p></li><li><p>é»˜è®¤çš„ä¸»é…ç½®æ–‡ä»¶/etc/httpd/conf/httpd.conf</p></li><li><p>é…ç½®å­˜å‚¨åœ¨çš„/etc/httpd/conf.d/ç›®å½•</p></li></ul></li></ol><ul><li>å¦‚æœå‡ºç°å¤–éƒ¨è®¾å¤‡æ— æ³•è®¿é—®çš„æƒ…å†µï¼Œåº”è¯¥è°ƒè¯•ç›¸å…³çš„é˜²ç«å¢™é…ç½®</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> è¿ç»´ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>45å¤©çš„è¯ç”Ÿ</title>
      <link href="/2019/05/20/45%E5%A4%A9%E7%9A%84%E8%AF%9E%E7%94%9F/"/>
      <url>/2019/05/20/45%E5%A4%A9%E7%9A%84%E8%AF%9E%E7%94%9F/</url>
      
        <content type="html"><![CDATA[<h2 id="è®°ç¬¬ä¸€ä¸ªå¾®ä¿¡å°ç¨‹åºçš„ä¸Šçº¿"><a href="#è®°ç¬¬ä¸€ä¸ªå¾®ä¿¡å°ç¨‹åºçš„ä¸Šçº¿" class="headerlink" title="è®°ç¬¬ä¸€ä¸ªå¾®ä¿¡å°ç¨‹åºçš„ä¸Šçº¿"></a>è®°ç¬¬ä¸€ä¸ªå¾®ä¿¡å°ç¨‹åºçš„ä¸Šçº¿</h2><blockquote><p>ä»0405å·åˆ›å»ºé¡¹ç›®å¼€å§‹ï¼Œåˆ°æ…¢æ…¢æ¢ç´¢ï¼Œä¸­é—´ç¡®å®æ”¶è·äº†ä¸å°‘çš„çŸ¥è¯†ï¼Œæœ€å¼€å§‹æ˜¯ä¸ºäº†â€™å¾®ä¿¡å°ç¨‹åºæ¯”èµ›â€™,ä½†æ˜¯åœ¨ä¸æ–­çš„æ‰“ç£¨å½“ä¸­ï¼Œæ‰æ…¢æ…¢å‘ç°åšä¸€ä¸ªåº”ç”¨ä¹Ÿå¹¶éå†™ä¸€ä¸ªç¨‹åºï¼Œéœ€è¦ä¸æ–­åœ°æ‰“ç£¨ï¼Œæˆ–è®¸æœ‰å†™å¥½çš„åŠŸèƒ½ï¼Œåˆè¦è¢«ç å»ï¼Œæˆ–è®¸å‡ å¤©åå‘ç°ä¹‹å‰çš„åšæ³•ç®€ç›´è ¢æäº†ï¼Œæ›´å¤šçš„æ„Ÿæ‚Ÿï¼Œéƒ½èè¿›äº†è¿™ä¸ªåº”ç”¨é‡Œï¼Œæ„Ÿè°¢å®ƒå¸¦ç»™æˆ‘çš„æˆé•¿ï¼Œç»§ç»­åŠ æ²¹å§ï¼</p></blockquote><p><img src="/img/2019/05/20/1.jpg" alt="å°ç¨‹åºç "></p>]]></content>
      
      
      
        <tags>
            
            <tag> å¿ƒæƒ… </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ä¸€ç™¾ä¸‡ç§å¯èƒ½</title>
      <link href="/2019/05/05/%E4%B8%80%E7%99%BE%E4%B8%87%E7%A7%8D%E5%8F%AF%E8%83%BD/"/>
      <url>/2019/05/05/%E4%B8%80%E7%99%BE%E4%B8%87%E7%A7%8D%E5%8F%AF%E8%83%BD/</url>
      
        <content type="html"><![CDATA[<blockquote><p>2018/11/16-2019/05/05 ä¸€å…±170å¤©</p></blockquote><p>ä¸çŸ¥ä¸è§‰ï¼Œè¿™æ ·è¿‡å»äº†å¿«åŠå¹´ï¼Œæ˜å¤©5.6å·å°±ç»“æŸäº†ï¼Œä¸€ç¬é—´æœ‰ä¸€ç™¾ä¸‡ç§å¯èƒ½ï¼Œæ„Ÿè°¢æˆé•¿ï¼Œè¿™ä¸€é˜µå­å¤±å»äº†å¾ˆå¤šï¼Œä¹Ÿè·å¾—äº†å¾ˆå¤šï¼Œå¾ˆå¤šçš„æ„æƒ³ä¸åˆ°ï¼Œå¾ˆå¤šçš„çªç„¶é—¯å…¥ï¼Œæ„Ÿè°¢è¿™ä¸€é˜µå­è®©æˆ‘æˆé•¿çš„äººå’Œäº‹ï¼Œæ˜å¤©å¼€å§‹å°±è¦åŠªåŠ›å­¦ä¹ äº†ï¼Œæˆ–è®¸è‡ªå·±è¿˜æ²¡æœ‰å¾ˆå¤šèƒ½åŠ›å»å¹²å¾ˆå¤šäº‹æƒ…ï¼Œæˆ–è®¸è¿˜æœ‰å¥½å¤šï¼Œå›æƒ³èµ·ä¹‹å‰çš„ç§ç§ä¸èˆï¼Œä½†æ˜¯ï¼Œè¿˜æ˜¯è¦ç»§ç»­å‘å‰ï¼ŒåŠ æ²¹å§ï¼Œæµ©å—ï¼Œè·¯è¿˜å¾ˆé•¿ï¼Œä¸€å®šä¸è¦æ”¾å¼ƒï¼Œç»™è‡ªå·±åŠ æ²¹ï¼Œä½ æ˜¯æœ€æ£’çš„ï¼</p><p><img src="/img/2019/05/05/1.jpg" alt="è‡´è‡ªå·±"></p>]]></content>
      
      
      
        <tags>
            
            <tag> å¿ƒæƒ… </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ä½¿ç”¨vmè¿æ¥è™šæ‹Ÿæœº</title>
      <link href="/2019/05/04/%E4%BD%BF%E7%94%A8vm%E8%BF%9E%E6%8E%A5%E8%99%9A%E6%8B%9F%E6%9C%BA/"/>
      <url>/2019/05/04/%E4%BD%BF%E7%94%A8vm%E8%BF%9E%E6%8E%A5%E8%99%9A%E6%8B%9F%E6%9C%BA/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åŸºäºCentos7</p></blockquote><p>å‚è€ƒ:<a href="https://blog.csdn.net/n950814abc/article/details/79512834#commentBox" target="_blank" rel="noopener">https://blog.csdn.net/n950814abc/article/details/79512834#commentBox</a></p><h4 id="è®¾ç½®è™šæ‹Ÿæœºç½‘ç»œè®¾ç½®"><a href="#è®¾ç½®è™šæ‹Ÿæœºç½‘ç»œè®¾ç½®" class="headerlink" title="è®¾ç½®è™šæ‹Ÿæœºç½‘ç»œè®¾ç½®"></a>è®¾ç½®è™šæ‹Ÿæœºç½‘ç»œè®¾ç½®</h4><p>ä½¿ç”¨vmnet8 å³ï¼ˆNATæ¨¡å¼ï¼‰è®°ä½<strong>å­ç½‘IP</strong>ä¸<strong>å­ç½‘æ©ç </strong></p><p>æ¯”å¦‚ <em>å­ç½‘IPï¼š192.168.204.0 å­ç½‘æ©ç ï¼š255.255.255.0</em></p><h4 id="ç½‘ç»œé…ç½®ï¼Œç”µè„‘ä¸­ç½‘ç»œé€‚é…å™¨VMare8-Network-Adapter"><a href="#ç½‘ç»œé…ç½®ï¼Œç”µè„‘ä¸­ç½‘ç»œé€‚é…å™¨VMare8-Network-Adapter" class="headerlink" title="ç½‘ç»œé…ç½®ï¼Œç”µè„‘ä¸­ç½‘ç»œé€‚é…å™¨VMare8 Network Adapter"></a>ç½‘ç»œé…ç½®ï¼Œç”µè„‘ä¸­ç½‘ç»œé€‚é…å™¨VMare8 Network Adapter</h4><p>æ³¨æ„ipåœ°å€ï¼Œæ˜¯ç”µè„‘æœ€ä¸ºä¸€å°æœºå™¨çš„ip<em>å¦‚ 192.168.204.6</em></p><p>å­ç½‘æ©ç ï¼Œé»˜è®¤ç½‘å…³å¡«å†™ä¹‹å‰å³å¯ DNSæœåŠ¡å™¨å¯ä»¥ä½¿ç”¨8.8.8.8 / 114.114.114.114</p><h4 id="é…ç½®linuxä¸­çš„ç½‘ç»œé…ç½®"><a href="#é…ç½®linuxä¸­çš„ç½‘ç»œé…ç½®" class="headerlink" title="é…ç½®linuxä¸­çš„ç½‘ç»œé…ç½®"></a>é…ç½®linuxä¸­çš„ç½‘ç»œé…ç½®</h4><p>vim /etc/sysconfig/network-scripts/ifcfg-ens33 ï¼ˆè¿™é‡Œä¸ºifcfg-ens33æ ¹æ®å®é™…æƒ…å†µæ¥ï¼‰</p><ul><li><p>ä¿®æ”¹é…ç½®ï¼š<br><code>BOOTPROTO=static  // é™æ€ip</code></p></li><li><p>æ–°å¢åœ°å€ï¼šå¦‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">IPADDR=192.168.204.134    // åˆ†é…çš„ip</span><br><span class="line">NERMASK=255.255.255.0     // å­ç½‘æ©ç </span><br><span class="line">GATEWAY=192.168.204.1     // é»˜è®¤ç½‘å…³</span><br></pre></td></tr></table></figure></li></ul><h4 id="é‡å¯linuxçš„ç½‘ç»œé…ç½®"><a href="#é‡å¯linuxçš„ç½‘ç»œé…ç½®" class="headerlink" title="é‡å¯linuxçš„ç½‘ç»œé…ç½®"></a>é‡å¯linuxçš„ç½‘ç»œé…ç½®</h4><p>service network restart</p><h4 id="æŸ¥çœ‹ipåœ°å€"><a href="#æŸ¥çœ‹ipåœ°å€" class="headerlink" title="æŸ¥çœ‹ipåœ°å€"></a>æŸ¥çœ‹ipåœ°å€</h4><p>ifconfig æŸ¥çœ‹ens33é‚£ä¸ª</p><h4 id="ç†è§£"><a href="#ç†è§£" class="headerlink" title="ç†è§£"></a>ç†è§£</h4><ul><li><p>ä¹‹å‰ä¸€ç›´åœ¨çº ç»“linuxæ˜¯å¦è¦è”ç½‘æ‰èƒ½ç”¨ï¼Œå› ä¸ºæ˜¯æˆ‘è‡ªå·±é…ç½®çš„ï¼Ÿä¸ºä»€ä¹ˆè¦è”ç½‘ï¼Ÿ </p><p>è¿™é‡Œå…¶å®æ˜¯è¿æ¥æœ¬åœ°æœåŠ¡çš„é‚£ä¸ªç½‘ï¼Œæ‰€ä»¥æ‰è¦åœ¨é‚£é‡Œé…ç½®å¼€æœºè‡ªå¯åŠ¨ã€‚</p></li><li><p>å¤–éƒ¨ç”µè„‘åœ°å€åˆ°åº•æ˜¯x.x.x.1è¿˜æ˜¯è¦å¦å¤–è®¾ç½®?</p><p>ä¸»æœºä¹Ÿç›¸å½“äºä¸€å°ç”µè„‘ï¼Œå’Œè™šæ‹Ÿæœºä¸­å¹³èµ·å¹³åï¼Œåªä¸è¿‡æ˜¯å®ƒè¿æ¥çš„æ­£å¥½æ˜¯ä»–è‡ªå·±çš„æœåŠ¡ï¼Œä½†æ˜¯ä¹Ÿè¦ç»™ä»–ä¸€ä¸ªå†…ç½‘ip,æ‰€ä»¥ä¹‹å‰è®¾ç½®äº†ç”µè„‘ä¸Šä¸º192.168.204.6ï¼Œåœ¨windowsä¸­æŸ¥çœ‹ä¹Ÿå¯ä»¥çœ‹åˆ°ã€‚è€Œ192.168.204.1æ˜¯é»˜è®¤ç½‘å…³åªè¦å’Œé»˜è®¤ç½‘å…³ä¸åŒå°±å¯ä»¥ã€‚</p></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> è¿ç»´ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ä½¿ç”¨nginxéƒ¨ç½²å‰ç«¯é¡¹ç›®</title>
      <link href="/2019/04/26/%E4%BD%BF%E7%94%A8nginx%E9%83%A8%E7%BD%B2%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE/"/>
      <url>/2019/04/26/%E4%BD%BF%E7%94%A8nginx%E9%83%A8%E7%BD%B2%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å½“å‰ç¯å¢ƒ centos7</p></blockquote><h4 id="å®‰è£…ç›¸å…³ä¾èµ–"><a href="#å®‰è£…ç›¸å…³ä¾èµ–" class="headerlink" title="å®‰è£…ç›¸å…³ä¾èµ–"></a>å®‰è£…ç›¸å…³ä¾èµ–</h4><ul><li><p>gcc å®‰è£…</p><p>å®‰è£… nginx éœ€è¦å…ˆå°†å®˜ç½‘ä¸‹è½½çš„æºç è¿›è¡Œç¼–è¯‘ï¼Œç¼–è¯‘ä¾èµ– gcc ç¯å¢ƒï¼Œå¦‚æœæ²¡æœ‰ gcc ç¯å¢ƒï¼Œåˆ™éœ€è¦å®‰è£…ï¼š</p><p><code>yum install gcc-c++</code></p></li><li><p>PCRE pcre-devel å®‰è£…</p><p>PCRE(Perl Compatible Regular Expressions) æ˜¯ä¸€ä¸ªPerlåº“ï¼ŒåŒ…æ‹¬ perl å…¼å®¹çš„æ­£åˆ™è¡¨è¾¾å¼åº“ã€‚nginx çš„ http æ¨¡å—ä½¿ç”¨ pcre æ¥è§£ææ­£åˆ™è¡¨è¾¾å¼ï¼Œæ‰€ä»¥éœ€è¦åœ¨ linux ä¸Šå®‰è£… pcre åº“ï¼Œpcre-devel æ˜¯ä½¿ç”¨ pcre å¼€å‘çš„ä¸€ä¸ªäºŒæ¬¡å¼€å‘åº“ã€‚nginxä¹Ÿéœ€è¦æ­¤åº“ã€‚å‘½ä»¤ï¼š</p><p><code>yum install -y pcre pcre-devel</code></p></li><li><p>zlib å®‰è£…</p><p>zlib åº“æä¾›äº†å¾ˆå¤šç§å‹ç¼©å’Œè§£å‹ç¼©çš„æ–¹å¼ï¼Œ nginx ä½¿ç”¨ zlib å¯¹ http åŒ…çš„å†…å®¹è¿›è¡Œ gzip ï¼Œæ‰€ä»¥éœ€è¦åœ¨ Centos ä¸Šå®‰è£… zlib åº“ã€‚</p><p><code>yum install -y zlib zlib-devel</code></p></li><li><p>OpenSSL å®‰è£…</p><p>OpenSSL æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å®‰å…¨å¥—æ¥å­—å±‚å¯†ç åº“ï¼Œå›Šæ‹¬ä¸»è¦çš„å¯†ç ç®—æ³•ã€å¸¸ç”¨çš„å¯†é’¥å’Œè¯ä¹¦å°è£…ç®¡ç†åŠŸèƒ½åŠ SSL åè®®ï¼Œå¹¶æä¾›ä¸°å¯Œçš„åº”ç”¨ç¨‹åºä¾›æµ‹è¯•æˆ–å…¶å®ƒç›®çš„ä½¿ç”¨ã€‚<br>nginx ä¸ä»…æ”¯æŒ http åè®®ï¼Œè¿˜æ”¯æŒ httpsï¼ˆå³åœ¨sslåè®®ä¸Šä¼ è¾“httpï¼‰ï¼Œæ‰€ä»¥éœ€è¦åœ¨ Centos å®‰è£… OpenSSL åº“ã€‚</p><p><code>yum install -y openssl openssl-devel</code></p></li></ul><h4 id="ä¸‹è½½nginx"><a href="#ä¸‹è½½nginx" class="headerlink" title="ä¸‹è½½nginx"></a>ä¸‹è½½nginx</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget -c https://nginx.org/download/nginx-1.10.1.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment"># æœç‹é•œåƒ</span></span><br><span class="line">wget -c http://mirrors.sohu.com/nginx/nginx-0.1.8.tar.gz</span><br></pre></td></tr></table></figure><h4 id="è§£å‹nginx"><a href="#è§£å‹nginx" class="headerlink" title="è§£å‹nginx"></a>è§£å‹nginx</h4><p><code>tar -xzvf nginx-1.10.1.tar.gz</code></p><h4 id="å®‰è£…ï¼ˆè¿›å…¥è§£å‹ç›®å½•ï¼‰"><a href="#å®‰è£…ï¼ˆè¿›å…¥è§£å‹ç›®å½•ï¼‰" class="headerlink" title="å®‰è£…ï¼ˆè¿›å…¥è§£å‹ç›®å½•ï¼‰"></a>å®‰è£…ï¼ˆè¿›å…¥è§£å‹ç›®å½•ï¼‰</h4><ul><li><code>./configure</code></li><li><code>make</code></li><li><code>make install</code></li><li>æŸ¥çœ‹nginxçš„å®‰è£…ç›®å½•<code>whereis nginx</code></li></ul><h4 id="æµ‹è¯•nginx"><a href="#æµ‹è¯•nginx" class="headerlink" title="æµ‹è¯•nginx"></a>æµ‹è¯•nginx</h4><ul><li><code>./nginx</code> å¼€åŒºæœåŠ¡</li><li><code>./nginx -s quit</code> å…³é—­æœåŠ¡</li></ul><h4 id="éƒ¨ç½²é¡¹ç›®"><a href="#éƒ¨ç½²é¡¹ç›®" class="headerlink" title="éƒ¨ç½²é¡¹ç›®"></a>éƒ¨ç½²é¡¹ç›®</h4><ul><li>åˆ‡æ¢åˆ°å®‰è£…ç›®å½•ä¸­çš„<code>conf</code>æ–‡ä»¶å¤¹</li><li>ç¼–è¾‘<code>vim nginx.config</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">location / &#123;</span><br><span class="line">    root  &lt;é¡¹ç›®çš„è·¯å¾„&gt;;</span><br><span class="line">    index  index.html index.htm;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="å¯åŠ¨nginxæŸ¥çœ‹è¿è¡Œæƒ…å†µ"><a href="#å¯åŠ¨nginxæŸ¥çœ‹è¿è¡Œæƒ…å†µ" class="headerlink" title="å¯åŠ¨nginxæŸ¥çœ‹è¿è¡Œæƒ…å†µ"></a>å¯åŠ¨nginxæŸ¥çœ‹è¿è¡Œæƒ…å†µ</h4><ul><li><code>ps -ef | grep nginx</code> æŸ¥çœ‹nginxè¿è¡Œçš„æƒ…å†µä»¥åŠpid</li><li><code>./nginx -s quit</code></li></ul><h4 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h4><ul><li>ä»¥ä¸Šæ“ä½œéœ€åœ¨nginxå®‰è£…ç›®å½•ä¸­ï¼Œï¼ˆå¯å‚è€ƒlinuxç¯å¢ƒå˜é‡ç›¸å…³çŸ¥è¯†ï¼‰</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> è¿ç»´ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å…³äºäº‘å¼€å‘ä¸­äº‘å‡½æ•°è¶…æ—¶å®šä¹‰</title>
      <link href="/2019/04/19/%E5%85%B3%E4%BA%8E%E4%BA%91%E5%BC%80%E5%8F%91%E4%B8%AD%E4%BA%91%E5%87%BD%E6%95%B0%E8%B6%85%E6%97%B6%E5%AE%9A%E4%B9%89/"/>
      <url>/2019/04/19/%E5%85%B3%E4%BA%8E%E4%BA%91%E5%BC%80%E5%8F%91%E4%B8%AD%E4%BA%91%E5%87%BD%E6%95%B0%E8%B6%85%E6%97%B6%E5%AE%9A%E4%B9%89/</url>
      
        <content type="html"><![CDATA[<p>åœ¨äº‘å‡½æ•°ä¸­çš„å®šä¹‰é‡Œï¼Œæœ‰ä¸€ä¸ªå…³äºè¶…æ—¶çš„æ¦‚å¿µï¼Œè¿™é‡Œå¹¶ä¸æ˜¯ç¨‹åºå®é™…è¿è¡Œçš„æ—¶é—´ï¼Œè€Œæ˜¯ä¸€ä¸ªé¢„æœŸè¿è¡Œçš„æ—¶é—´</p><p>æ¯”å¦‚ä¸€ä¸ªç¨‹åºè·‘ä¸‹æ¥ä»…ç”¨äº† 8ms ä½†æ˜¯ä»–ä¸€ç›´åœ¨ç­‰å¾…å†…éƒ¨çš„å¼‚æ­¥æ“ä½œæ‰§è¡Œå®Œæ‰ä¼šå…³é—­ï¼Œè¿™é‡Œå°±æ˜¯å¼‚æ­¥æ“ä½œè¶…æ—¶ï¼Œå¯¼è‡´æ•´ä¸ªè¯·æ±‚è¶…æ—¶ã€‚ï¼ˆ20sæ˜¯æˆªæ­¢ç›®å‰äº‘å‡½æ•°æœ€é•¿è¿è¡Œæ—¶é—´ï¼‰<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'=======  start  ==='</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Date</span>().getTime())   <span class="comment">// 1555601179634</span></span><br><span class="line">db.collection(<span class="string">"testCollection"</span>).get()</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'===ç¬¬ä¸€æ¬¡===='</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Date</span>().getTime()) <span class="comment">// 1555601179843</span></span><br><span class="line">    <span class="keyword">return</span> timeout(<span class="number">5000</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'===ç¬¬äºŒæ¬¡===='</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Date</span>().getTime()) <span class="comment">// 1555601184847</span></span><br><span class="line">    <span class="keyword">return</span> timeout(<span class="number">5000</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'===ç¬¬ä¸‰æ¬¡===='</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Date</span>().getTime()) <span class="comment">// 1555601189853</span></span><br><span class="line">    <span class="keyword">return</span> timeout(<span class="number">5000</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'===ç¬¬å››æ¬¡===='</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Date</span>().getTime()) <span class="comment">// 1555601194853</span></span><br><span class="line">    <span class="keyword">return</span> timeout(<span class="number">5000</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'===ç¬¬äº”æ¬¡===='</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Date</span>().getTime()) <span class="comment">// è¿™é‡Œå·²ç»æ˜¯è¶…æ—¶åŒºäº†</span></span><br><span class="line">    <span class="keyword">return</span> timeout(<span class="number">5000</span>)</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'=======  end  ==='</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Date</span>().getTime())   <span class="comment">// 1555601179642</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å°è£…çš„Promiseçš„ç­‰å¾…å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">timeout</span>(<span class="params">ms</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">    setTimeout(resolve, ms);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> wxmp </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>02å…³äºäº‘å‡½æ•°ä¸­awaitä¸asyncçš„ç†è§£</title>
      <link href="/2019/04/19/%E5%85%B3%E4%BA%8E%E4%BA%91%E5%87%BD%E6%95%B0%E4%B8%ADawait%E4%B8%8Easync%E7%9A%84%E7%90%86%E8%A7%A3/"/>
      <url>/2019/04/19/%E5%85%B3%E4%BA%8E%E4%BA%91%E5%87%BD%E6%95%B0%E4%B8%ADawait%E4%B8%8Easync%E7%9A%84%E7%90%86%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<p>åœ¨å°ç¨‹åºäº‘å¼€å‘çš„æœåŠ¡ç«¯äº¤äº’æ•°æ®åº“çš„æ¡ˆä¾‹ä¸­ï¼Œå®˜æ–¹æ–‡æ¡£éƒ½ç”¨äº†asyncä¸await,å…¶å®æ˜¯ä¸ºäº†æ›´å¥½çš„è¡¨ç¤ºå‡ºå…ˆåæ¬¡åº</p><h4 id="æ ¸å¿ƒè¯­æ³•"><a href="#æ ¸å¿ƒè¯­æ³•" class="headerlink" title="æ ¸å¿ƒè¯­æ³•"></a>æ ¸å¿ƒè¯­æ³•</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">await</span> asyncFunction()   <span class="comment">// ç­‰å¾…å¼‚æ­¥å‡½æ•°çš„æ‰§è¡Œ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶å®ä»–ä¼šé˜»å¡å‡½æ•°ï¼Œå¯ä»¥ç†è§£ä¸ºæŠŠä¸€ä¸ªå¼‚æ­¥æ´»ç”Ÿç”Ÿå˜æˆåŒæ­¥äº†</p><h4 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">;<span class="function">(<span class="params">(</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Date</span>().getTime())    <span class="comment">// 1555597655277</span></span><br><span class="line">  timeout(<span class="number">5000</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Date</span>().getTime())    <span class="comment">// 1555597655279</span></span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">;<span class="function">(<span class="params"><span class="keyword">async</span> (</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Date</span>().getTime())    <span class="comment">// 1555597655277</span></span><br><span class="line">  <span class="keyword">await</span> timeout(<span class="number">5000</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Date</span>().getTime())    <span class="comment">// 1555597655279</span></span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆå¯ä»¥çœ‹å‡ºï¼Œè¿™æ ·åšçš„ç›®çš„ï¼Œä¸€æ–¹é¢æ˜¯ä¸ºäº†ä¸¥æ§ä»£ç çš„æ‰§è¡Œé¡ºåºï¼Œå¦ä¸€æ–¹ä¾¿ä¹Ÿçœå»äº†å¾ˆå¤šè€ƒè™‘å¼‚æ­¥çš„éº»çƒ¦ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> wxmp </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>mpvue-fullpage</title>
      <link href="/2019/04/05/mpvue-fullpage/"/>
      <url>/2019/04/05/mpvue-fullpage/</url>
      
        <content type="html"><![CDATA[<p>è‡ªå®šä¹‰çš„fullpageæ•ˆæœ, å…¶æ ¸å¿ƒæ˜¯<code>top</code>å±æ€§çš„æ”¹å˜</p><h4 id="èµ·æ­¥"><a href="#èµ·æ­¥" class="headerlink" title="èµ·æ­¥"></a>èµ·æ­¥</h4><ol><li>å¤åˆ¶æ­¤æ¨¡æ¿å»è‡ªå·±çš„é¡¹ç›®ä¸­</li><li>æ¯ä¸€ä¸ªæ»šåŠ¨å±divæ·»åŠ ä¸Š<code>class:section</code></li><li>åœ¨totalPageNumå¡«å…¥å½“å‰æ»šåŠ¨å±çš„æ•°é‡</li></ol><h4 id="ä½¿ç”¨äº†ä¸€äº›æŠ€å·§"><a href="#ä½¿ç”¨äº†ä¸€äº›æŠ€å·§" class="headerlink" title="ä½¿ç”¨äº†ä¸€äº›æŠ€å·§"></a>ä½¿ç”¨äº†ä¸€äº›æŠ€å·§</h4><ul><li>cssé«˜åº¦å±æ€§  hv, wv, é«˜åº¦ï¼Œå®½åº¦çš„è§†å£å¤§å°ï¼Œ 100hv = 1 viewport height ç­‰ç­‰</li><li>ä¸ºäº†åŒå‘æ•°æ®ç»‘å®šï¼Œå°†å˜åŒ–çš„csså±æ€§ ä»¥styleå±æ€§çš„æ–¹å¼å†™åœ¨äº†æ ‡ç­¾å†…éƒ¨ã€‚</li></ul><h4 id="é¢„è§ˆæ•ˆæœ"><a href="#é¢„è§ˆæ•ˆæœ" class="headerlink" title="é¢„è§ˆæ•ˆæœ"></a>é¢„è§ˆæ•ˆæœ</h4><p><img src="/img/2019/04/05/1.gif" alt="é¢„è§ˆæ•ˆæœ"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;fullpage-container&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;fullpage-container-fill&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;scroll-fullpage&quot; :style=&quot;&#123; top: top &#125;&quot; ref=&quot;fullpage&quot;&gt;</span><br><span class="line">        &lt;div</span><br><span class="line">          id=&quot;hook1&quot;</span><br><span class="line">          class=&quot;section section01&quot;</span><br><span class="line">          :class=&quot;&#123; active: scrollindex === 0 &#125;&quot;</span><br><span class="line">          @touchstart=&quot;scrollTouchStart&quot;</span><br><span class="line">          @touchmove=&quot;scrollTouchMove&quot;</span><br><span class="line">          @touchend=&quot;scrollTouchEnd&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;div class=&quot;cont&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;cont-body&quot;&gt;</span><br><span class="line">              &lt;h1&gt;æ’é˜ŸæŒ‚å·&lt;/h1&gt;</span><br><span class="line">              &lt;h3&gt;è…°è…¿ç—›---&gt;å»ºè®®å‰å¾€éª¨ä¼¤ç§‘å°±è¯Š&lt;/h3&gt;</span><br><span class="line">              &lt;p&gt;â‘ &lt;/p&gt;</span><br><span class="line">              &lt;h4&gt;â†“â†“â†“â†“â†“&lt;/h4&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div</span><br><span class="line">          id=&quot;hook2&quot;</span><br><span class="line">          class=&quot;section section02&quot;</span><br><span class="line">          :class=&quot;&#123; active: scrollindex === 1 &#125;&quot;</span><br><span class="line">          @touchstart=&quot;scrollTouchStart&quot;</span><br><span class="line">          @touchmove=&quot;scrollTouchMove&quot;</span><br><span class="line">          @touchend=&quot;scrollTouchEnd&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;div class=&quot;cont&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;cont-body&quot;&gt;</span><br><span class="line">              &lt;h1&gt;å‰å¾€éª¨ä¼¤ç§‘&lt;/h1&gt;</span><br><span class="line">              &lt;h3&gt;ä¸‰æ¥¼ï¼Œç”µæ¢¯å£å³ä¾§&lt;/h3&gt;</span><br><span class="line">              &lt;p&gt;â‘¡&lt;/p&gt;</span><br><span class="line">              &lt;h4&gt;â†“â†“â†“â†“â†“&lt;/h4&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div</span><br><span class="line">          id=&quot;hook3&quot;</span><br><span class="line">          class=&quot;section section03&quot;</span><br><span class="line">          :class=&quot;&#123; active: scrollindex === 2 &#125;&quot;</span><br><span class="line">          @touchstart=&quot;scrollTouchStart&quot;</span><br><span class="line">          @touchmove=&quot;scrollTouchMove&quot;</span><br><span class="line">          @touchend=&quot;scrollTouchEnd&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;div class=&quot;cont&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;cont-body&quot;&gt;</span><br><span class="line">              &lt;h1&gt;é¢„çº¦åŒ»å¸ˆ&lt;/h1&gt;</span><br><span class="line">              &lt;h3&gt;è¯·å°†æ‚¨çš„æŒ‚å·å•ä¸å‰å°å¤„æ‰«æ&lt;/h3&gt;</span><br><span class="line">              &lt;p&gt;â‘¢&lt;/p&gt;</span><br><span class="line">              &lt;h4&gt;â†“â†“â†“â†“â†“&lt;/h4&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div</span><br><span class="line">          id=&quot;hook4&quot;</span><br><span class="line">          class=&quot;section section04&quot;</span><br><span class="line">          :class=&quot;&#123; active: scrollindex === 3 &#125;&quot;</span><br><span class="line">          @touchstart=&quot;scrollTouchStart&quot;</span><br><span class="line">          @touchmove=&quot;scrollTouchMove&quot;</span><br><span class="line">          @touchend=&quot;scrollTouchEnd&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;div class=&quot;cont&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;cont-body&quot;&gt;</span><br><span class="line">              &lt;h1&gt;æ”¶è´¹å¤„ç¼´çº³åŒ»è¯è´¹&lt;/h1&gt;</span><br><span class="line">              &lt;h3&gt;ä¸€æ¥¼ï¼Œå¤§å…ï¼Œè¿›å¤§é—¨å³æ‰‹å¤„&lt;/h3&gt;</span><br><span class="line">              &lt;p&gt;â‘£&lt;/p&gt;</span><br><span class="line">              &lt;h4&gt;â†“â†“â†“â†“â†“&lt;/h4&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      scrollindex: 0, // å½“å‰é¡µé¢çš„ç´¢å¼•å€¼</span><br><span class="line">      totalPageNum: 4, // æ€»å…±é¡µé¢æ•°</span><br><span class="line">      starty: 0, // å¼€å§‹çš„ä½ç½®x</span><br><span class="line">      startTime: 0, // å¼€å§‹çš„æ—¶é—´æˆ³</span><br><span class="line">      endy: 0, // ç»“æŸçš„ä½ç½®y</span><br><span class="line">      endTime: 0, // ç»“æŸçš„æ—¶é—´æˆ³</span><br><span class="line">      critical: 120, // è§¦å‘ç¿»é¡µçš„ä¸´ç•Œå€¼</span><br><span class="line">      maxTimeCritical: 300, // æ»‘åŠ¨çš„æ—¶é—´æˆ³ä¸´ç•Œå€¼ä¸Šé™</span><br><span class="line">      minTimeCritical: 100 // æ»‘åŠ¨çš„æ—¶é—´æˆ³ä¸´ç•Œå€¼ä¸‹é™</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    top() &#123;</span><br><span class="line">      // è®¡ç®—å½“å‰å¾€ä¸Šçš„è·ç¦»</span><br><span class="line">      return this.scrollindex * -100 + &apos;vh&apos;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    scrollTouchStart(e) &#123;</span><br><span class="line">      e = e.mp;</span><br><span class="line">      // è·å–å¼€å§‹ç‚¹å‡»ç‚¹</span><br><span class="line">      this.starty = e.touches[0].pageY;</span><br><span class="line">      // è·å–å½“å‰ç‚¹å‡»æ—¶é—´</span><br><span class="line">      this.startTime = e.timeStamp;</span><br><span class="line">    &#125;,</span><br><span class="line">    scrollTouchMove(e) &#123;&#125;,</span><br><span class="line">    scrollTouchEnd(e) &#123;</span><br><span class="line">      e = e.mp;</span><br><span class="line">      // è·å–ç»“æŸä½ç½®</span><br><span class="line">      this.endy = e.changedTouches[0].pageY;</span><br><span class="line">      // é—´éš”æ—¶é—´</span><br><span class="line">      this.endTime = e.timeStamp;</span><br><span class="line">      let timeStampdiffer = this.endTime - this.startTime;</span><br><span class="line"></span><br><span class="line">      if (</span><br><span class="line">        // æ­¤æ—¶åˆ¤æ–­æ˜¯æ»‘åŠ¨çš„æ—¶é—´å·®</span><br><span class="line">        timeStampdiffer &lt;= this.maxTimeCritical &amp;&amp;</span><br><span class="line">        timeStampdiffer &gt; this.minTimeCritical &amp;&amp;</span><br><span class="line">        // æ­¤æ—¶åˆ¤æ–­å·²ç»æ”¹å˜äº† åˆå§‹ä½ç½® &gt; å½“å‰ä½ç½®</span><br><span class="line">        this.starty &gt; e.changedTouches[0].pageY</span><br><span class="line">      ) &#123;</span><br><span class="line">        // æ‰‹åŠ¿ä¸Šæ»‘  ç§»åŠ¨</span><br><span class="line">        this.scrollindex =</span><br><span class="line">          this.scrollindex &gt;= this.totalPageNum-1 ? this.scrollindex : this.scrollindex + 1;</span><br><span class="line">      &#125; else if (</span><br><span class="line">        // åˆ¤æ–­æ—¶é—´</span><br><span class="line">        timeStampdiffer &lt;= this.maxTimeCritical &amp;&amp;</span><br><span class="line">        timeStampdiffer &gt; this.minTimeCritical &amp;&amp;</span><br><span class="line">        // åˆå§‹ä½ç½® &lt; å½“å‰ä½ç½®  æ‰‹åŠ¿ä¸‹æ»‘</span><br><span class="line">        this.starty &lt; e.changedTouches[0].pageY</span><br><span class="line">      ) &#123;</span><br><span class="line">        // æ‰‹åŠ¿ä¸‹æ»‘ ç§»åŠ¨</span><br><span class="line">        this.scrollindex = this.scrollindex &lt;= 0 ? 0 : this.scrollindex - 1 ;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;wxss&quot;&gt;</span><br><span class="line">#hook1 &#123;</span><br><span class="line">  background: #9999cc;</span><br><span class="line">&#125;</span><br><span class="line">#hook2 &#123;</span><br><span class="line">  background: #cc66cc;</span><br><span class="line">&#125;</span><br><span class="line">#hook3 &#123;</span><br><span class="line">  background: #cc99cc;</span><br><span class="line">&#125;</span><br><span class="line">#hook4 &#123;</span><br><span class="line">  background: #cccccc;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.cont&#123;</span><br><span class="line">  position: relative;</span><br><span class="line">&#125;</span><br><span class="line">.cont-body h4&#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  bottom: 100rpx;</span><br><span class="line">  font-size: 48rpx;</span><br><span class="line">  left: 45%;</span><br><span class="line">  color: #fff;</span><br><span class="line">&#125;</span><br><span class="line">.cont-body p&#123;</span><br><span class="line">  text-align: center;</span><br><span class="line">  font-size: 80rpx;</span><br><span class="line">  color: #fff;</span><br><span class="line">  margin-top: 300rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">page &#123;</span><br><span class="line">  height: 100%;</span><br><span class="line">  background: #fff;</span><br><span class="line">  color: #282828;</span><br><span class="line">&#125;</span><br><span class="line">.fullpage-container &#123;</span><br><span class="line">  height: 100%;</span><br><span class="line">  flex: 1;</span><br><span class="line">  flex-direction: column;</span><br><span class="line">  box-sizing: border-box;</span><br><span class="line">  padding: 0;</span><br><span class="line">  align-items: initial;</span><br><span class="line">  justify-content: first baseline;</span><br><span class="line">&#125;</span><br><span class="line">.fullpage-container-fill &#123;</span><br><span class="line">  height: 100%;</span><br><span class="line">  overflow: hidden;</span><br><span class="line">  position: relative;</span><br><span class="line">&#125;</span><br><span class="line">.scroll-fullpage &#123;</span><br><span class="line">  box-sizing: border-box;</span><br><span class="line">  position: absolute;</span><br><span class="line">  /* å¢åŠ åŠ¨ç”»*/</span><br><span class="line">  transition: top .3s linear;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.section &#123;</span><br><span class="line">  width: 100vw;</span><br><span class="line">  height: 100vh;</span><br><span class="line">  position: relative;</span><br><span class="line">&#125;</span><br><span class="line">.cont &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 100%;</span><br><span class="line">  margin: 0 auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>orclåˆ›å»ºæ•°æ®åº“åŸºäºDBCA-11gï¼ˆå›¾ï¼‰</title>
      <link href="/2019/03/17/orcl%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E4%BA%8EDBCA-11g/"/>
      <url>/2019/03/17/orcl%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E4%BA%8EDBCA-11g/</url>
      
        <content type="html"><![CDATA[<h4 id="ç¬¬1æ­¥"><a href="#ç¬¬1æ­¥" class="headerlink" title="ç¬¬1æ­¥"></a>ç¬¬1æ­¥</h4><p><img src="/img/2019/03/17/1.png" alt=""></p><h4 id="ç¬¬2æ­¥"><a href="#ç¬¬2æ­¥" class="headerlink" title="ç¬¬2æ­¥"></a>ç¬¬2æ­¥</h4><p><img src="/img/2019/03/17/2.png" alt=""></p><h4 id="ç¬¬3æ­¥"><a href="#ç¬¬3æ­¥" class="headerlink" title="ç¬¬3æ­¥"></a>ç¬¬3æ­¥</h4><p><img src="/img/2019/03/17/3.png" alt=""></p><h4 id="ç¬¬4æ­¥"><a href="#ç¬¬4æ­¥" class="headerlink" title="ç¬¬4æ­¥"></a>ç¬¬4æ­¥</h4><p><img src="/img/2019/03/17/4.png" alt=""></p><h4 id="ç¬¬5æ­¥"><a href="#ç¬¬5æ­¥" class="headerlink" title="ç¬¬5æ­¥"></a>ç¬¬5æ­¥</h4><p><img src="/img/2019/03/17/5.png" alt=""></p><h4 id="ç¬¬6æ­¥"><a href="#ç¬¬6æ­¥" class="headerlink" title="ç¬¬6æ­¥"></a>ç¬¬6æ­¥</h4><p><img src="/img/2019/03/17/6.png" alt=""></p><h4 id="ç¬¬7æ­¥"><a href="#ç¬¬7æ­¥" class="headerlink" title="ç¬¬7æ­¥"></a>ç¬¬7æ­¥</h4><p><img src="/img/2019/03/17/7.png" alt=""></p><h4 id="ç¬¬8æ­¥"><a href="#ç¬¬8æ­¥" class="headerlink" title="ç¬¬8æ­¥"></a>ç¬¬8æ­¥</h4><p><img src="/img/2019/03/17/8.png" alt=""></p><h4 id="ç¬¬9æ­¥"><a href="#ç¬¬9æ­¥" class="headerlink" title="ç¬¬9æ­¥"></a>ç¬¬9æ­¥</h4><p><img src="/img/2019/03/17/9.png" alt=""></p><h4 id="ç¬¬10æ­¥"><a href="#ç¬¬10æ­¥" class="headerlink" title="ç¬¬10æ­¥"></a>ç¬¬10æ­¥</h4><p><img src="/img/2019/03/17/10.png" alt=""></p><h4 id="ç¬¬11æ­¥"><a href="#ç¬¬11æ­¥" class="headerlink" title="ç¬¬11æ­¥"></a>ç¬¬11æ­¥</h4><p><img src="/img/2019/03/17/11.png" alt=""></p><h4 id="ç¡®è®¤å®‰è£…"><a href="#ç¡®è®¤å®‰è£…" class="headerlink" title="ç¡®è®¤å®‰è£…"></a>ç¡®è®¤å®‰è£…</h4><p><img src="/img/2019/03/17/12.png" alt=""></p><p>æœ€åä¸€è·¯ç­‰å¾…å°±å¯ä»¥</p>]]></content>
      
      
      
        <tags>
            
            <tag> è¿ç»´ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>npmä¸­å…³äºä¾èµ–åŒ…å†²çªçš„é—®é¢˜</title>
      <link href="/2019/03/06/npm%E4%B8%AD%E5%85%B3%E4%BA%8E%E4%BE%9D%E8%B5%96%E5%8C%85%E5%86%B2%E7%AA%81%E7%9A%84%E9%97%AE%E9%A2%98/"/>
      <url>/2019/03/06/npm%E4%B8%AD%E5%85%B3%E4%BA%8E%E4%BE%9D%E8%B5%96%E5%8C%85%E5%86%B2%E7%AA%81%E7%9A%84%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æµ‹è¯•ç¯å¢ƒ npm-v 6.8.0 </p></blockquote><p>è¦äº†è§£npmè§£å†³åŒ…å†²çªçš„é—®é¢˜ï¼Œå°±è¦å…ˆäº†è§£ä¸€ä¸‹ä»–æ˜¯å¦‚ä½•æ‰¾åŒ…çš„</p><h4 id="nodeä¸­requireæŸ¥æ‰¾ä¾èµ–çš„æ–¹å¼"><a href="#nodeä¸­requireæŸ¥æ‰¾ä¾èµ–çš„æ–¹å¼" class="headerlink" title="nodeä¸­requireæŸ¥æ‰¾ä¾èµ–çš„æ–¹å¼"></a>nodeä¸­requireæŸ¥æ‰¾ä¾èµ–çš„æ–¹å¼</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">â”‚   app.js</span><br><span class="line">â”‚</span><br><span class="line">â””â”€â”€â”€node_modules</span><br></pre></td></tr></table></figure><p>ä¸€èˆ¬æˆ‘ä»¬ä»¬çš„app.jsä¸­çš„requieræŸ¥æ‰¾ä¾èµ–çš„æ—¶å€™ï¼Œä¼šå»ç›®å½•ä¸‹çš„node_moduleså»å¯»æ‰¾</p><p>ä½†æ˜¯ï¼Œå®é™…ä»–ä¼šä»¥ä¸€ç§ä¾æ¬¡å‘ä¸Šçš„æ–¹å¼è¿›è¡Œå¯»æ‰¾ï¼Œ<strong>è¿™é‡Œä»¥commonæ¨¡å—ä¾èµ–jqueryä¸ºä¾‹</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// common.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> $ = <span class="built_in">require</span>(<span class="string">'jquery'</span>)</span><br></pre></td></tr></table></figure></p><hr><ul><li><p>å‘å¤–å±‚ç›®å½•å¯»æ‰¾(å½“å‰ç›®å½•æ²¡æ‰¾åˆ°æŒ‡å®šçš„js)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">â”‚   app.js</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€â”€â”€common</span><br><span class="line">â”‚   â”‚   common.js</span><br><span class="line">â”‚   â”‚</span><br><span class="line">â”‚   â””â”€â”€â”€node_modules</span><br><span class="line">â”‚       â””â”€â”€â”€bootstrap</span><br><span class="line">â””â”€â”€â”€node_modules</span><br><span class="line">    â””â”€â”€â”€jquery</span><br></pre></td></tr></table></figure><ol><li>é¦–å…ˆ common.jsä¼šåœ¨æœ¬çº§çš„node_modulesä¸­å¯»æ‰¾æ˜¯å¦å­˜åœ¨jquery</li><li>ä¹‹åï¼Œä»–ä¼šå‘ä¸Šä¸€å±‚ç›®å½•å»å¯»æ‰¾ï¼Œæ˜¯å¦æœ‰node_modules,å¹¶å»å¯»æ‰¾</li></ol></li></ul><hr><ul><li><p>å‘å¤–å±‚ç›®å½•å¯»æ‰¾(å½“å‰ç›®å½•ä¸å­˜åœ¨node_modules)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">â”‚   app.js</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€â”€â”€common</span><br><span class="line">â”‚       common.js</span><br><span class="line">â”‚</span><br><span class="line">â””â”€â”€â”€node_modules</span><br><span class="line">    â””â”€â”€â”€jquery</span><br></pre></td></tr></table></figure><ol><li>é¦–å…ˆï¼Œcommon.jsçš„æœ¬çº§ç›®å½•ä¸å­˜åœ¨node_modulesï¼Œç›´æ¥è·³å‘ä¸Šä¸€çº§ç›®å½•</li><li>åœ¨ä¸Šçº§ç›®å½•ä¸­ï¼Œæ‰¾åˆ°äº†æŒ‡å®šçš„js</li></ol></li></ul><hr><ul><li><p>å‘å¤šå±‚ç›®å½•ä¸‹å¯»æ‰¾ï¼ˆç›´åˆ°æ‰¾åˆ°æ ¹ç›®å½•ä¸ºæ­¢ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">â”‚   app.js</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€â”€â”€mgr</span><br><span class="line">â”‚   â””â”€â”€â”€public</span><br><span class="line">â”‚       â”œâ”€â”€â”€common</span><br><span class="line">â”‚       â”‚   â”‚   common.js</span><br><span class="line">â”‚       â”‚   â”‚</span><br><span class="line">â”‚       â”‚   â””â”€â”€â”€node_modules</span><br><span class="line">â”‚       â”‚       â””â”€â”€â”€bootstrap</span><br><span class="line">â”‚       â””â”€â”€â”€node_modules</span><br><span class="line">â”‚           â””â”€â”€â”€express</span><br><span class="line">â””â”€â”€â”€node_modules</span><br><span class="line">    â””â”€â”€â”€jquery</span><br></pre></td></tr></table></figure><ol><li>é¦–å…ˆï¼Œcommon.jsåœ¨æœ¬çº§çš„node_modulesä¸­å¯»æ‰¾ï¼Œæœªæ‰¾åˆ°ï¼Œè·³è½¬åˆ°ä¸Šä¸€çº§ç›®å½•</li><li>æŸ¥æ‰¾åˆ°äº†publicç›®å½•ï¼Œ æŸ¥çœ‹æ­¤ç›®å½•çš„node_modulesä¸­å¯»æ‰¾ï¼Œæœªæ‰¾åˆ°ï¼Œè·³è½¬ä¸Šä¸€çº§ç›®å½•</li><li>æ¥åˆ°äº†mgrç›®å½•ï¼Œ æœªæ‰¾åˆ°node_modulesç›®å½•ï¼Œç»§ç»­å‘ä¸Šå¯»æ‰¾</li><li>æ¥åˆ°äº†é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œåœ¨æœ¬çº§çš„node_modulesä¸­ï¼Œå¯»æ‰¾åˆ°äº†</li></ol><p>å¯ä»¥çœ‹å‡ºï¼Œä»–åœ¨å¯»æ‰¾çš„æ—¶å€™ï¼Œä¼šä¾æ¬¡å‘ä¸Šå¯»æ‰¾ï¼Œç›´åˆ°æ ¹ç›®å½•ä¸‹</p></li></ul><hr><ul><li><p><strong>nodeä¸ä¼šå»å…„å¼Ÿç›®å½•ä¸­æŸ¥æ‰¾</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">â”‚   app.js</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€â”€â”€common</span><br><span class="line">â”‚   â”‚   common.js</span><br><span class="line">â”‚   â”‚</span><br><span class="line">â”‚   â””â”€â”€â”€node_modules</span><br><span class="line">â”‚       â””â”€â”€â”€bootstrap</span><br><span class="line">â”œâ”€â”€â”€host</span><br><span class="line">â”‚   â””â”€â”€â”€node_modules</span><br><span class="line">â”‚       â””â”€â”€â”€jquery</span><br><span class="line">â””â”€â”€â”€node_modules</span><br><span class="line">    â””â”€â”€â”€express</span><br></pre></td></tr></table></figure><ol><li>common.jså»æœ¬çº§node_modulesç›®å½•ä¸‹å¯»æ‰¾ï¼Œæ²¡æœ‰æ‰¾åˆ°ï¼Œè¿”å›ä¸Šä¸€çº§</li><li>æ¥åˆ°äº†é¡¹ç›®æ ¹ç›®å½•ï¼Œå»æœ¬çº§ç›®å½•ä¸‹çš„node_modulesç›®å½•ä¸‹å¯»æ‰¾,æ²¡æœ‰æ‰¾åˆ°ï¼Œå¯»æ‰¾ç»“æŸï¼Œæœªæ‰¾åˆ°ã€‚</li><li><strong>æ³¨æ„ï¼Œä»–ä¸ä¼šé’»åˆ°ä»–çš„å…„å¼Ÿç›®å½•hostä¸­å»å¯»æ‰¾</strong>ï¼Œä»–åªèƒ½å‘ä¸Šå¯»æ‰¾ï¼Œä¸èƒ½å‘ä¸‹ã€‚</li></ol></li></ul><hr><h4 id="npmè§£å†³åŒ…å†²çªçš„é—®é¢˜"><a href="#npmè§£å†³åŒ…å†²çªçš„é—®é¢˜" class="headerlink" title="npmè§£å†³åŒ…å†²çªçš„é—®é¢˜"></a>npmè§£å†³åŒ…å†²çªçš„é—®é¢˜</h4><ul><li><p>æœ‰ä¸¤ä¸ªç›¸åŒçš„é¡¹ç›®ä¾èµ–äº†åŒä¸€ä¸ªæ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€â”€a</span><br><span class="line">â”‚   â””â”€â”€â”€c_v1.0.0</span><br><span class="line">â””â”€â”€â”€b</span><br><span class="line">    â””â”€â”€â”€c_v2.0.0</span><br></pre></td></tr></table></figure><ul><li>a ä¾èµ–äº†1.0.0çš„cæ–‡ä»¶</li><li>b ä¾èµ–äº†2.0.0çš„cæ–‡ä»¶</li></ul></li></ul><hr><ul><li><p>ç‰ˆæœ¬ä¸åŒçš„æ—¶å€™ï¼Œä»–ä¼šåˆ†åˆ«åœ¨å„è‡ªçš„åŒ…ä¸‹å»ºç«‹node_modulesæ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">â”‚   app.js</span><br><span class="line">â”‚</span><br><span class="line">â””â”€â”€â”€node_modules</span><br><span class="line">    â”œâ”€â”€â”€a</span><br><span class="line">    â”‚   â””â”€â”€â”€node_modules</span><br><span class="line">    â”‚       â””â”€â”€â”€c(v1.0.0)</span><br><span class="line">    â”œâ”€â”€â”€b</span><br><span class="line">    â”‚   â””â”€â”€â”€node_modules</span><br><span class="line">    â”‚       â””â”€â”€â”€c(v2.0.0)</span><br><span class="line">    â”œâ”€â”€â”€bootstrap</span><br><span class="line">    â”œâ”€â”€â”€c</span><br><span class="line">    â””â”€â”€â”€jquery</span><br></pre></td></tr></table></figure><ul><li>aä¾èµ–äº†çš„cåŒ…ï¼ˆ1.0.0ï¼‰ (å®é™…ä¸Šæ²¡æœ‰ç‰ˆæœ¬å·ï¼Œå°±å«c)</li><li>bä¾èµ–äº†çš„cåŒ…2.0.0 (å®é™…ä¸Šæ²¡æœ‰ç‰ˆæœ¬å·ï¼Œå°±å«c)</li><li>ç”±äºä»–æŸ¥æ‰¾åŒ…çš„æœºåˆ¶ï¼Œå°±ä¼šæ‰¾åˆ°é€‚åˆè‡ªå·±ç‰ˆæœ¬çš„</li></ul></li></ul><hr><ul><li><p>ä»…ä»…å•ä¸ªç‰ˆæœ¬ä¸åŒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">â”‚   app.js</span><br><span class="line">â”‚</span><br><span class="line">â””â”€â”€â”€node_modules</span><br><span class="line">    â”œâ”€â”€â”€a</span><br><span class="line">    â”‚   â””â”€â”€â”€node_modules</span><br><span class="line">    â”‚       â””â”€â”€â”€c(v1.0.0)</span><br><span class="line">    â”œâ”€â”€â”€b</span><br><span class="line">    â”œâ”€â”€â”€d</span><br><span class="line">    â”œâ”€â”€â”€bootstrap</span><br><span class="line">    â”œâ”€â”€â”€c</span><br><span class="line">    â””â”€â”€â”€jquery</span><br></pre></td></tr></table></figure><ul><li>aä¾èµ–äº†cåŒ…ï¼ˆ1.0.0ï¼‰</li><li>bä¹Ÿä¾èµ–çš„cåŒ…</li><li>dä¹Ÿä¾èµ–çš„cåŒ…</li><li>ç”±äºåŒ…æŸ¥æ‰¾æœºåˆ¶ï¼Œå…ˆä»å†…å±‚æŸ¥æ‰¾ï¼Œä¾æ¬¡å‘å¤–ç¿»ï¼Œaä¼šä½¿ç”¨å®ƒç‰¹å®šç‰ˆæœ¬çš„c,å…¶ä»–ä½¿ç”¨å¤–éƒ¨çš„cå°±å¥½</li></ul></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>nodeä¸­æ–‡ä»¶æ“ä½œè·¯å¾„é—®é¢˜</title>
      <link href="/2019/03/06/node%E4%B8%AD%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E8%B7%AF%E5%BE%84%E9%97%AE%E9%A2%98/"/>
      <url>/2019/03/06/node%E4%B8%AD%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E8%B7%AF%E5%BE%84%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h4 id="æ–‡ä»¶åˆ†éš”ç¬¦"><a href="#æ–‡ä»¶åˆ†éš”ç¬¦" class="headerlink" title="æ–‡ä»¶åˆ†éš”ç¬¦"></a>æ–‡ä»¶åˆ†éš”ç¬¦</h4><blockquote><p><code>/</code> å·¦-&gt; æ­£æ–œæ ï¼Œ<code>\</code> å³ -&gt; åæ–œæ </p></blockquote><ul><li>åœ¨mac, linux, unix ä½¿ç”¨ <code>/</code> åˆ†éš”ç¬¦</li><li>åœ¨win ä½¿ç”¨ <code>\</code> ä½œä¸ºåˆ†éš”ç¬¦ï¼Œ ç”±äº<code>\</code>å­˜åœ¨è½¬ä¹‰çš„æ•ˆæœï¼Œä¸€èˆ¬ä¼šä½¿ç”¨<code>\\</code><ul><li>winä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨<code>/</code></li></ul></li></ul><h4 id="ä»‹ç»pathç›¸å…³"><a href="#ä»‹ç»pathç›¸å…³" class="headerlink" title="ä»‹ç»pathç›¸å…³"></a>ä»‹ç»pathç›¸å…³</h4><ul><li>path.basename<ul><li>è·å–ä¸€ä¸ªè·¯å¾„çš„æ–‡ä»¶åï¼ˆé»˜è®¤åŒ…å«æ‹“å±•åï¼‰</li><li>path.basename(â€˜c:/a/b.jsâ€™)  -&gt; b.js</li><li>path.basename(â€˜c:/a/b.jsâ€™, â€˜.jsâ€™)  -&gt; b</li></ul></li><li>path.dirname<ul><li>è·å–ä¸€ä¸ªè·¯å¾„ä¸­çš„ç›®å½•éƒ¨åˆ†</li></ul></li><li>path.parse<ul><li>æŠŠä¸€ä¸ªè·¯å¾„è½¬æ¢ä¸ºå¯¹è±¡<ul><li>root æ ¹ç›®å½•</li><li>dir ç›®å½•</li><li>base åŒ…å«åç¼€åçš„æ–‡ä»¶å</li><li>extåç¼€å</li><li>name ä¸åŒ…å«åç¼€åçš„æ–‡ä»¶å</li></ul></li></ul></li><li>path.join<ul><li>éœ€è¦è¿›è¡Œè·¯å¾„æ‹¼æ¥çš„æ—¶å€™æ¨èä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼ˆæå…¶æ™ºèƒ½ï¼‰</li><li>path.join(â€˜c:/a/bâ€™, â€˜câ€™)  -&gt; c:/a/b/c</li><li>path.join(â€˜c:/a/bâ€™, â€˜/câ€™)  -&gt; c:/a/b/c</li><li>path.join(â€˜c:/a/bâ€™, â€˜./câ€™)  -&gt; c:/a/b/c</li><li>path.join(â€˜c:/a/bâ€™, â€˜../câ€™)  -&gt; c:/a/c</li></ul></li><li>path.isAbsolute<ul><li>åˆ¤æ–­æ˜¯å¦æ˜¯ä¸€ä¸ªç»å¯¹è·¯å¾„</li><li>path.isAbsolute(â€˜c://aâ€™)  -&gt; true</li><li>path.isAbsolute(â€˜/aâ€™)  -&gt; true (/ä¸ºæ ¹ç›®å½•)</li></ul></li></ul><h4 id="dirname-ä¸-filename"><a href="#dirname-ä¸-filename" class="headerlink" title="__dirname ä¸ __filename"></a><code>__dirname</code> ä¸ <code>__filename</code></h4><blockquote><p>å‡æ˜¯åŠ¨æ€çš„è·å–, ä»–ä»¬æ˜¯æ¯”è¾ƒç‰¹æ®Šçš„æˆå‘˜</p></blockquote><ul><li><code>__dirname</code> æ–‡ä»¶æ‰€å±<strong>ç›®å½•</strong>çš„ç»å¯¹è·¯å¾„ c://a/b</li><li><code>__filename</code> æ‰€å±<strong>æ–‡ä»¶</strong>çš„ç»å¯¹è·¯å¾„ c://a/b/c.js</li></ul><h4 id="fsæ¨¡å—ä¸­çš„ç›¸å¯¹è·¯å¾„"><a href="#fsæ¨¡å—ä¸­çš„ç›¸å¯¹è·¯å¾„" class="headerlink" title="fsæ¨¡å—ä¸­çš„ç›¸å¯¹è·¯å¾„"></a>fsæ¨¡å—ä¸­çš„ç›¸å¯¹è·¯å¾„</h4><blockquote><p>fs.readFile(â€˜./a.txtâ€™, fn)</p></blockquote><ul><li>å…¶ä¸­çš„è·¯å¾„â€™./a.txtâ€™ å¹¶ä¸æ˜¯æ–‡ä»¶æ‰€åœ¨ç›®å½•ä¸ºå¯»æ‰¾</li><li>æ˜¯ä»¥ç»ˆç«¯ï¼Œå³nodeè¿è¡Œæ–‡ä»¶æ—¶ç›®å½•<ul><li>c://a/b&gt; node a.js</li><li>c://a/&gt; b/node a.js</li></ul></li><li>è™½ç„¶ä»–ä»¬ çœ‹ä¼¼ç›¸åŒï¼Œç”±äºnodeè¿è¡Œç›®å½•ä¸ç›¸åŒï¼Œfs.readFileæ—¶å¯»æ‰¾ä¸ä¸€æ ·<ul><li>c://a/b/a.txt</li><li>c://a/a.txt</li></ul></li><li>è¿™æ˜¯ä¸“é—¨çš„ä¸€ç§è®¾è®¡ï¼Œå¹¶ä¸æ˜¯ä¸€ç§bug,æ‰€ä»¥å»ºè®®ä¿®æ”¹ç›®å½•ä¸º<ul><li><code>fs.readFile(path.join(__dirname, &#39;./a.txt&#39;), fn)</code><ul><li>è¿™æ ·æ¯æ¬¡éƒ½æ˜¯åŠ¨æ€è·å–çš„ï¼Œæ‰€ä»¥ä¸ä¼šé€ æˆç›®å½•é—®é¢˜</li><li>æ³¨æ„å¼•å…¥<code>path</code>æ¨¡å—ï¼Œä¸€èˆ¬ï¼Œ<strong><code>fs</code>,<code>path</code>éƒ½æ˜¯æˆå¯¹å¼•å…¥</strong></li></ul></li></ul></li></ul><h4 id="requireä¸­çš„ç›¸å¯¹è·¯å¾„"><a href="#requireä¸­çš„ç›¸å¯¹è·¯å¾„" class="headerlink" title="requireä¸­çš„ç›¸å¯¹è·¯å¾„"></a>requireä¸­çš„ç›¸å¯¹è·¯å¾„</h4><ul><li><strong>åœ¨<code>require</code>ä¸­ï¼Œä¸å­˜åœ¨ä¸Šè¿°é—®é¢˜ï¼Œè¿˜æ˜¯å¼•å…¥å³å¯ï¼Œ require(â€˜./aâ€™)</strong><ul><li>çœç•¥æ¨¡å—åç¼€.js</li></ul></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>nodeä¸­è¿æ¥æ•°æ®åº“</title>
      <link href="/2019/03/05/node%E4%B8%AD%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
      <url>/2019/03/05/node%E4%B8%AD%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/</url>
      
        <content type="html"><![CDATA[<h2 id="mongodbæ•°æ®åº“ï¼ŒåŸºäºç¬¬ä¸‰æ–¹åº“-mongoose-é«˜åº¦å°è£…äº†mongodbå®˜æ–¹æ–‡ä»¶"><a href="#mongodbæ•°æ®åº“ï¼ŒåŸºäºç¬¬ä¸‰æ–¹åº“-mongoose-é«˜åº¦å°è£…äº†mongodbå®˜æ–¹æ–‡ä»¶" class="headerlink" title="mongodbæ•°æ®åº“ï¼ŒåŸºäºç¬¬ä¸‰æ–¹åº“ mongoose(é«˜åº¦å°è£…äº†mongodbå®˜æ–¹æ–‡ä»¶)"></a>mongodbæ•°æ®åº“ï¼ŒåŸºäºç¬¬ä¸‰æ–¹åº“ mongoose(é«˜åº¦å°è£…äº†mongodbå®˜æ–¹æ–‡ä»¶)</h2><h4 id="å¼•å…¥mongoose"><a href="#å¼•å…¥mongoose" class="headerlink" title="å¼•å…¥mongoose"></a>å¼•å…¥mongoose</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mongoose = <span class="built_in">require</span>(<span class="string">'mongoose'</span>)</span><br><span class="line"><span class="keyword">var</span> Schema = mongoose.Schema</span><br></pre></td></tr></table></figure><h4 id="è¿æ¥æ•°æ®åº“"><a href="#è¿æ¥æ•°æ®åº“" class="headerlink" title="è¿æ¥æ•°æ®åº“"></a>è¿æ¥æ•°æ®åº“</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongoose.connect(<span class="string">'mongodb://localhost/test'</span>)</span><br></pre></td></tr></table></figure><h4 id="è®¾è®¡æ–‡æ¡£ç»“æ„ï¼ˆè¡¨ç»“æ„ï¼‰"><a href="#è®¾è®¡æ–‡æ¡£ç»“æ„ï¼ˆè¡¨ç»“æ„ï¼‰" class="headerlink" title="è®¾è®¡æ–‡æ¡£ç»“æ„ï¼ˆè¡¨ç»“æ„ï¼‰"></a>è®¾è®¡æ–‡æ¡£ç»“æ„ï¼ˆè¡¨ç»“æ„ï¼‰</h4><p>æ®µåç§°å°±æ˜¯è¡¨ç»“æ„ä¸­çš„å±æ€§åç§°, çº¦æŸçš„ç›®çš„æ˜¯ä¸ºäº†ä¿è¯æ•°æ®çš„å®Œæ•´æ€§<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> userSchame = <span class="keyword">new</span> Schame(&#123;</span><br><span class="line">  username: &#123;</span><br><span class="line">    type: <span class="built_in">String</span>,</span><br><span class="line">    required: <span class="literal">true</span> <span class="comment">// å¿…é¡»æœ‰</span></span><br><span class="line">  &#125;,</span><br><span class="line">  password: &#123;</span><br><span class="line">    type: <span class="built_in">String</span>,</span><br><span class="line">    required: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  email: &#123;</span><br><span class="line">    type: <span class="built_in">String</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h4 id="å°†æ–‡æ¡£å‘å¸ƒä¸ºæ¨¡å‹"><a href="#å°†æ–‡æ¡£å‘å¸ƒä¸ºæ¨¡å‹" class="headerlink" title="å°†æ–‡æ¡£å‘å¸ƒä¸ºæ¨¡å‹"></a>å°†æ–‡æ¡£å‘å¸ƒä¸ºæ¨¡å‹</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> User = mongoose.model(<span class="string">'User'</span>, userSchame)</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨æ–‡æ¡£æ¨¡å‹"><a href="#ä½¿ç”¨æ–‡æ¡£æ¨¡å‹" class="headerlink" title="ä½¿ç”¨æ–‡æ¡£æ¨¡å‹"></a>ä½¿ç”¨æ–‡æ¡£æ¨¡å‹</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// **********************</span></span><br><span class="line"><span class="comment">// /æ–°å¢æ•°æ®</span></span><br><span class="line"><span class="comment">// **********************</span></span><br><span class="line"><span class="keyword">var</span> admin = <span class="keyword">new</span> User(&#123;</span><br><span class="line">  username: <span class="string">'zs'</span>,</span><br><span class="line">  password: <span class="string">'123456'</span>,</span><br><span class="line">  email: <span class="string">'admin@admin.com'</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">admin.save(<span class="function"><span class="keyword">function</span> (<span class="params">err, ret</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'ä¿å­˜å¤±è´¥'</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'ä¿å­˜æˆåŠŸ'</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(ret)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// **********************</span></span><br><span class="line"><span class="comment">//  /æ–°å¢æ•°æ®</span></span><br><span class="line"><span class="comment">// **********************</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// **********************</span></span><br><span class="line"><span class="comment">// /æŸ¥è¯¢æ•°æ®</span></span><br><span class="line"><span class="comment">// **********************</span></span><br><span class="line">User.find(<span class="function"><span class="keyword">function</span> (<span class="params">err, ret</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æŸ¥è¯¢å¤±è´¥'</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(ret)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">User.find(&#123;</span><br><span class="line">  username: <span class="string">'zs'</span></span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">err, ret</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æŸ¥è¯¢å¤±è´¥'</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(ret)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">User.findOne(&#123;</span><br><span class="line">  username: <span class="string">'zs'</span></span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">err, ret</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æŸ¥è¯¢å¤±è´¥'</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(ret)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// **********************</span></span><br><span class="line"><span class="comment">//  /æŸ¥è¯¢æ•°æ®</span></span><br><span class="line"><span class="comment">// **********************</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// **********************</span></span><br><span class="line"><span class="comment">// /åˆ é™¤æ•°æ®</span></span><br><span class="line"><span class="comment">// **********************</span></span><br><span class="line">User.remove(&#123;</span><br><span class="line">  username: <span class="string">'zs'</span></span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">err, ret</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'åˆ é™¤å¤±è´¥'</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'åˆ é™¤æˆåŠŸ'</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(ret)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// **********************</span></span><br><span class="line"><span class="comment">//  /åˆ é™¤æ•°æ®</span></span><br><span class="line"><span class="comment">// **********************</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// **********************</span></span><br><span class="line"><span class="comment">// /æ›´æ–°æ•°æ® </span></span><br><span class="line"><span class="comment">// **********************</span></span><br><span class="line"><span class="comment">// æ³¨æ„ï¼Œmongodbä¸­çš„_idæ˜¯ä¸€ä¸ªè¾ƒä¸ºç‰¹æ®Šçš„å€¼, å¯ä»¥æŸ¥è¯¢ä½¿ç”¨ï¼Œé¿å…å¯¹è±¡ä¸­å‡ºç°_idè¿™ç§å±æ€§</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line">User.findByIdAndUpdate(<span class="string">'5a001b23d219eb00c8581184'</span>, &#123;</span><br><span class="line">  password: <span class="string">'123'</span></span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">err, ret</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æ›´æ–°å¤±è´¥'</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æ›´æ–°æˆåŠŸ'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//  // æ›´æ–°å¯†ç 123 -&gt; 456</span></span><br><span class="line">User.update(&#123; <span class="attr">password</span>: <span class="string">'123'</span> &#125;, &#123; <span class="attr">password</span>: <span class="string">'456'</span> &#125;, fn);</span><br><span class="line"><span class="comment">//  // æ›´æ–°å¯†ç 123 -&gt; 456 å¤šä¸ªæ–‡ä»¶</span></span><br><span class="line">User.update(&#123; <span class="attr">password</span>: <span class="string">'123'</span> &#125;, &#123; <span class="attr">password</span>: <span class="string">'456'</span> &#125;, &#123; <span class="attr">multi</span>: <span class="literal">true</span> &#125;, fn);</span><br><span class="line"><span class="comment">// **********************</span></span><br><span class="line"><span class="comment">//  /æ›´æ–°æ•°æ®</span></span><br><span class="line"><span class="comment">// **********************</span></span><br></pre></td></tr></table></figure><h2 id="mysqlæ•°æ®åº“ï¼Œç¬¬ä¸‰æ–¹åº“"><a href="#mysqlæ•°æ®åº“ï¼Œç¬¬ä¸‰æ–¹åº“" class="headerlink" title="mysqlæ•°æ®åº“ï¼Œç¬¬ä¸‰æ–¹åº“"></a>mysqlæ•°æ®åº“ï¼Œç¬¬ä¸‰æ–¹åº“</h2><h4 id="å¼•å…¥æ•°æ®åº“"><a href="#å¼•å…¥æ•°æ®åº“" class="headerlink" title="å¼•å…¥æ•°æ®åº“"></a>å¼•å…¥æ•°æ®åº“</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mysql = <span class="built_in">require</span>(<span class="string">'mysql'</span>);</span><br></pre></td></tr></table></figure><h4 id="é…ç½®è¿æ¥å¯¹è±¡"><a href="#é…ç½®è¿æ¥å¯¹è±¡" class="headerlink" title="é…ç½®è¿æ¥å¯¹è±¡"></a>é…ç½®è¿æ¥å¯¹è±¡</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> connection = mysql.createConnection(&#123;</span><br><span class="line">  host     : <span class="string">'localhost'</span>,</span><br><span class="line">  user     : <span class="string">'user'</span>,</span><br><span class="line">  password : <span class="string">'password'</span>,</span><br><span class="line">  database : <span class="string">'my_db'</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="è¿æ¥æ•°æ®åº“-1"><a href="#è¿æ¥æ•°æ®åº“-1" class="headerlink" title="è¿æ¥æ•°æ®åº“"></a>è¿æ¥æ•°æ®åº“</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼€å¯è¿æ¥</span></span><br><span class="line">connection.connect()</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–­å¼€è¿æ¥</span></span><br><span class="line">connection.end()</span><br></pre></td></tr></table></figure><h4 id="SQLè¯­å¥"><a href="#SQLè¯­å¥" class="headerlink" title="SQLè¯­å¥"></a>SQLè¯­å¥</h4><ul><li>å‡ä½¿ç”¨connection.query</li><li>æ ¹æ®ä¸åŒçš„éœ€è¦ä¼ å…¥ä¸åŒçš„SQLè¯­å¥å°±å¯ä»¥</li><li>å›è°ƒå‡½æ•°ä¸­çš„å‚æ•°<ul><li>error æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯</li><li>results æŸ¥è¯¢çš„ç»“æœ</li><li>fields æ”¹å˜çš„è¡Œçš„æ•°é‡</li></ul></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// </span></span><br><span class="line">connection.query(<span class="string">'SELECT 1 + 1 AS solution'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">error, results, fields</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (error) <span class="keyword">throw</span> error;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'The solution is: '</span>, results[<span class="number">0</span>].solution);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å…³äºjavascriptä¸­çš„åˆ†å·çš„é—®é¢˜</title>
      <link href="/2019/03/02/%E5%85%B3%E4%BA%8Ejavascript%E4%B8%AD%E7%9A%84%E5%88%86%E5%8F%B7%E7%9A%84%E9%97%AE%E9%A2%98/"/>
      <url>/2019/03/02/%E5%85%B3%E4%BA%8Ejavascript%E4%B8%AD%E7%9A%84%E5%88%86%E5%8F%B7%E7%9A%84%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>åœ¨å¼€å‘ä¸­ï¼Œæœ‰çš„ç¼–ç è§„èŒƒå¯ä»¥å¯¹åˆ†å·æ²¡æœ‰è¦æ±‚ï¼Œå¯ä»¥çœå»åˆ†å·<code>;</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">'nn'</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><strong>ä½†æ˜¯åœ¨ä¸€ä¸‹æƒ…å†µä¸­ï¼Œç»å¯¹ä¸èƒ½çœç•¥</strong></p><p><code>[</code>,<code>(</code>,<code>&#39;ï¼ˆæ­¤å¤„ä»£è¡¨åå¼•å·ï¼‰</code>å› ä¸ºå¯èƒ½å¯¼è‡´ï¼Œç¼–è¯‘é”™è¯¯ï¼Œæ‰€ä»¥è¿™æ ·åŠ ä¸Šä¸€å¥å†’å·ï¼Œå°±èƒ½é¿å…è¿™æ ·çš„é”™è¯¯ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">;(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">let</span> foo = <span class="string">'bar'</span></span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line">;<span class="string">`hello`</span>.toString()</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ç§»åŠ¨ç«¯é€‚é…æ–¹æ¡ˆæ€»ç»“</title>
      <link href="/2019/02/20/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D%E6%96%B9%E6%A1%88%E6%80%BB%E7%BB%93/"/>
      <url>/2019/02/20/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D%E6%96%B9%E6%A1%88%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<p>å¯¹äºç§»åŠ¨ç«¯è®¾å¤‡ï¼Œé€šå¸¸å°±æ˜¯è§£å†³ä¸åŒè®¾å¤‡çš„æ˜¾ç¤ºé—®é¢˜ï¼Œæ€»ç»“å¸¸è§å¸ƒå±€çš„ä¼˜ç¼ºç‚¹</p><ul><li>æµå¼å¸ƒå±€</li><li>å“åº”å¼å¸ƒå±€</li><li>remé€‚é…</li></ul><p>åœ¨ç§»åŠ¨ç«¯çš„è®¾å¤‡ï¼Œéœ€è¦è¿›è¡Œè§†å£çš„è®¾ç½®(ç±»ä¼¼äº æµè§ˆå™¨-åŒ…å«ä¸€ä¸ªè§†å£-åŒ…å«æˆ‘ä»¬çœ‹åˆ°çš„é¡µé¢dom)ï¼Œè¦æœ€å…ˆè§£è¯»åˆ°csså±æ€§æ‰€ä»¥ä¸€èˆ¬æ”¾åœ¨å¤´éƒ¨<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1, user-scalable=0"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">....</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p><ol><li>å…¶ä¸­width,è§†å£çš„å®½åº¦è‡ªåŠ¨è·Ÿéšè®¾å¤‡è°ƒæ•´ï¼Œ</li><li>inital-scaleæ˜¯åˆå§‹åŒ–ç¼©æ”¾çº§åˆ«ï¼Œç”¨æˆ·çœ‹åˆ°çš„å’Œåœ¨pcç«¯çš„æ˜¯1:1çš„å…³ç³»ï¼Œï¼ˆä¸ä¼šå› ä¸ºæ•´ä½“ç¼©å°ï¼Œè€Œå¯¼è‡´å­—ä½“è¿‡å°æ— æ³•çœ‹åˆ°ï¼‰</li><li>user-scalableæ˜¯ç”¨æˆ·æ˜¯å¦å¯ä»¥è‡ªåŠ¨ç¼©æ”¾ 1 yes  æˆ–è€… 0 no</li></ol><h4 id="æµå¼å¸ƒå±€"><a href="#æµå¼å¸ƒå±€" class="headerlink" title="æµå¼å¸ƒå±€"></a>æµå¼å¸ƒå±€</h4><hr><p>æµå¼å¸ƒå±€çš„åŸç†å°±æ˜¯åˆ©ç”¨<code>width:100%</code>å·²è¾¾åˆ°è§£å†³å“åº”å¼çš„é—®é¢˜ï¼Œåœ¨è¿™ç§è®¾è®¡åŸºç¡€ä¸Šï¼Œä¸€å®šè¦æ³¨æ„</p><ul><li>ä½¿ç”¨è¾¹æ¡†ç›’å­ï¼ˆé˜²æ­¢æº¢å‡ºï¼‰<code>box-sizing: border-box</code></li><li>å®½åº¦å°½é‡ä½¿ç”¨<code>width: 100%</code></li></ul><p>æ¯”è¾ƒç®€å•ï¼Œä½¿ç”¨æµè§ˆå™¨è‡ªé€‚åº”å®½åº¦ï¼Œè¾¾åˆ°è‡ªé€‚åº”çš„æ•ˆæœï¼Œè¦æ³¨æ„ç”±äºä½¿ç”¨border-boxæ‰€ä»¥åœ¨è®¾ç½®çš„æ—¶å€™ï¼Œè¦å°½é‡è®¾ç½®çˆ±å…ƒç´ çš„padding,é˜²æ­¢å…ƒç´ æº¢å‡º</p><ul><li>åŒé£ç¿¼å¸ƒå±€</li><li>ä¸¤æ å¸ƒå±€</li></ul><p>æœ‰ä¸€æ¬¾æ’ä»¶ï¼Œæ˜¯ä¸ºäº†è§£å†³å±€éƒ¨å…ƒç´ çš„æ»‘åŠ¨ï¼Œå¯ä»¥ä½¿ç”¨iscroll.js,å½“å…¶å…ƒç´ æœ‰è¶…å‡ºçš„é•¿åº¦çš„æ—¶å€™ï¼Œå¯ä»¥åœ¨å±€éƒ¨è¿›è¡Œæ»‘åŠ¨ï¼Œ<a href="https://github.com/cubiq/iscroll" target="_blank" rel="noopener">iscroll,å±€éƒ¨åˆ·æ–°</a></p><h4 id="å“åº”å¼å¸ƒå±€"><a href="#å“åº”å¼å¸ƒå±€" class="headerlink" title="å“åº”å¼å¸ƒå±€"></a>å“åº”å¼å¸ƒå±€</h4><hr><p>å“åº”å¼å¸ƒå±€ä¸»è¦é€šè¿‡<strong>åª’ä½“æŸ¥è¯¢</strong>æ¥åˆ¤æ–­å½“å‰å®¹å™¨çš„å®½åº¦ä¹‹ç±»ï¼Œåœ¨æ‰§è¡Œç›¸åº”çš„cssä»£ç </p><ul><li>cssåª’ä½“æŸ¥è¯¢ <code>@media screen and (max-width: 768px)</code> <em>æœ€å¤§å®½åº¦ä¸º768pxæ—¶æ‰§è¡Œçš„ä»£ç </em></li></ul><p>cssä»£ç <br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">*&#123;</span><br><span class="line"><span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.contain</span>&#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">1000px</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">1000px</span>;</span><br><span class="line"><span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line"><span class="attribute">background</span>: pink;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">media</span> screen and (max-width: <span class="number">768px</span>) and (min-width: <span class="number">320px</span>)&#123;</span><br><span class="line"><span class="selector-class">.contain</span>&#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line"><span class="attribute">background</span>: blue;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">media</span> screen and (max-width: <span class="number">992px</span>) and (min-width: <span class="number">768px</span>)&#123;</span><br><span class="line"><span class="selector-class">.contain</span>&#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">750px</span>;</span><br><span class="line"><span class="attribute">background</span>: green;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">media</span> screen and (max-width: <span class="number">1200px</span>) and (min-width: <span class="number">992px</span>)&#123;</span><br><span class="line"><span class="selector-class">.contain</span>&#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">970px</span>;</span><br><span class="line"><span class="attribute">background</span>: red;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">media</span> screen and (min-width: <span class="number">1200px</span>)&#123;</span><br><span class="line"><span class="selector-class">.contain</span>&#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">1200px</span>;</span><br><span class="line"><span class="attribute">background</span>: yellow;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>htmlä»£ç <br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">åª’ä½“æŸ¥è¯¢</span></span><br><span class="line"><span class="comment">ä½¿ç”¨csså…³é”®å­— @media screen and (&lt;è¿™é‡Œæ¥æ¡ä»¶&gt;)</span></span><br><span class="line"><span class="comment">é€šè¿‡æŸ¥è¯¢ä¸åŒçš„å±å¹•å°ºå¯¸ åšä¸åŒçš„ç›¸åº”ï¼ˆcss ä¼˜å…ˆçº§ï¼‰</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">éœ€æ±‚</span></span><br><span class="line"><span class="comment">è¶…å°å±å¹• 768pxå®½åº¦100%èƒŒæ™¯è‰²   è“è‰²</span></span><br><span class="line"><span class="comment">å°å±è®¾å¤‡768px-992pxå®½åº¦750pxèƒŒæ™¯è‰²ç»¿è‰²</span></span><br><span class="line"><span class="comment">ä¸­å±è®¾å¤‡992px-1200pxå®½åº¦970pxèƒŒæ™¯è‰²çº¢è‰²</span></span><br><span class="line"><span class="comment">å¤§å±è®¾å¤‡1200pxå®½åº¦1170pxèƒŒæ™¯è‰²é»„è‰²</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">å®½åº¦è¦å°äºæœ€å°ç•Œé™ ä¿è¯æ˜¾ç¤ºä¸å‡ºç°æ»šåŠ¨æ¡</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"contain"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>æœ€ç»ˆçš„æ•ˆæœä¸º</p><ul><li>å¤§å±è®¾å¤‡    1200px        å®½åº¦1170px    èƒŒæ™¯è‰²    é»„è‰²<br><img src="/img/2019/02/13/1.png" alt="å¤§å±è®¾å¤‡"></li><li>ä¸­å±è®¾å¤‡992px-1200px    å®½åº¦970px    èƒŒæ™¯è‰²    çº¢è‰²<br><img src="/img/2019/02/13/2.png" alt="ä¸­å±è®¾å¤‡"></li><li>å°å±è®¾å¤‡768px-992px    å®½åº¦750px    èƒŒæ™¯è‰²    ç»¿è‰²<br><img src="/img/2019/02/13/3.png" alt="å°å±è®¾å¤‡"></li><li>è¶…å°å±å¹• 768px        å®½åº¦100%        èƒŒæ™¯è‰²   è“è‰²<br><img src="/img/2019/02/13/4.png" alt="è¶…å°å±å¹•"></li></ul><p>å…¶ä¸­è‘—åçš„æ¡†æ¶æœ‰<strong><a href="https://v3.bootcss.com" target="_blank" rel="noopener">bootstrap</a></strong></p><h4 id="remé€‚é…"><a href="#remé€‚é…" class="headerlink" title="remé€‚é…"></a>remé€‚é…</h4><hr><p>remé€‚é…ä¸»è¦é€šè¿‡:htmlä¸­çš„styleä¸­font-sizeä»è€Œåˆ¤æ–­å‡ºæ•´ä½“çš„é¡µé¢å¸ƒå±€æ ·å¼å¤§å°ï¼Œä»è€Œè¾¾åˆ°è‡ªé€‚åº”ã€‚<br><strong>ä¹Ÿå°±æ˜¯åœ¨htmlå¤´éƒ¨ç»Ÿä¸€å®šä¹‰äº†åŸºå‡†å¤§å°ï¼Œæ‰€æœ‰å°ºå¯¸æŒ‰ç…§åŸºå‡†å¤§å°è®¾ç½®ï¼Œå¦‚æœæ›´æ”¹äº†è®¾å¤‡ï¼Œåªéœ€è¦åŠ¨æ€æ›´æ”¹åŸºå‡†å¤§å°ï¼Œä»è€Œå°±èƒ½è¾¾åˆ°æ•´ä¸ªé¡µé¢çš„è‡ªé€‚åº”æ•ˆæœ</strong></p><blockquote><p>emæ˜¯ä»¥çˆ¶å…ƒç´ ä¸ºåŸºå‡†ï¼Œremæ˜¯ä»¥æ ¹å…ƒç´ root(<em>ä¹Ÿå°±æ˜¯<code>&lt;html&gt;&lt;/html&gt;</code></em>),</p></blockquote><p>è¿™é‡Œæœ‰ä¸€ä¸ªæ¢ç®—ï¼Œ å½“å‰åŸºå‡†å°ºå¯¸ = ï¼ˆå½“å‰è®¾å¤‡å®½åº¦/è®¾è®¡ç¨¿è®¾å¤‡å®½åº¦ï¼‰* è®¾è®¡ç¨¿åŸºå‡†å°ºå¯¸</p><ul><li>ä½¿ç”¨ä¸åŒå±å¹•ä¸‹çš„åŸºå‡†å€¼ åŠ¨æ€çš„å»è®¾ç½®htmlä¸­çš„font-sizeè¿™ä¸ªåŸºå‡†å€¼</li></ul><p><em>å‡è®¾å½“å‰è®¾è®¡ç¨¿ width:750px  font-size:100px</em><br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// åŠ¨æ€è®¾é…åŸºå‡†å€¼çš„css</span><br><span class="line">@<span class="keyword">meadia</span> (min-width: <span class="number">750px</span>)&#123;</span><br><span class="line"><span class="selector-tag">html</span>&#123;</span><br><span class="line">font-size:100px;//(750/750)*100</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">@<span class="keyword">meadia</span> (min-width: <span class="number">640px</span>)&#123;</span><br><span class="line"><span class="selector-tag">html</span>&#123;</span><br><span class="line">font-size:85.33333px;//(640/750)*100</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">@<span class="keyword">meadia</span> (min-width: <span class="number">414px</span>)&#123;</span><br><span class="line"><span class="selector-tag">html</span>&#123;</span><br><span class="line">font-size:55.2px;//(414/750)*100</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">@<span class="keyword">meadia</span> (min-width: <span class="number">320px</span>)&#123;</span><br><span class="line"><span class="selector-tag">html</span>&#123;</span><br><span class="line">font-size:42.7px;//(320/750)*100</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// æ ·å¼çš„cssä»£ç </span><br><span class="line"><span class="selector-tag">span</span>&#123;</span><br><span class="line">font-size: 0.2rem;// è®¾è®¡ç¨¿ä¸­æ˜¯20px åŸºå‡†å€¼æ˜¯100px ç›¸å¯¹ä¸º 20/100 rem, </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span>&#123;</span><br><span class="line">width: 100%;// è®¾è®¡ç¨¿ä¸­æ˜¯100%çš„å®½åº¦</span><br><span class="line">height: 0.5rem;// è®¾è®¡ç¨¿ä¸­æ˜¯50px åŸºå‡†å€¼æ˜¯100px ç›¸å¯¹ä¸º 50/100 rem</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* å¦‚æœæ˜¯åˆ°äº†å…¶ä»–è®¾å¤‡ æ¯”å¦‚414pxçš„è®¾å¤‡  åˆ™åœ¨åŸæœ‰ä»£ç çš„æƒ…å†µä¸‹</span></span><br><span class="line"><span class="comment">* ä¹‹å‰çš„è®¾è®¡ç¨¿ 0.2rem = 0.2 * 100 = 20px</span></span><br><span class="line"><span class="comment">* å°±ä¼šå˜ä¸º0.2rem = 0.2 * 55.2 = 11.4px</span></span><br><span class="line"><span class="comment">* ä¹Ÿå°±è¾¾åˆ°äº†é€‚é…çš„ç›®çš„,ç­‰æ¯”ä¾‹ç¼©æ”¾çš„æ•ˆæœã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></p><ul><li>åœ¨è¿™é‡Œä½¿ç”¨lessç¼–å†™ï¼Œå¯ä»¥è¾¾åˆ°è‡ªåŠ¨è®¡ç®—æ‰€æœ‰çš„é€‚é…å±çš„cssä»£ç çš„ç¼–å†™</li></ul><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@charset</span> <span class="string">"UTF-8"</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*variable.less*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é€‚é…è®¾å¤‡çš„é›†åˆ</span></span><br><span class="line"><span class="variable">@adapterDeviceList:</span><span class="number">750px</span>,<span class="number">720px</span>,<span class="number">640px</span>,<span class="number">540px</span>,<span class="number">480px</span>,<span class="number">424px</span>,<span class="number">414px</span>,<span class="number">400px</span>,<span class="number">384px</span>,<span class="number">375px</span>,<span class="number">360px</span>,<span class="number">320px</span>;</span><br><span class="line"><span class="comment">// è®¾è®¡ç¨¿å°ºå¯¸</span></span><br><span class="line"><span class="variable">@psdWidth:</span><span class="number">750px</span>;</span><br><span class="line"><span class="comment">// é¢„è®¾åŸºå‡†å€¼</span></span><br><span class="line"><span class="variable">@baseFontSize:</span><span class="number">100px</span>;</span><br><span class="line"><span class="comment">// ä¸»æµè®¾å¤‡çš„ä¸ªæ•°</span></span><br><span class="line"><span class="variable">@len:</span>length(<span class="variable">@adapterDeviceList</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*adapter.less*/</span></span><br><span class="line"><span class="comment">// 1.é€‚é…ä¸åŒå®½åº¦çš„åŸºå‡†ï¼Œåˆ©ç”¨é€’å½’å‡½æ•°å®ç°å¾ªç¯ </span></span><br><span class="line"><span class="comment">// 2.ç”±äºè¿™é‡Œæ˜¯min-widthï¼Œè€ƒè™‘åˆ°cssä»ä¸Šåˆ°ä¸‹è¯»å–ï¼Œåº”è¯¥ä½¿ç”¨min-width:320,414,640,750è¿™ç§é¡ºåº</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.adapterMixin</span>(<span class="variable">@index</span>) <span class="keyword">when</span>(<span class="variable">@index</span> &gt; <span class="number">0</span>)&#123;</span><br><span class="line">    <span class="keyword">@media</span> (<span class="attribute">min-width</span>: extract(<span class="variable">@adapterDeviceList</span>, <span class="variable">@index</span>))&#123;</span><br><span class="line">        <span class="selector-tag">html</span>&#123;</span><br><span class="line">            <span class="attribute">font-size</span>: extract(<span class="variable">@adapterDeviceList</span>, <span class="variable">@index</span>) / <span class="variable">@psdWidth</span> * <span class="variable">@baseFontSize</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.adapterMixin</span>(<span class="variable">@index</span> - <span class="number">1</span>);</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡½æ•°çš„ä½¿ç”¨</span></span><br><span class="line"><span class="selector-class">.adapterMixin</span>(<span class="variable">@len</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*æ ·å¼çš„lessä»£ç ï¼Œç”±äºlessæœ‰è®¡ç®—åŠŸèƒ½ï¼Œå°±æ¯”è¾ƒæ–¹ä¾¿*/</span></span><br><span class="line"><span class="comment">//@baseFontSize; ä¸ºä¹‹å‰å®šä¹‰è¿‡çš„åŸºå‡†font-size</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">span</span>&#123;</span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">20rem</span>/<span class="variable">@baseFontSize</span>;<span class="comment">//è®¾è®¡ç¨¿æ˜¯20px  ç›´æ¥å°±æ˜¯20 rem / 100 = 0.2rem</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span>&#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">100%</span>;<span class="comment">// è®¾è®¡ç¨¿ä¸­æ˜¯100%çš„å®½åº¦</span></span><br><span class="line"><span class="attribute">height</span>: <span class="number">50rem</span>/<span class="variable">@baseFontSize</span>;<span class="comment">// è®¾è®¡ç¨¿æ˜¯50px  ç›´æ¥å°±æ˜¯50 rem / 100 = 0.5rem</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨äº†lessåï¼Œå¯ä»¥åŠ¨æ€çš„ç”Ÿæˆé€‚é…ä»£ç ï¼Œå¹¶ä¸”ä»¥åçš„ç»´æŠ¤ä¹Ÿæ¯”è¾ƒæ–¹ä¾¿,ä¹Ÿä¸ç”¨å»è®¡ç®—é‚£äº›é€‚é…å€¼ï¼Œåªéœ€è¦å¸¦å…¥å³å¯</p><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><hr><p>æ— è®ºæ˜¯<strong>æµå¼å¸ƒå±€</strong>ï¼Œ<strong>å“åº”å¼å¸ƒå±€</strong>ï¼Œ<strong>remå¸ƒå±€</strong>ï¼Œå…¶å®ä¹‹é—´éƒ½ç”¨åˆ°äº†å¾ˆå¤šç›¸ä¼¼çš„åœ°æ–¹ï¼Œå¾ˆå¤šåœ°æ–¹ï¼Œéƒ½æœ‰width:100%ç­‰ã€‚å¹¶ä¸”åœ¨remå¸ƒå±€ä¸­å¾ˆå¤šåœ°æ–¹ä¹Ÿç”¨åˆ°äº†width:100%ï¼Œæ‰€ä»¥å¹¶ä¸åªæ˜¯å•ä¸€çš„æŠ€æœ¯å®ç°ï¼Œæ˜¯å¤šç§æŠ€æœ¯å…±åŒä½œç”¨ï¼Œè¾¾åˆ°ç§»åŠ¨ç«¯é€‚é…çš„ç›®çš„ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>JSæ¨¡å—åŒ–ï¼ˆå››ï¼‰ES6çš„åº”ç”¨ï¼ˆç›®å‰ä½¿ç”¨è¾ƒå¹¿ï¼Œè¾ƒç«ï¼‰</title>
      <link href="/2019/02/05/JS%E6%A8%A1%E5%9D%97%E5%8C%96%EF%BC%88%E5%9B%9B%EF%BC%89ES6%E7%9A%84%E5%BA%94%E7%94%A8%EF%BC%88%E7%9B%AE%E5%89%8D%E4%BD%BF%E7%94%A8%E8%BE%83%E5%B9%BF%EF%BC%8C%E8%BE%83%E7%81%AB%EF%BC%89/"/>
      <url>/2019/02/05/JS%E6%A8%A1%E5%9D%97%E5%8C%96%EF%BC%88%E5%9B%9B%EF%BC%89ES6%E7%9A%84%E5%BA%94%E7%94%A8%EF%BC%88%E7%9B%AE%E5%89%8D%E4%BD%BF%E7%94%A8%E8%BE%83%E5%B9%BF%EF%BC%8C%E8%BE%83%E7%81%AB%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ES6æ¨¡å—åŒ–éœ€è¦ç¼–è¯‘æ‰“åŒ…å¤„ç†ï¼Œç”±äºç›®å‰éƒ¨åˆ†æµè§ˆå™¨ä¸æ”¯æŒes6ï¼Œéœ€è¦å…ˆè½¬æ¢es5</p></blockquote><h4 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h4><ul><li>æš´éœ²å‡ºå» <code>export</code></li><li>åº”ç”¨è¿›æ¥ <code>import</code></li><li>ä½¿ç”¨æ–¹å¼<ol><li>å…ˆç”¨babelè½¬åŒ–es5</li><li>ä½¿ç”¨browserifyç¼–è¯‘è½¬æ¢</li></ol></li><li>éœ€è¦æå‰å®‰è£…ä¸€äº›åº“<br><code>npm install babel-cli browserify -g</code><br><code>npm install babel-preset-es2015 --save-dev</code></li></ul><h4 id="è‡ªå®šä¹‰ä¾èµ–"><a href="#è‡ªå®šä¹‰ä¾èµ–" class="headerlink" title="è‡ªå®šä¹‰ä¾èµ–"></a>è‡ªå®šä¹‰ä¾èµ–</h4><ul><li><p>æ–‡ä»¶ç»“æ„ ï¼ˆåˆ—ä¸¾äº†ä¸»è¦éƒ¨åˆ†ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">â”‚  .babelrc</span><br><span class="line">â”‚  package-lock.json</span><br><span class="line">â”‚  package.json</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€js</span><br><span class="line">â”‚  â”œâ”€dist</span><br><span class="line">â”‚  â””â”€src</span><br><span class="line">â”‚          main.js</span><br><span class="line">â”‚          modules1.js</span><br><span class="line">â”‚          modules2.js</span><br><span class="line">â”‚          modules3.js</span><br></pre></td></tr></table></figure></li><li><p>.babelrc (babel run controller)</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">"presets"</span>:[<span class="string">"es2015"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å„ä¸ªæ¨¡å—æ–‡ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">modules1.js</span><br><span class="line"></span><br><span class="line"><span class="comment">// æš´éœ²æ¨¡å—  åˆ†åˆ«æš´æ¼</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"foo() module1"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"bar() module1"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">modules2.js</span><br><span class="line"></span><br><span class="line"><span class="comment">// æš´éœ²æ¨¡å— ç»Ÿä¸€æš´éœ²</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun1</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"fun1() module2"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun2</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"fun2() module2"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;fun1, fun2&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">modules3.js</span><br><span class="line"></span><br><span class="line"><span class="comment">// é»˜è®¤æš´éœ² export default </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">msg:<span class="string">"é»˜è®¤æš´éœ²"</span>,</span><br><span class="line">foo()&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"foo() modules3"</span>,<span class="keyword">this</span>.msg);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä¸»æ–‡ä»¶ main.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥å…¶ä»–æ¨¡å—</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯­æ³• import xxx from 'è·¯å¾„'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»Ÿä¸€æš´éœ²æ–¹å¼  ç»Ÿä¸€æš´éœ²æ–¹å¼ æ˜¯è¦ä»€ä¹ˆå–ä»€ä¹ˆ</span></span><br><span class="line"><span class="keyword">import</span> &#123;foo, bar, arr&#125; <span class="keyword">from</span> <span class="string">'./modules1'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;fun1, fun2&#125; <span class="keyword">from</span> <span class="string">'./modules1'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é»˜è®¤æš´éœ²</span></span><br><span class="line"><span class="keyword">import</span> modules3 <span class="keyword">from</span> <span class="string">'./modules3'</span>;</span><br><span class="line"></span><br><span class="line">foo();<span class="comment">// foo() module1</span></span><br><span class="line">bar();<span class="comment">// bar() module1</span></span><br><span class="line"><span class="built_in">console</span>.log(arr);<span class="comment">// [ 1, 2, 3, 4, 5 ]</span></span><br><span class="line">fun1();<span class="comment">// fun1() module2</span></span><br><span class="line">fun2();<span class="comment">// fun2() module2 </span></span><br><span class="line"></span><br><span class="line">modules3.foo();<span class="comment">// foo() modules3 é»˜è®¤æš´éœ²</span></span><br></pre></td></tr></table></figure></li><li><p>ç¼–è¯‘æ‰“åŒ… </p><ol><li>babelå‘½ä»¤ es6-es5 <code>babel js/src -d js/lib</code></li><li>ä½¿ç”¨browseriftå‘½ä»¤ <code>browserify js/src/main.js -o js/dist/bundle.js</code></li></ol></li><li><p>å°†æœ€ç»ˆçš„bundleæ”¾å…¥index.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"04-ES6/js/dist/bundle.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><p>è¿™ç§æ–¹å¼éœ€è¦<strong>é¦–å…ˆä½¿ç”¨babelå°†es6-es5,åœ¨ä½¿ç”¨browserifyè¿›è¡Œç¼–è¯‘æ‰“åŒ…</strong>ï¼Œæ¯ä¸€æ¬¡æ”¹å˜éƒ½éœ€è¦è¿™æ ·ï¼Œç›¸å¯¹è¾ƒä¸ºç¹çï¼ˆæ‰€ä»¥å°±æœ‰äº†åé¢çš„è‡ªåŠ¨æ‰“åŒ…å·¥å…·ï¼‰ </p><h4 id="ä½¿ç”¨ç¬¬ä¸‰æ–¹ä¾èµ–"><a href="#ä½¿ç”¨ç¬¬ä¸‰æ–¹ä¾èµ–" class="headerlink" title="ä½¿ç”¨ç¬¬ä¸‰æ–¹ä¾èµ–"></a>ä½¿ç”¨ç¬¬ä¸‰æ–¹ä¾èµ–</h4><ul><li><p>åœ¨npmå®‰è£…ä¾èµ– ï¼ˆjqueryä¸ºä¾‹ <code>npm install jquery@1.12.4</code>ï¼‰</p></li><li><p>åœ¨ä¸»æ–‡ä»¶ä¸­å¼•å…¥å³å¯</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> $ <span class="keyword">from</span> <span class="string">"jquery"</span>;</span><br><span class="line"></span><br><span class="line">$(<span class="string">"body"</span>).css(<span class="string">"background"</span>,<span class="string">"yellowgreen"</span>);</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨<code>babel</code>ä¸<code>browserify</code>åˆ†åˆ«è¿›è¡Œç¼–è¯‘ æ‰“åŒ…</p></li><li><p>æœ€åhtmlä»£ç è¿˜æ˜¯ æ”¾å…¥browserifyæœ€ç»ˆç”Ÿæˆçš„ä»£ç </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"04-ES6/js/dist/bundle.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><p>ä½¿ç”¨ES6çš„è¿™ç§æ–¹å¼ ç›¸å¯¹æ¥æ—¶ æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œè€Œä¸”å‘½ä»¤ä¹Ÿç›¸å¯¹å¥½è®°  <code>export</code>ä¸<code>import</code>è¿™ç§æ–¹å¼ä¹Ÿæ˜¯ä½¿ç”¨æœ€ä¸ºå¹¿æ³›ï¼Œç›®å‰æ¯”è¾ƒå¥½çš„ä¸€ç§æ–¹å¼ï¼Œå”¯ä¸€ä¸å¥½çš„å°±æ˜¯éœ€è¦æ¯ä¸€æ¬¡éƒ½ç¼–è¯‘æ‰“åŒ…ï¼Œåæ¥è¯ç”Ÿå‡ºä¸€äº›è‡ªåŠ¨åŒ–å·¥å…·ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>JSæ¨¡å—åŒ–ï¼ˆä¸‰ï¼‰AMD(Asynchronous Module Definition)çš„åº”ç”¨</title>
      <link href="/2019/02/05/JS%E6%A8%A1%E5%9D%97%E5%8C%96%EF%BC%88%E4%B8%89%EF%BC%89AMD(Asynchronous%20Module%20Definition)%E7%9A%84%E5%BA%94%E7%94%A8/"/>
      <url>/2019/02/05/JS%E6%A8%A1%E5%9D%97%E5%8C%96%EF%BC%88%E4%B8%89%EF%BC%89AMD(Asynchronous%20Module%20Definition)%E7%9A%84%E5%BA%94%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h4 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h4><ul><li><p>æš´éœ²å‡ºå»</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰æ²¡æœ‰ä¾èµ–çš„æ¨¡å—</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> æ¨¡å—</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰æœ‰ä¾èµ–çš„æ¨¡å—</span></span><br><span class="line">define([<span class="string">'module1'</span>,<span class="string">'module2'</span>],<span class="function"><span class="keyword">function</span>(<span class="params">m1,m2</span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> æ¨¡å—</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>åº”ç”¨è¿›æ¥</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">requirejs([<span class="string">'module1'</span>,<span class="string">'module2'</span>],<span class="function"><span class="keyword">function</span>(<span class="params">m1,m2</span>)</span>&#123;</span><br><span class="line">ä½¿ç”¨m1,m2å³å¯</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul><h4 id="è‡ªå®šä¹‰ä¾èµ–çš„å¼•ç”¨"><a href="#è‡ªå®šä¹‰ä¾èµ–çš„å¼•ç”¨" class="headerlink" title="è‡ªå®šä¹‰ä¾èµ–çš„å¼•ç”¨"></a>è‡ªå®šä¹‰ä¾èµ–çš„å¼•ç”¨</h4><ul><li><p>æ–‡ä»¶çš„ç»“æ„</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">â””â”€js</span><br><span class="line">    â”‚  main.js</span><br><span class="line">    â”‚</span><br><span class="line">    â”œâ”€libs</span><br><span class="line">    â”‚      require.js</span><br><span class="line">    â”‚</span><br><span class="line">    â””â”€modules</span><br><span class="line">            alerter.js</span><br><span class="line">            dataService.js</span><br><span class="line">â”‚</span><br><span class="line">â”‚  index.html</span><br></pre></td></tr></table></figure></li><li><p>modules çš„æ–‡ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">dataService.js</span><br><span class="line"></span><br><span class="line">define(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">let</span> name = <span class="string">"dataService.js"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘å¤–æš´éœ²æ¨¡å—</span></span><br><span class="line"><span class="keyword">return</span> &#123;getName&#125;;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">alerter.js</span><br><span class="line"></span><br><span class="line">define([<span class="string">'dataService'</span>],<span class="function"><span class="keyword">function</span> (<span class="params">dataService</span>) </span>&#123;</span><br><span class="line"><span class="keyword">let</span> msg = <span class="string">"alerter.js"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showMsg</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(msg, dataService.getName());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘å¤–æš´éœ²æ¨¡å—</span></span><br><span class="line"><span class="keyword">return</span> &#123;showMsg&#125;;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>ä¸»æ–‡ä»¶main.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="comment">// é…ç½®requirejs</span></span><br><span class="line">requirejs.config(&#123;</span><br><span class="line">baseUrl: <span class="string">"js/"</span>,</span><br><span class="line">paths: &#123;</span><br><span class="line">dataService: <span class="string">'./modules/dataService'</span>,</span><br><span class="line">alerter: <span class="string">'./modules/alerter'</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼•å…¥ä¾èµ–</span></span><br><span class="line">requirejs([<span class="string">'alerter'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">alerter</span>) </span>&#123;</span><br><span class="line">alerter.showMsg();<span class="comment">// alerter.js dataService.js</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure></li><li><p>htmlæ–‡ä»¶</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">data-main</span>=<span class="string">"js/main.js"</span> <span class="attr">src</span>=<span class="string">"js/libs/require.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><p>è¿™ç§æ–¹å¼éœ€è¦åšrequirejsçš„é…ç½®ï¼Œä¹‹åå†å¼•å…¥jsæ–‡ä»¶çš„æ—¶å€™ï¼Œ<strong>æ³¨æ„srcæ˜¯requre.js è€Œdata-mainæ‰æ˜¯æˆ‘ä»¬çš„main.js</strong>,è¿™ç§æ–¹å¼æ˜¯é’ˆå¯¹å®¢æˆ·ç«¯è¾ƒæ—©å‡ºç°çš„ä¸€ç§æ–¹å¼</p><h4 id="å¼•å…¥ç¬¬ä¸‰æ–¹çš„ä¾èµ–-ï¼ˆå¼•å…¥jQueryä¸ºä¾‹ï¼‰"><a href="#å¼•å…¥ç¬¬ä¸‰æ–¹çš„ä¾èµ–-ï¼ˆå¼•å…¥jQueryä¸ºä¾‹ï¼‰" class="headerlink" title="å¼•å…¥ç¬¬ä¸‰æ–¹çš„ä¾èµ– ï¼ˆå¼•å…¥jQueryä¸ºä¾‹ï¼‰"></a>å¼•å…¥ç¬¬ä¸‰æ–¹çš„ä¾èµ– ï¼ˆå¼•å…¥jQueryä¸ºä¾‹ï¼‰</h4><ul><li><p>æ”¾å…¥ç›¸å…³çš„jsï¼Œæ–‡ä»¶ç»“æ„</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">â”‚  index.html</span><br><span class="line">â”‚</span><br><span class="line">â””â”€js</span><br><span class="line">    â”‚  main.js</span><br><span class="line">    â”‚</span><br><span class="line">    â”œâ”€libs</span><br><span class="line">    â”‚      jquery-1.11.0.js</span><br><span class="line">    â”‚      require.js</span><br><span class="line">    â”‚</span><br><span class="line">    â””â”€modules</span><br><span class="line">            alerter.js</span><br><span class="line">            dataService.js</span><br></pre></td></tr></table></figure></li><li><p>å…¶ä½™å’Œä¹‹å‰ç›¸åŒï¼Œå°±æ˜¯å¼•å…¥ç¬¬ä¸‰æ–¹åº“å³å¯ï¼Œmain.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="comment">// é…ç½®requirejs</span></span><br><span class="line">requirejs.config(&#123;</span><br><span class="line">baseUrl: <span class="string">"js/"</span>,</span><br><span class="line">paths: &#123;</span><br><span class="line">dataService: <span class="string">'./modules/dataService'</span>,</span><br><span class="line">alerter: <span class="string">'./modules/alerter'</span>,</span><br><span class="line">jquery: <span class="string">'./libs/jquery-1.11.0'</span><span class="comment">// jQueryæºç ä¸­ éµå¾ªäº†AMDè§„èŒƒ å¹¶ä¸”æš´éœ²æ¨¡å—ä¸ºjquery</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼•å…¥ä¾èµ–</span></span><br><span class="line">requirejs([<span class="string">'alerter'</span>,<span class="string">"jquery"</span>], <span class="function"><span class="keyword">function</span>(<span class="params">alerter,$</span>) </span>&#123;</span><br><span class="line">alerter.showMsg();</span><br><span class="line">$(<span class="string">"body"</span>).css(<span class="string">"background"</span>,<span class="string">"deeppink"</span>);</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure></li><li><p>htmlæ–‡ä»¶</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">data-main</span>=<span class="string">"js/main.js"</span> <span class="attr">src</span>=<span class="string">"js/libs/require.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><p>éƒ½æ˜¯åœ¨å†…éƒ¨å¼•å…¥çš„ï¼Œæ‰€ä»¥å‘è¯·æ±‚åªéœ€è¦ä¸€ä¸ªè¯·æ±‚å°±å¯ä»¥æå®šï¼Œåªéœ€è¦é…ç½®å¥½æ¨¡å—è·¯å¾„å³å¯</p>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>JSæ¨¡å—åŒ–ï¼ˆäºŒï¼‰CommonJSçš„åº”ç”¨</title>
      <link href="/2019/02/05/JS%E6%A8%A1%E5%9D%97%E5%8C%96%EF%BC%88%E4%BA%8C%EF%BC%89CommonJS%E7%9A%84%E5%BA%94%E7%94%A8/"/>
      <url>/2019/02/05/JS%E6%A8%A1%E5%9D%97%E5%8C%96%EF%BC%88%E4%BA%8C%EF%BC%89CommonJS%E7%9A%84%E5%BA%94%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h4 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h4><ul><li>æš´éœ²å‡ºå» <code>module.exports = value</code>æˆ–è€…æ˜¯<code>exports.xxx = value</code></li><li>å¼•å…¥è¿›æ¥ <code>let xxx = require(&quot;./modules/xxx&quot;);</code></li></ul><p>è¡¥å……ï¼šå› ä¸ºexportsæ˜¯ module.exportsçš„ä¸€ä¸ªå¼•ç”¨ï¼Œä¹Ÿå°±ç›¸å½“äºåœ¨ä»£ç ä¸­ï¼Œè¿˜æœ‰</p><p><code>var exports = module.exports</code>,æ‰€ä»¥ä»–ä»¬ä¿©æ˜¯ç­‰ä»·çš„ï¼Œä½†æ˜¯è¦æ³¨æ„ä¸€ç‚¹ï¼Œ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯ç†è§£ä¸º var exports = module.exports ç³»ç»Ÿè‡ªåŠ¨åšçš„</span></span><br><span class="line"><span class="comment">// å¯¼å‡ºçš„æ—¶å€™ æ˜¯ return module.exports</span></span><br><span class="line"></span><br><span class="line">exports.foo = bar<span class="comment">// module.exports.foo = bar</span></span><br><span class="line">exports = &#123;&#125; <span class="comment">// è¿™é‡Œæ”¹å˜äº†exportsçš„æŒ‡å‘ï¼Œ</span></span><br><span class="line"><span class="comment">// æŒ‡å‘äº†ä¸€ä¸ªæ–°çš„å¯¹è±¡åï¼Œè€Œä¸æ˜¯module.export</span></span><br><span class="line">exports.age = <span class="number">16</span><span class="comment">// æ‰€ä»¥åœ¨å¯¼å‡ºçš„æ—¶å€™ï¼Œä¸ä¼šæœ‰è¿™ä¸ªage</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¹Ÿå°±æ˜¯ç›¸å½“äºexportså¦‚æœæ”¹å˜äº†æŒ‡å‘ï¼Œ</span></span><br><span class="line"><span class="comment">// é‚£ä¹ˆä»¥åæ·»åŠ çš„æ–¹æ³•åˆ™ä¸ä¼šæš´éœ²å‡ºå»ï¼Œï¼ˆæ”¹å˜æŒ‡å‘åï¼Œæ— æ³•ä¿®æ”¹åˆ°åŸå¯¹è±¡äº†ï¼‰</span></span><br></pre></td></tr></table></figure><h4 id="CommonJS-node-æœåŠ¡ç«¯"><a href="#CommonJS-node-æœåŠ¡ç«¯" class="headerlink" title="CommonJS-node(æœåŠ¡ç«¯)"></a>CommonJS-node(æœåŠ¡ç«¯)</h4><ul><li><p>é¦–å…ˆéƒ¨ç½²å‡ºæ–‡ä»¶çš„ç»“æ„</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€modules</span><br><span class="line">â”‚      modules1.js</span><br><span class="line">â”‚      modules2.js</span><br><span class="line">â”‚      modules3.js</span><br><span class="line">â”‚</span><br><span class="line">â”‚  app.js</span><br><span class="line">â”‚  package-lock.json</span><br><span class="line">â”‚  package.json</span><br></pre></td></tr></table></figure></li><li><p>modulesçš„æ–‡ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">module1.js</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨module.exports = value</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">msg:<span class="string">"module1"</span>,</span><br><span class="line">foo()&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"foo() "</span> + <span class="keyword">this</span>.msg);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">module2.js</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨module.exports = value</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>  (<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"foo() module2"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">module3.js</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨exports.xxx = value</span></span><br><span class="line">exports.foo = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"foo() module3"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">exports.bar = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"bar() module3"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æš´éœ²ä¸€ä¸ªæ•°ç»„å‡ºå»</span></span><br><span class="line">exports.arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>];</span><br></pre></td></tr></table></figure></li><li><p>app.jsä¸»é…ç½®æ–‡ä»¶ ä½¿ç”¨node app.jsè¿è¡Œ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">app.js</span><br><span class="line"></span><br><span class="line"><span class="comment">// æå‰å¼•å…¥ç¬¬ä¸‰æ–¹åº“</span></span><br><span class="line"><span class="comment">// å¼•å…¥uniq</span></span><br><span class="line"><span class="keyword">let</span> uniq = <span class="built_in">require</span>(<span class="string">"uniq"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†å…¶ä»–æ¨¡å—æ±‡æ€»åˆ°ä¸»æ¨¡å—</span></span><br><span class="line"><span class="keyword">let</span> module1 = <span class="built_in">require</span>(<span class="string">"./modules/modules1"</span>);</span><br><span class="line"><span class="keyword">let</span> module2 = <span class="built_in">require</span>(<span class="string">"./modules/modules2"</span>);</span><br><span class="line"><span class="keyword">let</span> module3 = <span class="built_in">require</span>(<span class="string">"./modules/modules3"</span>);</span><br><span class="line"></span><br><span class="line">module1.foo();<span class="comment">// foo() module1</span></span><br><span class="line">module2();<span class="comment">// foo() module2</span></span><br><span class="line"></span><br><span class="line">module3.foo();<span class="comment">// foo() module3</span></span><br><span class="line">module3.bar();<span class="comment">// bar() module3</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(module3.arr);<span class="comment">// [ 1, 2, 3, 4, 5, 2, 3, 1, 2, 4 ]</span></span><br><span class="line"><span class="keyword">let</span> result = uniq(module3.arr);</span><br><span class="line"><span class="built_in">console</span>.log(module3.arr);<span class="comment">// [ 1, 2, 3, 4, 5 ]</span></span><br></pre></td></tr></table></figure></li></ul><p>åœ¨æœåŠ¡ç«¯è¿è¡Œçš„æ—¶å€™ è¯­æ³•ç›¸å¯¹ç®€å•ï¼Œè¦æ³¨æ„ç¬¬ä¸‰æ–¹åº“è¦æ”¾åœ¨æœ€å¼€å§‹çš„åœ°æ–¹ï¼Œå› å…¥åº“å†™åå­—å°±å¯ä»¥</p><h4 id="CommonJS-Browserify-å®¢æˆ·ç«¯"><a href="#CommonJS-Browserify-å®¢æˆ·ç«¯" class="headerlink" title="CommonJS-Browserify(å®¢æˆ·ç«¯)"></a>CommonJS-Browserify(å®¢æˆ·ç«¯)</h4><ul><li><p>é¦–å…ˆéƒ¨ç½²å‡ºæ–‡ä»¶çš„ç»“æ„</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€js</span><br><span class="line">â”‚  â”œâ”€dist</span><br><span class="line">â”‚  â””â”€src</span><br><span class="line">â”‚          app.js</span><br><span class="line">â”‚          modules1.js</span><br><span class="line">â”‚          modules2.js</span><br><span class="line">â”‚          modules3.js</span><br><span class="line">â”‚</span><br><span class="line">â”‚  package-lock.json</span><br><span class="line">â”‚  package.json</span><br></pre></td></tr></table></figure></li><li><p>modulesçš„æ–‡ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">module1.js</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨module.exports = value</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">msg:<span class="string">"module1"</span>,</span><br><span class="line">foo()&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"foo() "</span> + <span class="keyword">this</span>.msg);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">module2.js</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨module.exports = value</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>  (<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"foo() module2"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">module3.js</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨exports.xxx = value</span></span><br><span class="line">exports.foo = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"foo() module3"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">exports.bar = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"bar() module3"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æš´éœ²ä¸€ä¸ªæ•°ç»„å‡ºå»</span></span><br><span class="line">exports.arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>];</span><br></pre></td></tr></table></figure></li><li><p>app.jsæ–‡ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æå‰å¼•å…¥ç¬¬ä¸‰æ–¹åº“</span></span><br><span class="line"><span class="comment">// å¼•å…¥uniq</span></span><br><span class="line"><span class="keyword">let</span> uniq = <span class="built_in">require</span>(<span class="string">"uniq"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†å…¶ä»–æ¨¡å—æ±‡æ€»åˆ°ä¸»æ¨¡å—</span></span><br><span class="line"><span class="keyword">let</span> module1 = <span class="built_in">require</span>(<span class="string">"./modules/modules1"</span>);</span><br><span class="line"><span class="keyword">let</span> module2 = <span class="built_in">require</span>(<span class="string">"./modules/modules2"</span>);</span><br><span class="line"><span class="keyword">let</span> module3 = <span class="built_in">require</span>(<span class="string">"./modules/modules3"</span>);</span><br><span class="line"></span><br><span class="line">module1.foo();</span><br><span class="line">module2();</span><br><span class="line"></span><br><span class="line">module3.foo();</span><br><span class="line">module3.bar();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(module3.arr);</span><br><span class="line"><span class="keyword">let</span> result = uniq(module3.arr);</span><br><span class="line"><span class="built_in">console</span>.log(module3.arr);</span><br></pre></td></tr></table></figure></li><li><p>æ‰“åŒ…å¤„ç†js<br><code>browserify js/src/app.js -o js/dist/bundle.js</code></p></li><li><p>åœ¨ é¡µé¢å¼•å…¥ ï¼ˆè¿è¡Œç»“æœä¸ä¹‹å‰ç›¸åŒï¼‰</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/dist/bundle.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><p>åœ¨å®¢æˆ·ç«¯è¿è¡Œçš„æ—¶å€™ï¼Œè¦æ”¾åˆ°<strong>dist</strong>ç”Ÿæˆç¯å¢ƒçš„æ–‡ä»¶å¤¹ï¼Œè¦è¿›è¡Œæ‰“åŒ…å¤„ç†æ‰èƒ½å˜æˆæµè§ˆå™¨è¯†åˆ«çš„æ–‡ä»¶ </p>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>JSæ¨¡å—åŒ–ï¼ˆä¸€ï¼‰</title>
      <link href="/2019/02/05/JS%E6%A8%A1%E5%9D%97%E5%8C%96%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>/2019/02/05/JS%E6%A8%A1%E5%9D%97%E5%8C%96%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h4 id="jså‘å±•å†å²"><a href="#jså‘å±•å†å²" class="headerlink" title="jså‘å±•å†å²"></a>jså‘å±•å†å²</h4><ul><li>å…¨å±€functionçš„æ–¹å¼<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.js</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"foo()  "</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"bar()  "</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"module.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼è™½ç„¶å¸¦æ¥äº†ç®€ä¾¿æ–¹å¼ï¼Œä½†æ˜¯ä¸€å®šç¨‹åº¦ä¸Šé€ æˆäº†å‘½åå†²çªçš„é—®é¢˜ï¼Œå¹¶ä¸”åœ¨åæœŸéš¾ä»¥ç»´æŠ¤ï¼Œæ˜¯ä¸€ä¸ªæ¯”è¾ƒä¸¥é‡çš„é—®é¢˜ï¼Œæ±¡æŸ“å…¨å±€å˜é‡</p><ul><li>é‡‡ç”¨namespaceçš„æ–¹å¼<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.js</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">msg : <span class="string">"module"</span>,</span><br><span class="line">foo()&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"foo()"</span> + <span class="keyword">this</span>.msg);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"module.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">obj.foo();<span class="comment">// foo()module</span></span></span><br><span class="line"><span class="javascript">obj.msg = <span class="string">"namespace"</span>;</span></span><br><span class="line"><span class="javascript">obj.foo();<span class="comment">// foo()namespace</span></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼è™½ç„¶è§£å†³äº†å‘½åå†²çªçš„é—®é¢˜ï¼Œä½†æ˜¯ä¸å®‰å…¨ï¼Œç”±äºä½¿ç”¨å¯¹è±¡è¿›è¡Œå°è£…ï¼Œæ‰€ä»¥ä»ç„¶å¯ä»¥ä¿®æ”¹å¯¹è±¡ä¸­çš„å†…å®¹</p><ul><li>é‡‡ç”¨IIFEçš„æ–¹å¼<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.js</span><br><span class="line"></span><br><span class="line"><span class="comment">// é‡‡ç”¨é—­åŒ…çš„æ–¹å¼ IIFE</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">window</span>) </span>&#123;</span><br><span class="line"><span class="keyword">let</span> msg = <span class="string">"module"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"foo() "</span> + msg);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æš´éœ²å‡ºå»å¯¹è±¡</span></span><br><span class="line"><span class="built_in">window</span>.obj = &#123;foo&#125;;</span><br><span class="line">&#125;)(<span class="built_in">window</span>)</span><br></pre></td></tr></table></figure></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"module.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">msg = <span class="string">"IIFE"</span>;<span class="comment">// æ­¤æ—¶ä¸ºéšå¼å…¨å±€å˜é‡</span></span></span><br><span class="line"><span class="javascript">obj.foo();<span class="comment">// foo() module</span></span></span><br><span class="line"><span class="javascript">obj.msg = <span class="string">"IIFE"</span>;<span class="comment">// ç”±äºå­˜åœ¨äº†é—­åŒ…ï¼Œä¿®æ”¹çš„å¹¶ä¸æ˜¯é‚£ä¸€ä¸ªæ•°æ®</span></span></span><br><span class="line"><span class="javascript">obj.foo();<span class="comment">// foo() module</span></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼é€šè¿‡å…¨å±€å˜é‡ä¼ é€’å‡ºå»æ¨¡å—åç§°ï¼Œè€Œä¸”é‡‡ç”¨äº†<strong>ç«‹å³æ‰§è¡Œå‡½æ•°</strong>ç›¸å¯¹æ•°æ®è¾ƒå®‰å…¨ï¼Œä¹Ÿæ˜¯æ¯”è¾ƒå¥½çš„ä¸€ç§æ¨¡å—å®šä¹‰æ–¹å¼</p><ul><li>é‡‡ç”¨IIFE-å¼•å…¥ä¾èµ–çš„æ–¹å¼<ul><li>è¿™ç§æ–¹å¼æ˜¯IIFEçš„å¢å¼ºæ¨¡å¼ï¼Œç”±IIFEå‘å±•è€Œæ¥ï¼Œä¹Ÿæ˜¯ä»Šåçš„jsæ¨¡å—åŒ–çš„ä¸€ç§æ ‡å‡†<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.js</span><br><span class="line"></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">window,$</span>) </span>&#123;</span><br><span class="line"><span class="keyword">let</span> msg = <span class="string">"module"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"foo() "</span> + msg);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">window</span>.obj = &#123;foo&#125;;</span><br><span class="line"><span class="comment">// æ­¤æ—¶å¼•å…¥ç¬¬ä¸‰æ–¹åº“çš„æ–¹æ³•</span></span><br><span class="line">$(<span class="string">"body"</span>).css(<span class="string">"background"</span>,<span class="string">"deeppink"</span>);</span><br><span class="line">&#125;)(<span class="built_in">window</span>,jQuery)</span><br></pre></td></tr></table></figure></li></ul></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"jquery-1.11.0.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"module.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">obj.foo();<span class="comment">// foo() module</span></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™æ˜¯åœ¨IIFEä¸Šå‘å±•è€Œæ¥çš„ä¸€ç§æ–¹å¼ï¼Œå¼•å…¥äº†ç¬¬ä¸‰æ–¹çš„ä¾èµ–ï¼Œä½†æ˜¯ç”±äºæœ‰ä¾èµ–å…³ç³»ï¼Œä¸€å®šè¦æ³¨æ„å¼•å…¥çš„é¡ºåºï¼Œç”±äº<strong>module.jså¼•å…¥äº†jquery,æ‰€ä»¥jqueryè¦å…ˆè¢«è§£æ</strong></p><ul><li>ä¼ ç»Ÿçš„ç›¸äº’ä¾èµ–æ¼”ç¤º</li></ul><ul><li><p>æ–‡ä»¶çš„ç»“æ„</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">â””â”€js</span><br><span class="line">        alerter.js</span><br><span class="line">        dataService.js</span><br><span class="line">â”‚</span><br><span class="line">â”‚  app.js</span><br><span class="line">â”‚  index.html</span><br></pre></td></tr></table></figure></li><li><p>moduleçš„æ–‡ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">dataService.js</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªæ²¡æœ‰ä¾èµ–çš„æ¨¡å—</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">window</span>) </span>&#123;</span><br><span class="line"><span class="keyword">let</span> name = <span class="string">"dataService.js"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æš´éœ²å‡ºå»</span></span><br><span class="line"><span class="built_in">window</span>.dataService = &#123;getName&#125;;</span><br><span class="line">&#125;)(<span class="built_in">window</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">alerter.js</span><br><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªæœ‰ä¾èµ–çš„æ¨¡å—</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">window,dataService</span>) </span>&#123;</span><br><span class="line"><span class="keyword">let</span> msg = <span class="string">"alerter.js"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showMsg</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(msg, dataService.getName());</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æš´éœ²å‡ºå»</span></span><br><span class="line"><span class="built_in">window</span>.alerter = &#123;showMsg&#125;;</span><br><span class="line">&#125;)(<span class="built_in">window</span>,dataService)</span><br></pre></td></tr></table></figure></li><li><p>app.jsçš„ä¸»æ–‡ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">app.js</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›´æ¥è°ƒç”¨alerter.js</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">alerter</span>) </span>&#123;</span><br><span class="line">alerter.showMsg();<span class="comment">// alerter.js dataService.js</span></span><br><span class="line">&#125;)(alerter)</span><br></pre></td></tr></table></figure></li><li><p>htmlæ–‡ä»¶</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/dataService.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/alerter.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"app.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><p>ç”±äºä»–ä»¬ä¹‹é—´äº§ç”Ÿäº†ä¾èµ–å…³ç³» æ‰€ä»¥ä¸€å®šè¦å¼„æ¸…æ¥šä¹‹é—´çš„å…³ç³»ï¼Œå¼•å…¥é¡ºåºå¾ˆé‡è¦</p><h4 id="åœ¨è¿™äº›ä¼ ç»Ÿçš„æ–¹å¼ä¸Šäº§ç”Ÿäº†ä¸€äº›å¼•å…¥jsçš„æ ‡å‡†"><a href="#åœ¨è¿™äº›ä¼ ç»Ÿçš„æ–¹å¼ä¸Šäº§ç”Ÿäº†ä¸€äº›å¼•å…¥jsçš„æ ‡å‡†" class="headerlink" title="åœ¨è¿™äº›ä¼ ç»Ÿçš„æ–¹å¼ä¸Šäº§ç”Ÿäº†ä¸€äº›å¼•å…¥jsçš„æ ‡å‡†"></a>åœ¨è¿™äº›ä¼ ç»Ÿçš„æ–¹å¼ä¸Šäº§ç”Ÿäº†ä¸€äº›å¼•å…¥jsçš„æ ‡å‡†</h4><ul><li>CommonJS</li><li>AMD</li><li>CMD(ç›®å‰ä½¿ç”¨ä¸å¹¿æ³›)</li><li>ES6<br>æ¥ä¸‹æ¥ä¼šåˆ†åˆ«ä»‹ç» <code>CommonJS</code>,<code>AMD</code>ï¼Œ<code>ES6</code>å¼•å…¥ä¾èµ–çš„æ–¹å¼</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>2019-ç¥è‡ªå·±</title>
      <link href="/2019/02/05/2019-%E7%A5%9D%E8%87%AA%E5%B7%B1/"/>
      <url>/2019/02/05/2019-%E7%A5%9D%E8%87%AA%E5%B7%B1/</url>
      
        <content type="html"><![CDATA[<h4 id="å…³äºæ–°å¹´"><a href="#å…³äºæ–°å¹´" class="headerlink" title="å…³äºæ–°å¹´"></a>å…³äºæ–°å¹´</h4><p>åšè‡ªå·±å®ˆæŠ¤è€…ï¼Œ<br>æ„¿è‡ªå·±ï¼Œ<br>èº«ä½“å¥åº·ã€‚<br><img src="/img/2019/02/05/1.jpg" alt="æ–°å¹´å¿«ä¹">(å›¾æºï¼šåŒ…å›¾ç½‘)</p>]]></content>
      
      
      
        <tags>
            
            <tag> å¿ƒæƒ… </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>h5è¯­ä¹‰åŒ–æ ‡ç­¾åŠå…¶å…¼å®¹æ€§è§£å†³</title>
      <link href="/2019/01/26/h5%E8%AF%AD%E4%B9%89%E5%8C%96%E6%A0%87%E7%AD%BE%E5%8F%8A%E5%85%B6%E5%85%BC%E5%AE%B9%E6%80%A7%E8%A7%A3%E5%86%B3/"/>
      <url>/2019/01/26/h5%E8%AF%AD%E4%B9%89%E5%8C%96%E6%A0%87%E7%AD%BE%E5%8F%8A%E5%85%B6%E5%85%BC%E5%AE%B9%E6%80%A7%E8%A7%A3%E5%86%B3/</url>
      
        <content type="html"><![CDATA[<blockquote><p>html5çš„è¯­ä¹‰åŒ–æ ‡ç­¾ç¡®å®ä¸ºæˆ‘ä»¬å¸¦æ¥äº†è®¸å¤šæ–¹ä¾¿ï¼Œä½†æ˜¯å¦‚ä½•è§£å†³ä»–çš„å…¼å®¹æ€§ä»£ç ä¹Ÿæ˜¯éœ€è¦æˆ‘ä»¬å»è§£å†³çš„ï¼Œç®€å•åˆ†æä¸€ä¸‹h5çš„ç›¸å…³ä½¿ç”¨</p></blockquote><h4 id="h5å¸¦æ¥äº†å“ªäº›å¥½å¤„"><a href="#h5å¸¦æ¥äº†å“ªäº›å¥½å¤„" class="headerlink" title="h5å¸¦æ¥äº†å“ªäº›å¥½å¤„"></a>h5å¸¦æ¥äº†å“ªäº›å¥½å¤„</h4><ul><li>æ¯”è¾ƒåˆ©äºå¼€å‘äººå‘˜ä½¿ç”¨,ä¸éœ€è¦å»ä»”ç»†é˜…è¯»æ¯ä¸€ä¸ªç±»ï¼Œå°±å¯ä»¥è¾ƒä¸ºæ¸…æ¥šåœ°åˆ†æå‡ºç½‘é¡µçš„æ•´ä½“ç»“æ„ã€‚</li><li>åˆ©äºSEO-æœç´¢å¼•æ“ä¼˜åŒ–,æœç´¢å¼•æ“ä¹Ÿè¦åˆ†ææˆ‘ä»¬çš„ç½‘é¡µï¼Œå½“æ—¶ç”¨äº†h5çš„æ—¶å€™ï¼Œä»–ä¹Ÿå¯ä»¥å¾ˆæ–¹ä¾¿çš„å¯»æ‰¾å‡ºç½‘é¡µçš„é‡ç‚¹éƒ¨åˆ†ï¼Œæ’åé å‰ã€‚</li></ul><p><img src="/img/2019/01/26/1.png" alt="h5ä¸ä¼ ç»Ÿç»“æ„å¯¹æ¯”">(å·¦ä¸ºh5 å³ä¸ºä¼ ç»Ÿç½‘é¡µ)</p><h4 id="h5å¸¦æ¥çš„é—®é¢˜"><a href="#h5å¸¦æ¥çš„é—®é¢˜" class="headerlink" title="h5å¸¦æ¥çš„é—®é¢˜"></a>h5å¸¦æ¥çš„é—®é¢˜</h4><ul><li><p>æœ€å¤§å°±æ˜¯å…¼å®¹æ€§ï¼Œåœ¨<strong>IE8åŠå…¶ä»¥å‰</strong>æ˜¯ä¸æ”¯æŒh5çš„ï¼Œå¹¶ä¸”ä¼šå°†å…¶è§£æä¸ºè¡Œé—´å…ƒç´ ï¼Œæ¶‰åŠåˆ°h5æ ‡ç­¾(åŒ…æ‹¬h5çš„ç›¸å…³api)ï¼Œä»¥åŠå¤§éƒ¨åˆ†çš„css3å±æ€§</p><ul><li>IE9çš„æ˜¾ç¤ºæ•ˆæœ  <img src="/img/2019/01/26/2.png" alt="IE9çš„æ˜¾ç¤ºæ•ˆæœ"></li><li>IE8çš„æ˜¾ç¤ºæ•ˆæœï¼Œï¼ˆIE8æ˜¯å°†å…¶è½¬æ¢ä¸ºè¡Œé—´å…ƒç´ è¿›è¡Œè§£æï¼‰<img src="/img/2019/01/26/3.png" alt="IE8çš„æ˜¾ç¤ºæ•ˆæœ"></li></ul></li></ul><ul><li>å¦‚ä½•è§£å†³å…¼å®¹æ€§é—®é¢˜<ol><li>é¦–å…ˆä½¿ç”¨jsåˆ›å»ºå…ƒç´ ï¼Œ<code>document.createElement(&#39;header&#39;)</code></li><li>è®¾ç½®å…¶cssçš„<code>displayï¼šblock</code></li><li>åœ¨è¿™é‡Œå¯ä»¥ä½¿ç”¨<a href="https://github.com/aFarkas/html5shiv" target="_blank" rel="noopener">html5shiv.js</a>è¿™ä¸ªæ’ä»¶æ¥å¸®æˆ‘ä»¬å®Œæˆ,éœ€è¦æ³¨æ„çš„ä¸€ç‚¹ï¼Œæ­¤å¤„æˆ‘ä»¬éœ€åœ¨ç½‘é¡µçš„æœ€å¼€å§‹å¼•å…¥æ­¤jsæ–‡ä»¶</li></ol></li></ul><ul><li><p>å¦‚ä½•åˆ¤æ–­æˆ‘ä»¬æ˜¯å¦éœ€è¦å»å¼•å…¥è¯¥æ’ä»¶</p><ul><li>å› ä¸ºåªæœ‰<strong>IE8åŠå…¶ä»¥å‰</strong>çš„ç‰ˆæœ¬éœ€è¦å¤„ç†ï¼Œé‚£åœ¨å…¶ä»–çš„æµè§ˆå™¨ä¸‹å°±æ˜¯ä¸å¤ªéœ€è¦çš„æ“ä½œ</li><li>ï¼ˆXï¼‰ä½¿ç”¨jsçš„<code>userAgent</code>æ¥è¿›è¡Œåˆ¤æ–­,åº”ä¸ºæˆ‘ä»¬éœ€è¦æœ€å¼€å§‹æ¥åŠ è½½ï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨jsçš„æ–¹å¼æ¥åˆ¤æ–­</li><li><p>ï¼ˆâˆšï¼‰ä½¿ç”¨æ¡ä»¶æ³¨é‡Šçš„æ–¹å¼æ¥è¿›è¡Œåˆ¤æ–­</p>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--[if lt IE 9]&gt;</span></span><br><span class="line"><span class="comment">&lt;h1&gt;æ‚¨çš„æµè§ˆå™¨ç‰ˆæœ¬è¿‡ä½ï¼Œè¯·åŠæ—¶æ›´æ–°æ‚¨çš„æµè§ˆå™¨&lt;/h1&gt;</span></span><br><span class="line"><span class="comment">&lt;![endif]--&gt;</span></span><br></pre></td></tr></table></figure><p>  (è¿™é‡Œ lt&lt; lte&lt;= gt&gt; gte&gt;=)</p></li></ul></li></ul><ul><li>å¤„ç†å…¼å®¹æ€§çš„ä»£ç   <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--[if lt IE 9]&gt;</span></span><br><span class="line"><span class="comment">&lt;script src="bower_components/html5shiv/dist/html5shiv.js"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="comment">&lt;![endif]--&gt;</span></span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>loadingè¿‡æ¸¡åŠ¨ç”»çš„ä½¿ç”¨</title>
      <link href="/2019/01/18/loading%E8%BF%87%E6%B8%A1%E5%8A%A8%E7%94%BB%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2019/01/18/loading%E8%BF%87%E6%B8%A1%E5%8A%A8%E7%94%BB%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h4 id="ä½¿ç”¨loadingç›¸å…³æ’ä»¶ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ"><a href="#ä½¿ç”¨loadingç›¸å…³æ’ä»¶ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ" class="headerlink" title="ä½¿ç”¨loadingç›¸å…³æ’ä»¶ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ"></a>ä½¿ç”¨loadingç›¸å…³æ’ä»¶ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ</h4><blockquote><p>åœ¨ä½¿ç”¨ajaxåˆ·æ–°æ•°æ®çš„æ—¶å€™ï¼Œä¸­é—´çš„é—´éš”å¯ä»¥ä½¿ç”¨ä¸€äº›è¿‡æ¸¡åŠ¨ç”»å¢åŠ ç”¨æˆ·ä½“éªŒ</p></blockquote><ol><li><p>é¦–å…ˆé€‰ç”¨ä¸€äº›åŠ¨ç”»æ’ä»¶ æ¯”å¦‚æ­¤å¤„çš„<a href="http://loading.awesomes.cn/" target="_blank" rel="noopener">http://loading.awesomes.cn/</a>æ‰¾åˆ°è¦ä½¿ç”¨çš„æ ·å¼</p></li><li><p>æ’å…¥ç›¸å…³çš„ä»£ç ï¼Œè¿™é‡Œå¯ä»¥å•ç‹¬åˆ—å‡ºæ–‡ä»¶æ•´åˆèµ·æ¥</p></li></ol><ul><li><p>htmlä»£ç </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--loadingåŠ¨ç”»--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"ball-pulse-sync"</span> <span class="attr">style</span>=<span class="string">"display: none"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>cssä»£ç </p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/*loadingåŠ¨ç”»çš„æ ·å¼è¡¨*/</span></span><br><span class="line"><span class="selector-class">.ball-pulse-sync</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scale</span>(1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ball-pulse-sync</span> &gt; <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child(1)</span> &#123;</span><br><span class="line">  <span class="attribute">-webkit-animation</span>: ball-pulse-sync <span class="number">0.6s</span> -<span class="number">0.14s</span> infinite ease-in-out;</span><br><span class="line">  <span class="attribute">animation</span>: ball-pulse-sync <span class="number">0.6s</span> -<span class="number">0.14s</span> infinite ease-in-out;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.ball-pulse-sync</span> &gt; <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child(2)</span> &#123;</span><br><span class="line">  <span class="attribute">-webkit-animation</span>: ball-pulse-sync <span class="number">0.6s</span> -<span class="number">0.07s</span> infinite ease-in-out;</span><br><span class="line">  <span class="attribute">animation</span>: ball-pulse-sync <span class="number">0.6s</span> -<span class="number">0.07s</span> infinite ease-in-out;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.ball-pulse-sync</span> &gt; <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child(3)</span> &#123;</span><br><span class="line">  <span class="attribute">-webkit-animation</span>: ball-pulse-sync <span class="number">0.6s</span> <span class="number">0s</span> infinite ease-in-out;</span><br><span class="line">  <span class="attribute">animation</span>: ball-pulse-sync <span class="number">0.6s</span> <span class="number">0s</span> infinite ease-in-out;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.ball-pulse-sync</span> &gt; <span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">-webkit-animation-fill-mode</span>: both;</span><br><span class="line">  <span class="attribute">animation-fill-mode</span>: both;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">keyframes</span> ball-pulse-sync &#123;</span><br><span class="line">  33% &#123;</span><br><span class="line">  <span class="attribute">-webkit-transform</span>: <span class="built_in">translateY</span>(10px);</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(10px);</span><br><span class="line">  &#125;</span><br><span class="line">  66% &#123;</span><br><span class="line">    <span class="attribute">-webkit-transform</span>: <span class="built_in">translateY</span>(-10px);</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-10px);</span><br><span class="line">  &#125;</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">-webkit-transform</span>: <span class="built_in">translateY</span>(0);</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateY</span>(0);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><ol start="3"><li>è®¾ç½®å…¶å…ƒç´ æ˜¾ç¤ºçš„æ—¶æœºï¼Œè¿™é‡Œæä¾›ä¸€ç§å¯ä»¥å±…ä¸­çš„æ–¹å¼</li></ol><ul><li><p>cssä»£ç </p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.ball-pulse-sync</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;<span class="comment">/*ä½¿ç”¨flexå¸ƒå±€*/</span></span><br><span class="line">  <span class="attribute">align-items</span>: center;<span class="comment">/*å±…ä¸­*/</span></span><br><span class="line">  <span class="attribute">justify-content</span>: center;<span class="comment">/*å±…ä¸­*/</span></span><br><span class="line">  <span class="attribute">position</span>: fixed;<span class="comment">/*å›ºå®šäºæµè§ˆå™¨*/</span></span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">1001</span>;<span class="comment">/*è®¾å®šå±‚çº§*/</span></span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(0,0,0,.7);<span class="comment">/*èƒŒæ™¯è‰²*/</span></span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li><li><p>å¯ä»¥ä½¿ç”¨jqueryçš„ <code>fadeIn()</code>  ä¸ <code>fadeOut()</code> æ–¹æ³• åœ¨<code>&lt;div style=&quot;display:none&quot;&gt;Â·Â·Â·&lt;/div&gt;</code> ä¹‹æ‰€ä»¥è®¾ç½®<strong>display:none</strong> æ˜¯ä¸ºäº†æ·¡å…¥æ·¡å‡ºå¯ä»¥æ¢å¤ display:flewçš„ç‰¹æ€§ï¼ˆjQueryé»˜è®¤æ˜¯display:blockï¼‰</p></li></ul><ol start="4"><li>æ•ˆæœå›¾<img src="/img/2019/01/18/1.png" alt="loading"></li></ol><h4 id="å…¶å®ä½¿ç”¨è¿™ç§è¿›åº¦æ¡ï¼Œæˆ–æ˜¯åŠ è½½å‡½æ•°éƒ½æ˜¯ä¸€ç§è¡¨é¢çš„ä¸œè¥¿ï¼Œå…¶å†…éƒ¨æ˜¯ä¸€äº›å‡½æ•°ï¼Œä¼šèµ°çš„è¶Šæ¥è¶Šæ…¢ï¼Œå½“åŠ è½½å®Œæ¯•çš„æ—¶å€™ä¸€ä¸‹å­èµ°é€šï¼Œé€ æˆäº†ä¸€ç§è¿›åº¦æ¡çš„æ„Ÿè§‰ï¼Œå®é™…æ˜¯ajaxå¼€å§‹ä¸€ä¸ªåŠ¨ä½œï¼Œç»“æŸä¸€ä¸ªåŠ¨ä½œ"><a href="#å…¶å®ä½¿ç”¨è¿™ç§è¿›åº¦æ¡ï¼Œæˆ–æ˜¯åŠ è½½å‡½æ•°éƒ½æ˜¯ä¸€ç§è¡¨é¢çš„ä¸œè¥¿ï¼Œå…¶å†…éƒ¨æ˜¯ä¸€äº›å‡½æ•°ï¼Œä¼šèµ°çš„è¶Šæ¥è¶Šæ…¢ï¼Œå½“åŠ è½½å®Œæ¯•çš„æ—¶å€™ä¸€ä¸‹å­èµ°é€šï¼Œé€ æˆäº†ä¸€ç§è¿›åº¦æ¡çš„æ„Ÿè§‰ï¼Œå®é™…æ˜¯ajaxå¼€å§‹ä¸€ä¸ªåŠ¨ä½œï¼Œç»“æŸä¸€ä¸ªåŠ¨ä½œ" class="headerlink" title="å…¶å®ä½¿ç”¨è¿™ç§è¿›åº¦æ¡ï¼Œæˆ–æ˜¯åŠ è½½å‡½æ•°éƒ½æ˜¯ä¸€ç§è¡¨é¢çš„ä¸œè¥¿ï¼Œå…¶å†…éƒ¨æ˜¯ä¸€äº›å‡½æ•°ï¼Œä¼šèµ°çš„è¶Šæ¥è¶Šæ…¢ï¼Œå½“åŠ è½½å®Œæ¯•çš„æ—¶å€™ä¸€ä¸‹å­èµ°é€šï¼Œé€ æˆäº†ä¸€ç§è¿›åº¦æ¡çš„æ„Ÿè§‰ï¼Œå®é™…æ˜¯ajaxå¼€å§‹ä¸€ä¸ªåŠ¨ä½œï¼Œç»“æŸä¸€ä¸ªåŠ¨ä½œ"></a>å…¶å®ä½¿ç”¨è¿™ç§è¿›åº¦æ¡ï¼Œæˆ–æ˜¯åŠ è½½å‡½æ•°éƒ½æ˜¯ä¸€ç§è¡¨é¢çš„ä¸œè¥¿ï¼Œå…¶å†…éƒ¨æ˜¯ä¸€äº›å‡½æ•°ï¼Œä¼šèµ°çš„è¶Šæ¥è¶Šæ…¢ï¼Œå½“åŠ è½½å®Œæ¯•çš„æ—¶å€™ä¸€ä¸‹å­èµ°é€šï¼Œé€ æˆäº†ä¸€ç§è¿›åº¦æ¡çš„æ„Ÿè§‰ï¼Œå®é™…æ˜¯ajaxå¼€å§‹ä¸€ä¸ªåŠ¨ä½œï¼Œç»“æŸä¸€ä¸ªåŠ¨ä½œ</h4><pre><code class="JavaScript"><span class="comment">// jQueryä¸­çš„ç»Ÿä¸€ajax</span>$(<span class="built_in">document</span>).ajaxStart(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{    <span class="comment">// ajaxå¼€å§‹çš„ä»£ç </span>}).ajaxStop(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{    <span class="comment">// ajaxç»“æŸçš„ä»£ç </span>});</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æ¢¦Â·ä¹¦Â·ç”µå½±</title>
      <link href="/2018/12/25/%E6%A2%A6%C2%B7%E4%B9%A6%C2%B7%E7%94%B5%E5%BD%B1/"/>
      <url>/2018/12/25/%E6%A2%A6%C2%B7%E4%B9%A6%C2%B7%E7%94%B5%E5%BD%B1/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æƒ³è¦æŠŠè‡ªå·±æ´»æˆä¸€åœºæ¢¦ï¼Œä¸€æœ¬ä¹¦,ä¸€æ­¥ç”µå½±ã€‚ â€“ é½ä¸€</p></blockquote><p>00ï¼š20å¹³å®‰å¤œï¼Œeveryone,ç¥å¹³å®‰ï¼Œå¿«ä¹ï¼Œæ¯ä¸ªäººéƒ½ä¼šå¾—åˆ°æƒ³è¦çš„ï¼åŠ æ²¹ï¼</p>]]></content>
      
      
      
        <tags>
            
            <tag> å¿ƒæƒ… </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å¯èƒ½å¦</title>
      <link href="/2018/12/08/%E5%8F%AF%E8%83%BD%E5%90%A6/"/>
      <url>/2018/12/08/%E5%8F%AF%E8%83%BD%E5%90%A6/</url>
      
        <content type="html"><![CDATA[<h2 id="å¯èƒ½å¦"><a href="#å¯èƒ½å¦" class="headerlink" title="å¯èƒ½å¦"></a>å¯èƒ½å¦</h2><pre><code>æ˜¥å¤©çš„é£ èƒ½å¦å¹æ¥å¤å¤©çš„é›¨ç§‹å¤©çš„æœˆ èƒ½å¦ç…§äº®å†¬å¤©çš„é›ªå¤œç©ºçš„æ˜Ÿ èƒ½å¦è½å‘æ™¨æ›¦çš„æµ·å±±é—´çš„æ³‰ èƒ½å¦é‡ä¸Šå—é£çš„é›èƒ½å¦æ—©ä¸€ç‚¹ çœ‹é€å‘½è¿çš„ä¼çº¿èƒ½å¦ä¸è½»æ˜“å°±æ·±é™·èƒ½å¦æ…¢ä¸€ç‚¹ æŒ¥éœæœ‰é™çš„æ—¶é—´èƒ½å¦è®¸æˆ‘ä¸€ä¸ªæ°¸è¿œå¯èƒ½æˆ‘æ’äº†å—å¢™æ‰ä¼šå›å¤´å§å¯èƒ½æˆ‘è§äº†é»„æ²³æ‰ä¼šæ­»å¿ƒå§å¯èƒ½æˆ‘åè¦ä¸€æ¡è·¯èµ°åˆ°é»‘å§å¯èƒ½æˆ‘è¿˜æ²¡é‡è§ é‚£ä¸ªå¥¹å§æ–­æ‰çš„å¼¦ èƒ½å¦æ‰¯ç ´è‡ªç¼šçš„èŒ§ç†„ç­çš„ç« èƒ½å¦çƒ§å…‰æ®‹ç•™çš„å¿µæ¢¦ä¸­çš„äº‘ èƒ½å¦åŒ–ä½œç†Ÿæ‚‰çš„è„¸å‰ä¸–çš„åŠ« èƒ½å¦æ¢æ¥ä»Šç”Ÿçš„ç¼˜èƒ½å¦æ—©ä¸€ç‚¹ ç›¸ä¿¡å¹´å°‘çš„èª“è¨€èƒ½å¦ä¸è½»æ˜“è¯´å†è§èƒ½å¦æ…¢ä¸€ç‚¹ æ„Ÿå—å²æœˆçš„ç¼±ç»»èƒ½å¦è®¸æˆ‘ä¸€æ¬¡æˆå…¨å¯èƒ½æˆ‘æ’äº†å—å¢™æ‰ä¼šå›å¤´å§å¯èƒ½æˆ‘è§äº†é»„æ²³æ‰ä¼šæ­»å¿ƒå§å¯èƒ½æˆ‘åè¦ä¸€æ¡è·¯èµ°åˆ°é»‘å§å¯èƒ½æˆ‘è¿˜æ²¡é‡è§ é‚£ä¸ªå¥¹å§å¯èƒ½æˆ‘æ’äº†å—å¢™æ‰ä¼šå›å¤´å§å¯èƒ½æˆ‘è§äº†é»„æ²³æ‰ä¼šæ­»å¿ƒå§å¯èƒ½æˆ‘åè¦ä¸€æ¡è·¯èµ°åˆ°é»‘å§å¯èƒ½æˆ‘è¿˜æ²¡é‡è§ é‚£ä¸ªå¥¹å§å¯èƒ½æˆ‘è¿˜æ²¡å¿˜æ‰ å“ªä¸ªå¥¹å§</code></pre><p><img src="/img/20181208/1.jpg" alt="1"><br><br>å¯èƒ½å¦ â€“ æœ¨å°é›…<br></p><blockquote><p>2018-12-08 æ­å· Â· æ­å·ç”µå­ç§‘æŠ€å¤§å­¦ Â· é›ª</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> å¿ƒæƒ… </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ä½ æ‰€é­å—çš„è‹¦éš¾ï¼Œéƒ½å°†åœ¨æœªæ¥çš„æŸä¸ªæ—¶åˆ»æ´¾ä¸Šç”¨åœº</title>
      <link href="/2018/11/26/%E4%BD%A0%E6%89%80%E9%81%AD%E5%8F%97%E7%9A%84%E8%8B%A6%E9%9A%BE%EF%BC%8C%E9%83%BD%E5%B0%86%E5%9C%A8%E6%9C%AA%E6%9D%A5%E7%9A%84%E6%9F%90%E4%B8%AA%E6%97%B6%E5%88%BB%E6%B4%BE%E4%B8%8A%E7%94%A8%E5%9C%BA/"/>
      <url>/2018/11/26/%E4%BD%A0%E6%89%80%E9%81%AD%E5%8F%97%E7%9A%84%E8%8B%A6%E9%9A%BE%EF%BC%8C%E9%83%BD%E5%B0%86%E5%9C%A8%E6%9C%AA%E6%9D%A5%E7%9A%84%E6%9F%90%E4%B8%AA%E6%97%B6%E5%88%BB%E6%B4%BE%E4%B8%8A%E7%94%A8%E5%9C%BA/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åŠ æ²¹ï¼Œä¸€åˆ‡éƒ½ä¼šè¿‡å»ï¼å¹²ï¼</p></blockquote><p><img src="/img/20181126/1.png" alt="1"></p><div style="text-align: right"><br>    2018-11-26&#160; &#160; 23:26 <br><br>    æ­å·Â·æ­å·ç”µå­ç§‘æŠ€å¤§å­¦<br></div>]]></content>
      
      
      
        <tags>
            
            <tag> å¿ƒæƒ… </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å®šåˆ¶bootstrapçš„åˆ—ç›¸å…³</title>
      <link href="/2018/11/08/%E5%AE%9A%E5%88%B6bootstrap%E7%9A%84%E5%88%97%E7%9B%B8%E5%85%B3/"/>
      <url>/2018/11/08/%E5%AE%9A%E5%88%B6bootstrap%E7%9A%84%E5%88%97%E7%9B%B8%E5%85%B3/</url>
      
        <content type="html"><![CDATA[<h1 id="å¦‚ä½•å®šåˆ¶bsçš„æ …æ ¼"><a href="#å¦‚ä½•å®šåˆ¶bsçš„æ …æ ¼" class="headerlink" title="å¦‚ä½•å®šåˆ¶bsçš„æ …æ ¼"></a>å¦‚ä½•å®šåˆ¶bsçš„æ …æ ¼</h1><hr><blockquote><p>BSï¼ˆbootstrapï¼‰é»˜è®¤æ˜¯ä»¥12åˆ—ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚æœæƒ³å¸ƒå±€5åˆ—çš„è¯ï¼Œå°±æ¯”è¾ƒå›°éš¾äº†ï¼Œ(12/5ä¸èƒ½æ•´é™¤çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¸ƒå±€äº”åˆ—çš„æ—¶å€™ï¼Œä½¿ç”¨åŸç”Ÿçš„bsè¿›è¡Œè°ƒæ•´å°±å¾ˆå›°éš¾äº†)è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨bsçš„å®šåˆ¶åŠŸèƒ½ï¼Œå®šåˆ¶ä¸€ä¸ªæˆ‘ä»¬è‡ªå·±æƒ³è¦çš„åˆ—æ•°ç­‰ï¼Œ<strong>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨15åˆ—ä¸ºåŸºç¡€ï¼Œåˆ™æ¯ä¸€åˆ—å 3åˆ— col-sm-3</strong></p></blockquote><h2 id="å»bså®˜ç½‘è¿›è¡Œå®šåˆ¶å¹¶ä¸‹è½½"><a href="#å»bså®˜ç½‘è¿›è¡Œå®šåˆ¶å¹¶ä¸‹è½½" class="headerlink" title="å»bså®˜ç½‘è¿›è¡Œå®šåˆ¶å¹¶ä¸‹è½½"></a>å»bså®˜ç½‘è¿›è¡Œå®šåˆ¶å¹¶ä¸‹è½½</h2><ul><li>å®˜ç½‘<br><img src="/img/20181108/1.png" alt=""><br><img src="/img/20181108/2.png" alt=""></li><li>ä¸‹è½½ä¹‹å<code>js</code>,<code>css</code>,<code>font</code><br><img src="/img/20181108/3.png" alt=""></li></ul><p>å®Œæˆå®šåˆ¶ä¹‹åï¼Œæˆ‘ä»¬çš„åˆ—å°±å·²ç»å˜æˆäº†15åˆ—ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ­¤æ—¶è¿›è¡Œæ™®é€šçš„æ“ä½œå³å¯ã€‚<br><img src="/img/20181108/4.png" alt=""></p>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Linuxçš„åŸºæœ¬æ“ä½œåŠJdk,MySQL,Tomcat</title>
      <link href="/2018/10/29/Linux%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C%E5%8F%8AJdk-MySQL-Tomcat/"/>
      <url>/2018/10/29/Linux%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C%E5%8F%8AJdk-MySQL-Tomcat/</url>
      
        <content type="html"><![CDATA[<h2 id="Linux-ä¸­çš„ä¸€äº›-å¸¸ç”¨æ“ä½œ"><a href="#Linux-ä¸­çš„ä¸€äº›-å¸¸ç”¨æ“ä½œ" class="headerlink" title="Linux ä¸­çš„ä¸€äº› å¸¸ç”¨æ“ä½œ"></a>Linux ä¸­çš„ä¸€äº› å¸¸ç”¨æ“ä½œ</h2><ul><li>ç›®å½•çš„æ“ä½œ<ul><li>åˆ›å»ºæ–‡ä»¶å¤¹ <code>mkdir &lt;name&gt;</code></li><li>æŸ¥çœ‹éšè—æ–‡ä»¶ <code>ls -a</code></li><li>æŸ¥çœ‹æ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯ <code>ls -l</code>æˆ–è€…æ˜¯<code>ll</code></li><li>ä¿®æ”¹ç›®å½•åç§° <code>mv &lt;oldName&gt; &lt;newName&gt;</code></li><li>æ‹·è´æ“ä½œ <code>cp -r &lt;src&gt; &lt;dest&gt;</code></li><li>åˆ é™¤æ“ä½œ <code>rm -rf &lt;fileName&gt;</code>ä½¿ç”¨æç¤º<code>rm -r &lt;fileName&gt;</code> åœ¨è¾“å…¥yæˆ–è€…né€‰æ‹©æ˜¯å¦ç¡®å®šåˆ é™¤</li></ul></li><li>æ–‡ä»¶çš„æ“ä½œ<ul><li><code>cat &lt;fileName&gt;</code> æŸ¥çœ‹æŸä¸ªæ–‡ä»¶çš„æœ€åä¸€å±å¹•  </li><li><code>more &lt;fileName&gt;</code> æŸ¥çœ‹æ–‡ä»¶çš„æ‰€æœ‰ï¼Œ<code>å›è½¦</code>æ˜¯ä¸€è¡Œ  <code>ç©ºæ ¼</code>ä¸‹ä¸€é¡µ</li><li><code>less &lt;fileName&gt;</code> æŸ¥çœ‹æ–‡ä»¶é¡µçš„å½¢å¼ï¼Œä½¿ç”¨ä¸Šä¸‹é¡µæŸ¥çœ‹ï¼Œ<code>PageUpé”®</code>å‘ä¸Š <code>PageDowné”®</code>å‘ä¸‹  <code>q</code>ç»“æŸæŸ¥çœ‹</li><li><code>tail -&lt;n&gt; &lt;filename&gt;</code> æŸ¥çœ‹æ–‡ä»¶çš„ånè¡Œ</li><li><code>tail -f &lt;fileName&gt;</code> æŸ¥çœ‹æ–‡ä»¶çš„æ—¥å¿—</li><li><code>ll -h</code> æŸ¥çœ‹æ–‡ä»¶çš„å¤§å°</li></ul></li><li>æ–‡ä»¶çš„ç¼–è¾‘<ul><li>ä½¿ç”¨<code>vi</code>æˆ–è€…<code>vim</code>è¿›å…¥æ–‡æœ¬ç¼–è¾‘å™¨</li><li><code>i</code>,<code>o</code>è¿›è¡Œæ–‡æœ¬ç¼–è¾‘</li><li><code>:wq</code>ä¿å­˜å¹¶é€€å‡º writeQuit</li><li><code>:q</code> ä¸ä¿å­˜é€€å‡º quit</li></ul></li><li>æ–‡ä»¶çš„å‹ç¼©(taråªæ˜¯æ‰“åŒ…å‘½ä»¤ æ–‡ä»¶å¤§å°æ²¡æœ‰å¤šå°‘åŒºåˆ« .tar.gzæ˜¯åŠ å…¥gzipæŒ‡ä»¤ï¼Œä¼šå‹ç¼©å­˜æ”¾)<ul><li>-c: å»ºç«‹å‹ç¼©æ¡£æ¡ˆ</li><li>-xï¼šè§£å‹</li><li>-tï¼šæŸ¥çœ‹å†…å®¹</li><li>-rï¼šå‘å‹ç¼©å½’æ¡£æ–‡ä»¶æœ«å°¾è¿½åŠ æ–‡ä»¶</li><li>-uï¼šæ›´æ–°åŸå‹ç¼©åŒ…ä¸­çš„æ–‡ä»¶<blockquote><p>ä¸€äº›å¯é€‰æŒ‡ä»¤æ›´åœ¨åé¢å³å¯</p></blockquote></li><li>-zï¼šæœ‰gzipå±æ€§çš„</li><li>-jï¼šæœ‰bz2å±æ€§çš„</li><li>-Zï¼šæœ‰compresså±æ€§çš„</li><li>-vï¼šæ˜¾ç¤ºæ‰€æœ‰è¿‡ç¨‹</li><li>-Oï¼šå°†æ–‡ä»¶è§£å¼€åˆ°æ ‡å‡†è¾“å‡º</li><li>-f: ä½¿ç”¨æ¡£æ¡ˆåå­—ï¼Œ<strong>å¿…é¡»æ”¾åœ¨æœ€å</strong><blockquote><p>æ“ä½œ å‹ç¼©</p></blockquote></li><li><code>tar -cvf &lt;tarName&gt;.tar *.jpg</code> è¿›æ‰€æœ‰jpgå‹ç¼©è¿›tarName.tar</li><li><code>tar â€“czf &lt;tarName&gt;.tar.gz *.jpg</code> æ‰“æˆgzåŒ…</li><li><code>tar â€“cjf &lt;tarName&gt;.tar.bz2 *.jpg</code> æ‰“æˆbz2åŒ…ï¼ˆbz2å‹ç¼©æ¯”é«˜ä¸€äº›ï¼‰</li><li><code>tar â€“cZf jpg.tar.Z *.jpg</code> æ‰“æˆZåŒ…<blockquote><p>æ“ä½œ è§£å‹</p></blockquote></li><li><code>tar â€“xvf &lt;fileName&gt;.tar</code> è§£å‹taråŒ…</li><li><code>tar -xzvf &lt;fileName&gt;.tar.gz</code> è§£å‹tar.gz</li><li><code>tar -xjvf file.tar.bz2</code> è§£å‹ tar.bz2</li><li><code>tar â€“xZvf file.tar.Z</code>è§£å‹tar.Z<br>&lt;!â€“<br>æš‚æ—¶æœ‰ä¸€äº›é—®é¢˜</li></ul></li><li>æ–‡ä»¶æƒé™çš„ä¿®æ”¹<ul><li><code>r</code>è¯»æƒé™ <code>w</code>å†™æƒé™ <code>x</code> æ“ä½œæƒé™</li><li><code>chmod u=--- g=--- o=--- &lt;fileName&gt;</code>ä¿®æ”¹æ–‡ä»¶çš„æƒé™ï¼Œè¦åˆ†ä¸‰ç»„æ¥çœ‹</li></ul></li></ul><p>â€“&gt;</p><ul><li>ç³»ç»Ÿç®¡ç†å‘½ä»¤<ul><li>æŸ¥çœ‹æ—¶é—´<code>date</code> è®¾ç½®æ—¶é—´<code>date -s &quot;yyyy-MM-dd HH:mm:ss&quot;</code></li><li>æŸ¥çœ‹åˆ†åŒºæƒ…å†µ <code>df</code>æŸ¥çœ‹xxGæˆ–è€…xxM <code>df -h</code></li><li>æ˜¾ç¤ºå†…å­˜ <code>free</code> æŸ¥çœ‹xxGæˆ–è€…xxM <code>free -h</code></li><li>æ¸…å± <code>clear</code></li><li>æ˜¾ç¤ºç™»å½•æ—¥å¿—ä¿¡æ¯ <code>who</code></li><li>æ˜¾ç¤ºä¸»æœºåç§° <code>hostname</code></li><li>ç³»ç»Ÿä¿¡æ¯ <code>uname</code> è¯¦ç»†ä¿¡æ¯ <code>uname -a</code></li></ul></li><li>å…¶ä»–ä¸€äº›æŒ‡ä»¤<ul><li><code>pwd</code> æŸ¥çœ‹å½“å‰æ–‡ä»¶ç›®å½•</li><li><code>grep &lt;keyword&gt; &lt;fileName&gt; --color</code>åœ¨fileNameä¸­æŸ¥çœ‹keywordå…³é”®å­—å¹¶ä¸”é«˜äº®</li><li><code>ps -ef</code>æŸ¥çœ‹å½“å‰çš„è¿›ç¨‹</li><li><code>kill -9 &lt;pId&gt;</code>å¹²æ‰è¿›ç¨‹</li><li><code>netstat -an</code>æŸ¥çœ‹ç«¯å£çš„ä½¿ç”¨æƒ…å†µ</li></ul></li><li>å‘½ä»¤çš„é€»è¾‘<ul><li><code>&amp;&amp;</code>å’Œç¼–ç¨‹ä¸­ä¸€æ ·ï¼Œé€»è¾‘ä¸ <code>&lt;command1&gt; &amp;&amp; &lt;command2&gt;</code> <ul><li>å‘½ä»¤1æ‰§è¡ŒæˆåŠŸ åæ‰§è¡Œ å‘½ä»¤2</li><li>å‘½ä»¤1æ‰§è¡Œå¤±è´¥ ä¸æ‰§è¡Œ å‘½ä»¤2</li></ul></li><li><code>||</code>å’Œç¼–ç¨‹ä¸­ç±»ä¼¼æœ‰çŸ­è·¯æ•ˆæœ<code>&lt;command1&gt; || &lt;command2&gt;</code><ul><li>å‘½ä»¤1æ‰§è¡ŒæˆåŠŸ ä¸æ‰§è¡Œ å‘½ä»¤2</li><li>å‘½ä»¤1æ‰§è¡Œå¤±è´¥ åæ‰§è¡Œ å‘½ä»¤2</li></ul></li></ul></li><li><p>åˆ›å»ºä¸€ä¸ªå…¬å…±çš„æ–‡ä»¶å¤¹ ä¾›Vmå…±äº«çš„æ–‡ä»¶å¤¹</p><ol><li>æ‰“å¼€Vmä¸­çš„å…±äº«æ–‡ä»¶å¤¹</li><li><strong>æ ¹ç›®å½•ä¸‹</strong><code>mnt/hgfs/</code>å¯çœ‹åˆ°æˆ‘ä»¬åˆšåˆšè®¾ç½®çš„å…¬å…±æ–‡ä»¶å¤¹</li></ol></li><li><p>æœåŠ¡</p><ul><li><code>rpm -qa | grep &lt;keywords&gt;</code> æŸ¥çœ‹æœåŠ¡</li><li><code>rpm -e --nodeps &lt;name&gt;</code> åˆ é™¤ç›¸å…³æœåŠ¡</li></ul></li></ul><h2 id="å®‰è£…JDKçš„æ“ä½œ"><a href="#å®‰è£…JDKçš„æ“ä½œ" class="headerlink" title="å®‰è£…JDKçš„æ“ä½œ"></a>å®‰è£…JDKçš„æ“ä½œ</h2><ul><li><code>rpm -qa | grap java</code>æŸ¥è¯¢æ˜¯å¦å®‰è£…äº†jdk</li><li>è§£å‹jdk <code>tar -zxvf &lt;jdkName.tar.gz&gt;</code></li><li>é…ç½® <em>/etc/profile</em>ä¸­æ–‡ä»¶<code>vi /etc/profile</code></li><li>æ·»åŠ å¦‚ä¸‹çš„æ“ä½œï¼Œæ³¨æ„æ­¤å¤„çš„/usr/java/xxx/jdkxxx(ä¸‹ä¸€å±‚å°±æœ‰binäº†ï¼ŒåŒæ—¶è¿™ä¸ªæ–‡ä»¶å¤¹ä¹Ÿæ˜¯åˆšåˆšè§£å‹å‡ºæ¥çš„)<blockquote><ul><li><code>#java environment</code></li><li><code>export JAVA_HOME=/usr/java/&lt;directoryName&gt;</code></li><li><code>export CLASSPATH=.:${JAVA_HOME}/jre/lib/rt.jar:${JAVA_HOME}/lib/dt.jar:</code>${JAVA_HOME}/lib/tools.jar`</li><li><code>export PATH=$PATH:${JAVA_HOME}/bin</code></li></ul></blockquote></li><li>æœ€å<code>source /etc/profile</code></li></ul><h2 id="å®‰è£…MySQLçš„æ“ä½œ-ä¸€å®šè¦æ³¨æ„è·¯å¾„çš„ä¿®æ”¹-software-æ–‡ä»¶-data-æ•°æ®åº“"><a href="#å®‰è£…MySQLçš„æ“ä½œ-ä¸€å®šè¦æ³¨æ„è·¯å¾„çš„ä¿®æ”¹-software-æ–‡ä»¶-data-æ•°æ®åº“" class="headerlink" title="å®‰è£…MySQLçš„æ“ä½œ(ä¸€å®šè¦æ³¨æ„è·¯å¾„çš„ä¿®æ”¹ software/æ–‡ä»¶,data/æ•°æ®åº“)"></a>å®‰è£…MySQLçš„æ“ä½œ(ä¸€å®šè¦æ³¨æ„è·¯å¾„çš„ä¿®æ”¹ <code>software/æ–‡ä»¶</code>,<code>data/æ•°æ®åº“</code>)</h2><ul><li>åˆ›å»ºæ–‡ä»¶å¤¹(å¯æ ¹æ®éœ€æ±‚å®šåˆ¶)<ul><li>æ–°å»ºæ–‡ä»¶å¤¹ <code>xxx/mysql/software/</code>MySQLç¨‹åº</li><li>æ–°å»ºæ–‡ä»¶å¤¹ <code>xxx/mysql/data/</code>æ•°æ®åº“æ–‡ä»¶</li></ul></li><li>å¤åˆ¶æ–‡ä»¶è¿‡å» <code>cp æŒ‡ä»¤</code>å¹¶è§£å‹<code>taræŒ‡ä»¤</code></li><li>åˆ›å»ºç”¨æˆ·å’Œç»„<ul><li><code>groupadd mysql</code></li><li><code>useradd -r -g mysql mysql</code></li></ul></li><li>å…³è”myqlç”¨æˆ·åˆ°mysqlç”¨æˆ·ç»„ä¸­<ul><li><code>#chown -R mysql:mysql  /software/mysql/</code></li><li><code>#chown -R mysql:mysql  /data/mysql/</code></li><li><code>#chown -R mysql  /software/mysql/</code></li><li><code>#chown -R mysql  /data/mysql</code></li></ul></li><li>æ›´æ”¹mysqlå®‰è£…æ–‡ä»¶å¤¹mysql/çš„æƒé™ <code>chmod -R 755 /software/mysql/</code></li><li>æ³¨æ„æ ¹æ®éœ€è¦ å®‰è£…libaio<code>yum install libaio</code></li><li>è¿›è¡Œæ•°æ®åº“çš„åˆå§‹åŒ–å·¥ä½œ<code>./mysqld --user=mysql --basedir=/software/mysql --datadir=/data/mysql --initialize</code><blockquote><p>æ³¨æ„root@localhost: <strong>(oiwsWz7-dhc</strong>è¿™é‡Œçš„åˆå§‹å¯†ç ï¼åˆ‡è®°ï¼åˆ‡è®°ï¼</p></blockquote></li><li>ä¿®æ”¹mysqlé…ç½®æ–‡ä»¶<code>vim /software/mysql/support-files/mysql.server</code>ä¿å­˜é€€å‡ºåæ‹·è¿‡å»<code>cp /software/mysql/support-files/mysql.server  /etc/init.d/mysqld</code>ï¼Œå¹¶æ·»åŠ æƒé™<code>chmod 755 /etc/init.d/mysqld</code><blockquote><p>if test -z â€œ$basedirâ€<br>then<br>bindir=/software/mysql/bin<br>if test -z â€œ$datadirâ€<br>then<br>datadir=/data/mysql<br>fi<br>sbindir=/software/mysql/bin<br>libexecdir=/software/mysql/bin<br>else<br>bindir=â€$basedir/binâ€<br>if test -z â€œ$datadirâ€<br>then<br>datadir=â€$basedir/dataâ€<br>fi<br>sbindir=â€$basedir/sbinâ€<br>libexecdir=â€$basedir/libexecâ€<br>fi</p></blockquote></li><li>ä¿®æ”¹my.cnfæ–‡ä»¶<code>vim /etc/my.cnf</code><blockquote><p>[client]</p><pre><code>no-beepsocket =/software/mysql/mysql.sock</code></pre></blockquote><pre><code># pipe# socket=0.0port=3306[mysql]default-character-set=utf8[mysqld]basedir=/software/mysqldatadir=/data/mysqlport=3306pid-file=/software/mysql/mysqld.pid#skip-grant-tablesskip-name-resolvesocket = /software/mysql/mysql.sockcharacter-set-server=utf8default-storage-engine=INNODBexplicit_defaults_for_timestamp = true# Server Id.server-id=1max_connections=2000query_cache_size=0 table_open_cache=2000 tmp_table_size=246M thread_cache_size=300 #é™å®šç”¨äºæ¯ä¸ªæ•°æ®åº“çº¿ç¨‹çš„æ ˆå¤§å°ã€‚é»˜è®¤è®¾ç½®è¶³ä»¥æ»¡è¶³å¤§å¤šæ•°åº”ç”¨ thread_stack = 192k key_buffer_size=512M read_buffer_size=4M read_rnd_buffer_size=32M innodb_data_home_dir = /data/mysql innodb_flush_log_at_trx_commit=0 innodb_log_buffer_size=16M innodb_buffer_pool_size=256M innodb_log_file_size=128M innodb_thread_concurrency=128 innodb_autoextend_increment=1000 innodb_buffer_pool_instances=8 innodb_concurrency_tickets=5000 innodb_old_blocks_time=1000 innodb_open_files=300 innodb_stats_on_metadata=0 innodb_file_per_table=1 innodb_checksum_algorithm=0 back_log=80 flush_time=0 join_buffer_size=128M max_allowed_packet=1024M max_connect_errors=2000 open_files_limit=4161 query_cache_type=0 sort_buffer_size=32M table_definition_cache=1400 binlog_row_event_max_size=8K sync_master_info=10000 sync_relay_log=10000 sync_relay_log_info=10000#æ‰¹é‡æ’å…¥æ•°æ®ç¼“å­˜å¤§å°ï¼Œå¯ä»¥æœ‰æ•ˆæé«˜æ’å…¥æ•ˆç‡ï¼Œé»˜è®¤ä¸º8M bulk_insert_buffer_size = 64M interactive_timeout = 120 wait_timeout = 120 log-bin-trust-function-creators=1 sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES&lt;br/## include all files from the config directory#!includedir /etc/my.cnf.d</code></pre></li><li>å¯åŠ¨<code>/etc/init.d/mysqld start</code></li><li>ç™»å½•mysql<code>/software/mysql/bin/mysql -u root â€“p</code><blockquote><p>p ä¸ºä¸Šä¸€æ­¥çš„ä¸´æ—¶å¯†ç  (oiwsWz7-dhc</p></blockquote></li><li>æœ€åè¿›å…¥mysqlä¿®æ”¹åˆå§‹å¯†ç å³å¯<code>ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;æ–°å¯†ç &#39;</code><br>##Tomcatçš„å®‰è£…##</li><li>è§£å‹tomcatå¹¶æ”¾åˆ°æ‰€éœ€çš„æ–‡ä»¶å¤¹ä¸‹</li><li>æ‰“å¼€é˜²ç«å¢™çš„8080ç«¯å£ï¼ˆä¹Ÿå¯æ‰“å¼€80ç«¯å£ï¼‰<ul><li><code>firewall-cmd --zone=public --add-port=8080/tcp --permanent</code> 8080port</li><li><code>firewall-cmd --zone=public --add-port=80/tcp --permanent</code> 80port</li><li><code>firewall-cmd --reload</code>é‡å¯é˜²ç«å¢™</li></ul></li><li>æ‰“å¼€æœåŠ¡å™¨å³å¯ <strong>tomcat/bin</strong>ç›®å½•ä¸‹çš„<ul><li>å¼€å¯<code>./startup.sh</code></li><li>å…³é—­ <code>./shutdown.sh</code></li></ul></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> è¿ç»´ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ä¸ºä½ æˆ‘å—å†·é£å¹</title>
      <link href="/2018/10/20/%E4%B8%BA%E4%BD%A0%E6%88%91%E5%8F%97%E5%86%B7%E9%A3%8E%E5%90%B9/"/>
      <url>/2018/10/20/%E4%B8%BA%E4%BD%A0%E6%88%91%E5%8F%97%E5%86%B7%E9%A3%8E%E5%90%B9/</url>
      
        <content type="html"><![CDATA[<ul><li>ç¬¬ä¸€æ¬¡ç”¨è‡ªå·±çš„åŠ›é‡åšå…¬ç›Šï¼<ul><li><em>æµ™æ±ŸÂ·æ­å·è¾°æ˜Ÿå„¿ç«¥æ—©æœŸå¹²é¢„ä¸­å¿ƒ</em></li><li><em>è®°ä¸€æ¬¡å…¬ç›Šå¢™ç»˜è¡Œï¼</em> <br></li><li><em><a href="https://mp.weixin.qq.com/s?__biz=MzA3MzE1MjAzNA==&amp;mid=2653648677&amp;idx=1&amp;sn=78986c636f9011dd2b60ea428d624494&amp;chksm=84ccb468b3bb3d7e86a6f37e44b58e7e56db1fc6f1b4bca5d6d50b43c21163a151eb75438dcd&amp;scene=0&amp;subscene=131&amp;ascene=7&amp;devicetype=android-25&amp;version=26070336&amp;nettype=cmnet&amp;abtest_cookie=AwABAAoACwATAAMAJZceAFaZHgCEmR4AAAA%3D&amp;lang=en&amp;pass_ticket=EwiaMT0OO2s3udyCfqvhjhyfPB2IINQYeD3dLI9ABDJysAUJ28%2BQs3gF8fDrJgsI&amp;wx_header=1" target="_blank" rel="noopener">å¾®ä¿¡æ¨æ–‡</a></em></li></ul></li></ul><blockquote><p>&#160; &#160; &#160; &#160;ç»è¿‡äº†ä¸¤å‘¨çš„å‡†å¤‡ï¼Œä»å¼€å§‹è”ç³»è®°è€…ï¼Œè€å¸ˆï¼Œåˆ°åæ¥è·Ÿè¿›é¡¹ç›®è®¡åˆ’ï¼Œå†åˆ°åæ¥ç­–åˆ’é¢œæ–™ï¼Œäººå‘˜ï¼Œå‘ç¥¨ï¼Œå†åˆ°æ¯ä¸ªäººä¸­åˆçš„åˆé¥­é—®é¢˜ï¼Œä¸€åˆ‡éƒ½æ˜¯æ–°çš„å¼€å§‹ï¼Œè®©æˆ‘ä¸€ä¸ªéè‰ºæœ¯ç”Ÿå»å¸¦ä»–ä»¬ç”»ç”»ï¼Œè¿˜æ˜¯æœ‰ç‚¹æ„æ€çš„ï¼ä½†æ˜¯ï¼Œè¿™æ¬¡æ´»åŠ¨æ€»ä½“è€Œæ¥è¿˜æ˜¯å¾ˆä¸é”™çš„ï¼Œå­¦åˆ°äº†å¾ˆå¤šï¼Œä¹Ÿçœ‹åˆ°äº†ä»–ä»¬çš„ä¼˜ç§€ï¼Œå¼ºå°±å¯¹äº†ï¼</p></blockquote><hr><h1 id="è¯ä¸å¤šè¯´ï¼Œä¸Šå›¾"><a href="#è¯ä¸å¤šè¯´ï¼Œä¸Šå›¾" class="headerlink" title="è¯ä¸å¤šè¯´ï¼Œä¸Šå›¾"></a>è¯ä¸å¤šè¯´ï¼Œä¸Šå›¾</h1><p><center>æ—©ä¸Š7:50å‡ºé—¨ï¼Œæ‰¾åˆ°è½¦ç«™å·²ç»å¿«8:30äº†ï¼Œå“ˆå“ˆ</center><br><img src="/img/20181020/1.jpg" alt="1"></p><hr><p><center>å…ˆæ˜¯é“…ç¬”æ„å›¾<code>æ‰“åº•å­</code></center><br><img src="/img/20181020/2.jpg" alt="2"><br><img src="/img/20181020/3.jpg" alt="3"><br><img src="/img/20181020/4.jpg" alt="4"></p><hr><p><center>åˆ°äº†åˆé¥­æ—¶é—´ï¼Œæ˜¯èƒƒå£å¤§è¿˜æ˜¯é¥­è®¢å°‘äº†ï¼å˜»å˜»ï¼ŒçœŸé¦™ï¼åƒå°±å¯¹äº†</center><br><img src="/img/20181020/5.jpg" alt="5"></p><hr><p><center>åº•å­æ‰“èµ·æ¥</center><br><img src="/img/20181020/6.jpg" alt="6"><br><img src="/img/20181020/7.jpg" alt="7"><br><img src="/img/20181020/8.jpg" alt="8"></p><hr><p><center>å±‹å†…çš„<code>å“†å•¦Aæ¢¦</code>ä¸»é¢˜ï¼Œç”»èµ·æ¥è¿˜æ˜¯å¾ˆèµ·åŠ²çš„å˜›ï¼</center><br><img src="/img/20181020/9.jpg" alt="9"><br><img src="/img/20181020/10.jpg" alt="10"><br><img src="/img/20181020/11.jpg" alt="11"><br><img src="/img/20181020/12.jpg" alt="12"></p><hr><p><center>è¿™ä¸¤åªé²¸é±¼è¿˜æ˜¯å¾ˆæœ‰çˆ±çš„ï¼ä¸€è¿›é—¨çœ‹åˆ°æ˜¯ä¸å¾ˆèˆ’çˆ½ï¼Œä¸æ¥å—åé©³</center></p><h2 id=""><a href="#" class="headerlink" title=""></a><img src="/img/20181020/13.jpg" alt="13"></h2><p><center>æœ€åçš„æˆæœèµ°ä¸€æ³¢</center><br><img src="/img/20181020/14.jpg" alt="14"><br><img src="/img/20181020/15.jpg" alt="15"><br><img src="/img/20181020/16.jpg" alt="16"><br><img src="/img/20181020/17.jpg" alt="17"><br><img src="/img/20181020/18.jpg" alt="18"><br><img src="/img/20181020/19.jpg" alt="19"><br><img src="/img/20181020/20.jpg" alt="20"><br><img src="/img/20181020/21.jpg" alt="21"><br><img src="/img/20181020/22.jpg" alt="22"><br><img src="/img/20181020/23.jpg" alt="23"><br><img src="/img/20181020/24.jpg" alt="24"><br><img src="/img/20181020/25.jpg" alt="25"><br><img src="/img/20181020/26.jpg" alt="26"><br><img src="/img/20181020/27.jpg" alt="27"></p><hr><p><center>å…¬äº¤è½¦æˆ‘ä»¬åŒ…äº†ï¼éƒ½ç´¯æˆäº†ç‹—ï¼å“ˆå“ˆï¼Œä¸è¿‡ç¡®å®æ˜¯å……å®çš„ä¸€å¤©</center><br><img src="/img/20181020/28.jpg" alt="28"></p><hr><p>æœ€åæ„¿å¤§å®¶ï¼šå‰ç¨‹ä¼¼é”¦ï¼Œæµ·é˜”ä»»é±¼è·ƒï¼Œå¤©é«˜ä»»é¸Ÿé£ï¼<br>è¿™ä¸æ˜¯å¥—è¯ï¼Œæ˜¯çœŸå¿ƒå¯¹ä½ ä»¬çš„ç¥ç¦ï¼(ï¾‰Â´â–½ï½€)ï¾‰â™ª</p>]]></content>
      
      
      
        <tags>
            
            <tag> å¿ƒæƒ… </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Gitä¸­åˆ†æ”¯ç›¸å…³çš„æ“ä½œ</title>
      <link href="/2018/10/18/Git%E4%B8%AD%E5%88%86%E6%94%AF%E7%9B%B8%E5%85%B3%E7%9A%84%E6%93%8D%E4%BD%9C/"/>
      <url>/2018/10/18/Git%E4%B8%AD%E5%88%86%E6%94%AF%E7%9B%B8%E5%85%B3%E7%9A%84%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸ºä»€ä¹ˆè¦å­˜åœ¨åˆ†æ”¯"><a href="#ä¸ºä»€ä¹ˆè¦å­˜åœ¨åˆ†æ”¯" class="headerlink" title="ä¸ºä»€ä¹ˆè¦å­˜åœ¨åˆ†æ”¯"></a>ä¸ºä»€ä¹ˆè¦å­˜åœ¨åˆ†æ”¯</h1><p><br></p><blockquote><ul><li>å¦‚æœåªæœ‰ä¸€ä¸ªä¸»åˆ†æ”¯<strong>master</strong>é‚£ä¹ˆæˆ‘ä»¬åœ¨æäº¤æˆ–æ˜¯ ä¿®æ”¹çš„æ—¶å€™å¾ˆå®¹æ˜“å½±å“åˆ°å…¶ä»–çš„ä»£ç æˆ–æ˜¯æ–‡ä»¶ï¼Œæ‰€ä»¥è¿™é‡Œå°±éœ€è¦å¼•å…¥ä¸€äº›åˆ†æ”¯ï¼Œåœ¨è¿™ä¸ªåˆ†æ”¯ä¿®æ”¹å¥½ä¹‹åï¼Œå†æ¨é€åˆ°ä¸»åˆ†æ”¯ä¸Šã€‚</li><li>ä¸€èˆ¬Masteråˆ†æ”¯æ˜¯æœ€ç¨³å®šçš„ä¸€ä¸ªåˆ†æ”¯ï¼Œç”¨äºå‘å¸ƒç‰ˆæœ¬ä½¿ç”¨</li></ul></blockquote><h1 id="æ–°å»ºä¸€ä¸ªåˆ†æ”¯-git-branch-lt-branchName-gt"><a href="#æ–°å»ºä¸€ä¸ªåˆ†æ”¯-git-branch-lt-branchName-gt" class="headerlink" title="æ–°å»ºä¸€ä¸ªåˆ†æ”¯ $ git branch &lt;branchName&gt;"></a>æ–°å»ºä¸€ä¸ªåˆ†æ”¯ <code>$ git branch &lt;branchName&gt;</code></h1><p><br></p><blockquote><p>æ–°å»ºä¸€ä¸ªåˆ†æ”¯</p></blockquote><h1 id="åˆ‡æ¢ä¸€ä¸ªåˆ†æ”¯-git-checkout-lt-branchName-gt"><a href="#åˆ‡æ¢ä¸€ä¸ªåˆ†æ”¯-git-checkout-lt-branchName-gt" class="headerlink" title="åˆ‡æ¢ä¸€ä¸ªåˆ†æ”¯ $ git checkout &lt;branchName&gt;"></a>åˆ‡æ¢ä¸€ä¸ªåˆ†æ”¯ <code>$ git checkout &lt;branchName&gt;</code></h1><p><br></p><blockquote><p>åˆ‡æ¢ä¸€ä¸ªåˆ†æ”¯ï¼Œè¿™é‡Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ¯”è¾ƒå¿«æ·çš„æ“ä½œï¼Œå†æ–°å»ºå®Œåˆ†æ”¯ ç›´æ¥åˆ‡æ¢è¿‡å»<code>$ git checkout -b &lt;branchName&gt;</code> ç›´æ¥æ–°å»ºå¹¶ä¸”åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯</p></blockquote><h1 id="åˆ†æ”¯çš„åˆ é™¤-git-branche-d-lt-branchName-gt"><a href="#åˆ†æ”¯çš„åˆ é™¤-git-branche-d-lt-branchName-gt" class="headerlink" title="åˆ†æ”¯çš„åˆ é™¤ $ git branche -d &lt;branchName&gt;"></a>åˆ†æ”¯çš„åˆ é™¤ <code>$ git branche -d &lt;branchName&gt;</code></h1><p><br></p><blockquote><p>å¯ä»¥åˆ é™¤è¿™ä¸ªåˆ†æ”¯</p></blockquote><h1 id="åˆ†æ”¯çš„åˆå¹¶-git-merge-lt-branchName-gt"><a href="#åˆ†æ”¯çš„åˆå¹¶-git-merge-lt-branchName-gt" class="headerlink" title="åˆ†æ”¯çš„åˆå¹¶$ git merge &lt;branchName&gt;"></a>åˆ†æ”¯çš„åˆå¹¶<code>$ git merge &lt;branchName&gt;</code></h1><p><br></p><ul><li>å…ˆåˆ‡æ¢åˆ°éœ€è¦è¢« åˆå¹¶çš„åˆ†æ”¯ æ¯”å¦‚ä¸»Masteråˆ†æ”¯</li><li>ä¹‹åè¿›è¡Œåˆ†æ”¯çš„åˆå¹¶<code>$ git merge &lt;branchName&gt;</code></li><li>å¦‚æœå‡ºç°äº†å†²çªï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±åœ¨æœ¬åœ°è§£å†³ å†²çªï¼Œæœ€åä¸è¦å¿˜è®°æœ¬åœ°çš„æäº¤ <strong>add</strong>ä¸<strong>commit</strong></li></ul>]]></content>
      
      
      
    </entry>
    
    <entry>
      <title>Gitçš„ä¸è¿œç¨‹ä»“åº“æ­é…çš„ä½¿ç”¨</title>
      <link href="/2018/10/18/Git%E7%9A%84%E4%B8%8E%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E6%90%AD%E9%85%8D%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2018/10/18/Git%E7%9A%84%E4%B8%8E%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E6%90%AD%E9%85%8D%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="äº†è§£å‘è¿œç¨‹ä»“åº“é€šè®¯"><a href="#äº†è§£å‘è¿œç¨‹ä»“åº“é€šè®¯" class="headerlink" title="äº†è§£å‘è¿œç¨‹ä»“åº“é€šè®¯"></a>äº†è§£å‘è¿œç¨‹ä»“åº“é€šè®¯</h1><p><br> </p><blockquote><p>&#160; &#160;&#160; &#160;åœ¨è¿œç«¯çš„Gitä»“åº“ä¸­ æ¯”å¦‚æˆ‘ä»¬åœ¨githubä¸­çš„ä»“åº“ï¼Œä¼šæ¶‰åŠåˆ°å¯¹æ–‡ä»¶çš„<strong>ä¸Šä¼ </strong>ä¸ä¸‹è½½<strong>ä¸‹è½½</strong></p></blockquote><h1 id="æ–‡ä»¶pushï¼ˆæ¨é€ï¼‰åˆ°è¿œç¨‹ä»“åº“-160-git-push"><a href="#æ–‡ä»¶pushï¼ˆæ¨é€ï¼‰åˆ°è¿œç¨‹ä»“åº“-160-git-push" class="headerlink" title="æ–‡ä»¶pushï¼ˆæ¨é€ï¼‰åˆ°è¿œç¨‹ä»“åº“&#160;$ git push"></a>æ–‡ä»¶pushï¼ˆæ¨é€ï¼‰åˆ°è¿œç¨‹ä»“åº“&#160;<code>$ git push</code></h1><p><br></p><blockquote><p> &#160; &#160;&#160; &#160;åœ¨å‘è¿œç¨‹çš„ä»“åº“è¿›è¡Œæäº¤æ–‡ä»¶çš„æ—¶å€™ï¼Œä»–ä¼šè¦†ç›–åˆ°åŸæ¥çš„ä¸€ä¸ªç‰ˆæœ¬ï¼Œæ‰€ä»¥åœ¨pushä¹‹å‰æˆ‘ä»¬è¦åšå¥½å‡†å¤‡ã€‚</p></blockquote><h1 id="æ–‡ä»¶pullï¼ˆæ‹‰å–ï¼‰åˆ°æœ¬åœ°ä»“åº“-160-git-pull"><a href="#æ–‡ä»¶pullï¼ˆæ‹‰å–ï¼‰åˆ°æœ¬åœ°ä»“åº“-160-git-pull" class="headerlink" title="æ–‡ä»¶pullï¼ˆæ‹‰å–ï¼‰åˆ°æœ¬åœ°ä»“åº“&#160;$ git pull"></a>æ–‡ä»¶pullï¼ˆæ‹‰å–ï¼‰åˆ°æœ¬åœ°ä»“åº“&#160;<code>$ git pull</code></h1><p><br></p><blockquote><p> &#160; &#160;&#160; &#160;åœ¨å‘æœ¬åœ°ä»“åº“æ‹‰å–æ–‡ä»¶çš„æ—¶å€™ï¼Œå¾ˆå¯èƒ½ä¼šå‡ºç° ä¸è¿œç¨‹ä»“åº“ä¸ä¸€è‡´çš„æƒ…å†µï¼Œè¿™ä¸ªæ—¶å€™ä¸æœ¬åœ°åˆå¹¶åˆ†æ”¯æ¯”è¾ƒç±»ä¼¼ï¼Œä»–ä¼šåœ¨æœ¬åœ°æœ‰å†²çªçš„æ–‡ä»¶åšä¸€äº›æç¤ºï¼Œæˆ‘ä»¬åœ¨æœ¬åœ°ä¿®æ”¹å¥½ä¹‹åç›´æ¥æäº¤å³å¯ï¼Œ<strong>æ³¨æ„</strong>è¿™æ—¶ä¸€å®šä¸è¦å¿˜äº† æäº¤<code>$ git add .</code>ä¸<code>$ git commit -m&#39;&#39;</code>ä¸æœ¬åœ°ä¿æŒä¸€è‡´ï¼Œè¿™ä¸ªæ—¶å€™æœ¬åœ°ä»“åº“å°±å·²ç»æ˜¯ä¸è¿œç¨‹ä»“åº“ç›¸åŒçš„æƒ…å†µã€‚</p></blockquote><h1 id="æ–‡ä»¶è¿œç¨‹åŒæ­¥çš„æ­¥éª¤"><a href="#æ–‡ä»¶è¿œç¨‹åŒæ­¥çš„æ­¥éª¤" class="headerlink" title="æ–‡ä»¶è¿œç¨‹åŒæ­¥çš„æ­¥éª¤"></a>æ–‡ä»¶è¿œç¨‹åŒæ­¥çš„æ­¥éª¤</h1><p><br></p><ul><li>ä¸€èˆ¬æƒ…å†µä¸‹ å…ˆæ˜¯ä»è¿œç¨‹ä»“åº“ <strong>pull</strong>ä¸‹æ¥ï¼Œæ­¤æ—¶æœ‰å†²çª ä¹Ÿæ¯”è¾ƒå¥½è§£å†³</li><li>å†è§£å†³ç›¸åº”çš„å†²çª å³å¯å°†ä»£ç <strong>push</strong>æ¨é€çš„è¿œç¨‹ä»“åº“</li></ul>]]></content>
      
      
      
    </entry>
    
    <entry>
      <title>Gitçš„åŸºæœ¬æœ¬åœ°æ“ä½œ</title>
      <link href="/2018/10/18/Git%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%9C%AC%E5%9C%B0%E6%93%8D%E4%BD%9C/"/>
      <url>/2018/10/18/Git%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%9C%AC%E5%9C%B0%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<h1 id="é¦–å…ˆéœ€è¦äº†è§£çš„å°±æ˜¯Gitå¤§è‡´ä»“åº“çš„å«ä¹‰"><a href="#é¦–å…ˆéœ€è¦äº†è§£çš„å°±æ˜¯Gitå¤§è‡´ä»“åº“çš„å«ä¹‰" class="headerlink" title="é¦–å…ˆéœ€è¦äº†è§£çš„å°±æ˜¯Gitå¤§è‡´ä»“åº“çš„å«ä¹‰"></a>é¦–å…ˆéœ€è¦äº†è§£çš„å°±æ˜¯Gitå¤§è‡´ä»“åº“çš„å«ä¹‰</h1><p><br></p><blockquote><p>&#160; &#160;&#160; &#160;Gitä¸­ä»“åº“ï¼ˆ.gitæ–‡ä»¶ï¼‰å…¶å®ä»–çš„å«ä¹‰å¹¶ä¸æ˜¯ä¸€ä¸ªçœŸæ­£çš„ä»“åº“ï¼Œåªæ˜¯ä¸€ä¸ªå­˜æ”¾æ–‡ä»¶çŠ¶æ€çš„ä¸€ä¸ªä½ç½®ï¼ŒçœŸæ­£çš„æ–‡ä»¶è¿˜æ˜¯åœ¨æˆ‘ä»¬çš„æ–‡ä»¶å¤¹ä¸­ã€‚<br>&#160; &#160;&#160; &#160;é‚£ä¹ˆä¹Ÿå°±æ˜¯è¯´ä»–çš„æ–‡ä»¶å¤¹å­˜æ”¾çš„æ—¶æ–‡ä»¶çŠ¶æ€çš„ä¸€äº›æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨è¿™äº›çŠ¶æ€æ–‡ä»¶ï¼Œæ¢å¤åˆ°ä»»ä½•ä¸€ä¸ªç‰ˆæœ¬çš„æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯è¾¾åˆ°äº†æ‰€è°“çš„<code>ä»“åº“</code>çš„æ¦‚å¿µã€‚</p></blockquote><h1 id="ä¸ºä»€ä¹ˆä½¿ç”¨æš‚å­˜ç›˜ä¸ä»“åº“"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨æš‚å­˜ç›˜ä¸ä»“åº“" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨æš‚å­˜ç›˜ä¸ä»“åº“"></a>ä¸ºä»€ä¹ˆä½¿ç”¨æš‚å­˜ç›˜ä¸ä»“åº“</h1><p><br></p><blockquote><p> &#160; &#160;&#160; &#160;ä¹‹åéœ€è¦æ˜ç¡®çš„ä¸€ç‚¹å°±æ˜¯ Gitä¸­çš„<strong>æš‚å­˜ç›˜</strong> ä¸ <strong>ä»“åº“</strong>çš„åŒºåˆ«ä»–æ˜¯å…ˆå°†æ–‡ä»¶æ”¾åˆ°æš‚å­˜ç›˜ä¸­ï¼Œä¹‹åä¸€èµ·æ‹¿å»åšæäº¤æ›´æ”¹ï¼Œå¾ˆç±»ä¼¼å…¬äº¤è½¦æ‹‰äººçš„ä¸€ç§æ„Ÿè§‰ï¼Œæ‹‰æ»¡äº†ä¸€è½¦è¿‡å»ï¼Œå°±ä¼šæé«˜ä¸€äº›æ•ˆç‡ã€‚</p></blockquote><h1 id="æ–‡ä»¶æäº¤çš„çš„æµç¨‹"><a href="#æ–‡ä»¶æäº¤çš„çš„æµç¨‹" class="headerlink" title="æ–‡ä»¶æäº¤çš„çš„æµç¨‹"></a>æ–‡ä»¶æäº¤çš„çš„æµç¨‹</h1><ul><li>å…ˆå°†æ–‡ä»¶ <code>$ git add a.txt</code> å°†a.txtè¿™ä¸ªæ–‡ä»¶æ”¾åˆ°æš‚å­˜ç›˜ä¸­</li><li>å†å°†æ–‡ä»¶ <code>$ git commit -m &#39;æäº¤äº†æ–‡ä»¶a.txt&#39;</code> å°†è¿™ä¸ªa.txtåšä¸€æ¬¡æäº¤ï¼Œä¹Ÿå°±æ˜¯å°†æ­¤æ¬¡çŠ¶æ€ä¿å­˜åˆ°äº†gitä»“åº“é‡Œã€‚</li></ul><h1 id="æ–‡ä»¶ä¿®æ”¹çš„çš„æµç¨‹"><a href="#æ–‡ä»¶ä¿®æ”¹çš„çš„æµç¨‹" class="headerlink" title="æ–‡ä»¶ä¿®æ”¹çš„çš„æµç¨‹"></a>æ–‡ä»¶ä¿®æ”¹çš„çš„æµç¨‹</h1><ul><li>é¦–å…ˆå·²ç»æäº¤è¿‡æ–‡ä»¶äº†ç¡®ä¿è¿™ä¸ªæ–‡ä»¶åœ¨gitçš„ç®¡ç†ä¸­ <code>$ git add b.txt</code> å°†b.txtè¿™ä¸ªæ–‡ä»¶æ”¾åˆ°æš‚å­˜ç›˜ä¸­</li><li>å¯¹b.txtè¿™ä¸ªæ–‡ä»¶åšä¸€äº›æ“ä½œï¼Œä¹‹åæ–‡ä»¶çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜,å‡ºç°æ²¡æœ‰æš‚å­˜çš„ä¿®æ”¹</li><li>æˆ‘ä»¬éœ€è¦å°†è¿™ä¸ªä¿®æ”¹æ·»åŠ åˆ°æš‚å­˜ç›˜ä¸­ <code>$ git add b.txt</code>ç°åœ¨ä»–å·²ç»åœ¨æˆ‘ä»¬çš„æš‚å­˜ç›˜ä¸­äº†</li><li>æœ€åä¸€æ³¢æäº¤å³å¯<code>$ git commit -m &#39;æäº¤äº†æ–‡ä»¶b.txt&#39;</code>ç°åœ¨b.txtæ–‡ä»¶çš„çŠ¶æ€ä¹Ÿå·²ç»å­˜å‚¨åˆ°ä»“åº“ä¸­äº†</li></ul><h1 id="æ–‡ä»¶åˆ é™¤çš„çš„æµç¨‹"><a href="#æ–‡ä»¶åˆ é™¤çš„çš„æµç¨‹" class="headerlink" title="æ–‡ä»¶åˆ é™¤çš„çš„æµç¨‹"></a>æ–‡ä»¶åˆ é™¤çš„çš„æµç¨‹</h1><ul><li>é¦–å…ˆå·²ç»æäº¤è¿‡æ–‡ä»¶äº†ç¡®ä¿è¿™ä¸ªæ–‡ä»¶åœ¨gitçš„ç®¡ç†ä¸­ <code>$ git add c.txt</code> å°†c.txtè¿™ä¸ªæ–‡ä»¶æ”¾åˆ°æš‚å­˜ç›˜ä¸­</li><li>c.txtè¿™ä¸ªæ–‡ä»¶åˆ é™¤<code>rm c.txt</code>æ­¤æ—¶è¯¥æ–‡ä»¶ç›®å‰æ˜¯è¢«åˆ é™¤ï¼ˆæ–‡ä»¶å¤¹ä¸­æŸ¥çœ‹æ˜¯ä¸è§çš„ï¼‰</li><li>æ­¤æ—¶æˆ‘ä»¬ç¡®å®šåˆ é™¤ï¼Œ<code>$ git commit -m &#39;åˆ é™¤äº†c.txt&#39;</code>ç°åœ¨c.txtæ–‡ä»¶è¢«åˆ é™¤çš„çŠ¶æ€ä¹Ÿå·²ç»å­˜å‚¨åˆ°ä»“åº“ä¸­äº†</li></ul><h1 id="ä¸€äº›æ’¤é”€çš„æ“ä½œ"><a href="#ä¸€äº›æ’¤é”€çš„æ“ä½œ" class="headerlink" title="ä¸€äº›æ’¤é”€çš„æ“ä½œ"></a>ä¸€äº›æ’¤é”€çš„æ“ä½œ</h1><ul><li>å½“æˆ‘ä»¬<strong>ä¿®æ”¹/åˆ é™¤</strong>äº†æ–‡ä»¶ <strong>æ²¡æœ‰</strong>æäº¤åˆ°æš‚å­˜ç›˜çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>$ git checkout --file</code>è¿›è¡Œå›é€€æ“ä½œï¼ˆè¿™é‡Œä¸åŠ â€“ä¹Ÿæ˜¯å¯ä»¥çš„<code>$ git checkout file</code>å®¹æ˜“å’Œåˆ†æ”¯ææ··ï¼‰</li><li>å½“æˆ‘ä»¬<strong>ä¿®æ”¹/åˆ é™¤</strong>äº†æ–‡ä»¶ <strong>å·²ç»</strong>æäº¤åˆ°æš‚å­˜ç›˜çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>$ git reset file</code>å°†æ–‡ä»¶ä»æš‚å­˜åŒºæ’¤å›ï¼ˆç°åœ¨ç›¸å½“äºä¿®æ”¹äº†æœªæäº¤ï¼‰ï¼Œä¹‹åè¿›è¡Œä¸Šé¢çš„æ“ä½œå³å¯</li></ul><h1 id="ä¸€äº›ç‰ˆæœ¬å›é€€çš„æ“ä½œ"><a href="#ä¸€äº›ç‰ˆæœ¬å›é€€çš„æ“ä½œ" class="headerlink" title="ä¸€äº›ç‰ˆæœ¬å›é€€çš„æ“ä½œ"></a>ä¸€äº›ç‰ˆæœ¬å›é€€çš„æ“ä½œ</h1><blockquote><p> æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>$ git log</code> æŸ¥çœ‹å†å²çºªå½•</p></blockquote><ul><li>ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>$ git reflog</code> æŸ¥çœ‹å†å²çºªå½•,æ­¤æ—¶æŸ¥è¯¢å‡ºçš„å†å²è®°å½•æ˜¯å¸¦ä¸€äº›ç‰ˆæœ¬å·ï¼Œä¾¿äºæˆ‘ä»¬æ¢å¤</li><li>git reset â€“hard HEAD~3`å‰3æ­¥</li><li>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>$ git reset --hard xxxxx</code>å›é€€åˆ°æŒ‡å®šçš„æ­¥æ•° ä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨<code>$ git reflog</code>æŸ¥è¯¢å‡ºçš„åºåˆ—å·</li></ul>]]></content>
      
      
      
    </entry>
    
    <entry>
      <title>hello Hexo(1)</title>
      <link href="/2018/09/13/hello-Hexo/"/>
      <url>/2018/09/13/hello-Hexo/</url>
      
        <content type="html"><![CDATA[<h1 id="Hello-markdown"><a href="#Hello-markdown" class="headerlink" title="Hello-markdown"></a>Hello-markdown</h1><p>JAVAï¼</p><p><img src="/img/hello-hexo/javaBig.jpg" alt="JAVA"></p><hr><p>2018-09-13 15:36<br>æ­å·Â·æ­å·ç”µå­ç§‘æŠ€å¤§å­¦</p>]]></content>
      
      
      
    </entry>
    
  
  
</search>
